var i,cmd,t,objFolder,objFolderItem,colVerbs,t,f,i;((function(){const e="object"==typeof globalThis?globalThis:golbal;e.CeL=e.CeL||{},e.CeL.initializer&&(e.CeL._initializer=e.CeL.initializer,delete e.CeL.initializer),e.CeL.skip_loading_modules=["CeL.data.native","CeL.data.code","CeL.data.date","CeL.application.net.wiki","CeL.application.OS.Windows","CeL.data","CeL.data.numeral","CeL.application.locale","CeL.interact.DOM","CeL.application.net","CeL.application.net.wiki.namespace","CeL.application.net.MIME","CeL.application.net.Ajax","CeL.application.net.wiki.task","CeL.application.net.wiki.parser","CeL.application.net.wiki.query","CeL.application.platform.nodejs","CeL.application.storage","CeL.application.net.wiki.Flow","CeL.application.net.wiki.page","CeL.application.net.wiki.list","CeL.application.net.wiki.page.Page","CeL.application.net.wiki.edit","CeL.application.net.wiki.parser.wikitext","CeL.application.net.wiki.parser.section","CeL.application.net.wiki.parser.misc","application/locale/resources/gettext_plural_rules.js","application/locale/resources/cmn-Hant-TW.js","application/locale/resources/de-DE.js"]})(),"function"!=typeof CeL)&&(!function(globalThis){var library_name="CeL",library_version="4.5.5",debug=0,has_console="object"==typeof console&&("function"==typeof console.log||"object"==typeof console.log)&&typeof console.error==typeof console.log&&typeof console.trace==typeof console.log,old_namespace,KEY_not_native="function"==typeof Symbol?Symbol("not_native"):"not_native",function_name_pattern,_GlobalPrototype;try{0}catch(e){1===e&&eval("undefined=this.undefined;")}try{old_namespace=globalThis[library_name]}catch(e){throw new Error(library_name+": Cannot get the global scope object!")}function _(){}_.prototype={},_.version=library_version,_.build_date=new Date("2022-09-20T20:33:07.464Z"),_.get_old_namespace=function(){return old_namespace},_.recover_namespace=function(){return void 0===old_namespace?delete globalThis[library_name]:globalThis[library_name]=old_namespace,_},_.Class=library_name;var is_WWW="object"==typeof window&&(globalThis===window||window.window===window&&_===window[library_name])&&"object"==typeof navigator&&navigator==window.navigator&&"object"==typeof location&&location===window.location&&"undefined"!=typeof setTimeout&&setTimeout===window.setTimeout&&"object"==typeof document&&document===window.document,is_W3CDOM=is_WWW&&document.createElement&&document.getElementsByTagName;_.is_WWW=function(e){return e?is_W3CDOM:is_WWW},_.eval_code=globalThis.execScript?function(e){return globalThis.execScript(e,"JavaScript")}:function e(t){return globalThis.eval&&globalThis.eval!==e?globalThis.eval(t):(0,eval)(t)};try{_.global_eval=new Function("code","return "+("function"==typeof execScript?"execScript(":is_WWW?"window.eval(":"eval.call(null,")+"code)")}catch(e){_.global_eval=function(e){_.error("global_eval: Cannot eval()!")}}function _setup_options(e,t){return e&&!t?e:((e=Object.assign(Object.create(null),e)).new_NO=1+(0|e.new_NO),e)}function setup_options(e){if("string"==typeof e){var t=Object.create(null),n=0;for(e=e.split("|");n<e.length;n++)e[n]&&(t[e[n]]=!0);return t}return"object"==typeof e&&e||Object.assign(Object.create(null),e)}function new_options(e){var t=arguments.length;if(_.is_Object(e)){if(new_options.new_key in e&&1===t)return e;e=Object.assign(Object.create(null),e)}else e=Object.create(null);if(t>1)for(var n=1;n<t;n++)arguments[n]&&Object.assign(e,arguments[n]);return Object.defineProperty(e,new_options.new_key,{configurable:!0,value:!0}),e}"function"!=typeof Object.create&&((Object.create=function(e,t){var n={};return n.__proto__=e,"object"==typeof t&&Object.defineProperties(n,t),n})[KEY_not_native]=!0),new_options.new_key="is new options",_.setup_options=setup_options,_.new_options=new_options;var modify_function_hash=Object.create(null);_.value_of=function(e,t,n,r){var i;if(Array.isArray(e)&&e.length>0)i=e,e=e.join(".");else{if("string"!=typeof e||!e)return e;i=e.split(".")}_.is_Function(t)&&(e in modify_function_hash?modify_function_hash[e].push(t):modify_function_hash[e]=[t]);var a=0,o=i.length,s=n||globalThis,l=arguments.length>3;l&&o--;try{for(;a<o;){if(!(i[a]in s))throw 1;s=s[i[a++]]}if(l&&(s[i[a]]=r,l=modify_function_hash[e]))for(a in l)try{l[a](r,e)}catch(e){}}catch(t){return i[a]="<em>"+i[a]+'</em><span class="debug_weaken">',void _.debug("Cannot "+(l?"set":"get")+' variable [<span title="'+e+'">'+i.join(".")+"</span></span>]!",2,"value_of")}return s},_.set_value=function(e,t,n){return _.value_of(e,null,n,t)},_.is_digits=function(e){return"object"!=typeof e&&/^\d+$/.test(e)};var get_object_type=Function.prototype.bind?Function.prototype.call.bind(Object.prototype.toString):function(e){return Object.prototype.toString.call(e)};function is_version(e,t,n){if(!isNaN(e))return t?n?e==t:e>t:+e;if("string"==typeof e){if(e=e.replace(/^v(?:er)/i,""),t=t&&String(t).replace(/^v(?:er)/i,""),n)return e===t;if(e=e.split("."),!t)return+e[0]+e[1]/100;t=t.split(".");var r=e[0]-t[0];return r?r>0:!t[1]||((r=e[1]-t[1])?r>0:!t[2]||+e[2]>=+t[2])}return t?void 0:e}function platform(e,t,n){var r;if(_.is_Object(e)){for(r in e)if(platform(r,e[r],t))return!0;return!1}return(e=String(e).toLowerCase())in platform.alias&&(e=platform.alias[e]),!(!(r=platform.browser)||r.toLowerCase()!==e||t&&!is_version(platform.version,t,n))||(!(!(r=platform.engine)||r.toLowerCase()!==e||t&&!is_version(platform.engine_version,t,n))||!(!(r=platform.OS)||0!==r.toLowerCase().indexOf("windows"===e?"win":e)))}_.get_object_type=get_object_type,_.is_type=function(e,t,n){var r;if(t&&"string"!=(r=typeof t)&&(t=r),r=null===e?String(e):typeof e,n)try{"function"===r&&e.Class?r=e.Class:"function"!==r&&"object"!==r||("constructor"in e&&(n=e.constructor).Class?r=n.Class:(n=_.get_function_name(n))&&(r=n))}catch(e){_.error(_.Class+".is_type: Fault to get ths class name of value!")}if("object"!==r)return t?r===t.toLowerCase():r;try{n=get_object_type(e)}catch(e){_.error(_.Class+".is_type: Fault to get object type of value!"),n=""}return t?n===("["===t.charAt(0)?t:"[object "+t+"]"):(t=n.match(/^\[object ([^\]]+)\]$/))?t[1]:r},_.type_tester=function(e,t){var n="[object "+e+"]";return"string"==typeof t&&t?new Function("v",'return "'+n+'"==='+t+".call(v);"):function(e){return n===get_object_type(e)}},_.is_Function=function(e){return"[object Function]"===get_object_type(e)},_.is_Object="[object Object]"===get_object_type(null)||"[object Object]"===get_object_type(void 0)?function(e){return"[object Object]"===get_object_type(e)&&e&&(!e.__proto__||e.__proto__.constructor===Object)}:function(e){return"[object Object]"===get_object_type(e)&&(!e.__proto__||e.__proto__.constructor===Object)},_.is_empty_object=function(e){if("object"==typeof e){for(var t in e)if(!Object.hasOwn||Object.hasOwn(e,t))return!1;return!0}},_.is_RegExp=_.type_tester("RegExp"),_.is_Date=_.type_tester("Date"),platform.alias={ie:"msie",explorer:"msie","internet explorer":"msie"},platform.toString=function(){return platform.browser+" "+platform.version};try{platform.nodejs="function"==typeof require&&require("fs")&&"object"==typeof process&&"object"==typeof process.versions&&"object"==typeof console&&"function"==typeof console.log&&process.versions.node}catch(e){}platform.is_Windows=function(){return platform.OS&&0===platform.OS.toLowerCase().indexOf("win")},is_WWW&&function(){platform.OS=navigator.platform,platform.Windows=platform.is_Windows();var e,t=String(navigator.userAgent);platform.mobile=/mobile/i.test(t),(e=t.match(/(Chromium|Chrome|Opera|Safari|Firefox|(?:MS)?IE)[\/ ](\d+\.\d+)/i))?(platform.browser=e[1],platform.version=+e[2]):(e=t.match(/rv:(\d+\.\d+)/))&&(platform.browser="MSIE",platform.version=+e[1]);var n=navigator.product;(e=t.match(/(Gecko|WebKit|Blink|KHTML|Presto|Trident)[\/ ](\d+(?:\.\d+))/i))?(n&&n!==e[1]&&has_console&&console.error("platform: navigator engine error! ["+n+"] != ["+e[1]+"]"),platform.engine=e[1],platform.engine_version=+e[2]):platform.engine=n}(),_.platform=platform;var script_host=!is_WWW&&"object"==typeof WScript;(script_host=script_host&&(!_.is_Object(WScript)||"Windows Script Host"===String(WScript))&&WScript.FullName)&&(_.script_host=script_host=script_host.replace(/^(.+)\\/,"").toLowerCase().replace(/\.exe$/,""));var script_full_path="",SGR,SGR_debug;function setting_pair(e){var t=e||Object.create(null),n=function(e,n){if(_.is_Object(e)){for(var r in e)void 0!==e[r]?t[r]=e[r]:r in t&&delete t[r];return t}if(Array.isArray(e)){var i=[];return e.forEach(function(e,n){e in t&&(i[n]=t[e])}),i}return arguments.length>1?t[e]=n:e?t[e]:t};n.reset=function(e){return t=e||Object.create(null)};for(var r,i=1,a=arguments.length;i<a;i++)_.is_Object(r=arguments[i])&&n(r);return n}is_WWW?script_full_path=unescape(window.location.pathname)||script_full_path:script_host?script_full_path=WScript.ScriptFullName||script_full_path:platform.nodejs?require.main&&(script_full_path=require.main.filename||script_full_path):_.is_Object(old_namespace)&&(script_full_path=old_namespace.loader_script||script_full_path),_.get_script_full_name=function(){return script_full_path},_.get_script_name=function(e){var t=_.get_script_full_name().match(/[^\\\/]*$/);return e?t[0]:t[0].replace(/\.[^.]*$/,"")},_.env=Object.create(null),_.reset_env=function reset_env(OS_type,reset){var OS,env=!reset&&_.env||(_.env=Object.create(null)),win_env_keys="PROMPT|HOME|PUBLIC|SESSIONNAME|LOCALAPPDATA|OS|Path|PROCESSOR_IDENTIFIER|SystemDrive|SystemRoot|TEMP|TMP|USERNAME|USERPROFILE|ProgramData|ProgramFiles|ProgramFiles(x86)|ProgramW6432|windir".split("|");platform.nodejs&&Object.assign(env,process.env),env.main_script_name="ce",env.script_extension=".js",env.main_script=env.main_script_name+env.script_extension,env.not_to_extend_keyword="no_extend",env.not_native_keyword=KEY_not_native,env.source_encoding="UTF-16",env.organization="Colorless echo",env.global=globalThis,env.registry_base="HKCU\\Software\\"+env.organization+"\\"+_.Class+"\\",env.registry_path_key_name=env.registry_base+"path";try{var WshShell=WScript.CreateObject("WScript.Shell");env.registry_path=WshShell.RegRead(env.registry_path_key_name);for(var WshEnvironment=WshShell.Environment("Process"),index=0;index<win_env_keys.length;index++){var key=win_env_keys[index],value=WshEnvironment(key);value&&(env[key]=value)}}catch(e){}if(platform.nodejs){var index,key,value,node_os=require("os");!env.home&&!(env.home="function"==typeof node_os.homedir&&node_os.homedir()||"function"==typeof node_os.userInfo&&node_os.userInfo()&&node_os.userInfo().homedir||process.env.HOME||process.env.USERPROFILE)&&process.env.HOMEDRIVE&&process.env.HOMEPATH&&(env.home=process.env.HOMEDRIVE+process.env.HOMEPATH),env.user||(env.user="function"==typeof node_os.userInfo&&node_os.userInfo()&&node_os.userInfo().username||process.env.USER||process.env.USERNAME||process.env.LOGNAME),env.line_separator=node_os.EOL||env.line_separator,node_os=null}env.OS=OS=OS_type||OS||platform.nodejs&&process.platform||(-1!==_.get_script_full_name().indexOf("\\")?"Windows":"UNIX")||env.OS;var is_UNIX=env.OS.toLowerCase()in{darwin:!0,linux:!0,freebsd:!0,unix:!0};env.line_separator=is_UNIX?"\n":"Mac"===OS?"\r":"\r\n",env.path_separator=platform.nodejs&&require("path")&&require("path").sep||(is_UNIX?"/":"\\"),env.home&&!/[\\\/]$/.test(env.home)&&(env.home+=env.path_separator),env.external_directory_name="external",env.resources_directory_name="resources",env.module_name_separator=".",env.path_separator_pattern=_.to_RegExp_pattern?_.to_RegExp_pattern(env.path_separator):("\\"===env.path_separator?"\\":"")+env.path_separator,env.locale=1028,env.script_name=_.get_script_name(),env.script_base_path=_.get_script_full_name().replace(/[^\\\/]+$/,""),env.identifier_RegExp=/([a-zA-Z$_]|\\u[0-9a-fA-F]{4})([a-zA-Z$_0-9]+|\\u[0-9a-fA-F]{4}){0,63}/,env.identifier_String=env.identifier_RegExp.source;try{env.has_for_of=new Function("for(var i of [7])return i===7;")()}catch(e){}try{env.has_arrow_function=3===new Function("a","return((a)=>a+1)(a);")(2)}catch(e){}try{env.has_RegExp_lookbehind="12"==="$12.34".match(new RegExp("(?<=\\D)\\d+"))[0]&&"a2b,a3b"==="a1ba2ba3b".match(new RegExp("(?<=b)a.b","g")).join(",")&&"b1,b3,b4"==="0b11b22b33b4".match(new RegExp("(?<!1)b\\d","g")).join(",")}catch(e){}try{env.has_bigint="function"==typeof BigInt&&"bigint"==typeof BigInt(1)&&eval("999999n*8888888n*777777777n===6913572635062427358024n")}catch(e){}return _.is_Object(old_namespace)&&_.is_Object(old_namespace.env)&&Object.assign(env,old_namespace.env),env},_.get_identifier_RegExp=function(e,t,n,r){var i=_.env.identifier_String;return n&&(i=i.replace(/_/g,n)),r&&(i=i.replace(/0-9/g,r)),new RegExp(("[object RegExp]"===get_object_type(e)?e.source:e).replace(/$identifier/g,i),t||"")},_.setting_pair=setting_pair,_.is_debug=function(e){return"number"!=typeof e?debug||0:debug>=e},_.set_debug=function(e){return isNaN(e)?void 0!==e||debug||(debug=1):debug=Math.max(0,e),Error.stackTraceLimit>0&&(Error.stackTraceLimit=debug>2?100:debug>0?15:10),debug},_._get_hash_key=function(e){var t=e.length,n=.3;return t-(n=Math.floor(t*n))<30?e:e.substr(n,30)};try{_.PATTERN_function=function_name_pattern=/^\s*function(?:[\s\n]+([^\s\n]*?)[\s\n]*)?\([\s\n]*([^)]*?)[\s\n]*\)[\s\n]*{[\s\n]*([\s\S]*)[\s\n]*}[\s\n;]*$/}catch(e){function_name_pattern=function(e){var t,n,r="function ";if(0===(e=String(e)).indexOf(r)){for(r=r.length,n={" ":1,"\n":1,"\r":1,"\t":1};e.charAt(r)in n;)r++;for(t=e.indexOf("(",r);e.charAt(--t)in n;);return[,e.slice(r,t+1)]}},"object"!=typeof RegExp&&(globalThis.RegExp=function(){})}function get_function_name(e,t,n){if(!e)try{e=arguments.caller}catch(t){if(!e)return""}if(e.name)return e.name;var r,i,a,o,s,l=typeof e;if("function"===l)r=Function.prototype.toString.call(e);else{if("string"!==l)return"";r=e}if(l=_.is_RegExp(function_name_pattern)?(l=r.match(function_name_pattern))&&l[1]||/^[a-zA-Z_\d.]{1,30}$/.test(r)&&r||0:function_name_pattern instanceof Function?function_name_pattern(r):0)return l;if((i=get_function_name.b)?a=get_function_name.ns:(get_function_name.b=i=Object.create(null),get_function_name.ns=a=Object.create(null)),t||(t=_),(_.is_Function(t)||_.is_Object(t))&&t.Class&&(n||!a[t.Class])){for(s in t)"function"==typeof t[s]&&(o=_._get_hash_key(String(t[s])),(l=t.Class+_.env.module_name_separator+s)in a||(a[l]=1,i[o]||(i[o]=[]),i[o].push([l,t[s]])));a[t.Class]=1}if(l=i[_._get_hash_key(r)])for(s=0;s<l.length;s++)if(e===(i=l[s][1])||r===String(i))return l[s][0];return""}_.get_function_name=get_function_name,_.null_function=function(){},_.constant_function=function(e){return(e=String(e))in constant_function||(constant_function[e]=new Function("return("+e+")")),constant_function[e]};try{_.constant_function(!1)}catch(e){_.constant_function=function(e){return function(){return e}}}function SGR_to_plain(e){return Array.isArray(e)?e.filter(function(e,t){return t%2==0}).join(""):e}function new_SGR(e){return _.is_debug(SGR_debug)||SGR.CSI!==SGR.default_CSI?SGR_to_plain(e):new SGR(e).toString()}function to_SGR(e){return _.SGR?(SGR=_.SGR,SGR_debug=SGR.min_debug_level,(_.to_SGR=new_SGR)(e)):SGR_to_plain(e)}_.to_SGR=is_WWW?SGR_to_plain:to_SGR;var PATTERN_log_caller=/^([a-z_\d.]{2,}:\s*)(.+)$/i,using_style=!_.env.no_log_style,default_style={log:"green",info:"cyan",warn:"yellow",error:"red;bg=white"};function simple_gettext(e){var t=arguments;return e.replace(/%(\d+)/g,function(e,n){return n<t.length?t[n]:e})}function is_DOM_node(e){return _.is_Object(e)&&"T"in e}function extract_message_from_nodes(e,t){if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=e[n];if(e[n]=extract_message_from_nodes(r,t),_.gettext.append_message_tail_space&&r&&r.T){var i=e[n+1];i=_.gettext.apply(null,Array.isArray(i)?i:[i]),e[n]=_.gettext.append_message_tail_space(e[n],{no_more_convert:!0,next_sentence:i})}}return e.join("")}if(!_.is_Object(e))return t&&(t.push(t.has_style?[t.has_style.fg?"-fg":"",t.has_style.bg?"-bg":""].join(";"):"",e),t.has_style&&(t.has_style=!0)),e;var a=e.$;if(!a)for(a in e)break;i=e[a];"T"!==a&&(i=extract_message_from_nodes(i)),i=_.gettext.apply(null,Array.isArray(i)?i:[i]);var o=_.SGR&&_.SGR.color_index,s=o&&(e.style||e.S);return"string"==typeof s?(s.replace(/(?:^|[;\s])(background-)?color\s*:\s*([^\s;]+)/g,function(e,t,n){(n=n.toLowerCase())in o&&("string"==typeof s&&(s=Object.create(null)),s[t?"bg":"fg"]=n)}),"string"==typeof s&&(s="")):s=s&&(s.color in o||s.backgroundColor in o)?{fg:s.color in o&&s.color||"",bg:s.backgroundColor in o&&s.backgroundColor||""}:"",t&&(t.push(s,i),s&&(t.has_style=s)),i}function preprocess_log_messages(e,t,n){if(!using_style)return"string"==typeof e?e:SGR_to_plain(e);var r,i;if(Array.isArray(e)){for(var a=0;a<e.length;a++)if(is_DOM_node(e[a])){r=!0;break}}else is_DOM_node(e)&&(r=!0);return r&&(e=extract_message_from_nodes(e,r=[""]),r.has_style&&(_.is_Object(r.has_style)&&r.push([r.has_style.fg?"-fg":"",r.has_style.bg?"-bg":""].join(";"),""),e=r)),"string"==typeof e?e=(i=e.match(PATTERN_log_caller))?[i[1],default_style[t],i[2],0]:["",default_style[t],e,0]:n&&(i=e[0].match(PATTERN_log_caller))&&(e.splice(0,1,"",default_style[t],i[1],0,i[2]),e.length%2==0?e.push("",0):e.push(0)),_.to_SGR(e)}function setup_log(e){var t=e;console[t]&&(_[e]=function(n,r){r&&console.clear&&console.clear(),console[t](preprocess_log_messages(n,e))},_["s"+e]=function(n,r){r&&console.clear&&console.clear(),console[t](preprocess_log_messages(n,e,!0))})}if(_.gettext=simple_gettext,_.cache_gettext=function(e){return function(){var t=_.locale&&_.locale.gettext;return t?e(t):t=simple_gettext,t.apply?t.apply(null,arguments):t(arguments[0],arguments[1],arguments[2],arguments[3])}},platform.nodejs&&process.versions&&(process.versions[library_name.toLowerCase()]=library_version,void 0===using_style&&(using_style=!!process.versions.node)),_.preprocess_log_messages=preprocess_log_messages,has_console)_.env.has_console=has_console,function(){for(var e in default_style)default_style[e]="fg="+default_style[e],setup_log(e)}(),_.debug=function(e,t,n){_.is_debug(t)&&(n&&(n=_.get_function_name(n)+": ","object"==typeof e?Array.isArray(e)?e.unshift(n):e=[n,e]:e=n+e),console.log(preprocess_log_messages(e,"debug")))},_.sdebug=function(e,t,n){_.is_debug(t)&&(n?(Array.isArray(e)||(e=[e]),e.unshift("fg=blue",_.get_function_name(n)+": ",0),e=_.to_SGR(e)):e=preprocess_log_messages(e,"debug",!0),console.log(e))};else{_.error=_.warn=_.log=function(e){var t=_.log;t.buffer.push(e),t.max_length>=0||(t.max_length=0),debug&&t.buffer.length>t.max_length&&(t.function_to_call.call(globalThis,t.buffer.join("\n\n")),t.buffer=[])},_.debug=function(e,t,n){if(_.is_debug(t))return _.log((n&&(n=_.get_function_name(n))?n+": ":"[debug] ")+e)},_.log.buffer=[],_.log.max_length=0;var max_log_length=1e3,prepare_message=function(e){return(e=String(e)).length>2*max_log_length&&(e=e.slice(0,max_log_length)+"\n\n...\n\n"+e.slice(-max_log_length)),e};_.log.function_to_call=script_host?function(e){WScript.Echo(prepare_message(e))}:"object"==typeof _configuration&&"function"==typeof _configuration.stdout?function(e){_configuration.stdout(prepare_message(e)+"\n")}:"function"==typeof writeln?function(e){writeln(prepare_message(e))}:"object"==typeof alert||"function"==typeof alert?function(e){alert(prepare_message(e))}:_.null_function}function defineProperty(e,t,n){if("value"in n)e[t]=n.value;else if("function"==typeof n.get)try{e[t]=n.get(),_.is_debug(2)&&_.warn("Object.defineProperty: 將設定成 get() 所得之值 ["+e[t]+"]！")}catch(e){}return e}if(_.debug_console=function(){},_.debug_console.log=_.log,_.debug_console.warn=_.warn,_.debug_console.error=_.error,_.debug_console.debug=_.debug,_.log_temporary=_.null_function,defineProperty[KEY_not_native]=!0,"function"!=typeof Object.defineProperty)Object.defineProperty=defineProperty;else try{!function(){var e={};if(Object.defineProperty({},"p",{value:e}).p!==e)throw 1}()}catch(e){var _defineProperty=Object._defineProperty=Object.defineProperty;(Object.defineProperty=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e)&&"number"==typeof e.nodeType)try{return _defineProperty(e,t,n)}catch(e){}return defineProperty(e,t,n)})[KEY_not_native]=!0}if(!Object.defineProperty[KEY_not_native])try{!function(){var e,t=7,n=t,r=function(){};for(e in Object.defineProperty(r,"size",{get:function(){return t},set:function(e){t-1===e&&(t=e)}}),r)if("size"===e)throw 1;try{r.size=t+1}catch(e){}try{delete r.size}catch(e){}if(r.size!==t)throw 1;if((r.size=t-1)!==t||r.size===n)throw 1}()}catch(e){Object.defineProperty[KEY_not_native]=!0}var native_pattern=/^\s*function\s+(\w*)\s*\([^()]*\)\s*{\s*\[native code\]\s*}\s*$/;function native_name(e){try{var t,n;if("function"==typeof e&&(n=Function.prototype.toString.call(e).match(native_pattern)))return n[1];if((n=String(e.constructor).match(native_pattern))&&(t=_.value_of(n[1]))&&e===t.prototype)return n[1]+".prototype";if(e===Math)return"Math"}catch(e){}}_.is_native_Function=function(e){return"function"==typeof e&&native_pattern.test(Function.prototype.toString.call(e))},_.native_name=native_name;var need_to_check_in_for_in=function(){var e={},t={_valueOf:e.valueOf,_toString:e.toString};for(e in{valueOf:function(){},toString:function(){}})delete t["_"+e];for(e in t)return t}(),test_obj;function set_method(e,t,n,r){if(r||(r=Object.create(null)),!(e||(_.debug("沒有指定擴展的對象，擴展到 set_method.default_target。",1,"set_method"),e=set_method.default_target))){if(null===e)return e;e=Object.create(null)}if(e!==t){var i;for(i in n&&Array.isArray(n)&&(i=n,n=Object.create(null),"string"==typeof i[0]&&i.unshift(!1),i.forEach(function(e,t,r){0===t?i=r[t]:n[r[t]]=i})),_.is_Object(n)?n:t)a();if(need_to_check_in_for_in&&!_.is_Object(n))for(i in n||(n=!1),need_to_check_in_for_in)need_to_check_in_for_in[i]!==t[i=i.slice(1)]&&a();return e}function a(){var a=n,o=_.env.not_native_keyword||KEY_not_native;if(_.is_Object(n)){if(!(i in t))return;a=n[i]}if(("function"!=typeof a||!0!==(a=a(i,e,t)))&&("string"==typeof a?a=typeof e[i]===a:a?!0===a?a=i in e:_.warn("set_method.setter: Unknown filter: ["+a+"]"):!1!==a&&(a=typeof e[i]==typeof t[i]&&e[i]&&!e[i][o]),!a)){if(r.value=a=t[i],e[i]&&e[i][o])try{delete e[i]}catch(e){}try{Object.defineProperty(e,i,r)}catch(t){e[i]=a}var s=native_name(e);if(s&&"function"==typeof a)try{Object.defineProperty(a,o,{value:!0})}catch(e){a[o]=!0}else"function"==typeof a&&(a[o]=!0);_.is_debug(s?1:3)&&_.debug((s||"("+_.is_type(e)+")")+"."+i+" = ("+typeof a+")"+(_.is_debug(4)||"function"!=typeof a&&"object"!=typeof a&&"symbol"!=typeof a?" ["+a+"]":""),1,"set_method")}}_.debug("("+t+"): 目標與來源相同。",2,"set_method")}function is_thenable(e){return e&&"function"==typeof e.then}function is_async_function(e){return"function"==typeof e&&"AsyncFunction"===e.constructor.name}function run_and_then(e,t,n){if(!n)return is_thenable(r=e())?r.then(t):t(r);try{var r;return is_thenable(r=e())?r.then(t,n):t(r)}catch(e){return n(e)}}_.set_method=set_method,set_method(Array,{isArray:function(e){return e instanceof Array||"[object Array]"===get_object_type(e)}}),_.need_avoid_assign_to_setter=platform.nodejs&&!platform("node","0.12"),set_method(Object,{defineProperties:function(e,t){var n;for(n in t)Object.defineProperty(e,n,t[n]);if(need_to_check_in_for_in)for(n in need_to_check_in_for_in)need_to_check_in_for_in[n]!==t[n=n.slice(1)]&&Object.defineProperty(e,n,t[n]);return e},create:function(e,t){if(null===e&&!t)return{};if(null!==e&&"object"!=typeof e&&"function"!=typeof e)throw TypeError("Object prototype may only be an Object or null");var n=new Object;for(var r in n.__proto__=e,n)delete n[r];return"object"==typeof t&&Object.defineProperties(n,t),n},assign:function(e,t){e=Object(e);for(var n,r=1,i=arguments.length;r<i;){for(n in t=Object(arguments[r++]))e[n]=t[n];if(need_to_check_in_for_in)for(n in need_to_check_in_for_in)need_to_check_in_for_in[n]!==t[n=n.slice(1)]&&(e[n]=t[n])}return e}}),set_method(Array.prototype,{forEach:function(e,t){for(var n=0,r=this.length,i=null!=t&&"function"==typeof e.call;n<r;n++)n in this&&(i?e.call(t,this[n],n,this):e(this[n],n,this))}}),set_method(_,{is_thenable:is_thenable,is_async_function:is_async_function,run_and_then:run_and_then}),globalThis[library_name]=_,"object"==typeof module&&"object"==typeof module.exports&&(module.exports=_);try{if(_!==eval(library_name))throw 1}catch(e){1===e?_.warn("無法正確設定 globalThis object!"):e&&e.message&&-1!==e.message.indexOf("by CSP")&&(_.env.no_eval=!0)}}("object"==typeof globalThis&&globalThis.Array===Array&&globalThis||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||"object"==typeof global&&global.Array===Array&&global||Function("return this")()),"function"==typeof CeL&&function(e){function t(){return new XMLHttpRequest}function n(){return new ActiveXObject("Microsoft.XMLHTTP")}if(e.set_method(Array.prototype,{indexOf:function(e,t){t=t>1?Math.floor(t):0;for(var n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1}}),e.function_placeholder=function(t,n){var r=t();return r&&r!==n&&e.is_Function(r)?e.debug("採用完整功能版函數",1,"function_placeholder"):r=n,(r||n).apply(arguments)},e.set_initializor=function(t,n,r){var i;return arguments.length<3&&e.is_Function(t)&&(i=e.get_function_name(t))&&(r=n,n=t,t=i),r||(r=e),n||(n=r[t]),i=function(){var a,o=r[t];if(o===i){try{a=n.call(r,t,arguments)}catch(e){return e}"function"!=typeof a&&(n=a,a=function(){return n}),e[t]===o?(e.debug("Replace base name-space function ["+t+"].",1,"set_initializor"),e[t]=a):e.debug("Base name-space function ["+t+"]: "+e[t]+".",1,"set_initializor"),e.debug("Replace function ["+t+"].",1,"set_initializor"),r[t]=a}else e.is_debug(2)&&e.warn("set_initializor: The function ["+t+"] had replaced with a new one."),a=o;return a.apply(e,arguments)},r[t]=i},e.is_HTA=e.is_WWW()&&null===window.external&&window.ActiveXObject&&1===document.getElementsByTagName("APPLICATION").length,e.is_HTA)try{e.new_XMLHttp=n()&&n}catch(e){}if(!e.new_XMLHttp)try{e.new_XMLHttp=t()&&t}catch(e){}if(!e.new_XMLHttp&&!e.is_HTA)try{e.new_XMLHttp=n()&&n}catch(e){}if(!e.new_XMLHttp||"object"==typeof process&&"object"==typeof process.versions&&process.versions.electron)if(e.platform.nodejs){e.new_XMLHttp=require("fs"),e.platform.browser=process.versions.electron?"electron":"node",e.platform.version=process.versions.electron||process.versions.node,e.platform.OS=process.platform,e.platform.Windows=e.platform.is_Windows(),e.env.argv=process.argv,"node"===e.platform.browser?e.platform.is_CLI=!0:"electron"===e.platform.browser&&(e.platform.is_CLI=!1),e.platform.is_interactive=process.stdout&&process.stdout.isTTY||"Console"===process.env.SESSIONNAME,e.platform.is_interactive&&(e.log_temporary=function(t){process.stdout.write("\r"+e.preprocess_log_messages(t)+"  \r")});var r=e.new_XMLHttp=e.new_XMLHttp.readFileSync;e.get_file=function(t,n){var i,a,o,s;e.platform.Windows&&/^\/[a-z]:\//i.test(t)&&(t=t.slice(1));try{i=r(t,n)}catch(e){i=r(t)}if("string"!=typeof i){if(o=i.length,255===i[0]&&254===i[1])for(e.debug(t+": UTF-16LE",4),a=2,s=[];a<o;)s.push(String.fromCharCode(i[a++]+256*i[a++]));else if(254===i[0]&&255===i[1])for(e.debug(t+": UTF-16BE",4),a=2,s=[];a<o;)s.push(String.fromCharCode(256*i[a++]+i[a++]));else if(n||239!==i[0]||187!==i[1]||191!==i[2])try{a=r(t,"utf8"),e.debug("get_file: Treat file as UTF-8: ["+t+"]",2),i=a}catch(n){for(o>1&&e.debug("get_file: Unknown byte order mark (BOM) of ["+t+"]: "+i[0]+","+i[1]),a=0,s=[];a<o;)s.push(String.fromCharCode(i[a++]))}else e.debug("get_file: Treat file as UTF-8 with BOM: ["+t+"]",2),i=i.toString().slice(1);s&&(i=s.join(""))}return i}}else"object"==typeof _configuration&&"function"==typeof File?(e.platform.browser="jsio",LoadModule("jsio"),e.get_file=function(e){var t,n,r=new File(e).Open("r").Read(),i=r.length,a=[],o=function(){return(t=r.charCodeAt(n++))<0?t+256:t};if(_configuration.stderr(e+": "+r.charCodeAt(0)+","+r.charCodeAt(1)),-1===r.charCodeAt(0)&&-2===r.charCodeAt(1)){for(n=2;n<i;)a.push(String.fromCharCode(o()+256*o()));r=a.join("")}else if(-2===r.charCodeAt(0)&&-1===r.charCodeAt(1)){for(n=2;n<i;)a.push(String.fromCharCode(256*o()+o()));r=a.join("")}return r}):"function"==typeof Stream?(e.platform.browser="JSDB",e.get_file=function(e){try{return new Stream(e).readFile()}catch(e){}var t=new Stream(e,"b"),n=[],r=[t.readUInt8(),t.readUInt8()];if(255===r[0]&&254===r[1])for(;!t.eof;)n.push(String.fromCharCode(t.readUInt8()+256*t.readUInt8()));else if(254===r[0]&&255===r[1])for(;!t.eof;)n.push(String.fromCharCode(256*t.readUInt8()+t.readUInt8()));else for(t.rewind();!t.eof;)n.push(t.get());return t.close(),n.join("")}):e.get_file=function(){var t="get_file: This scripting engine does not support XMLHttpRequest.";throw e.warn(t),new Error(t)};else;e.require_netscape_privilege=function t(n,r){var i,a,o=t,s=function(e){throw n&&"object"==typeof n?n:new Error(e)};if(o.enabled||s("Privilege requiring disabled."),!isNaN(r)&&r>0&&r<32)try{for(i=o,a=0;a<r;a++)(i=i.caller)&&(i=i.arguments.callee);i===o&&s("Privilege requiring looped."),r=1}catch(e){}(i=o.enablePrivilege)||(o.enablePrivilege=i=e.value_of("netscape.security.PrivilegeManager.enablePrivilege"))||(o.enabled=!1,s("No enablePrivilege get.")),e.is_type(n,"DOMException")&&1012===n.code?n="UniversalBrowserRead":n&&"string"==typeof n||s("Unknown privilege.");try{0,i(n)}catch(t){throw"UniversalBrowserRead"===n&&e.is_local()||e.warn(e.Class+".require_netscape_privilege: User denied privilege ["+n+"]."),t}if(1===r){try{r=o.caller}catch(e){}return r.apply(e,r.arguments)}return e.is_Function(r)?r():Array.isArray(r)?r[0].apply(e,r[1]):void 0},e.require_netscape_privilege.enabled=!1;e.is_WWW(!0)&&navigator.appName;function i(e,t){return e&&Array.prototype.slice.call("string"==typeof e?(t||document).getElementsByTagName(e):e)||[]}function a(e,t){for(var n=[],r=0,i="string"==typeof e?(t||document).getElementsByTagName(e):e,a=i&&i.length||0;r<a;)n.push(i[r++]);return n}e.get_file||(e.get_file=function(e,t,n){}),e.get_tag_list=e.is_WWW(1)?function(t,n){var r;try{r=i(t,n),e.get_tag_list=i}catch(i){r=a(t,n),5014==(65535&i.number)&&(e.debug("get_tag_list: 使用舊的實現方法。"),e.get_tag_list=a)}return r}:function(){return e.warn("get_tag_list: No method availed!"),[]},e.get_script_base_path=function(t,n){if(void 0===n&&"object"==typeof module&&(n=module),!t){if(e.is_WWW()){t=window.location.href.replace(/#.*$/,"");try{t="function"==typeof decodeURI?decodeURI(t):unescape(t)}catch(e){}}else"object"==typeof n?t=n.filename:e.script_host&&(t=WScript.ScriptFullName);return"string"==typeof t?t.replace(/[^\\\/]+$/,""):""}var r,i=function(n){var i=n.filename;i&&(e.is_RegExp(t)?t.test(i):-1!==i.indexOf(t))&&(r=i)};if("function"==typeof require&&"object"==typeof require.main){var a=require.main;for(r=null;a&&(i(a),a!==n);)a=a.children;if(!r&&n&&i(n),r)return r}if("object"==typeof module){a=module;for(r=null;a;)i(a),a=a.parent;if(r)return r}if(!e.is_WWW())return"";for(var s,l,c,_=0,u=document.getElementById(e.env.main_script_name),p=u?[u]:e.get_tag_list("script"),d=p.length;_<d;_++)try{if(-1!==(c=(s=(s=u=p[_]).getAttribute&&s.getAttribute("src")||s.src).lastIndexOf(t))&&(-1===s.indexOf("/")&&-1!==s.indexOf("\\")&&(s=s.replace(/\\/g,"/")),o&&(t===e.env.main_script?o(e.env.script_extension,u):t===e.env.main_script_name&&o(s.slice(c+t.length),u)),l=s.slice(0,c),s.length===c+t.length))break}catch(e){}return l||""};var o=function(t,n){if(t===e.env.script_extension){var r,i,a=e.env;try{(r=n.innerText||(r=n.firstChild)&&r.nodeValue)||"string"!=typeof(r=n.innerHTML)||(r=(i=r.match(/^[\s\n]*<!--(.+?)-->[\s\n]*$/))?i[1]:r.replace(/<!--([\s\S]*?)-->/g,"")),r&&((i=r.match(/\/\*([\s\S]+?)\*\//))&&(r=i[1]),(r=(JSON.parse||function t(n,r,i){if(r)try{return t(n,i)}catch(t){return void(e.is_debug(2)&&e.error("eval_parse: SyntaxError: ["+n+"]"))}return n&&(n=new Function("return({o:"+n+"\n})")().o),n})(r.replace(/[\s\r\n]*\/\//g,"")))&&(a.script_config=r))}catch(t){e.error("setup_extension: Invalid configuration: ["+n.outerHTML+"]"),e.error(t)}a.main_script=a.main_script.replace(new RegExp("\\"+a.script_extension+"$"),t),a.script_extension=t,o=null}};e.is_module_pattern=function(t){var n=e.env,r=n.module_identifier_RegExp;return r||(r=n.identifier_RegExp.source,r=n.module_identifier_RegExp=new RegExp("^"+r+"(\\."+r+")*$")),r.test(t)},e.match_module_name_pattern=function(t){return"string"==typeof t&&"."!==t.charAt(0)&&"/"!==t.charAt(0)&&-1===t.indexOf(":")&&!/\.(js|css)$/i.test(t)&&(/\.$/.test(t)||e.is_module_pattern(t))},e.simplify_path=function(t,n){if(e.debug("["+typeof t+"] ["+t+"]",8,"simplify_path"),t=String(t)){var r,i,a;/^"([^"]+)"$|^'([^']+)'$/.test(t)&&(t=t.slice(1,-1)),/[\w\-]:\/\//.test(t)?((a=t.match(/^((?:(?:file:\/|[\w\-]+:)?\/)?\/)(.*?)$/))&&(r=a[1],t=a[2]),a=!0,(i=t.match(/^([^#?]+)([#?].*?)$/)||"")&&(t=i[1],i=i[2]),/\/$/.test(t)&&(t=t.slice(0,-1),i="/"+i),t=t.replace(/:\/\//g,encodeURIComponent(":/")+"/")):(i=(t=t.replace(/^(?:[a-zA-Z]:\\?|\\\\(?:[^\\\/]+)\\?|\\|\/)/,function(e){return r=e,""})).match(/^(.*?)([\\\/]+)$/))&&(t=i[1],i=i[2].charAt(0));var o=t.match(/[\\\/]/)||i&&i.match(/^[\\\/]/);if(!o)return(r||"")+t+(i||"")||".";for(var s=0,l=(t=t.split(/[\\\/]+/)).length;s<l;s++)if("."===t[s])t[s]="";else if(".."===t[s])for(var c=s;c>0;)if(t[--c]&&".."!==t[c]){t[s]=t[c]="";break}for(;t.length>0&&!t[0]||".."===t[0]&&r;)t.shift();for(;t.length>0&&!t[t.length-1];)t.pop();return t=t.join(o[0]).replace(/([\\\/])[\\\/]+/g,"$1"),a&&(t=t.replace(/%3A%2F\//g,"://")),r?t=r+t:t||(t="."),i&&(t+=i),e.debug("→ ["+t+"]",8,"simplify_path"),t}},e.split_module_name=function(t){return"string"==typeof t&&(t=t.replace(/[\\\/]+/g,".").split(/[.\\\/]|::/)),Array.isArray(t)&&t.length?(e.Class===t[0]&&t.shift(),t):[""]},e.to_module_name=function(t,n){e.is_Function(t)?t=t.Class:t===e.env.main_script_name&&(t=e.Class),"string"==typeof t&&(t=e.split_module_name(t));var r="";return Array.isArray(t)&&("string"!=typeof n&&(n=e.env.module_name_separator),t[0]!==e.Class&&(r=e.Class+n),r+=t.join(n)),r},e.is_local=function(){return(e.is_local=e.constant_function(!e.is_WWW()||"file:"===window.location.protocol))()},e.reset_env()}(CeL),"function"==typeof CeL&&function(library_namespace){var NOT_FOUND="".indexOf("_"),Array_slice=Array.prototype.slice;function apply(apply_this_obj,apply_args){var temp_apply_key,_arg_list=[],r,i=0,l=apply_args&&apply_args.length;if(null!=apply_this_obj)try{apply_this_obj[temp_apply_key="temp_apply"]=this}catch(e){temp_apply_key=null}if(l){for(;i<l;i++)_arg_list[i]="apply_args["+i+"]";temp_apply_key||(apply_this_obj=this),r=eval("apply_this_obj"+(temp_apply_key?"."+temp_apply_key:"")+"("+_arg_list.join(",")+")")}else r=temp_apply_key?apply_this_obj[temp_apply_key]():this();return temp_apply_key&&delete apply_this_obj[temp_apply_key],r}function call(e){return this.apply(e,Array_slice.call(arguments,1))}function copy_properties_keys(e,t){return Object.keys(e).forEach(function(n){t[n]=e[n]}),t}var copy_properties=library_namespace.copy_properties=function(e,t){if(Object.keys)return(copy_properties=library_namespace.copy_properties=copy_properties_keys)(e,t);for(var n in e)t[n]=e[n];return t};function bind(e){var t,n=this;return arguments.length<2?null==e?n:copy_properties(n,function(){return n.apply(e,arguments)}):(t=Array_slice.call(arguments,1),copy_properties(n,function(){var r,i,a=arguments.length;if(!a)return n.apply(e,t);for(r=t.concat(),i=a+t.length;a--;)r[--i]=arguments[a];return n.apply(e,r)}))}function create_list_iterator(e,t,n,r){var i,a;if(r&&Array.isArray(e))a=e;else for(i in a=[])delete a[i];if(t||"function"==typeof t||(t=Array.isArray(e)?"value":"key"),"function"==typeof e.forEach)e.forEach("value"===t?function(e){a.push(e)}:"key"===t?function(e,t){a.push(t)}:function(e,t){a.push([t,e])});else for(i in e)a.push("key"===t?i:"value"===t?e[i]:[i,e[i]]);return n?a:new Array_Iterator(a,!0)}function from(e,t,n){if(null==e)throw new Error("Cannot convert undefined or null to object");var r,i,a=e&&!Array.isArray(e)&&(e.constructor===Set?"values":e.entries?"entries":e.values&&"values");if(a||"function"!=typeof e.next||(a=e),a){if(r=[],"function"==typeof a)a=a.call(e);else if(a&&"function"==typeof e[a])a=e[a]();else if(!a.next)throw new Error("Array.from: invalid iterator!");for(;!(i=a.next()).done;)r.push(i.value);return r}if("function"!=typeof t)try{return"string"==typeof e?e.split(""):Array_slice.call(e)}catch(e){if(5014!=(65535&e.number))throw e;t=null}var o=e&&0|e.length;if(r=[],t)for(i=0;i<o;i++)r.push(n?t.call(n,e[i],i):t(e[i],i));else for(;i<o;)r.push(e[i++]);return r}function Array_Iterator_next(){var e;for(library_namespace.debug(this.join(";"),6,"Array_Iterator.next");(e=this[0]++)<this[1].length;)if(e in this[1])return{value:this[2]?this[1][e]:[e,this[1][e]],done:!1};return this[0]=NaN,{value:void 0,done:!0}}function Array_Iterator(e,t){this.next=Array_Iterator_next.bind([0,e,t])}copy_properties(Object.create(null),Object.create(null)),library_namespace.set_method(Function.prototype,{apply:apply,call:call,bind:bind}),library_namespace.set_method(Array,{from:from}),Array_Iterator.prototype.toString=function(){return"[object Array Iterator]"},library_namespace.Array_Iterator=Array_Iterator;var is_Set,is_Map,has_native_Set,has_native_Map,KEY_not_native=library_namespace.env.not_native_keyword,has_native_Object_defineProperty=!Object.defineProperty[KEY_not_native];try{has_native_Set=!!new Set,has_native_Map=!!new Map,is_Set=function(e){return"[object Set]"===Object.prototype.toString.call(e)},is_Map=function(e){return"[object Map]"===Object.prototype.toString.call(e)},(new Map).forEach()}catch(e){has_native_Object_defineProperty&&has_native_Set&&has_native_Map?library_namespace.env.has_for_of&&function(){function collection_clear(){if(this.size>0){var e=[];this.forEach(function(t,n){e.push(n)}),e.forEach(function(e){this.delete(e)},this),this.size>0&&library_namespace.warn("collection_clear: 仍有元素存在於 collection 中！")}}try{var s=new Set,a=[],Set_forEach;if(s.forEach||(eval('Set_forEach=function(callback,thisArg){var i,use_call=thisArg!==undefined&&thisArg!==null&&typeof callback.call==="function";for(i of this)if(use_call)callback.call(thisArg,i,i,this);else callback(i,i,this);}'),s.add("2 "),s.add(1),Set_forEach.call(s,function(e){a.push(e)}),"2 |1"===a.join("|")&&(library_namespace.debug("採用 Set_forEach() 作為 Set.prototype.forEach()。"),Object.defineProperty(Set.prototype,"forEach",{value:Set_forEach}))),Set.prototype.clear||Object.defineProperty(Set.prototype,"clear",{value:collection_clear}),"function"==typeof Set.prototype.size){var Set_size=Set.prototype.size;Object.defineProperty(Set.prototype,"size",{get:Set_size})}}catch(e){}try{var m=new Map,a=[],Map_forEach;if(m.forEach||(eval('Map_forEach=function(callback,thisArg){var k,v,use_call=thisArg!==undefined&&thisArg!==null&&typeof callback.call==="function";for([k,v] of this)if(use_call)callback.call(thisArg,v,k,this);else callback(v,k,this);}'),m.set("1 ",2),m.set(" 3",4),Map_forEach.call(m,function(e,t){a.push(t,e)}),"1 |2| 3|4"===a.join("|")&&(library_namespace.debug("採用 Map_forEach() 作為 Map.prototype.forEach()。"),Object.defineProperty(Map.prototype,"forEach",{value:Map_forEach}))),Map.prototype.clear||Object.defineProperty(Map.prototype,"clear",{value:collection_clear}),"function"==typeof Map.prototype.size){var Map_size=Map.prototype.size;Object.defineProperty(Map.prototype,"size",{get:Map_size})}}catch(e){}}():function(){library_namespace.debug("完全使用本 library 提供的 ES6 collections 實作功能。");var e,t,n,r,i=80,a=1,o=2,s="Map id\n"+Math.random(),l=library_namespace.get_object_type,c=[],_=[],u=[],p=[],d=[],f=function(){var e=Object.create(null);return[e,function(t){return t in e}]};(e={})[r="\0"+s]=(t=[])[r]=n={},e[r]===n&&t[r]===n&&(s=r);try{f()}catch(e){f=function(){var e={};return[e,Object.hasOwn?function(t){return Object.hasOwn(e,t)}:Object.prototype.hasOwnProperty?function(t){return Object.prototype.hasOwnProperty.call(e,t)}:Object.prototype?function(t){return t in e&&e[t]!==Object.prototype[t]}:function(t){return t in e}]}}var g=Object.is&&!Object.is(0,-0)?function(e){return Object.is(e,-0)}:function(e){return-0===e&&1/e==-1/0};function h(e,t){if(null==this||this===library_namespace.env.global)return new h(e,t);var n,r,i,a;if(Object.defineProperty(this,"clear",{value:function(){var e=f();r=e[0],i=e[1],a=Object.create(null),n=0}}),this.clear(),Object.defineProperty(this,"size",{get:function(){return n},set:function(e){Array.isArray(e)&&e[1]===_&&(n=e[0])}}),Object.defineProperty(this,"values",{value:function(){return arguments[0]===d?[r,a]:arguments[0]===p?create_list_iterator(a,"value",!0):create_list_iterator(a,"value")}}),Object.defineProperty(this,"has",{value:function(e){return arguments[1]===c?i(e):!!m.call(this,e)}}),e)try{if(Array.isArray(e))for(var o=0;o<e.length;o++){var s=e[o];this.set(s[0],s[1])}else if(e.forEach){var l=this;e.forEach(function(e,t){l.set(t,e)})}else{throw 1}}catch(t){throw new TypeError("Map: Input value is not iterable: "+(library_namespace.is_Object(e)?library_namespace.is_type(e):e))}}function m(e,t,n){if(0!==arguments.length){var r=this.values(d),u=typeof e,p=this,f=r[0],h=r[1],m=has_native_Object_defineProperty?function(e){p.size=[p.size+e,_]}:function(e){p.size+=e},y=function(e){h[r+"_"+v]=n,e||m(1)};switch(u){case"string":r=e;break;case"number":if(g(e)){r="-0";break}case"boolean":case"undefined":r=String(e);break;case"function":if(library_namespace.is_Function(e)){r=(r=String(e)).length+"|"+r;break}case"object":try{if(!(r=e[s])&&(r=String(Math.random()),Object.defineProperty(e,s,{value:r}),r!==e[s]))throw new Error("無法設定 hash id: .["+s+"]");break}catch(e){}if(Array.isArray(e)){r=(2*e.length<i?e:e.slice(0,i/2)).toString();break}if(library_namespace.is_Object(e)){for(w in r="{",e)if((r+=w+":"+e[w]+",").length>i){w=null;break}null!==w&&(r+="}");break}default:try{r=l(e)+e}catch(t){r="["+u+"]"+e}}if(r=r.slice(0,i).replace(/_(\d+)$/,"-$1"),library_namespace.is_debug(6)&&library_namespace.is_WWW()&&library_namespace.debug("hash: ["+r+"]",0,"hash_of_key"),this.has(r,c)){var b=f[r],v=b.indexOf(e);if(library_namespace.is_debug(6)&&library_namespace.is_WWW()&&library_namespace.debug("index: ["+v+"]",0,"hash_of_key"),v===NOT_FOUND&&e!=e)for(var w=0,k=b.length;w<k;w++)if(b[w]!=b[w]){v=w;break}if(v===NOT_FOUND)t===a?(library_namespace.is_debug(5)&&library_namespace.is_WWW()&&library_namespace.debug("衝突(collision) : "+u+" @ hash ["+r+"], index "+v+" / "+b.length,0,"hash_of_key"),v=b.push(e)-1,y()):r=void 0;else{if(t===o)return library_namespace.is_debug(6)&&library_namespace.is_WWW()&&library_namespace.debug("remove key: ["+r+"]",0,"hash_of_key"),b.length<2?delete f[r]:delete b[v],delete h[r+"_"+v],m(-1),!0;t===a&&(library_namespace.is_debug(6)&&library_namespace.is_WWW()&&library_namespace.debug("modify key: ["+r+"]",0,"hash_of_key"),y(!0))}}else t===a?(f[r]=[e],v=0,y()):r=void 0;return t!==o&&(r&&[r,v])}}function y(e,t){if(null==this||this===library_namespace.env.global)return new y(e,t);var n=new h(void 0,t);if(Object.defineProperty(this,"size",{get:function(){return n.size},set:function(e){Array.isArray(e)&&e[1]===_&&(n.size=e[0])}}),this.values=has_native_Object_defineProperty?function(){return arguments[0]===p?n[arguments[1]](arguments[2],arguments[3]):n.values()}:function(){if(arguments[0]===p){var e=n[arguments[1]](arguments[2],arguments[3]);return this.size=n.size,e}return n.values()},e)try{if(e.forEach)e.forEach(function(e){this.add(e)},this);else for(var r in e)this.add(e[r])}catch(t){throw new TypeError("Set: Input value is not iterable: "+(library_namespace.is_Object(e)?library_namespace.is_type(e):e))}}library_namespace.is_negative_zero=g,Object.assign(h.prototype,{set:function(e,t){m.call(this,e,a,t)},get:function(e){var t=m.call(this,e);if(t)return this.values(d)[1][t.join("_")]},delete:function(e){return m.call(this,e,o)},keys:function(){return this.forEach(u)},entries:function(){return this.forEach(d)},forEach:function(e,t){var n,r,i,a=this.values(d),o=a[0],s=a[1],l=null!=t&&"function"==typeof callback.call,c=Array.isArray(e)&&(e===d?function(e,t){c.push([t,e])}:e===u&&function(e,t){c.push(t)});for(n in c&&(e=c,c=[]),s)a=o[(r=n.match(/^([\s\S]*)_(\d+)$/))[1]][0|r[2]],i=s[n],l?e.call(t,i,a,this):e(i,a,this);if(c)return new Array_Iterator(c,!0)},toString:function(){return"[object Map]"},values:function(){}}),Object.assign(y.prototype,{add:function(e){return this.values(p,"set",e,e)},clear:function(){return this.values(p,"clear")},delete:function(e){return this.values(p,"delete",e)},has:function(e){return this.values(p,"has",e)},entries:function(){var e=[];return this.values(p,"values",p).forEach(function(t){e.push([t,t])}),new Array_Iterator(e,!0)},forEach:function(e,t){this.values(p,"values",p).forEach(e,t)},toString:function(){return"[object Set]"},values:function(){}});var b=library_namespace.env.global;(b.Set=library_namespace.Set=y)[KEY_not_native]=!0,(b.Map=library_namespace.Map=h)[KEY_not_native]=!0,is_Set=function(e){return e&&e.constructor===y},is_Map=function(e){return e&&e.constructor===h}}()}var Set_from_Array=new Set([1,2]);library_namespace.Set_from_Array=Set_from_Array=2===Set_from_Array.size?function(e){return new Set(e)}:function(e){var t=new Set;return"function"==typeof e.forEach?e.forEach(function(e){t.add(e)}):t.add(e),t},"function"!=typeof Set.prototype.values&&"function"==typeof Set.prototype.forEach&&(Set.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),new Array_Iterator(e,!0)}),library_namespace.is_Set=is_Set,library_namespace.is_Map=is_Map;var CONST_COUNT=0,PARALLEL=0,SEQUENTIAL=1,UNKNOWN="unknown",PROCESSED=++CONST_COUNT,INCLUDING=++CONST_COUNT,INCLUDE_FAILED=++CONST_COUNT;function dependency_chain(){this.relations=new Map}function dependency_chain_get(e,t){var n,r=this.relations;return 0===arguments.length?r.keys():((n=r.get(e))||t||r.set(e,n={previous:new Set,next:new Set,item:e}),n)}function dependency_chain_add(e,t){return 0<arguments.length&&(void 0!==e||void 0!==(e=t))&&(e===t||void 0===t?this.get(e):(this.get(e).next.add(t),this.get(t).previous.add(e))),this}function dependency_chain_delete(e){var t,n;return!!(t=(n=this.relations).get(e))&&(library_namespace.is_debug()&&t.previous.size>0&&library_namespace.warn("刪除一個還有 "+t.previous.size+" 個 previous 的元素。循環相依？"),t.previous.forEach(function(r){var i=n.get(r).next;t.next.forEach(function(e){i.add(e),n.get(e).previous.add(r)}),i.delete(e)}),t.next.forEach(function(t){n.get(t).previous.delete(e)}),n.delete(e),!0)}function dependency_chain_independent(e){var t,n=this.relations;if(n.size>0)try{arguments.length||(library_namespace.debug("自 "+n.size+" 個元素中，隨便取得一個沒 previous 的元素。",5,"dependency_chain.independent"),n.forEach(function(t,n){if(library_namespace.debug("item ["+n+"]",6,"dependency_chain.independent"),e=n,0===t.previous.size)throw 1}),library_namespace.is_debug()&&library_namespace.warn("dependency_chain.independent: 沒有獨立之元素!"),t=!0);var r,i=new Set,a=new Set;for(a.add(e),e=void 0;(r=a).size>0;)a=new Set,r.forEach(function(r){var o=n.get(r);if(0===o.previous.size)throw e=r,2;if(i.has(r)){if(e=r,t)throw 3}else i.add(r);o.previous.forEach(function(n){if(i.has(n)){if(t)throw e=n,4}else a.add(n)})})}catch(e){isNaN(e)&&(library_namespace.warn("dependency_chain.independent: "+e.message),library_namespace.error(e))}return e}Object.assign(dependency_chain.prototype,{get:dependency_chain_get,add:dependency_chain_add,delete:dependency_chain_delete,independent:dependency_chain_independent}),library_namespace.dependency_chain=dependency_chain;var named_code=Object.create(null),modules_loaded=new Set;function get_named_code(e){return e?named_code[e]:named_code}function get_modules_loaded(){return Array.from(modules_loaded)}function load_later(){var e,t=String(this);library_namespace.is_debug()&&(library_namespace.debug("load_later: 演算 ["+t+"]。",5,"load_later"),t!==this&&library_namespace.warn('變數名與 "this" 不同！'));try{return!(e=library_namespace.value_of(t))||"function"!=typeof e&&"object"!=typeof e?e:e.apply(library_namespace.value_of(t.replace(/\.[^.]+$/,"")),arguments)}catch(e){library_namespace.error(e)}if(!e)return library_namespace.warn("load_later: 無法演算 ["+t+"]！"),e;library_namespace.is_debug()&&library_namespace.warn("load_later: 可能是特殊 object，因無法 bind 而出錯。嘗試跳過 bind。");var n=arguments.length;try{if(n>0)return e.apply(null,arguments)}catch(e){library_namespace.is_debug()&&library_namespace.error(e)}library_namespace.is_debug()&&library_namespace.warn("load_later: 可能是特殊 object，因無法 apply 而出錯。嘗試跳過 apply。");try{switch(n){case 0:return e();case 1:return e(arguments[0]);case 2:return e(arguments[0],arguments[1]);case 3:return e(arguments[0],arguments[1],arguments[2]);case 4:return e(arguments[0],arguments[1],arguments[2],arguments[3]);default:return n>5&&library_namespace.warn("load_later: 共指派了 "+n+" 個 arguments，過長。將僅取前 5 個。"),e(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4])}}catch(e){library_namespace.error(e)}return library_namespace.warn("load_later: 無法執行 ["+t+"]！跳過執行動作，直接回傳之。"),e}function get_named(e,t){if("string"!=typeof e||!e)return e;var n,r,i=library_namespace.match_module_name_pattern(e);if(!(void 0===(r=library_namespace.value_of(e))||(n=library_namespace.to_module_name(e))&&n in named_code))return library_namespace.is_debug("treat ["+e+"] as variable name.",2,"get_named"),r;if(i?r=n||library_namespace.to_module_name(e):!/^(?:[a-z\-]+:[\/\\]{2}|(?:[.]{2}[\/\\])+)?(?:[^.]+(?:\.[^.]+)*[\/\\])*[^.]+(?:\.[^.]+)*$/i.test(r=library_namespace.simplify_path(e))&&library_namespace.is_debug()&&library_namespace.warn("get_named: 輸入可能有誤的 URL/path: ["+r+"]"),(n=named_code[r])||(i&&(n=named_code[library_namespace.get_module_path(r)])||(n=named_code[r]={id:r,callback:new Set,error_handler:new Set,load_later:load_later,base:library_namespace,r:function(e){return e in n.variable_hash?e=n.variable_hash[e]:library_namespace.warn("require_variable: unregistered variable ["+e+"] @ module ["+r+"]."),library_namespace.value_of(e)}},i&&(named_code[library_namespace.get_module_path(r)]=n)),i?(library_namespace.debug("treat resource ["+e+"] as module.",5,"get_named"),n.module_name=e,r in named_code||(named_code[r]=n)):(library_namespace.debug("treat resource ["+e+"] as URL/path. 登記 ["+r+"]",5,"get_named"),n.URL=r)),library_namespace.is_Object(t)&&(!n.included||n.force)){library_namespace.debug("included"in n?"named source code ["+r+"] 已經載入過，卻仍然要求再度設定細項。":"設定 ["+r+"] 之 source code 等 options。",2,"get_named");var a=function(e){var i=t[e];if(i){"function"==typeof i&&"function"!=typeof i.forEach&&(i=[i]);try{i&&"function"==typeof i.forEach&&(i=Set_from_Array(i)).size>0&&(library_namespace.debug("["+r+"] 初始設定函式本身定義了 "+i.size+" 個 "+e+"。",2,"get_named"),n[e].forEach(function(e){i.add(e)}),n[e]=i)}catch(e){}}};a("callback"),a("error_handler"),"object"!=typeof t.extend_to&&"function"!=typeof t.extend_to||(n.extend_to=t.extend_to),library_namespace.set_method(n,t,function(e){return!(e in named_code_declaration)},{configurable:!0,writable:!0})}return n}function is_included_assertion(e,t){if(t)throw"string"==typeof t?t:new Error("Please include module ["+e+"] first!");return!1}function is_included(e,t){if(Array.isArray(e)){for(var n=0,r=e.length,i=[];n<r;n++)is_included(e[n])||i.push(e[n]);return!(i.length>0)||is_included_assertion(i,t)}return is_controller(e)||is_controller(e=get_named(e))?e.included:is_included_assertion(e,t)}function parse_require(e){var t="function"==typeof e.require?e.require(library_namespace):e.require;if(t)if(library_namespace.debug("解析 ["+e.id+"] 之 dependency list，以獲得所需之 URL/path/module/variable name: ["+t+"]。",5,"parse_require"),"string"==typeof t&&(t=t.split("|")),Array.isArray(t)){var n=Object.create(null),r=e.variable_hash=Object.create(null);for(var i in t.forEach(function(e){var t=e.match(/^(.+)\.([^.]*)$/);t&&library_namespace.match_module_name_pattern(t[1])?(t[2]&&(r[t[2]]=library_namespace.to_module_name(t[1],".")+"."+t[2]),n[t[1]]=null):n[e]=null}),e.require_resources=t=[],n)t.push(i);delete e.require}else library_namespace.warn("parse_require: 無法解析 ["+e.id+"] 之 dependency：["+e.require+"]！");if(t&&t.length>0){var a=[];if(t.forEach(function(e){var t=get_named(e);!is_controller(t)||"included"in t||a.push(e)}),Array.isArray(a)&&a.length>0)return library_namespace.debug("檢查並確認 required module/URL，尚須處理 "+a.length+" 項: ["+a.join('<b style="color:#47e;">|</b>')+"]。",5,"parse_require"),[SEQUENTIAL,1===a.length?a[0]:a,e]}return e}library_namespace.get_named_code=get_named_code,library_namespace.get_modules_loaded=get_modules_loaded,library_namespace.is_included=is_included;var document_head,tag_of_type=Object.create(null),URL_of_tag=Object.create(null),TO_FINISH=Object.create(null),no_sheet_onload=library_namespace.is_WWW(!0)&&navigator.userAgent,external_RegExp=library_namespace.env.module_name_separator,is_nodejs=library_namespace.platform.nodejs,tag_map={script:["src","js"],link:["href","css"],img:["src","png|jpg|gif"]},is_Safari,is_old_Firefox;function all_requires_loaded(e){var t=e.require_resources;return!Array.isArray(t)||t.every(function(e){var t=get_named(e);return t&&t.included})}function load_named(item,options,caller){var id="string"==typeof item?item:is_controller(item)&&item.id,force=is_controller(item)&&item.force,declaration=id&&named_code[id];if(!id||!is_controller(declaration))return library_namespace.error("load_named: 沒有 ["+id+"] 的資料！"),PROCESSED;function waiting(){return load_named(item,{finish_only:TO_FINISH},caller)}function run_callback(e){var t,n=declaration[e],r=[];if(n&&("function"==typeof n&&"function"!=typeof n.forEach&&(n=[n]),Array.isArray(n)&&(n=Set_from_Array(n),declaration[e]=new Set),n.size>0&&(library_namespace.debug("繼續完成 "+n.size+" 個所有原先 "+e+" queue 中之執行緒，或是 named source code 所添加之函數。",5,"load_named.run_callback"),t=Array.prototype.slice.call(arguments,1),n.forEach(library_namespace.env.no_catch?function(e){"function"==typeof e&&e.apply(declaration,t)===waiting&&r.push(e)}:function(n){try{library_namespace.debug("run "+e+" of ["+id+"]: ["+n+"]",5,"load_named.run_callback"),"function"==typeof n&&n.apply(declaration,t)===waiting&&r.push(n)}catch(t){library_namespace.error("執行 ["+id+"] 之 "+e+" 時發生錯誤！ "+t.message),library_namespace.debug("<code>"+(""+n).replace(/</g,"&lt;").replace(/\n/g,"<br />")+"</code>",1,"load_named.run_callback")}}),n.clear())),declaration.error_handler&&declaration.error_handler.clear(),r.length>0)return r.forEach(function(e){n.add(e)}),!0}if(id=declaration.id,library_namespace.is_Object(options)||(options=Object.create(null)),"finish_only"in options&&(options.finish_only=options.finish_only===TO_FINISH),!force&&"included"in declaration)library_namespace.debug("之前已處理過 ["+id+"] 之載入程序："+(declaration.included?"成功":"無法")+"載入。",5,"load_named");else{if(!options.finish_only&&declaration.is_waiting_now&&!all_requires_loaded(declaration))return caller&&declaration.callback.add(caller),INCLUDING;if(declaration.code){var initializer,error_Object;if(library_namespace.debug('準備嵌入 (include) [<b style="color:#F2a;background-color:#EF0;">'+id+"</b>]。執行 module 初始設定函式。",2,"load_named"),modules_loaded.add(id),library_namespace.env.no_catch)initializer=declaration.code(library_namespace);else try{initializer=declaration.code(library_namespace)}catch(e){error_Object=e,library_namespace.error("load_named: ["+id+"] 之初始設定函式執行失敗！"),library_namespace.error(e)}if(Array.isArray(initializer)){library_namespace.debug("初始設定函式回傳 Array，先轉成 Object。",1,"load_named");var list=initializer;initializer=Object.create(null),list.forEach(function(e){var t="function"==typeof e&&library_namespace.get_function_name(e);t?(library_namespace.debug("設定 method：["+t+"]。",2,"load_named"),initializer[t]=e):library_namespace.warn("load_named: 非函式之初始設定值：["+e+"]！")})}if("function"==typeof initializer||library_namespace.is_Object(initializer)){library_namespace.debug("預先一層一層定義、準備好 ["+id+"] 之上層 name-space。",2,"load_named");for(var module_name_list=library_namespace.split_module_name(id),i=0,l=module_name_list.length-1,name_space=library_namespace,name,sub_name_space;i<l;i++)sub_name_space=name_space[name=module_name_list[i]],sub_name_space||(sub_name_space=name_space[name]={null_constructor_name:library_namespace.to_module_name(module_name_list.slice(0,i+1))},library_namespace.debug("創建 name-space ["+sub_name_space.null_constructor_name+"]",2,"load_named")),name_space=sub_name_space;name=module_name_list[l],name_space[name]&&(name_space[name].null_constructor_name?(library_namespace.debug("可能因下層 module 先被載入，已預先定義過 ["+id+"]。將把原先的 member 搬過來。",2,"load_named"),delete name_space[name].null_constructor_name,Object.assign(initializer,name_space[name])):library_namespace.warn("load_named: 已存在 name-space ["+id+"]！")),library_namespace.debug("["+id+"] 順利執行到最後，準備作 hook 設定。",3,"load_named"),name_space[name]=initializer;var no_extend,extend_to="extend_to"in declaration?declaration.extend_to:library_namespace;if(extend_to){for(i in library_namespace.debug("設定完 name space。執行擴充 member 的工作。"+(extend_to===library_namespace?"將 extend 到 library 本身之下。":""),2,"load_named"),(no_extend=declaration[library_namespace.env.not_to_extend_keyword])&&("string"==typeof no_extend&&(no_extend=no_extend.split(",")),Array.isArray(no_extend)&&(l=Object.create(null),no_extend.forEach(function(e){l[e]=1}),no_extend=l)),library_namespace.is_Object(no_extend)||(no_extend=Object.create(null)),(l=function(){}).prototype=Object.create(null),l)no_extend[i]=1;if(!("this"in no_extend))if(library_namespace.debug("擴充 module 本身到標的基底下。",2,"load_named"),l=extend_to[name],"object"==typeof l&&"object"==typeof initializer)for(i in library_namespace.debug("標的基底 ["+l.Class+"] 已有 ["+name+"]，將合併/搬移成員。",1,"load_named"),"reconstructed"in l||(extend_to[name]=l=Object.assign({reconstructed:!0},l)),initializer)i in l&&library_namespace.debug("標的基底 ["+name+"] 已有 ["+i+"]，將取代之。",1,"load_named"),l[i]=initializer[i];else l&&l.Class&&library_namespace.is_debug()&&library_namespace.warn("load_named: 將以 ("+typeof initializer+") ["+id+"] 取代擴充標的基底之同名 module ("+typeof l+") ["+(l.Class||name)+"]。"),extend_to[name]=initializer;if(!("*"in no_extend))for(i in initializer)i in no_extend||extend_to[i]===initializer[i]||(i in extend_to&&library_namespace.is_debug()&&library_namespace.warn("load_named: 將以 ["+id+"."+i+"] 取代擴充標的基底之同名 property"+(library_namespace.is_debug(2)?" ["+extend_to[i]+"]":"")+"。"),extend_to[i]=initializer[i])}else library_namespace.debug("跳過擴充 member 之工作。",5,"load_named");"function"==typeof initializer&&(initializer.prototype.constructor||(initializer.prototype.constructor=initializer)),initializer.Class||(initializer.Class=id),declaration.included=!0}else if(initializer===library_namespace.env.not_to_extend_keyword)library_namespace.debug({T:["不設定(hook) module [%1] 之 namespace，僅執行 module code。",id]},1,"load_named"),declaration.included=!0;else if(error_Object||library_namespace.error(error_Object=new Error("load_named: ["+id+"] 之初始設定函式執行成功，但回傳無法處理之值：["+initializer+"]！")),declaration.included=!1,run_callback("error_handler",error_Object),!item.skip_error)return INCLUDE_FAILED}else{var file_contents,URL=library_namespace.get_old_namespace();if(URL=URL&&URL.skip_loading_modules,Array.isArray(URL)&&(URL.includes(id)||id.slice(0,library_base_path.length)===library_base_path&&URL.includes(id.slice(library_base_path.length))))return library_namespace.debug("Skip loading module/path: "+id),PROCESSED;URL=declaration.URL||library_namespace.get_module_path(id);var is_external=function(e){var t=external_RegExp.test(id);return t&&(declaration.included=!e,library_namespace.debug("由於引用的是 library 外部檔案，自動將之設定為 included "+(declaration.included?"成功":"失敗")+"。",5,"load_named.is_external")),t};if(library_namespace.debug('準備載入 (load) [<a style="color:#ef0;background-color:#018;" href="'+encodeURI(URL)+'">'+id+"</a>]。",5,"load_named"),!library_namespace.env.same_origin_policy&&!library_namespace.env.no_eval&&/\.js$/i.test(URL))try{if(file_contents=library_namespace.get_file(URL),library_namespace.is_debug(2)&&library_namespace.is_WWW()&&"string"==typeof file_contents&&library_namespace.debug("取得檔案內容: ("+file_contents.length+" bytes) ["+file_contents.slice(0,200).replace(/ /g,"&nbsp;").replace(/\n/g,"<br />")+"]"+(file_contents.length>200?"...":""),5,"load_named"),file_contents?(library_namespace.script_host&&"function"==typeof library_namespace.pre_parse_local_code&&(file_contents=library_namespace.pre_parse_local_code(file_contents,URL,id)),is_nodejs?"function"==typeof require?declaration.result=require(library_namespace.platform.Windows&&/^\/[a-z]:\//i.test(URL)?URL.slice(1):URL):eval(file_contents):library_namespace.eval_code(file_contents),file_contents=!!file_contents,declaration.module_name||(declaration.included=!0)):(declaration.included=!1,library_namespace.warn("Get no result from ["+id+"]! Some error occurred?")),declaration.URL=URL,"included"in declaration||is_external()||library_namespace.warn('load_named: 雖已處理完 [<a href="'+encodeURI(URL)+'">'+id+"</a>] ，但程式碼並未使用所規範的方法來載入，導致 included flag 未被設定！"),declaration.included)return library_namespace.debug('已 include [<a href="'+encodeURI(URL)+'">'+id+"</a>]。",5,"load_named"),PROCESSED;if(declaration.last_call=new Date,run_callback("error_handler"),!item.skip_error)return INCLUDE_FAILED}catch(e){if(library_namespace.is_local()&&!library_namespace.is_debug(2)||(library_namespace.is_type(e,"DOMException")&&1012===e.code?library_namespace.error("load_named:\n"+e.message+"\n"+URL+"\n\n程式可能呼叫了一個"+(library_namespace.is_local()?"不存在的，\n或是繞經上層目錄":"cross domain")+"的檔案？\n\n請嘗試使用相對路徑，\n或 call .run()。"):library_namespace.is_type(e,"Error")&&5==(65535&e.number)||library_namespace.is_type(e,"XPCWrappedNative_NoHelper")&&(""+e.message).indexOf("NS_ERROR_FILE_NOT_FOUND")!==NOT_FOUND?library_namespace.is_debug()&&library_namespace.error("load_named: 檔案可能不存在或存取被拒？\n["+URL+"]"+(library_namespace.get_error_message?"<br />"+library_namespace.get_error_message(e):"\n"+e.message)):library_namespace.is_debug()&&library_namespace.error('load_named: Cannot load [<a href="'+encodeURI(URL)+'">'+id+"</a>]!"+(library_namespace.get_error_message?"<br />"+library_namespace.get_error_message(e)+"<br />":"\n["+e.constructor+"] "+(e.number?65535&e.number:e.code)+": "+e.message+"\n")+("encode"===e.type?"往後將改採用插入 HTML tag 的替代方式載入。":"抱歉！在載入其他網頁時發生錯誤，有些功能可能失常。\n重新讀取(reload)，或是過段時間再嘗試或許可以解決問題。"))),library_namespace.debug("Cannot load ["+id+"]! 以 .get_file() 依序載入的方法失敗："+e.message+(id===URL?"":" ("+URL+")"),2,"load_named"),is_nodejs&&(e instanceof SyntaxError||library_namespace.is_debug())&&console.error(e),!library_namespace.env.same_origin_policy&&(declaration.included=!1,run_callback("error_handler",e),!item.skip_error))return INCLUDE_FAILED}if(!file_contents)if(library_namespace.is_WWW()){var type=declaration.type,use_write=item.use_write,node,timeout_id="L",clean=function(e){if("L"!==timeout_id&&clearTimeout(timeout_id),timeout_id=0,onload=null,"js"===type&&setTimeout(function(){document_head.removeChild(node),node=null},0),node){try{delete node.onload}catch(e){node.onload=null}try{delete node.onreadystatechange}catch(e){node.onreadystatechange=null}}declaration.included||(declaration.module_name?is_external(e)||(e?declaration.included=!1:declaration.variable_hash?(declaration.is_waiting_now=!0,library_namespace.is_debug(2)&&library_namespace.warn("load_named: 未能直接載入 (load) ["+id+"]！可能因為 code 還有其他未能掌控，且尚未載入的相依性。")):(library_namespace.warn('load_named: [<a href="'+encodeURI(URL)+'">'+id+"</a>] 的程式碼似乎並未使用所規範的方法來載入？"),declaration.included=UNKNOWN)):declaration.included=!e,"included"in declaration&&!declaration.included&&run_callback("error_handler")),(declaration.included||item.skip_error)&&declaration.callback&&declaration.callback.size>0&&load_named(item,options,caller)},onload=function(e){var t;!timeout_id||(t=this.readyState)&&"loaded"!==t&&"complete"!==t||clean()};try{if(type?"string"==typeof type&&(type=type.toLocaleLowerCase()):(type=URL.match(/[^.\\\/]+$/))&&(type=type[0].toLocaleLowerCase()),!(node=tag_of_type[type]))throw library_namespace.warn("無法判別 ["+id+"] 之類型!"),1;if(use_write||"js"!==type&&"css"!==type)throw 0;if(void 0===document_head&&((document_head=document.head||document.getElementsByTagName("head")[0])||(document.body.parentNode||document.body).appendChild(document_head=document.createElement("head")),document_head||(document_head=null)),!document_head)throw library_namespace.warn("無法判別 tag &gt;head>!"),2;switch(node=document.createElement(node),node.width=node.height=0,node.onload=node.onreadystatechange=onload,type){case"js":node.type="text/javascript",node.async=!0,node.src=URL,options.timeout>0&&(timeout_id=setTimeout(function(){options.skip_error&&!library_namespace.is_debug()||library_namespace.warn(["load_named: ",{T:"Load failed"}," (",{T:"timeout"}," "+options.timeout+" ms): ["+id+"]"]),clean(!0)},options.timeout));break;case"css":node.type="text/css",node.rel="stylesheet",node.onerror=onload,node.href=URL}if(library_namespace.debug("插入 ."+type+" ["+URL+"]",2,"load_named"),caller&&declaration.callback.add(caller),document_head.appendChild(node),no_sheet_onload&&"css"===type){var test_img=document.createElement("img");test_img.onerror=function(){onload&&onload.call(this),test_img=null},test_img.src=URL}return declaration.last_call=new Date,library_namespace.debug("["+declaration.id+"]: need asynchronous. 登記完後直接休眠。",5,"load_named"),INCLUDING}catch(e){"number"!=typeof e&&(declaration.callback.delete(caller),library_namespace.error(e)),use_write=!0}if(use_write){library_namespace.is_debug(2)&&library_namespace.is_WWW()&&library_namespace.debug("直接寫入，Writing code for ["+URL+"]."),library_namespace.onload_queue||(library_namespace.onload_queue=[]);var onload=library_namespace.onload_queue.length,encode_URL=encodeURI(URL);library_namespace.onload_queue[onload]=function(){clean()},onload=' onload="'+library_namespace.Class+".onload_queue["+onload+']()"',document.write("js"===type?'<script type="text/javascript" src="'+encode_URL+'"'+onload+"><\/script>":"css"===type?'<link type="text/css" rel="stylesheet" href="'+encode_URL+'"'+onload+"></link>":'<img src="'+encode_URL+'" />')}}else library_namespace.is_debug(2)&&library_namespace.warn("load_named: No method availed! 沒有可以載入 resource 的方法！");declaration.included||!library_namespace.is_WWW()&&/\.css/i.test(id)||library_namespace.warn("load_named: 載入 ["+id+"] 失敗！")}}if(declaration.included||item.skip_error||options.finish_only){if(options.finish_only)library_namespace.is_debug(2)&&library_namespace.is_WWW()&&library_namespace.debug("["+id+"].finish() 已執行完畢。執行回調/回撥函式…",5,"load_named");else if(library_namespace.is_debug(2)&&library_namespace.is_WWW()&&library_namespace.debug("["+id+"] 已"+(declaration.included?"成功":"")+"載入完畢。執行回調/回撥函式…",5,"load_named"),run_callback("finish",library_namespace.value_of(id),waiting,function e(t){return Array.isArray(t)?t.map(e):id+library_namespace.env.module_name_separator+t}))return library_namespace.is_debug(2)&&library_namespace.is_WWW()&&library_namespace.debug("["+id+"].finish() 需要 waiting。等待其執行完畢…",5,"load_named"),INCLUDING;if(run_callback("callback",id),library_namespace.is_debug(2)&&library_namespace.is_WWW()&&library_namespace.debug("["+id+"] 之善後/收尾工作函式已執行完畢，清除 cache/stack…",5,"load_named"),delete declaration.code,delete declaration.finish,delete declaration.last_call,delete declaration.require_resources,delete declaration.variable_hash,delete declaration.callback,delete declaration.error_handler,delete declaration.is_waiting_now,!declaration.included)return INCLUDE_FAILED}else{if("included"in declaration)return INCLUDE_FAILED;library_namespace.is_debug(2)&&library_namespace.is_WWW()&&library_namespace.debug("module ["+module+"] is <b>NOT YET</b> loaded。通常為 module code 或呼叫 code 之問題。",2,"load_named")}return library_namespace.debug("["+id+"] 處理完畢。",5,"load_named"),PROCESSED}external_RegExp=new RegExp("(?:^|\\"+external_RegExp+")"+library_namespace.env.resources_directory_name+"\\"+external_RegExp+"|^(?:"+library_namespace.Class+"\\"+external_RegExp+")?"+library_namespace.env.external_directory_name+"\\"+external_RegExp),no_sheet_onload&&(is_Safari=(no_sheet_onload=no_sheet_onload.toLowerCase()).indexOf("safari")!==NOT_FOUND&&no_sheet_onload.indexOf("chrome")===NOT_FOUND&&no_sheet_onload.indexOf("chromium")===NOT_FOUND,is_old_Firefox=no_sheet_onload.match(/ Firefox\/(\d+)/i),is_old_Firefox&&(is_old_Firefox=(0|is_old_Firefox[1])<9),no_sheet_onload=is_Safari||is_old_Firefox,library_namespace.debug("看似需要修補 load events on linking elements.",5));var named_code_declaration={name:"module name",require:"module_name.required_function|module_name.",finish:function(){},no_extend:"this,*,no_extend_member",code:function(e){this.id,this.load_option;var t=this.r("required_function"),n=function(){};return n.method=function(){t(1,2,3)},n.grant=function(e){},this.finish=function(t,n,r){return e.run(r(["sub_module_1","sub_module_2"]),r(["sub_module.sub_sub_module"]),n),n},n}},named_code_declaration_auto_filled,children,is_controller=library_namespace.is_Object,check_and_run_options={name:"module name",URL:"URL/path",sequential:"循序/依序執行",timeout:"載入 resource 之時間限制。",load_option:"呼叫初始設定函式時，採用之初始設定 options/arguments。",interval:"時間間隔",type:"MIME type",use_write:"use document.write()",operate:"option 之作用方法。",force:"force reload even it's included.",skip_error:"NO stop on error"};function check_and_run(e,t){if(this.status=new Map,this.relation_map=new dependency_chain,this.run=check_and_run_run.bind(this),library_namespace.is_debug()){check_and_run.count=(check_and_run.count||0)+1;var n='check_and_run<b style="color:#d42;background-color:#ff4;">['+check_and_run.count+": %/"+e.length+"]</b>";has_native_Object_defineProperty?Object.defineProperty(this,"debug_id",{get:function(){return n.replace(/%/,this.relation_map.relations.size)}}):this.debug_id=n,library_namespace.is_debug(5)&&library_namespace.log(this.debug_id+": 初始登記：("+e.length+") ["+e+"]。")}this.set_options(t,!0),this.register(e)}function use_strict(){var v,i=0;try{for(;;)eval(v="tmp_"+i++)}catch(i){}try{return eval(v+"=1;delete "+v),!1}catch(i){}return!0}function use_function(e,t){if(!is_controller(this))return library_namespace.error('No "this" binded!'),"";t&&(t=[]);var n,r,i,a=[],o=this.variable_hash;if(library_namespace.is_Object(o))for(n in o)r=library_namespace.value_of(i=o[n]),e?e[n]=void 0===r?this.load_later.bind(i):r:(t&&t.push(n),a.push("try{"+n+"="+(void 0===r?'this.load_later.bind("'+i+'")':i.replace(/\.([a-z\d_]+)/gi,'["$1"]'))+";}catch(e){}"));return e||(Array.isArray(t)&&t.length>0?"var "+t.join(",")+";":"")+a.join("")}function check_and_run_normalize(e){var t;switch(e!==PARALLEL&&e!==SEQUENTIAL||(e=e===SEQUENTIAL),typeof e){case"boolean":return{sequential:e};case"number":return{timeout:e>0?0|e:0};case"function":return e;case"string":if(is_controller(t=get_named(e))||"function"==typeof t)return t;t=void 0;break;case"object":if(t=is_controller(e)&&(e.id||e.name||e.URL)){var n="function"==typeof e.code,r=get_named(t,e);if(r){if(n)return!r.force&&"included"in r?r:parse_require(r);library_namespace.debug("正規化載入 id ["+r.id+"] 的 controller。",5,"check_and_run_normalize"),library_namespace.set_method(e,r,[function(e){return"string"!=typeof r[e]},"id","name","URL"])}}}if(Array.isArray(e)||t)return e;e&&library_namespace.warn("check_and_run.normalize: Unknown item: ("+typeof e+") ["+e+"]!")}function check_and_run_set_options(e,t){if(t&&Object.assign(this.options=Object.create(null),check_and_run.options),library_namespace.is_Object(e)){0;var n,r=this.options;for(n in e)n in check_and_run_options&&(r[n]=e[n])}}function check_and_run_register(e,t){var n,r,i,a,o=0,s=e.length,l=e,c=this.relation_map,_=this.status;if(0===s)return _.set(e,PROCESSED),void 0!==t&&c.add(t,e),PROCESSED;if(_.get(e)===PROCESSED)return PROCESSED;for(;o<s;o++)if((i=check_and_run_normalize(e[o]))&&_.get(i)!==PROCESSED){if(Array.isArray(i)){if(0===i.length||this.register(i,t)===PROCESSED)continue}else if("function"!=typeof i&&(!is_controller(i)||"included"in i&&!i.force))continue;if(is_controller(i)&&i!==e[o]||(a=!0),void 0!==t&&c.add(t,i),is_controller(i)&&"sequential"in i&&r!==(n=!!i.sequential))if(r=n)library_namespace.debug("自 "+(o+1)+"/"+s+" 起依序載入：將元素一個接一個，展開至 relation map。",5,this.debug_id+".register");else{for(n=o;++n<s&&(!is_controller(l=check_and_run_normalize(e[n]))||!l.sequential););n===s&&(l=e),library_namespace.debug(o+1+"-"+n+"/"+s+" 平行載入：所有 "+(n-o)+" 個元素皆 loaded 之後，才算是處理完了 Array。",5,this.debug_id+".register")}r?t=i:c.add(i,l)}if(!a)return PROCESSED;r&&c.add(t,e)}function check_and_run_run(){for(var e,t=this.relation_map;(e=t.independent())||0===e;){if("function"==typeof e)if(library_namespace.debug("直接執行 function ["+(library_namespace.get_function_name(e)||e)+"]。",5,this.debug_id+".run"),library_namespace.env.no_catch)e();else try{e()}catch(t){return library_namespace.error("check_and_run.run: Error to run function: "+t.message),library_namespace.env.has_console&&console.error(t),library_namespace.debug("<code>"+(""+e).replace(/</g,"&lt;").replace(/\n/g,"<br />")+"</code>",5,this.debug_id+".run"),INCLUDE_FAILED}else if(Array.isArray(e))library_namespace.debug("登記 Array("+e.length+") ["+e+"]。",5,this.debug_id+".run"),this.register(e)!==PROCESSED&&(e=null);else if(is_controller(e)){library_namespace.debug("處理 controller ["+e.id+"]。",5,this.debug_id+".run");var n=this.options;if("once"===e.operate?n=e:this.set_options(e,"reset"===e.operate),e.id)if(e.force||void 0===is_included(e.id)){library_namespace.is_debug(2)&&library_namespace.is_WWW()&&library_namespace.debug("嘗試"+(is_included(e.id)?"重新":"")+"載入 "+(e.module_name?"module":"resource")+" ["+e.id+"]。",5,this.debug_id+".run");var r=load_named(e,n,this.run);if(e.force&&delete e.force,r===INCLUDING)return library_namespace.debug("正等待 loading ["+e.id+"] 中。推入排程開始蟄伏，waiting for callback。",5,this.debug_id+".run"),r;r===INCLUDE_FAILED?library_namespace.debug("Error to include ["+e.id+"]",5,this.debug_id+".run"):library_namespace.debug("["+e.id+"]: included.",5,this.debug_id+".run")}else library_namespace.debug((is_included(e.id)?"已經 included":"之前曾 include 失敗")+": ["+e.id+"]!",5,this.debug_id+".run")}else library_namespace.warn("check_and_run.run: Unknown item: ["+e+"]!");null!==e&&(library_namespace.debug("已處理過"+(e.id?" ["+e.id+"]":"此 "+library_namespace.is_type(e))+"，消除其相依關係。",5,this.debug_id+".run"),this.status.set(e,PROCESSED),t.delete(e))}t.relations.size>0&&library_namespace.warn("check_and_run.run: 已無獨立元素，卻仍有 "+t.relations.size+" 個元素未處理！"),library_namespace.debug("本次序列已處理完畢。",5,this.debug_id+".run")}check_and_run.options={timeout:library_namespace.is_local()?2e4:6e4},Object.assign(check_and_run.prototype,{set_options:check_and_run_set_options,register:check_and_run_register});var library_base_path,setup_library_base_path=function(){if(!library_base_path){0;var e=library_namespace.get_old_namespace();library_namespace.is_Object(e)&&(library_base_path=e.library_path)&&(/^([A-Z]:)?[\\\/]/i.test(library_base_path)||(library_base_path=library_namespace.simplify_path(library_namespace.get_script_full_name().replace(/[^\\\/]*$/,library_base_path))),library_base_path=library_namespace.simplify_path(library_base_path).replace(/[^\\\/]*$/,"")),library_base_path||library_namespace.env.script_name===library_namespace.env.main_script_name||(library_base_path=library_namespace.env.registry_path),library_base_path||(library_base_path=library_namespace.get_script_base_path(library_namespace.env.main_script)||library_namespace.get_script_base_path(library_namespace.env.main_script_name)||library_namespace.get_script_base_path()),library_base_path?(setup_library_base_path=function(){return library_base_path},library_namespace.debug('library base path: [<a href="'+encodeURI(library_base_path)+'">'+library_base_path+"</a>]",2,"setup_library_base_path")):library_namespace.warn("setup_library_base_path: Cannot detect the library base path!")}return library_namespace.env.library_base_path=library_base_path,library_base_path};function get_module_path(e,t){library_namespace.debug("test ["+e+"]",4,"get_module_path");var n=library_base_path||setup_library_base_path(),r=n.indexOf("\\")===NOT_FOUND?"/":"\\";return n+=library_namespace.split_module_name(e).join(r)+("string"==typeof t?(e?r:"")+t:(e?"":library_namespace.env.main_script_name)+library_namespace.env.script_extension),library_namespace.getFP&&(n=library_namespace.getFP(n,1)),library_namespace.debug("Path of module ["+e+"] / file ["+t+']: [<a href="'+encodeURI(n)+'">'+n+"</a>]",2,"get_module_path"),n}function inherit(e,t){var n,r,i=1;function a(){if("string"==typeof t&&(library_namespace.debug("get the module namespace of specific parent module name ["+t+"].",2,"inherit"),t=library_namespace.value_of(library_namespace.to_module_name(t))),library_namespace.is_Function(t))return t;library_namespace.error("inherit: 無法判別出合理之 parent["+i+"]！")}if(a()){try{r=new t}catch(e){r=t}if("function"==typeof e)for(n in e.prototype)r[n]=e.prototype[n];else e||(e=function(){});(e.prototype=r).constructor=e;for(var o,s=arguments.length;++i<s;)if(t=arguments[i],a())for(n in o=t.prototype)r[n]=o[n];return e}}function normal_run(){if(arguments.length>1||arguments[0]){library_namespace.is_debug(2)&&library_namespace.is_WWW()&&library_namespace.debug("初始登記/處理 "+arguments.length+" items。",2,"normal_run");var e=Array.prototype.slice.call(arguments);return e.length>1&&e.unshift(SEQUENTIAL),e=new check_and_run(e),library_namespace.debug("做完初始登記，開始跑程序。",2,"normal_run"),e.run()}library_namespace.debug("未輸入可處理之序列！",3,library_namespace.Class+"run","normal_run")}function check_resources(e,t){t||(t=URL_of_tag[e])?library_namespace.get_tag_list(e).forEach(function(e){var n=e[t];"string"==typeof n&&n&&is_controller(n=get_named(n.replace(/#[^#?]*$/,"")))&&(library_namespace.debug("add included: ["+n.id+"]",2,"check_resources"),n.included=!0)}):library_namespace.warn("check_resources: 無法判別 tag ["+e+"] 之 URL attribute！")}library_namespace.get_module_path=get_module_path,has_native_Set&&"undefined"!=typeof globalThis&&globalThis&&globalThis.globalThis===globalThis&&"function"==typeof Promise&&"function"==typeof Promise.allSettled&&String.prototype.trimEnd&&String.prototype.padEnd&&Object.entries&&Array.prototype.at&&String.prototype.matchAll&&library_namespace.debug("已經有近代的執行環境特性，跳過 shim、相容性 test 專用的 functions。"),library_namespace.inherit=inherit,library_namespace.check_resources=check_resources;var library_initializer=function(){if(setup_library_base_path(),library_namespace.is_WWW()){for(var e in tag_map)URL_of_tag[e]=tag_map[e][0],tag_map[e][1].split("|").forEach(function(t){tag_of_type[t]=e});["script","link"].forEach(function(e){check_resources(e)})}var t=library_namespace.env.script_config;library_namespace.is_Object(t)&&(t=t.run)&&library_initializer.queue.push(t),t=library_initializer.queue,library_initializer=function(){library_namespace.log("library_initializer: 已處理完畢。")};var n,r=library_namespace.get_old_namespace();return library_namespace.is_Object(r)&&(n=r.initializer)&&(Array.isArray(n)?Array.prototype.push.call(t,n):t.push(n)),(library_namespace.run=normal_run)(t)},old_onload;library_initializer.queue=[],library_namespace.is_WWW()&&"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState?(setup_library_base_path(),library_namespace.run=function(){if(!library_initializer)return normal_run.apply(null,arguments);library_initializer.queue.push(Array.prototype.slice.call(arguments))},document.addEventListener?document.addEventListener("DOMContentLoaded",library_initializer,!1):window.attachEvent?window.attachEvent("onload",library_initializer):(library_namespace.warn("No event listener! Using window.onload."),window.onload?(old_onload=window.onload,window.onload=function(){old_onload(),library_initializer()}):window.onload=library_initializer)):library_initializer()}(CeL),"function"!=typeof CeL||CeL.no_initialization||CeL.env.script_name===CeL.env.main_script_name&&function(e){if(e.run(["application.OS.Windows","application.OS.Windows.registry"]),e.reg){var t=e.env.registry_path_key_name,n=e.env.script_base_path,r=e.reg.getValue(t)||"(null)";if(r!==n&&(WScript.Echo("Change the base path of ["+e.Class+"] from:\n"+r+"\n to\n"+n+"\n\nkey name:\n"+t),e.reg.setValue.cid=1,e.reg.setValue(t,n,0,0,1),e.reg.setValue(e.env.registry_base+"main_script",n+e.env.script_name+e.env.script_extension,0,0,1),e.reg.setValue.cid=0),"object"==typeof args)if(args.length){var i,a,o,s=0,l=dBasePath("kanashimi\\www\\cgi-bin\\program\\log\\");if(!fso.FolderExists(l))try{fso.CreateFolder(l)}catch(e){l=dBasePath("kanashimi\\www\\cgi-bin\\game\\log\\")}if(!fso.FolderExists(l))try{fso.CreateFolder(l)}catch(e){2===alert("無法建立備份資料夾["+l+"]！\n接下來的操作將不會備份！",0,0,49)&&WScript.Quit(),l=""}for(;s<args.length;s++)if((o=parse_shortcut(args[s],1)).match(/\.(js|vbs|hta|[xs]?html?|txt|wsf|pac)$/i)&&isFile(o)){if(2===(i=alert("是否以預設編碼["+((a=autodetectEncode(o))===simpleFileDformat?"內定語系("+simpleFileDformat+")":a)+"]處理下面檔案？\n"+o,0,0,35)))break;6===i&&(l&&fso.CopyFile(o,l+getFN(o),!0),addCode(o))}}else 1===alert("We will generate a reduced ["+e.env.script_name+"]\n  to ["+e.env.script_name+".reduced.js].\nBut it takes several time.",0,0,33)&&reduceScript(0,e.env.script_name+".reduced.js")}else WScript.Echo("無法載入 module，您可能需要手動檢查 registry，看看是否設定到了錯誤的路徑？")}(CeL));function detect_require(e){return e.platform.nodejs?"application.platform.nodejs.":(this.has_ActiveX="object"==typeof WScript||"function"==typeof ActiveXObject||"object"==typeof Server&&Server.CreateObject,this.has_ActiveX?"application.OS.Windows.file.":void e.error("It seems I am running on an unknown OS."))}function initialization(){console.trace(CeL.wiki.parse("[[A|a]]")),console.log("CeL ready")}function at(e){if((e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]}"function"==typeof CeL&&CeL.run({name:"data.native",code:function module_code(library_namespace){var NOT_FOUND="".indexOf("_"),_=function(){};_.prototype={};var set_method=library_namespace.set_method,SUPERSCRIPT_NUMBER=superscript_integer.map=(superscript_integer.digits="⁰¹²³⁴⁵⁶⁷⁸⁹").split(""),SUBSCRIPT_NUMBER=subscript_integer.map=(subscript_integer.digits="₀₁₂₃₄₅₆₇₈₉").split("");function superscript_integer(){var e=[];return this.digits().forEach(function(t){e.push(SUPERSCRIPT_NUMBER[t])}),e.join("")}function subscript_integer(){var e=[];return this.digits().forEach(function(t){e.push(SUBSCRIPT_NUMBER[t])}),e.join("")}function pad(e,t,n,r){if("number"==typeof e&&e<0&&!r&&(!n||0===n))return"-"+pad(-e,t-1,"0");var i=t-(e=String(e)).length;if(i>0){n&&"string"==typeof n||(n="number"==typeof n?String(n):""===e||isNaN(e)?" ":"0");var a=n.length,o=new Array(a>1?Math.ceil(i/a):i);r?(o[0]=e,o.length++,(e=o.join(n)).length>t&&(e=e.slice(0,t))):a>1?(o.length++,e=o.join(n).slice(0,i)+e):(o.push(e),e=o.join(n))}return e}function fromCharCode(c){if(!isNaN(c))return String.fromCharCode(c);try{return eval("String.fromCharCode("+c+");")}catch(e){}if("string"==typeof c)return eval("String.fromCharCode("+n+")");if("object"==typeof c){var t="",d,i,a,n=[];if(c.length)a=c;else for(i in a=[],c)a.push(c[i]);for(i=0;i<a.length;i++)isNaN(c=a[i])&&isNaN(c=(""+a[i]).charCodeAt(0))||n.push(c);return eval("String.fromCharCode("+n+")")}}function encodeUC(e,t){if(!t||"utf8"==t)return encodeURI(e);var n=0,r=new ActiveXObject("ADODB.Stream"),i=[];for(r.Type=2,r.Charset=t,r.Open(),r.WriteText(e),r.Position=0,r.Charset="iso-8859-1",e=r.ReadText(),r.Close();n<e.length;n++)i.push((r=e.charCodeAt(n))<128?e.charAt(n):"%"+toASCIIcode(r,-1).toString(16).toUpperCase());return i.join("").replace(/ /g,"+")}function to_RegExp_pattern(e,t,n){return e=e.replace(t||/([.*?+^$|()\[\]\\{}])/g,"\\$1").replace(/^([\^])/,"\\^").replace(/(\$)$/,"\\$"),void 0===n?e:new RegExp(e,_.PATTERN_RegExp_flags.test(n)?n:"")}function ignore_first_char_case(e){var t=e.charAt(0),n=t.toUpperCase();return n===t&&n===(t=n.toLowerCase())||(e="["+n+t+"]"+e.slice(1)),e}function ignore_case_pattern(e,t){return(e=e.split("")).forEach(function(t,n){var r=t.toUpperCase();r===t&&r===(t=r.toLowerCase())||(e[n]="["+r+t+"]")}),e.join("")}function pattern_replace(e){return String(e).replace(this,this.replace_to)}function String_to_RegExp(e,t){if(t="string"==typeof t&&_.PATTERN_RegExp_flags.test(t)?{flags:t}:"function"==typeof t?{error_handler:t}:library_namespace.setup_options(t),"string"==typeof e){if("function"==typeof String_to_RegExp.preprocessor&&(e=String_to_RegExp.preprocessor(e)),"string"==typeof e&&e.length>1)if("/"===e.charAt(0)){library_namespace.debug({T:["Treat [%1] as RegExp.",e]},3,"String_to_RegExp");var n,r=e.match(_.PATTERN_RegExp);!r&&t.allow_replacement&&(r=e.match(_.PATTERN_RegExp_replacement))&&(n=r[2],r.splice(2,1));var i=_.PATTERN_RegExp_flags.test(t.flags)&&t.flags||(r?r[2]:String_to_RegExp.default_flags);try{try{e=new RegExp(r?r[1]:e.slice(1),i)}catch(t){try{if(!r)throw!0;e=new RegExp(r[1]),library_namespace.warn(["String_to_RegExp: ",{T:["Invalid flags: [%1]",i]}])}catch(e){library_namespace.warn(["String_to_RegExp: ",{T:["Illegal pattern: [%1]",r[1]]}])}}}catch(t){library_namespace.debug({T:["轉換模式 [%1] 出錯：並非 RegExp？ %2",e,t.message]},2,"String_to_RegExp")}n&&(e.replace_to=n,e.replace=pattern_replace)}else"\\"===e.charAt(0)&&"function"==typeof library_namespace.wildcard_to_RegExp&&(library_namespace.debug({T:["Treat pattern [%1] as Windows wildcard search string.",e]},3,"String_to_RegExp"),e=new RegExp(library_namespace.wildcard_to_RegExp(e)));if("string"==typeof e)try{e="function"==typeof t.error_handler?t.error_handler(e):new RegExp(e)}catch(t){library_namespace.debug({T:["無法轉換模式 [%1]！",e]},3,"String_to_RegExp")}}return e}function is_matched(e,t,n){if(e=String_to_RegExp(e,n),"string"!=typeof t){if(null==t)return e;t=String(t)}return library_namespace.is_RegExp(e)?t.match(e):t.indexOf(String(e))!==NOT_FOUND}SUPERSCRIPT_NUMBER["+"]="⁺",SUPERSCRIPT_NUMBER["-"]="⁻",SUBSCRIPT_NUMBER["+"]="₊",SUBSCRIPT_NUMBER["-"]="₋",_.pad=pad,_.parse_function=function e(t,n){if(!t)try{if("function"!=typeof(t=e.caller))return}catch(e){return}if("string"!=typeof t||(t=library_namespace.get_various(t))){var r=String(t),i=r.match(library_namespace.PATTERN_function);if(library_namespace.debug(typeof t+"\n"+r+"\n"+i,6),!i)throw new Error(1002,"語法錯誤！");return t!=i[1]&&library_namespace.warn({T:"函數名稱不相符，可能是用了 reference？"}),library_namespace.debug("function "+i[1]+"("+i[2]+"){\n"+i[3]+"\n}",9),{string:r,name:i[1],arguments:i[2].replace(/[\s\n]+/g,"").split(","),code:i[3]}}},_.toASCIIcode=function(e,t){var n,r=arguments.callee;if(!r.t){for(var i=129,a=r.t=[],o={8364:128,8218:130,402:131,8222:132,8230:133,8224:134,8225:135,710:136,8240:137,352:138,8249:139,338:140,381:142,8216:145,8217:146,8220:147,8221:148,8226:149,8211:150,8212:151,732:152,8482:153,353:154,8250:155,339:156,382:158,376:159};i<256;i+=2)a[i]=i;for(i in o)library_namespace.debug(i+" = "+o[i],6),a[0|i]=o[i]}return(n=t<0&&!isNaN(e)?e:e.charCodeAt(t||0))<128?n:r.t[n]||n},_.to_RegExp_pattern=to_RegExp_pattern,_.ignore_first_char_case=ignore_first_char_case,_.ignore_case_pattern=ignore_case_pattern,String_to_RegExp.default_flags="i",String_to_RegExp.preprocessor=function(e){var t;if(e.length<800&&(t=e.match(/^／((?:＼／|[^\\\/|?*":<>／\0-\x1f]+)+)／([a-z]*)(?:\.[^.]+)?$/)))try{library_namespace.debug("因為 pattern ["+e+'] 以 "／" 起首，可能是以 directory name / file name 充當 pattern，嘗試將之還原為 regular pattern。',2,"String_to_RegExp.preprocessor"),e=new RegExp(t[1].replace(/＼/g,"\\").replace(/／/g,"/").replace(/｜/g,"|").replace(/？/g,"?").replace(/＊/g,"*").replace(/((?:^|[^\\])(?:\\\\)*)\\([\\\/|?*])/g,function(e,t,n){return t+"[\\$2"+{"\\":"＼","/":"／","|":"｜","?":"？","*":"＊"}[n]+"]"}).replace(/＂/g,'["＂]').replace(/：/g,"[:：]").replace(/＜/g,"[<＜]").replace(/＞/g,"[>＞]").replace(/_/g,"[_\\r\\n\\t\\f\\v]"),t[2])}catch(e){}return e},_.is_matched=is_matched;var RegExp_flags="g"===/./g.flags?function(e){return e.flags}:function(e){return(e=""+e).slice(e.lastIndexOf("/")+1)},PATTERN_読み仮名;function renew_RegExp_flags(e,t){if(!t){for(var n in t="",RegExp_flags.flags)e[n]&&(t+=RegExp_flags.flags[n]);return t}var r,i=t.charAt(0),a="";if(i="+"===i?1:"-"===i?0:a=1,a)a=t;else for(var n in RegExp_flags.flags)((r=t.indexOf(RegExp_flags.flags[n],1)!==NOT_FOUND)&&i||!r&&e[n])&&(a+=RegExp_flags.flags[n]);try{return new RegExp(e.source,a)}catch(e){}}library_namespace.RegExp_flags=RegExp_flags,"flags"in RegExp.prototype||Object.defineProperty[library_namespace.env.not_native_keyword]||Object.defineProperty(RegExp.prototype,"flags",{get:function(){return RegExp_flags(this)}}),RegExp_flags.flags={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",unicode:"u",sticky:"y",indices:"d"},Object.values?_.PATTERN_RegExp_flags=Object.values(RegExp_flags.flags):(_.PATTERN_RegExp_flags=[],function(){for(var e in RegExp_flags.flags)_.PATTERN_RegExp_flags.push(RegExp_flags.flags[e])}()),_.PATTERN_RegExp_flags=_.PATTERN_RegExp_flags.join(""),_.PATTERN_RegExp=new RegExp(/^\/((?:\\[\s\S]|[^\/])+)\/([flags]*)$/.source.replace("flags",_.PATTERN_RegExp_flags)),_.PATTERN_RegExp_replacement=new RegExp(/^\/((?:\\[\s\S]|[^\/])+)\/((?:\\[\s\S]|[^\/])*)\/([flags]*)$/.source.replace("flags",_.PATTERN_RegExp_flags)),_.PATTERN_RegExp_flags=new RegExp(/^[flags]+$/.source.replace("flags",_.PATTERN_RegExp_flags)),_.renew_RegExp_flags=renew_RegExp_flags;var Unicode_category={Cc:"\0--",Cf:"­؀-؅؜۝܏᠎​-‏‪-‮⁠-⁤⁦-⁯\ufeff￹-￻",Cn:"͸͹΀-΃΋΍΢԰՗՘ՠֈ֋֌֐׈-׏׫-ׯ׵-׿؝܎݋݌޲-޿߻-߿࠮࠯࠿࡜࡝࡟-࢟ࢵ-࣢঄঍঎঑঒঩঱঳-঵঺঻৅৆৉৊৏-৖৘-৛৞৤৥ৼ-਀਄਋-਎਑਒਩਱਴਷਺਻਽੃-੆੉੊੎-੐੒-੘੝੟-੥੶-઀઄઎઒઩઱઴઺઻૆૊૎૏૑-૟૤૥૲-૸ૺ-଀଄଍଎଑଒଩଱଴଺଻୅୆୉୊୎-୕୘-୛୞୤୥୸-஁஄஋-஍஑஖-஘஛஝஠-஢஥-஧஫-஭஺-஽௃-௅௉௎௏௑-௖௘-௥௻-௿ఄ఍఑఩఺-఼౅౉౎-౔౗౛-౟౤౥౰-౷ಀ಄಍಑಩಴಺಻೅೉೎-೔೗-ೝ೟೤೥೰ೳ-ഀഄ഍഑഻഼൅൉൏-ൖ൘-൞൤൥൶-൸඀ඁ඄඗-඙඲඼඾඿෇-෉෋-෎෕෗෠-෥෰෱෵-฀฻-฾๜-຀຃຅ຆຉ຋ຌຎ-ຓຘຠ຤຦ຨຩຬ຺຾຿໅໇໎໏໚໛໠-໿཈཭-཰྘྽࿍࿛-࿿჆჈-჌჎჏቉቎቏቗቙቞቟኉኎኏኱኶኷኿዁዆዇዗጑጖጗፛፜፽-፿᎚-᎟᏶᏷᏾᏿᚝-᚟᛹-᛿ᜍ᜕-ᜟ᜷-᜿᝔-᝟᝭᝱᝴-᝿៞៟៪-៯៺-៿᠏᠚-᠟ᡸ-᡿᢫-᢯᣶-᣿᤟᤬-᤯᤼-᤿᥁-᥃᥮᥯᥵-᥿᦬-᦯᧊-᧏᧛-᧝᨜᨝᩟᩽᩾᪊-᪏᪚-᪟᪮᪯ᪿ-᫿ᭌ-᭏᭽-᭿᯴-᯻᰸-᰺᱊-᱌ᲀ-Ჿ᳈-᳏᳷ᳺ-᳿᷶-᷻἖἗἞἟὆὇὎὏὘὚὜὞὾὿᾵῅῔῕῜῰῱῵῿⁥⁲⁳₏₝-₟₿-⃏⃱-⃿↌-↏⏻-⏿␧-␿⑋-⑟⭴⭵⮖⮗⮺-⮼⯉⯒-⯫⯰-⯿Ⱟⱟ⳴-⳸⴦⴨-⴬⴮⴯⵨-⵮⵱-⵾⶗-⶟⶧⶯⶷⶿⷇⷏⷗⷟⹃-⹿⺚⻴-⻿⿖-⿯⿼-⿿぀゗゘㄀-㄄ㄮ-㄰㆏ㆻ-ㆿ㇤-㇯㈟㋿䶶-䶿鿖-鿿꒍-꒏꓇-꓏꘬-꘿꛸-꛿ꞮꞯꞸ-ꟶ꠬-꠯꠺-꠿꡸-꡿ꣅ-꣍꣚-꣟ꣾꣿ꥔-꥞꥽-꥿꧎꧚-꧝꧿꨷-꨿꩎꩏꩚꩛꫃-꫚꫷-꬀꬇꬈꬏꬐꬗-꬟꬧꬯ꭦ-꭯꯮꯯꯺-꯿힤-힯퟇-퟊퟼-퟿﩮﩯﫚-﫿﬇-﬒﬘-﬜﬷﬽﬿﭂﭅﯂-﯒﵀-﵏﶐﶑﷈-﷯﷾﷿︚-︟﹓﹧﹬-﹯﹵﻽﻾＀﾿-￁￈￉￐￑￘￙￝-￟￧￯-￸￾￿",Co:"-",Cs:"\ud800-\udfff",C:"\0--­͸͹΀-΃΋΍΢԰՗՘ՠֈ֋֌֐׈-׏׫-ׯ׵-؅؜؝۝܎܏݋݌޲-޿߻-߿࠮࠯࠿࡜࡝࡟-࢟ࢵ-࣢঄঍঎঑঒঩঱঳-঵঺঻৅৆৉৊৏-৖৘-৛৞৤৥ৼ-਀਄਋-਎਑਒਩਱਴਷਺਻਽੃-੆੉੊੎-੐੒-੘੝੟-੥੶-઀઄઎઒઩઱઴઺઻૆૊૎૏૑-૟૤૥૲-૸ૺ-଀଄଍଎଑଒଩଱଴଺଻୅୆୉୊୎-୕୘-୛୞୤୥୸-஁஄஋-஍஑஖-஘஛஝஠-஢஥-஧஫-஭஺-஽௃-௅௉௎௏௑-௖௘-௥௻-௿ఄ఍఑఩఺-఼౅౉౎-౔౗౛-౟౤౥౰-౷ಀ಄಍಑಩಴಺಻೅೉೎-೔೗-ೝ೟೤೥೰ೳ-ഀഄ഍഑഻഼൅൉൏-ൖ൘-൞൤൥൶-൸඀ඁ඄඗-඙඲඼඾඿෇-෉෋-෎෕෗෠-෥෰෱෵-฀฻-฾๜-຀຃຅ຆຉ຋ຌຎ-ຓຘຠ຤຦ຨຩຬ຺຾຿໅໇໎໏໚໛໠-໿཈཭-཰྘྽࿍࿛-࿿჆჈-჌჎჏቉቎቏቗቙቞቟኉኎኏኱኶኷኿዁዆዇዗጑጖጗፛፜፽-፿᎚-᎟᏶᏷᏾᏿᚝-᚟᛹-᛿ᜍ᜕-ᜟ᜷-᜿᝔-᝟᝭᝱᝴-᝿៞៟៪-៯៺-៿᠎᠏᠚-᠟ᡸ-᡿᢫-᢯᣶-᣿᤟᤬-᤯᤼-᤿᥁-᥃᥮᥯᥵-᥿᦬-᦯᧊-᧏᧛-᧝᨜᨝᩟᩽᩾᪊-᪏᪚-᪟᪮᪯ᪿ-᫿ᭌ-᭏᭽-᭿᯴-᯻᰸-᰺᱊-᱌ᲀ-Ჿ᳈-᳏᳷ᳺ-᳿᷶-᷻἖἗἞἟὆὇὎὏὘὚὜὞὾὿᾵῅῔῕῜῰῱῵῿​-‏‪-‮⁠-⁯⁲⁳₏₝-₟₿-⃏⃱-⃿↌-↏⏻-⏿␧-␿⑋-⑟⭴⭵⮖⮗⮺-⮼⯉⯒-⯫⯰-⯿Ⱟⱟ⳴-⳸⴦⴨-⴬⴮⴯⵨-⵮⵱-⵾⶗-⶟⶧⶯⶷⶿⷇⷏⷗⷟⹃-⹿⺚⻴-⻿⿖-⿯⿼-⿿぀゗゘㄀-㄄ㄮ-㄰㆏ㆻ-ㆿ㇤-㇯㈟㋿䶶-䶿鿖-鿿꒍-꒏꓇-꓏꘬-꘿꛸-꛿ꞮꞯꞸ-ꟶ꠬-꠯꠺-꠿꡸-꡿ꣅ-꣍꣚-꣟ꣾꣿ꥔-꥞꥽-꥿꧎꧚-꧝꧿꨷-꨿꩎꩏꩚꩛꫃-꫚꫷-꬀꬇꬈꬏꬐꬗-꬟꬧꬯ꭦ-꭯꯮꯯꯺-꯿힤-힯퟇-퟊퟼-﩮﩯﫚-﫿﬇-﬒﬘-﬜﬷﬽﬿﭂﭅﯂-﯒﵀-﵏﶐﶑﷈-﷯﷾﷿︚-︟﹓﹧﹬-﹯﹵﻽-＀﾿-￁￈￉￐￑￘￙￝-￟￧￯-￻￾￿",Hiragana:"ぁ-ゖゝ-ゟ",Katakana:"ァ-ヺヽ-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ｯｱ-ﾝ"},has_Unicode_flag;function new_RegExp(e,t){if(has_Unicode_flag)try{return new RegExp(e,t)}catch(e){}return library_namespace.is_RegExp(e)&&(void 0===t&&(t=e.flags),e=e.source),"string"==typeof t&&t.includes("u")&&(has_Unicode_flag||(t=t.replace(/u/g,"")),e=e.replace(/\\p{([A-Z][A-Za-z_]*)}/g,function(e,t){return Unicode_category[t]||e})),new RegExp(e,t)}"unicode"in RegExp.prototype||(Unicode_category.C=Unicode_category.C.replace("퟼","퟼-퟿")),Unicode_category.invalid=Unicode_category.C.replace("\0","\0-\b\v\f"),new_RegExp.category=Unicode_category;try{(has_Unicode_flag="unicode"in RegExp.prototype&&new RegExp(/\p{C}/,"u"))&&(has_Unicode_flag=has_Unicode_flag.test("‎")&&has_Unicode_flag.unicode&&"u"===has_Unicode_flag.flags)}catch(e){has_Unicode_flag=!1}function wildcard_to_RegExp(e,t){if(library_namespace.is_RegExp(e))return e;if(e&&"string"==typeof e){var n,r=wildcard_to_RegExp.w_chars;if(1&t&&!new RegExp("["+r+"]").test(e))return e;if(r="[^"+r+"]",n=e.replace(/[\\\/]+/g,library_namespace.env.path_separator).replace(/([().^$\-])/g,"\\$1").replace(/\*+/g,"\0*").replace(/\?+/g,function(e){return"\0{"+e.length+"}"}).replace(/([\[\]])/g,"\\$1").replace(/\0+/g,r),!(1&t)||e!==n)try{e=new RegExp(2&t?"^"+n+"$":n,"i")}catch(e){}return e}}function remove_Object_value(e,t){for(var n in e)e[n]===t&&delete e[n]}_.RegExp=new_RegExp,wildcard_to_RegExp.w_chars="*?",_.wildcard_to_RegExp=wildcard_to_RegExp,_.remove_Object_value=remove_Object_value;var PATTERN_SPACES=/[ _]+/g,PUNCTUATION_MARKS=/[ _,.;:?'"`~!@#$%^&*()\/\-\[\]<>]+/g,no_string_index,has_spread_syntax,PATTERN_char,PATTERN_char_with_combined,split_by_code_point;function String_covers(e,t,n){if((n=library_namespace.setup_options(n))&&"function"==typeof n.preprocessor&&(e=n.preprocessor(e),t=n.preprocessor(t)),n.ignore_marks?(e=e.replace(PATTERN_PUNCTUATION_MARKS,""),t=t.replace(PATTERN_PUNCTUATION_MARKS,"")):n.ignore_spaces&&(e=e.replace(PATTERN_SPACES,""),t=t.replace(PATTERN_SPACES,"")),e.length===t.length){if(e===t)return!0;if(!n||!n.force||"function"!=typeof n.equals)return!1}var r=1;e.length>t.length&&(r=t,t=e,e=r,r=-1),e=e.chars(!0),t=t.chars(!0);var i=0,a=e[0],o=n&&"function"==typeof n.equals?n.equals:String_covers.equals;return t.some(function(t,n){if(o(a,t)){if(++i===e.length)return n,!0;a=e[i]}}),i===e.length?r:0}function split_String_by_length_(e,t,n){for(var r,i,a,o=0,s=t,l="",c=0;c<e.length;){if(o!==NOT_FOUND)if((r=e.indexOf("<",o))!==NOT_FOUND)if((a=e.indexOf(">",r+1))===NOT_FOUND)o=r=NOT_FOUND;else for(o=a+1;r!==NOT_FOUND&&(i=e.indexOf("<",r+1))!==NOT_FOUND&&i<a;)r=i;else o=r=NOT_FOUND;for(0,r===NOT_FOUND&&(a=r=e.length);c+s<=r;)l+=e.substr(c,s)+(n?"\n":"<br />"),c+=s,s=t;l+=e.slice(c,a+1),s-=r-c,c=a+1}return l}function split_String_by_length(e,t){var n=this.valueOf(),r=[],i="<br />";if(!n||!e||e<1||!String.fromCharCode)return t?n.gText():n;if((n=n.turnU(t)).length<=e)return n;t||(n=n.replace(/<w?br([^>]*)>/gi,i)),n=n.split(i=t?"\n":i);try{for(var a=0;a<n.length;a++)r.push(split_String_by_length_(n[a],e,t))}catch(e){return this.valueOf()}return r.join(i)}function chunk(e){if((e|=0)<1)return[this];for(var t=0,n=this.length,r=[];t<n;t+=e)r.push(this.substr(t,e));return r}String_covers.equals=function(e,t){return e===t},String_covers.file_name_equals=function(e,t){return e===t||/^[ ・.]+$/.test(e+t)||/^[-～]+$/.test(e+t)||/^[［\[]+$/.test(e+t)||/^[］\]]+$/.test(e+t)},set_method(String,{covers:String_covers,similarity:similarity_coefficient});try{no_string_index="01",no_string_index=!("1"===no_string_index[1])}catch(e){no_string_index=!0}try{has_spread_syntax=eval("[...'ab'].join(',')==='a,b'")}catch(e){}try{PATTERN_char=new RegExp(/[\s\S]/.source,"ug"),PATTERN_char_with_combined=new RegExp(/[\s\S][\u0300-\u036F\uFE20-\uFE2F\u20D0-\u20FF\u1DC0-\u1DFF\u1AB0-\u1AFF]*/.source,"ug"),split_by_code_point=function(e){return this.match(e?PATTERN_char_with_combined:PATTERN_char)||[]}}catch(e){var PATTERN_surrogate=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;PATTERN_char=/[\uD800-\uDBFF][\uDC00-\uDFFF]|[\s\S]/g,PATTERN_char_with_combined=/(?:[\uD800-\uDBFF][\uDC00-\uDFFF]|[\s\S])[\u0300-\u036F\uFE20-\uFE2F\u20D0-\u20FF\u1DC0-\u1DFF\u1AB0-\u1AFF]*/g,split_by_code_point=function(e){return e||PATTERN_surrogate.test(this)?this.match(e?PATTERN_char_with_combined:PATTERN_char)||[]:this.split("")}}function codePoints(){return split_by_code_point.call(this).map(function(e){return e.codePointAt(0)})}function get_intermediate_Array(e){var t;e&&e[0]&&(e[1]?(t=e[0].indexOf(e[1],e[3]))!==NOT_FOUND&&(t+=e[1].length):t=0,(e[3]=t)===NOT_FOUND||e[2]&&(e[3]=e[0].indexOf(e[2],t))===NOT_FOUND||(e[4]=e[2]?e[0].slice(t,e[3]):t?e[0].slice(t):e[0]));return e}function get_intermediate(e,t,n,r,i){return!e||(t?(r=e.indexOf(t,0|r))!==NOT_FOUND&&(r+=t.length):r=0,library_namespace.debug("head index: "+r,4),r===NOT_FOUND||n&&(n=n.tail?e.lastIndexOf(n.tail):e.indexOf(n,r))===NOT_FOUND)?i?[NOT_FOUND]:void 0:(t=n?e.slice(r,n):r>0?e.slice(r):e,i?[n||e.length,t]:t)}function next_intermediate(e){if(this[3]!==NOT_FOUND){var t=get_intermediate(this[0],this[1],this[2],this[3],!0);if(library_namespace.debug("Get ["+t+"]",4),(this[3]=t[0])!==NOT_FOUND)return this[4]=t[1],this}}function search_intermediate(e){return this.next(),this}function intermediate_result(){return this[3]!==NOT_FOUND&&this[4]||""}function intermediate_between(){return String.prototype.between.apply(this.toString(),arguments)}function deprecated_find_between(e,t,n){var r=[this,e,t,0|n];return r.next=next_intermediate,r.search=search_intermediate,r.toString=intermediate_result,r}function find_between(e,t,n){n|=0;var r=this,i=e.length,a=t.length;return function(){if(n!==NOT_FOUND&&(n=r.indexOf(e,n))!==NOT_FOUND){var o=r.indexOf(t,n+=i);if(o!==NOT_FOUND){var s=r.slice(n,o);return n=o+a,s}n=NOT_FOUND}}}function all_between(e,t,n){n|=0;for(var r=[],i=e.length,a=t.length;n!==NOT_FOUND&&(n=this.indexOf(e,n))!==NOT_FOUND;){var o=this.indexOf(t,n+=i);if(o===NOT_FOUND)break;r.push(this.slice(n,o)),n=o+a}return r}function each_between(e,t,n,r,i){if(Array.isArray(e)&&"function"==typeof t){if(i=r,r=n,n=t,!Array.isArray(e)||2!==e.length)throw"string"==typeof e&&library_namespace.error("If you needs cut string into small pieces, please using string.split().slice(1).forEach() !"),new TypeError("Invalid head type");t=e[1],e=e[0]}i|=0;var a,o=e?e.length:0,s=t?t.length:0;for(r||(r=this);!t&&a>0?(i=a)<this.length:i!==NOT_FOUND&&(!e||(i=this.indexOf(e,i))!==NOT_FOUND);){if((a=this.indexOf(t||e,i+=o))===NOT_FOUND){if(t)break;a=this.length}n.call(r,this.slice(i,a),i,a),i=a+s}}function set_bind(e,t){return"boolean"!=typeof t&&(t=e.length>1),t?function(t){return arguments.length<2?e(this,t):((t=Array.prototype.slice.call(arguments)).unshift(this),e.apply(e,t))}:function(t){return e(this,t)}}function set_bind_valueOf(e,t){var n=function(e){switch(library_namespace.is_type(e)){case"Boolean":case"Number":case"String":e=e.valueOf()}return e};return t?function(t){return arguments.length<2?e(n(this),t):((t=Array.prototype.slice.call(arguments)).unshift(n(this)),e.apply(e,t))}:function(t){return e(n(this),t)}}_.get_intermediate=get_intermediate;var need_valueOf=!1;String.prototype.test_valueOf=function(){"string"!=typeof this&&(this&&"string"==typeof this.valueOf()?need_valueOf=!0:library_namespace.error("set_bind: 無法判別是否該使用 .valueOf()！"))},".".test_valueOf();try{delete String.prototype.test_valueOf}catch(e){String.prototype.test_valueOf=void 0}function unique_and_sort_Array(e,t){t?e.sort(t):e.sort();for(var n=1,r=-1;n<e.length;n++)e[n]===e[n-1]?r<0&&(r=n):r>=0&&(e.splice(r,n-r),n=r,r=-1);return r>=0&&e.splice(r,n-r),e}_.set_bind=need_valueOf?set_bind_valueOf:set_bind;var type_index={string:0,number:1,boolean:2,undefined:3};function deprecated_unique_Array(e){var t=[];if(e){var n;this.forEach(function(e){n!==e&&t.push(e),n=e})}else{var r=Object.create(null);this.forEach(function(e){var n=typeof e;n in type_index?e in r&&type_index[n]in r[e]||(t.push(e),(r[e]=[])[type_index[n]]=null):t.indexOf(e)===NOT_FOUND&&t.push(e)})}return t}function unique_sorted_Array(e){var t,n;return this.filter(function(r){var i=e?e(r):r,a=n?!Object.is(t,i):n=!0;return t=i,a})}function Array_intersection(e,t,n,r){if(!0===n&&(r=!0,n=null),!r){var i="function"==typeof n?function(e,t){return general_ascending(n(e),n(t))}:general_ascending;e=e.clone().sort(i),t=t.clone().sort(i)}for(var a=0,o=0,s=[];a<e.length&&o<t.length;a++){var l=e[a];n&&(l=n(l));do{var c=t[o];if(n&&(c=n(c)),!(c<l)){c===l&&(o++,s.push(l));break}o++}while(o<t.length)}return s}var has_native_Map=!Map[library_namespace.env.not_native_keyword],addDenominationSet,addDenomination;function Array_intersection_Map(e,t,n,r){if(!0===n&&(r=!0,n=null),r)return Array_intersection(e,t,n,r);var i=new Map;return e.forEach(function(e){var t=n?n(e):e;i.has(t)||i.set(t,null)}),t.filter(function(e){var t=n?n(e):e;return i.has(t)})}function count_occurrence(e,t,n){return(isNaN(n)||(n|=0)<0)&&(n=0),n>0&&(e=e.slice(n)),e.split(t).length-1}function determine_line_separator(e){for(var t,n=/\r?\n|\r/g,r=0,i=0,a=0;t=n.exec(e);)"\r\n"===t[0]?r++:"\n"===t[0]?a++:i++;return r>a&&r>i?"\r\n":a>i&&a>r?"\n":i>a&&i>r?"\r":library_namespace.env.line_separator}function slow_to_fixed(e,t){var n,r,i=this.valueOf();return isNaN(i)?i:(isNaN(e)||(e=Math.floor(e))<0?e=10:e>20&&(e=16),!t&&Number.prototype.toFixed?parseFloat(i.toFixed(e).replace(/\.0+$/,"")):(i<0&&(r=!0,i=-i),(n=(i=i.toString(10)).indexOf("e"))!==NOT_FOUND?"-"===i.charAt(n+1)?0:i:(library_namespace.debug(i,2),(n=i.indexOf("."))!==NOT_FOUND&&n+1+e<i.length&&(t?(0!=(i="00000000000000000000"+Math.round(i.slice(0,n++)+i.substr(n,e)+"."+i.charAt(n+e)).toString(10))&&library_namespace.debug(i+","+i.length+","+e+","+i.substr(0,i.length-e)+","+i.substr(t),2),t=i.length-e,i=i.slice(0,t)+"."+i.substr(t)):i=i.slice(0,n+1+e)),i?parseFloat((r?"-":"")+i):0)))}function deprecated_to_fixed(e,t){var n,r=this.valueOf();return isNaN(r)?r:((isNaN(e)||e<0)&&(e=8),t?(n=(r=""+r).indexOf(".")+1)&&(r=r.slice(0,n+(e||e-1))):r=(r=(r=Math.round(Math.pow(10,e)*r))<0?"-"+"0".repeat(e)+-r:"0".repeat(e)+r).slice(0,n=r.length-e)+"."+r.substr(n),parseFloat(r||0))}function native_to_fixed(e){return e<=0?Math.round(this):parseFloat(this.toFixed(e||12))}_.determine_line_separator=determine_line_separator;var to_fixed=slow_to_fixed;function non_negative_modulo(e,t){return(e%=t)<0&&(e+=t),e}function dQuote(e,t,n){var r;if(e=String(e),n&&(e=e.replace(new RegExp("["+n+"]+$"),"")),(isNaN(t)||t<0)&&(t=0),t){for(var i="";e;)i+="+"+dQuote(e.slice(0,t))+"\n",e=e.substr(t);return i.substr(1)}return(e=e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/([\0-\37\x7f\xff])/g,function(e,t){var n=t.charCodeAt(0);return n<64?"\\"+n.toString(8):"\\x"+(n<16?"0":"")+n.toString(16)})).indexOf(r="'")!==NOT_FOUND&&(r='"'),e.indexOf(r)!==NOT_FOUND&&(library_namespace.debug("Can't determine quotation mark, the resource may cause error.\n"+e),e=e.replace(new RegExp(r="'","g"),"\\'")),r+e+r}_.to_fixed=slow_to_fixed,_.dQuote=dQuote;var default_KEY_reference="REF|",has_spread_operator,clone_Object;function create_reference_map(e,t,n){void 0===n&&(n=default_KEY_reference);var r=new Map,i=Object.create(null),a=0;return JSON.stringify(e,function(e,o){if("object"==typeof o){if(r.has(o))return r.get(o);for(;(e=n+a++)in i;)if(t)throw new Error("create_reference_map: Invalid index "+e+". It should not happen.");i[e]=o,r.set(o,e)}else if("object"!=typeof o&&t&&o in i)this[e]=i[o];else if("string"==typeof o&&!t&&o.startsWith(n))throw new Error("create_reference_map: You should specify another KEY_reference instead of "+JSON.stringify(n)+". Confused value: "+o);return o})}function stringify_circular(e,t){return create_reference_map(e,!1,t)}function parse_circular(e,t){var n=JSON.parse(e);return create_reference_map(n,!0,t),n}function Object_filter(e,t){if("function"!=typeof t||"object"!=typeof e)return e;var n,r=[];for(n in e)t(e[n],n,e)||r.push(n);r.length>0&&r.forEach(function(t){delete e[t]})}"object"==typeof JSON&&"function"==typeof JSON.parse&&set_method(JSON,{stringify_circular:stringify_circular,parse_circular:parse_circular}),_.checkSQLInput=function(e){return e?(maxInput&&e.length>maxInput&&(e=e.slice(0,maxInput)),e.replace(/\\u([\da-f]{4})/g,function(e,t){return String.fromCharCode(t)}).replace(/\\/g,"\\\\").replace(/\x00/g,"\\0").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/'/g,"''")):""},_.parse_number=function(e){var t=typeof e;if("number"===t)return e;if(!e||"string"!==t)return NaN;if(e=e.replace(/(\d),(\d)/g,"$1$2"),t=e.match(/(-?[\d.]+)\s+([\d.]+)\/([\d.]+)/)){var n=parseFloat(t[1]),r=parseFloat(t[2])/parseFloat(t[3]);return n+("-"===t[1].charAt(0)?-r:r)}if(t=e.match(/(-?[\d.]+)\/([\d.]+)/))return parseFloat(t[1])/parseFloat(t[2])};try{has_spread_operator=eval("clone_Object=function(object){return {...object};};")}catch(e){}var Object_clone=function(e,t,n){if(!e||"object"!=typeof e)return e;if(t)return JSON.parse(JSON.stringify(e));if(!n){if(Array.isArray(e))return e.clone();if(clone_Object)return clone_Object(e)}return Object.assign(n||Object.create(Object.getPrototypeOf(e)),e)};function Object_is_empty(e){if(null!==e)for(var t in e)if(!Object.hasOwn||Object.hasOwn(e,t))return!1;return!0}function Object_clean(e,t){e&&"object"==typeof e&&(t>0&&!0!==t&&t--,Object.keys(e).forEach(function(n){t&&Object_clean(e[n],t),delete e[n]}))}function Object_reverse_key_value(e){var t=Object.create(null);if(!e)return t;for(var n in e)Object.hasOwn&&!Object.hasOwn(e,n)||(t[e[n]]=n);return t}function Object_size(e){if(null===e)return 0;var t=0;for(var n in e)Object.hasOwn&&!Object.hasOwn(e,n)||t++;return t}function the_same_content(e,t){if(e===t)return!0;if(e!=e&&t!=t)return!0;if("object"!=typeof e||"object"!=typeof t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(!(a in t&&the_same_content(e[a],t[a])))return!1}return!0}set_method(Object,{filter:Object_filter,clone:Object_clone,is_empty:Object_is_empty,the_same_content:the_same_content,clean:Object_clean,reverse_key_value:Object_reverse_key_value,size:Object_size});var Array_clone=Array.prototype.slice;function pushUnique(e,t,n){if(!e||!t)return e;var r,i;if(!n)for(n=new Array,r=0;r<e;r++)n[e[r]]=r;for(r in"object"!=typeof t&&(r=t,(t=new Array).push(r)),t)n[t]||(n[e[i=e.length]=t[r]]=i);return e}function append_to_Array(e,t){if(Array.isArray(e)&&(t?0<(t=parseInt(t))&&t<e.length:e.length>0)){t>0&&(e=Array.prototype.slice.call(e,t));try{Array.prototype.push.apply(this,e)}catch(n){for(;t<e.length;)Array.prototype.push.call(this,e[t++])}}return this}function array_frequency(e,t){var n=0;if(void 0!==t)return this.forEach(library_namespace.is_RegExp(pattern)?function(e){t.test(e)&&n++}:function(e){e===t&&n++}),n;var r=Object.create(null);if(!e)return this.forEach(function(e){e in r?r[e]++:r[e]=1}),r;var i,a=0;return this.forEach(function(t,n){var o;o=t in r?++r[t]:r[t]=1,!0===e?a<o&&(a=o,i=n):a<=o&&((a<o||!(e<0?this[i]<(isNaN(t)?t:+t):this[i]>(isNaN(t)?t:+t)))&&(i=n),a=o)},this),{hash:r,value:this[i],count:a,index:i}}function new_Array_instance(e,t,n){var r;return e===Array?n&&1<n.length?Array.prototype.push.apply(r=new Array,n):r=new Array(n&&n.length?n[0]:0):r=n?new e(n[0]):new e,t?set_method(r,this.prototype,null):Object.setPrototypeOf(r,this.prototype),r}function Array_derive(e,t){return t||(t=Array),Object.setPrototypeOf(e.prototype,t.prototype),new_Array_instance.bind(e,t,!1)}function Array_derive_no_proto(e,t){return new_Array_instance.bind(e,t||Array,!0)}function general_ascending(e,t){return e<t?-1:e>t?1:0}function general_descending(e,t){return e<t?1:e>t?-1:0}function Number_ascending(e,t){return e-t}function Number_descending(e,t){return t-e}function search_sorted_Array(e,t,n){!library_namespace.is_RegExp(t)||n&&n.comparator?n||"object"!=typeof t&&"function"!=typeof t||(n=t,t=void 0):(t.global&&library_namespace.error("search_sorted_Array: 當匹配時，不應採用 .global！ "+t),n||(n=Object.create(null)),n.comparator=function(e){return t.test(e)?-1:1},"near"in n||(n.near=!0)),"function"==typeof n?n={comparator:n}:"boolean"==typeof n||Array.isArray(n)?n={found:n}:library_namespace.is_digits(n)?n={start:n}:library_namespace.is_Object(n)||(n=Object.create(null));for(var r,i,a=!0,o=n.comparator||("number"==typeof e[0]?Number_ascending:search_sorted_Array.default_comparator),s=0|n.start||0,l=s,c=s,_=0|n.last||(n.length?n.length|0+s-1:e.length-1);;){if(l>_){i>0&&c>s&&c--;break}if((i=o(e[c=l+_>>1],t))>0)_=c-1;else{if(!(i<0)){a=!1;break}l=c+1}}return r=a&&n.near||n.found,Array.isArray(r)?r[c]:"function"==typeof r?r.call(e,c,a):a&&(!r||library_namespace.is_RegExp(t)&&0===c&&o(e[c])>0)?NOT_FOUND:c}function first_matched(e,t,n){if(!e||!t)return NOT_FOUND;var r=e.length;if(0===r)return NOT_FOUND;var i,a=library_namespace.is_RegExp(t),o=!a&&library_namespace.is_Function(t),s=0;for(a&&t.global&&library_namespace.error("first_matched: 當匹配時，不應採用 .global！ "+t);s<r;){var l=(s+r)/2|0;if(i=a?t.test(e[l]):o?t(e[l]):e[l].includes(t),n?!i:i)r=l;else{if(s===l)break;s=l}}return n?0!==s||i?(library_namespace.debug("return "+s,3,"first_matched"),s):(library_namespace.debug("Not found.",3,"first_matched"),NOT_FOUND):r===e.length?NOT_FOUND:r}function merge_unduplicated_sequence(e){var t=Object.create(null);function n(e,n){var r=t[e];r||(r=t[e]=[Object.create(null),Object.create(null)]),n>0&&(r[0][this[n-1]]=!0),n+1<this.length&&(r[1][this[n+1]]=!0)}e.forEach(function(e){"string"==typeof e&&(e=e.split("")),"function"==typeof e.forEach?e.forEach(n,e):library_namespace.warn("merge_unduplicated_sequence: Invalid sequence: ["+e+"]")});for(var r=[[],[]];;){var i=[[],[]],a=[];for(var o in t)o in a||(Object.is_empty(t[o][0])?(i[0].push(o),a.push(o)):Object.is_empty(t[o][1])&&(i[1].push(o),a.push(o)));if(0===a.length)break;if(1===i[0].length)r[0].push(i[0][0]);else if(i[0].length>0)throw new Error("Invalid starts: "+i[0]);if(1===i[1].length)r[1].unshift(i[1][0]);else if(i[1].length>0)throw new Error("Invalid ends: "+i[1]);a.forEach(function(e){var n=t[e];for(var r in n[0])delete t[r][1][e];for(var r in n[1])delete t[r][0][e];delete t[e]})}return r=r[0].concat(r[1])}function run_serial_asynchronous(e,t,n,r,i,a){var o;if(Array.isArray(t)&&(t=(o=t).length),"function"==typeof n?(a=i,i=r,r=n,n=0):Array.isArray(n)?(t=n[1],n=n[0]):n|=0,a&&n<=t){var s=function(e){if(0==--l||"quit"===e)return s=library_namespace.null_function,void("function"==typeof r&&r.call(i));library_namespace.debug(l+" left...",3,"run_parallel_asynchronous")};i&&(e=e.bind(i));var l=0;if(o)0===o.length?setImmediate(s,"quit"):o.forEach(function(t,n){l++,setImmediate(e,s,t,n,o,c)});else for(;n<=t;n++,l++)setImmediate(e,s,n,n,o,c)}else(function a(){if(o?n===o.length:n>t)"function"==typeof r&&r.call(i);else{library_namespace.debug(n+"/"+t,3,"run_serial_asynchronous");var s=n++,l=[a,o?o[s]:s,s,o];i&&i.run_interval>=0?(library_namespace.log_temporary(n+"/"+t+" Waiting "+i.run_interval+" ms to run"),setTimeout(function(){e.apply(i,l)},i.run_interval)):e.apply(i,l)}})();function c(){return{left:l}}}function run_parallel_asynchronous(e,t,n,r,i){run_serial_asynchronous(e,t,n,r,i,!0)}function Levenshtein_distance(e,t){e=(e||"").chars(!0),t=(t||"").chars(!0);var n=e&&e.length||0,r=t&&t.length||0;if(0===n)return r;if(0===r)return n;if(n===r&&e===t)return 0;for(var i=new Array(r+1),a=0;a<=r;a++)i[a]=a;for(a=0;a<n;a++){for(var o=0,s=a+1,l=[s];o<r;o++)s=Math.min(s+1,i[o+1]+1,i[o]+(e[a]===t[o]?0:1)),l.push(s);i=l}return l[r]}function LCS_length(e,t,n){"string"==typeof e&&(e=e.chars(!0)),"string"==typeof t&&(t=t.chars(!0));var r=!n,i=e.length,a=t.length,o=i*(r?2:a);o="function"==typeof Uint16Array?new Uint16Array(o):new Array(o).fill(0);for(var s=0,l=0,c=l-i;s<a;s++){r&&(s%2==0?c=0:l=0);for(var _=t[s],u=0;u<i;u++,l++,c++)_===e[u]?o[l]=u>0&&s>0?o[c-1]+1:1:(o[l]=u>0?o[l-1]:0,c>=0&&o[l]<o[c]&&(o[l]=o[c]))}if(r)return o[l-1];if(library_namespace.is_debug(3)){library_namespace.debug("to\\f\t"+e.join("\t")+"\n"+"-".repeat(8*(e.length+2)));for(s=0;s<a;s++)library_namespace.debug(t[s]+"\t"+o.slice(s*i,(s+1)*i).join("\t"));library_namespace.debug("-".repeat(8*(e.length+3)))}return o}function LCS(e,t,n){var r="treat_as_String"in(n=library_namespace.setup_options(n))?n.treat_as_String:"string"==typeof e&&"string"==typeof t,i="line"in n?n.line:r&&(e.includes("\n")||t.includes("\n")),a=n.separator||(i?"\n":"");"string"==typeof e?e=a?e.split(a):e.chars(!0):e||(e=[]),"string"==typeof t?t=a?t.split(a):t.chars(!0):t||(t=[]);var o,s,l=e.length,c=l-1,_=t.length-1,u=n.trace_Array||LCS_length(e,t,!0),p=[],d=!!n.all,f=n.index||d,g=!(!n.diff&&!n.with_diff),h=g&&!d&&!n.with_diff;function m(e){return e.map(function(e){return e.join("\0")}).unique().map(function(e){return e.split("\0")})}function y(e,t){if(!Array.isArray(e))return r?"":e;if(n.diff_line)return e;var i=e[0];return i===e[1]&&(e===o?o=[i,i]:s=[i,i]),e=t.slice(i,e[1]+1),r?e.join(a):e}function b(n,r){if(g&&(o||s)){0;var i=[y(o,e),y(s,t)];0,i.index=[o,s],i.last_index=[n,r],p.unshift(i),o=s=void 0}}var v=[[]];if(isNaN(c)||isNaN(_))throw library_namespace.error("LCS: isNaN(from:"+c+") || isNaN("+_+")"),new Error("LCS: isNaN(from_index) || isNaN(to_index)");try{!function n(r,i,a){for(;;){if(r<0||i<0)return-1===r&&-1===i||(-1===i?Array.isArray(o)?o[0]=0:o=[0,r]:-1===r?Array.isArray(s)?s[0]=0:s=[0,i]:library_namespace.warn("LCS.backtrack: Invalid situation!")),void b(r,i);if(e[r]!==t[i]){var c,_;if(r>0&&(c=i*l+r)>0&&u[c]===u[c-1])return d&&c>=l&&u[c]===u[c-l]&&n(r,i-1,_=a.map(function(e){return e.clone()})),g&&(Array.isArray(o)?o[0]=r:o=[r,r]),n(r-1,i,a),void(d&&(a=m(a.append(_))));g&&(s?s[0]=i:s=[i,i]),i--}else{if(!h){var p=f?2===f?i:r:e[r];d?a.forEach(function(e){e.unshift(p)}):a[0].unshift(p)}b(r,i),r--,i--}}}(c,_,v)}catch(e){throw new RangeError("Maximum call stack size exceeded @ backtrack()")}return d&&(v=m(v)),!r&&f||(v=v.map(function(i){return f&&(i=i.map(function(n){return 2===f?t[n]:e[n]})),r&&!n.index?i.join(a):i})),g&&!h&&(r&&(v[0]=new String(v[0])),v[0].diff=p),d||(v=h?p:v[0]),n.with_list&&("object"!=typeof v&&(v=new String(v)),v.from=e,v.to=t),v}function get_corresponding_index(e,t,n){if(0===e.length)return t;for(var r=n?1:0,i=1-r,a=0,o=0;;){var s=e[a++],l=s.index[r];if(l||(l=[l=s.last_index[r]+1,l]),t>l[1]){if(a<e.length)continue;var c;l=s.index[r],o=((c=s.index[i])?c[1]:s.last_index[i])-(l?l[1]:s.last_index[r]);break}if(t<l[0]){o=s.last_index[i]-s.last_index[r];break}return(c=s.index[i])||(c=[c=s.last_index[i]+1,c]),l[1]===l[0]||c[1]===c[0]?s.index[r]?c[0]:c[1]+1:c[0]+(t-l[0])*(c[1]-c[0])/(l[1]-l[0])}return t+o}function diff_with_Array(e,t){function n(e,t,n){t&&(Array.isArray(n)&&(n=n[0]),Array.isArray(t)?e.append(t.filter(function(t,r){if(t)return e.index.push(n+r),!0})):(e.index.push(n),e.push(t)))}var r=LCS(this||[],e||[],Object.assign({diff:!0},t)),i=[],a=[],o=i.index=[],s=Object.create(null);return a.index=[],r.forEach(function(e){n(i,e[0],e.index[0]),n(a,e[1],e.index[1])}),i.forEach(function e(t,n){var r=a.indexOf(t);if(r!==NOT_FOUND)return s[i.index[n]]=a.index[r],a.index.splice(r,1),a.splice(r,1),i.index.splice(n,1),void(i[n]=!1);"string"==typeof t&&(t=t.chars(!0));var o,l=0;if(a.forEach(function(e,n){"string"==typeof e&&(e=e.chars(!0));var r=LCS_length(t,e,!0),i=r.at(-1);l<i&&(l=i,o=[n,r,e])}),o){var c=t.diff_with(o[2],{trace_Array:o[1]});c[1]?a[o[0]]=c[1]:a.splice(o[0],1),i[n]=t=c[0],t&&e(t,n)}}),i=0===(i=i.filter(function(e){return!!e})).length?[]:[i.map(function(e){return Array.isArray(e)?e.join(""):e})],a.length>0&&(a=a.map(function(e){return Array.isArray(e)?e.join(""):e}),i[1]=a),i.index=o,i.moved=s,i}function diff_with_String(e,t){return diff_with_Array.call((this||"").split("\n"),Array.isArray(e)?e:(e||"").split("\n"),t)}function coloring_diff(e,t,n){n=library_namespace.new_options(n);var r=library_namespace.LCS(e,t,{diff:!0});e=[e],t=[t];var i,a=n.normal_style||{fg:"white",bg:"black"},o=n.diff_style||{fg:"red",bg:"white"},s=n.insertion_style||{fg:"white",bg:"green"};function l(e,t,n){if(t){var r=t[1]+1,i=e.shift();e.unshift(i.slice(0,t[0]),n?s:o,i.slice(t[0],r),a,i.slice(r))}}for(;i=r.pop();){var c=i.index[0],_=i.index[1];l(e,c,!_),l(t,_,!c)}var u=Array.isArray(n.headers)?n.headers:[];return e.unshift(u[0]||"",a),t.unshift(u[1]||"",a),n.header_style&&(e.unshift("",n.header_style),t.unshift("",n.header_style)),n.print&&(library_namespace.slog(e),library_namespace.slog(t)),[e,t]}function longest_common_starting_length(e){if((e=e.filter(function(e){return"string"==typeof e})).length<=1)return e[0]?e[0].length:0;for(var t=0,n=e[0].length;t<n;t++)for(var r=e[0].charAt(t),i=1;i<e.length;i++)if(r!==e[i].charAt(t))return t;return t}function toTitleCase(e){var t=this.trim();return e&&(t=t.toLowerCase()),t.replace(/(^|\s)((\w)(\w*))/g,function(e,t,n,r,i){return n in toTitleCase.lower?e:n in toTitleCase.upper?e.toUpperCase():(t?" ":"")+r.toUpperCase()+i}).replace(/^\w/,function(e){return e.toUpperCase()}).replace(/\s(\w)([\w\-]*)$/,function(e,t,n){return" "+t.toUpperCase()+n})}function remove_head_tail(e,t,n,r){var i,a,o;n?i=t===n:(n=t,i=!0);for(var s=t.length,l=n.length;;){if(i){if((a=e.indexOf(t))===NOT_FOUND)return e;if((o=e.indexOf(n,a+s))===NOT_FOUND)return e}else{if((o=e.indexOf(n))===NOT_FOUND)return e;if((a=e.lastIndexOf(t,o-s))===NOT_FOUND)return e}e=e.slice(0,a)+(void 0===r?"":r+e.slice(a+s,o)+r)+e.slice(o+l)}}function replace_till_stable(e,t,n){for(var r;r!==e;)e=(r=e).replace(t,n);return e}function replace_check_near(e,t,n,r,i){var a,o=[],s=0;for(t.global||library_namespace.debug("The pattern doesn't has 'global' flag!",2,"replace_check_near");a=t.exec(e);){library_namespace.debug(t+": "+a,5,"replace_check_near");var l=e.slice(s,a.index),c=a.index+a[0].length;if(r&&!r(l)||i&&!i(e.slice(c))||(s=t.lastIndex,library_namespace.debug(l+","+a[0]+","+a[0].replace(t,n),5,"replace_check_near"),o.push(l,a[0].replace(t,n)),t.lastIndex=s,s=c),!t.global)break}if(s<e.length){if(0===s)return e;o.push(e.slice(s))}return o.join("")}Array_clone=Array_clone.call.bind(Array_clone),"2,3"!==Array_clone([2,3]).join(",")&&(Array_clone=function(){return this.slice(0)}),set_method(Array,{clone:Array_clone,derive:Object.setPrototypeOf?Array_derive:Array_derive_no_proto,intersection:has_native_Map?Array_intersection_Map:Array_intersection}),_.general_ascending=general_ascending,_.general_descending=general_descending,_.ascending=Number_ascending,_.descending=Number_descending,search_sorted_Array.default_comparator=general_ascending,_.search_sorted_Array=search_sorted_Array,_.first_matched=first_matched,_.merge_sequence=merge_unduplicated_sequence,_.run_serial=run_serial_asynchronous,_.run_parallel=run_parallel_asynchronous,_.edit_distance=Levenshtein_distance,_.LCS_length=LCS_length,_.LCS=LCS,LCS.corresponding_index=get_corresponding_index,_.coloring_diff=coloring_diff,_.longest_common_starting_length=longest_common_starting_length,toTitleCase.add_exception=function(e,t){toTitleCase.lower||(toTitleCase.lower=Object.create(null)),toTitleCase.upper||(toTitleCase.upper=Object.create(null));var n=t?toTitleCase.upper:toTitleCase.lower;"string"==typeof e&&(e=e.split(",")),Array.isArray(e)?e.forEach(function(e){n[e]=!0}):Object.assign(n,e)},toTitleCase.add_exception("at,by,down,for,from,in,into,like,near,of,off,on,onto,over,past,to,upon,with,and,but,or,yet,for,nor,so,as,if,once,than,that,till,when,to,a,an,the"),toTitleCase.add_exception("id,tv,i,ii,iii,iv,v,vi,vii,viii,ix,x,xi,xii,xiii",!0);var PATTERN_bigrams=/.{2}/g;function similarity_coefficient(e,t){var n=0,r=e.match(PATTERN_bigrams).concat(e.slice(1).match(PATTERN_bigrams)),i=t.match(PATTERN_bigrams).concat(t.slice(1).match(PATTERN_bigrams));return r.forEach(function(e){i.includes(e)&&n++}),2*n/(r.length+i.length)}function Array_truncate(e){for(e=Math.max(0,0|e);this.length>e;)this.pop();return this}function String_display_width(e,t){return(e=String(e).replace(/[\u2190-\u21FF]/g,"  ")).replace(/[\u3000-\uFF5E]/g,"  ").length}var DEFAULT_DISPLAY_WIDTH=80;function screen_display_width(){return library_namespace.platform.nodejs&&process.stdout.columns||DEFAULT_DISPLAY_WIDTH}function display_align(e,t){t=library_namespace.setup_options(t),library_namespace.is_Object(e)&&(e=Object.entries(e));var n=t.display_width||screen_display_width();library_namespace.debug("display width: "+n,3);var r=[],i=String("line_separator"in t?t.line_separator:determine_line_separator()),a="\r\n"===i?"\n":i,o=e.some(function(e){var t=String(e[0]),i=String(e[1]);if(i.length>n||i.includes(a))return!0;r.push(String_display_width(t))}),s=t.key_style,l=t.value_style,c=!!("using_style"in t?t.using_style:s||l),_=[],u=!o&&Math.max.apply(null,r);return e.forEach(function(e){var n=String(e[0]),a=e[1];o?(n=n.trim(),a=String(a),a=c?[s?{T:n,S:s}:n,i,l?{T:a,S:l}:a]:n+i+a):(n=n.pad(n.length+u-r.shift(),t.to_fill||" ",t.from_start),a=c?[s?{T:n,S:s}:n,l?{T:a,S:l}:a]:n+a),c?(_.length>0&&_.push(i),_.append(a)):_.push(a)}),c?_:_.join(i)}_.display_align=display_align;var has_native_Math_imul=Math.imul&&!Math.imul[library_namespace.env.not_native_keyword];function IE_ISO_date(e){return new Date(IE_ISO_date.parse(e))}set_method(String.prototype,{covers:function(e){return this.length>=e.length&&!!String_covers(e,this)},count_of:set_bind(count_occurrence,!0),chunk:chunk,chars:split_by_code_point,codePoints:codePoints,remove_head_tail:set_bind(remove_head_tail,!0),replace_till_stable:set_bind(replace_till_stable,!0),replace_check_near:set_bind(replace_check_near,!0),pad:set_bind(pad,!0),to_RegExp:set_bind(String_to_RegExp,!0),toTitleCase:toTitleCase,between:function(e,t,n,r){return get_intermediate(this,e,t,n,r)||""},find_between:find_between,all_between:all_between,each_between:each_between,edit_distance:set_bind(Levenshtein_distance),diff_with:diff_with_String,display_width:set_bind(String_display_width),hashCode:has_native_Math_imul?function(){for(var e=0,t=0,n=this.length;t<n;t++)e=Math.imul(31,e)+this.charCodeAt(t)|0;return e}:function(){for(var e=0,t=0,n=this.length;t<n;t++)e=(e<<5)-e+this.charCodeAt(t)|0;return e}}),set_method(Number.prototype,{to_super:superscript_integer,to_sub:subscript_integer,to_fixed:to_fixed,mod:set_bind(non_negative_modulo),pad:set_bind(pad,!0)}),set_method(RegExp.prototype,{clone:function(){return new RegExp(this.source,this.flags)},reflags:set_bind(renew_RegExp_flags)}),set_method(library_namespace.env.global,{setImmediate:function(e){var t=arguments;return setTimeout(function(){0!==t.length?((t=Array.from(t)).shift(),e.apply(null,t)):e()},0)},clearImmediate:function(e){return clearTimeout(e)}}),set_method(Array.prototype,{clone:function(){return this.slice()},remove_once:function(e){var t=this.indexOf(e);if(t!==NOT_FOUND)return this.splice(t,1)},remove:function(e){for(var t=0;(t=this.indexOf(e,t))!==NOT_FOUND;)this.splice(t,1)},sum:function(e){var t=0;return this.forEach(e?function(e,n){t+=n}:function(e){t+=+e}),t},product:function(e){var t=1;return this.every(e?function(e,n){return t*=n}:function(e){return t*=+e}),t},to_hash:function(e,t){return t||(t=Object.create(null)),this.forEach(e?function(n,r){n=e(n),t["object"==typeof n?JSON.stringify(n):n]=r}:function(e,n){t["object"==typeof e?JSON.stringify(e):e]=n}),t},frequency:array_frequency,append:append_to_Array,unique_sorted:unique_sorted_Array,unique:function(e,t){if("function"==typeof e)t=e,e=!1;else{if(e)return this.unique_sorted(t);if("function"!=typeof t)return Array.from(new Set(this))}var n=new Map;return this.forEach(function(e){n.has(e)||n.set(t(e),e)}),Array.from(n.values())},cardinal_1:function(){var e,t;return t=this.every(function(n){return e?Object.is(n,t):(t=n,e=!0)}),!(!e||!t)},search_sorted:set_bind(search_sorted_Array,!0),first_matched:set_bind(first_matched,!0),diff_with:diff_with_Array,run_serial:function(e,t,n){run_serial_asynchronous(e,this,t,n)},run_parallel:function(e,t,n){run_serial_asynchronous(e,this,t,n,!0)},truncate:Array_truncate,clear:Array_truncate}),isNaN(Date.parse("0000-01-01T00:00:00.000Z"))?(IE_ISO_date.offset=(new Date).getTimezoneOffset(),IE_ISO_date.parse=function(e){return Date.parse(e.replace(/\.\d{3}Z$/,"").replace(/-/,"/"))+IE_ISO_date.offset}):IE_ISO_date.parse=Date.parse,_.ISO_date=IE_ISO_date,set_method(Date.prototype,{clone:function(){return new Date(this.getTime())}});var fulfilled=Object.create(null);function status_of_thenable(e,t){if(library_namespace.is_thenable(e))return Promise.race([e,fulfilled]).then(function(n){var r=n!==fulfilled&&"resolved";return t(r,e),r},function(n){return t("rejected",e),"rejected"});t("not thenable",e)}function Map__reverse_key_value(e){var t=(e=library_namespace.setup_options(e)).preserve_older,n=e.key_is_number,r=e.ignore_null_value,i=new Map;return this.forEach(!1===t?function(e,t){r&&!e||(n&&(t=+t),i.set(e,t))}:function(e,a){if(!r||e){if(n&&(a=+a),i.has(e)){if(!t)return;library_namespace.warn("Map__reverse_key_value: duplicated key ["+e+"]: "+i.get(e)+"→"+a)}i.set(e,a)}}),i}return _.status_of_thenable=status_of_thenable,set_method(Map.prototype,{reverse_key_value:Map__reverse_key_value}),_}}),"function"==typeof CeL&&CeL.run({name:"data.code",require:"data.native.",code:function(e){var t=function(){};function n(e,t){return t||(t="_"),e.replace(new RegExp("[\\"+t+"]","g"),t+t).replace(/[A-Z]/g,function(e){return t+e.toLowerCase()})}function r(t,n,i){var a;if("string"==typeof t&&t&&e.is_Object(n))return i?(e.is_Object(this.options=i)||(i={search:i}),a=i.search):this.options=!1,a?e.is_type(a,"RegExp")||(a=new RegExp((""+a).replace(/pattern/g,o()),"g")):(t=t.replace(/([!?:.*+-^${}()\\\-\[\]])/g,"\\$1"),a=new RegExp("((?:[^"+t+"]+|"+t+"{2})+)("+t+")("+o()+")","g")),this.search=a,r.default_parser.bind(this);function o(){var e=[];for(var t in n)e.push(n[t]&&n[t].pattern||t);return e.join("|")}}t.prototype={},t.to_underscore=n,e.set_method(String.prototype,{to_underscore:e.set_bind(n),to_Camel:e.set_bind(function(e,t){return t||(t="_"),e.replace(new RegExp("\\"+t+"([a-zA-Z])","g"),function(e,t){return t.toUpperCase()}).replace(new RegExp("[\\"+t+"]{2}","g"),t)})}),t.parse_escape=function(t,n){var r,i,a=0,o="\\",s={u:4,U:8,x:2},l=void 0,c={u:p,U:p,x:p,b:"\b",t:"\t",n:"\n",v:"\v",f:"\f",r:"\r"},_=function(t,n){if(e.debug(t+": additional ["+n+"], ",6),t in c){var r=c[t];t="function"==typeof r?r(t,n):r}return t},u=[];function p(t,n){return e.debug("U+"+n+": ["+String.fromCharCode(parseInt(n,16))+"]",6),String.fromCharCode(parseInt(n,16))}function d(n,r){if(e.debug(a+": ["+n+"]<em>|</em>"+(r||""),6),n&&l&&(n=l(n)),r){var o,c="";r in s&&(c=t.substr(a,o=s[r]),e.debug("("+o+") ["+r+c+"]",6),i.lastIndex=a+=o),_?r=_(r,c):""!==c&&(r+=c),u.push(n,r)}else n&&u.push(n)}if("string"==typeof n?o=n:"function"==typeof n?l=n:e.is_Object(n)&&("string"==typeof n.escape&&(o=n.escape),"object"==typeof n.escape_length&&(s=n.escape_length),"function"==typeof n.handler&&(l=n.handler),"function"==typeof n.escape_handler&&(_=n.escape_handler)),1!==o.length)throw new Error("The escape character ["+o+"] is not single character!");for(i=new RegExp("([\\s\\S]*?)\\"+o+"(.)","g"),e.debug("["+t+"]",6);r=i.exec(t);)a=i.lastIndex,d(r[1],r[2]);return d(t.slice(a)),l?u.join(""):u},t.extract_literals=function(t,n,r){return e.gettext&&(t=e.gettext(t)),t=t.replace_till_stable(/\${([^{}]+?)}/,function(e,t){return(t=t.trim())in n?n[t]:e})},r.default_parser=function(e,t,n){var r,i,a=this.search,o=this.command_set,s=this.options,l=s.parser,c=s.normal_parser,_=0,u=[];for(a.exec("");r=a.exec(t);)_=a.lastIndex,l?u.push(l.call(this,e,r,n)):(u.push(c?c(e,r[1],n):r[1]),i=r[4]||r[3],u.push(i in o?o[i].call(e,r[3]):r[2]+r[3]));return r=t.slice(_),u.push(c?c(e,r,n):r),u.join("")},r.default_parser.constructor=r,r.prototype.concat=function(e){throw new Error(1,"format_parser.prototype.concat: Not Yet Implemented!")},r.prototype.extend=function(){new r(this)};var i=e.is_Object;function a(e,t,n){var r={start:"function"==typeof t?t:t?function(){return t}:function(e){return e.join("")},parameters:e};return"function"==typeof n?r.end=n:n&&(r.end=function(){return n}),function(e,t,n){return Array.isArray(e)?function e(t,n,r,a){var s,l,c,_=0,u=t.length,p=[],d=Object.create(null);for(r&&Object.assign(d,r);_<u;_++)s=t[_],a&&"object"!=typeof s&&(s=a(s)),i(s)?l?(c||(l=c=Object.assign(Object.create(null),l)),Object.assign(l,s)):l=s:(l&&(p.push(o(d,l,n)),l=c=!1),p.push(Array.isArray(s)?e(s,n,d):s));return r&&p.push(o(d,r,n,!0)),p.join("")}(e,this,t&&o(Object.create(null),t,this),"function"==typeof n&&n):"string"==typeof e?e:e||0===e?""+e:""}.bind(r)}function o(e,t,n,r){var i,a,o,s,l="function"==typeof n.end&&[],c=[];for(i in t)void 0!==(a=t[i])&&(o=n.parameters[i])&&(s=r?a:"function"==typeof o?o(a,i):o+a)!=e[i]&&(l&&l.push(i),c.push(e[i]=s));return s=c.length?n.start(c):"",l&&l.length?String(n.end(l))+s:s}t.unnested_formatter=a;var s=new a({italics:function(e){return"\\i"+(e?1:0)},bold:function(e){return"\\b"+(isNaN(e)?e?1:0:e)},underlined:function(e){return"\\u"+(e?1:0)},striked:function(e){return"\\s"+(e?1:0)},border:"\\bord",border_x:"\\xbord",border_y:"\\ybord",font_name:"\\fn",font_size:"\\fs",font_scale_x:"\\fscx",font_scale_y:"\\fscy",font_encoding:"\\fe",color:function(e){return"\\1c&H"+e+"&"},border_color:function(e){return"\\3c&H"+e+"&"},shadow_color:function(e){return"\\4c&H"+e+"&"},align:"\\an"},function(e){return"{"+e.join("")+"}"});return s.reduce=function(e){return e&&"string"==typeof e?e.replace(/}{\\/g,"\\").replace(/{[^{}]+\\r([}\\])/g,"{\\r$1").replace(/(\n[^{}\n]*){\\r}/g,"$1").replace(/\s*{\\r}(\s*\r?\n)/g,"$1").replace(/(\\r}[^{]*){\\r}/g,"$1").replace(/(\\r}[^{]*){\\r\\/g,"$1{"):e},t.ass_tag=s,t}}),"function"==typeof CeL&&CeL.run({name:"data.date",require:"data.code.compatibility.|data.native.set_bind|data.code.parse_escape|data.native.pad",code:function(e){var t=this.r("set_bind"),n=this.r("parse_escape"),r=this.r("pad"),i=function(){};i.prototype={};var a=e.is_Date,o=/UTC(?:\s*([+-]?\d{1,2})(:\d{1,2})?)?/i,s={timezone:"default"};function l(e){var t=e.match(o);if(t)return 60*(0|t[1])+(0|t[2])}var c=new Date(0,0,2)-new Date(0,0,1),_=new Date(0,0,1,0,2)-new Date(0,0,1,0,1),u=new Date(0,0,0,2)-new Date(0,0,0,0),p=(new Date).getTimezoneOffset()||0;function d(t,n,r,i){if("string"==typeof t){var o=t.match(/(-?\d{1,4})[\/\-](\d{1,2})[\/\-](\d{1,2})/);return o?d.from_YMD(0|o[1],0|o[2],0|o[3],n,r):-4716<t&&t<9999?d.from_YMD(0|t,1,1,n,r):(o=t.match(/(-?\d{1,4})[\/\-](\d{1,2})/))?d.from_YMD(0|o[1],0|o[2],1,n,r):void(e.is_debug(2)&&e.error("Julian_day: 無法解析 ["+t+"]！"))}var s,l;if(!isNaN(t))return a(t)?(s=t.getTimezoneOffset()*_,t=t.getTime()):s=d.default_offset,n=!0,t-=s+d.epoch-c/2,i&&(l=t%c)<0&&(l+=c),t=Math.floor(t/c),i?[t,l]:t;if(Array.isArray(t)){var u=d.from_YMD(t[0],t[1],t[2],n,r);return i?[u,t.length>3?d.from_HMS(t[3],t[4],t[5])-.5:0]:u}}d.from_YMD=function(e,t,n,r,i){if(Array.isArray(e))return Array.isArray(t)?d.from_YMD(e[0],e[1],e[2],n,r)-.5+d.from_HMS(t[0],t[1],t[2]):d.from_YMD(e[0],e[1],e[2],t,n);i&&e<0&&e++,"CE"===r&&(r=e>1582||1582==e&&(t>10||10==t&&n>=15));var a=t<3?1:0;return+n+((153*(t=+t+12*a-3|0)+2)/5|0)+365*(e=+e+4800-a|0)+Math.floor(e/4)-(r?32045+Math.floor(e/100)-Math.floor(e/400):32083)},d.from_HMS=function(e,t,n,r){var i=r?r/1e3:0;return n&&(i+=+n),i/=60,t&&(i+=+t),(i/60+(+e||0))/24},d.to_YMD=function(e,t,n){var r=e+1401|0;t&&("CE"!==t||e>=f)&&(r+=(3*((4*e+274277)/146097|0)/4|0)-38);var i=4*r+3|0,a=5*(i%1461/4|0)+2,o=(2+(a/153|0))%12+1,s=(i/1461|0)-4716+((14-o)/12|0);return n&&s<1&&s--,[s,o,1+(a%153/5|0)]},d.to_YMDHMS=function(e,t,n,r){var i=d.to_YMD(e+=.5+1e-16+(0|t)/24,n,r);return i.push(0|(e=24*e.mod(1)),0|(e=e%1*60),0|(e=e%1*60)),(e%=1)>4e-11&&i.push(1e3*e-8.64e-9),i},d.to_Date=function(e,t,n,r){return t||(e-=.5),e=e*c+d.epoch+(isNaN(r)?d.default_offset:r),n?e:new Date(e)},d.YMD_to_Date=function(e,t,n,r,i,a){var o=d.from_YMD(e,t,n,r,a);return d.to_Date(o,!0,i)},d.JD=function(e,t,n){return a(e)?K(e):(e=d(e,t,n,!0))[0]+e[1]/c},d.default_offset=p*_,function(){var e=new Date(0),t=d.to_YMD(0,!0);e.setUTCHours(12,0,0,0),e.setUTCFullYear(0|t[0],(0|t[1])-1,0|t[2]),d.epoch=e.getTime()}();var f=d.from_YMD(1582,10,15);function g(e){return((e||Date.now())-g.epoch)/1e3}d.weekday=function(e,t){return t?Math.floor(e)%7+1:(Math.floor(e)+1)%7},i.Julian_day=d,i.Unix_time=g,g.epoch=Date.parse("1970/1/1 UTC"),g.to_Date=function(e){return new Date(1e3*e+g.epoch)};var h=Date.parse("1900/1/1")-c,m=Date.parse("1904/1/1");function y(e,t,n){return e>=1?(t||e<60||e--,e=(t?m:h)+c*e):e=NaN,n?e:new Date(e)}function b(e,t){var n=b.epoch+e/1e4;return t?new Date(n):n}i.Excel_Date=y,y.error_value="#VALUE!",b.epoch=Date.parse("1601-01-01T00:00:00Z"),i.VS_file_time=b;var v=/^-?\d{4,8}-[01]\d-[0-3]\d(T[012]\d:[0-6]\d:[0-6]\d(\.\d{3})?(Z|[+\-][012]\d:\d{2}))?$/;function w(t,n){return e.debug("parse ("+typeof t+") ["+t+"]",3,"String_to_Date"),"date"==typeof t?new Date(t):a(t)?t:(t=t.trim())?v.test(t)?new Date(t):(e.is_RegExp(n)?n={pattern:n}:e.is_Object(n)||(r=n,n=Object.create(null),r&&(r in w.parser?n.parser=w.parser[r]:r in w.zone||!isNaN(r)?n.zone=r:n.format=r)),e.is_RegExp(n.pattern)&&(i=t.match(n.pattern))&&(t=(r=Array.isArray(n.pattern_matched)?n.pattern_matched:[1,2,3]).map(function(e){return"function"==typeof e?e(i):i[e]}).join(3===r.length?"/":"")),r=n.zone,e.debug("設定 time zone / offset hours: "+r,2),r in w.zone&&(r=w.zone[r]),e.is_Function(r)&&(r=r()),("string"!=typeof r||isNaN(o=l(r)))&&(o=-12<=r&&r<=14?60*r:isNaN(r)?s:+r),e.debug("最終設定 offset "+(o===s?"(default　= "+w.default_offset+")":o)+" minutes.",2),r=e.is_Function(r=n.parser)?r:w.parser[r]||w.default_parser,e.is_Function(r)&&(e.debug("use customize parser to parse ("+typeof t+") ["+t+"].",2),r=r(t,o,n))?r:(e.debug("無法以 parser 判別。use Date.parse() to parse.",2),(r=Date.parse(t))?(r=new Date(r),isNaN(o)||o===s||r.setMinutes(r.getMinutes()-r.getTimezoneOffset()-o),r):void 0)):void 0;var r,i,o}w.default_offset=-p,w.no_year_0=D.no_year_0=!0;var k,A,x,O,E="millennium,century,decade,year,month,day,hour,minute,second,microsecond".split(",");A="(?:\\s*\\(?[日月火水木金土一二三四五六]\\)?)?(?:\\s+",x=/(?:([\-−‐前]?(?:[0-4]?\d{3}|\d{1,3}))[\/.\-年 ])?\s*([01]?\d)(?:[\/.\-月 ]\s*([0-3]?\d)日?)?/.source,O=/([0-2]?\d)[:時时]\s*(?:([0-6]?\d)[:分]?\s*(?:([0-6]?\d)(?:\.(\d+))?)?)?秒?\s*(?:([PA])M)?/i.source,R.date_first=new RegExp("^[^\\d:\\-−‐前.]*"+x+A+O+")?[^\\d日時]*$","i"),R.time_first=new RegExp("^[^\\d:\\-−‐前.]*"+O+A+x+")?[^\\d日時]*$","i"),k=x;var S=/^(?:([a-z]{3,9})\s*[.\/\-–－—─~～〜﹣])?\s*([a-z]{3,9}),?\s+(\d{1,4})( +\D.*)?$/i,L=/^(\d{1,4})\s+(?:([a-z]{3,9})\s*[.\/\-–－—─~～〜﹣])?\s*([a-z]{3,9})( +\D.*)?$/i,T=/^[^\d\/:\-−‐前日月年]*(\d{3,4}|([\-−‐前]?\d{1,4})([百千]?)年|[\-−‐前]\d{1,4})[^\d\/:\-−‐前日月年]*$/,j=/(?:^|[^a-z.])B\.?C\.?E?(?:[^a-z.]|$)/i,N=new Date(0,0,1);function R(t,n,r){if(a(t))return t;e.is_Object(r)||(r=Object.create(null));var i,c,u,d,f=r.period_end,g="no_year_0"in r?r.no_year_0:w.no_year_0;if(!(u=(t=t.trim().replace(/世[紀纪]/g,"百年").replace(/千[紀纪]/g,"千年")).match(S))&&(u=t.match(L))&&(u.splice(4,0,u[1]),u.splice(1,1)),u){var h=Date.parse((!f&&u[1]||u[2])+" "+u[3]+(u[4]||""));return isNaN(h)?void e.debug("無法 parse: ["+t+"]",2,"String_to_Date_default_parser"):(/UTC(?:\W|$)/.test(u[4])||isNaN(n)||n===s||(h-=(p+n)*_),h=new Date(h),f&&h.setMonth(h.getMonth()+1),h.precision="month",h)}if(isNaN(n)&&!isNaN(d=l(t))&&(n=d,t=t.replace(o,"").trim()),(u=t.match(T))?(c="百"===u[3]?"century":"千"===u[3]?"millennium":t.includes("年代")?"decade":"year",t=(u[2]||u[1]).replace(/^[−‐前]/,"-000"),f&&(u[3]?++t:(u=t.includes("00"),++t?u&&(t="00"+t).length<4&&(t="0"+t):t=g?"0001":"0000"),f=!1),u[3]&&(0<(t*="century"===c?100:1e3)&&t<1e3?t="0"+t:0===t&&(t="000")),t+="/1"):t=t.replace(/日(\d)/,"日 $1"),(i=t.match(R.date_first))&&isNaN(i[0]))i.shift();else{if(!(i=t.match(R.time_first)))return void e.debug("無法 parse: ["+t+"]",2,"String_to_Date_default_parser");i.shift(),i.unshift(i[5],i[6],i[7]),i.length=8}c||i.some(function(e,t){if(!e)return t>0&&(c=E[t+2]),!0}),e.debug(i.join("<br />"),2,"String_to_Date_default_parser"),"P"!==(d=8===i.length&&i.pop())&&"p"!==d||(i[3]=12+(0|i[3]));var m=+i[0];if(isNaN(m)&&/^前/.test(i[0])?m=-i[0].slice(1):m>0&&j.test(t)&&(m=-m,"no_year_0"in r||(g=!0)),m<0?g&&m++:m<100&&i[0].length<3&&(d=isNaN(r.year_padding)?R.year_padding:r.year_padding)&&(m+=d),i[0]=m,f){for(d=i.length;d-- >0;)if(!isNaN(i[d])&&""!==i[d]){i[d]++;break}m=i[0]}0<(i[2]=+i[2])||(i[2]=1),"function"==typeof r.post_process&&r.post_process(i),m=+m||0,d=+i[4]||0;var y=!isNaN(n)&&n!==s;return y&&(d-=p+n),m<100&&m>=0?((h=new Date(0,0)).setHours(+i[3]||0,d,+i[5]||0,+i[6]||0),h.setFullYear(m,i[1]?i[1]-1:0,i[2])):h=new Date(m,i[1]?i[1]-1:0,i[2],+i[3]||0,d,+i[5]||0,+i[6]||0),y&&h.getTimezoneOffset()!==p&&h.setMinutes(h.getMinutes()+p-h.getTimezoneOffset()),r.near&&0===h.getFullYear()&&h-N>0&&(t=(d=a(r.near)?r.near:new Date).getFullYear(),u=new Date(h.getTime()),h.setFullYear(t),u.setFullYear(h-d>0?t-1:t+1),(h-d>0&&h-d>d-u||h-d<0&&h-d<d-u)&&(h=u)),c&&(h.precision=c),h}function P(e,t){return"CE"===t&&(V<e?t=!1:e<0&&e++),t?e%4==0:e%400==0||e%100!=0&&e%4==0}function C(e){return e%100==0&&e%400!=0}function I(e){var t=+e[0];return C(t)&&e[1]<3&&t--,t=2+Math.floor(t/400)-Math.floor(t/100),e[2]-=t,t}function U(t,n,r){return e.is_Object(r)||(r=Object.create(null)),r.post_process=I,R(t,n,r)}function D(t,n){if("string"==typeof n?n=n in D.parser?{parser:D.parser[n]}:{format:n}:"function"==typeof n?n={parser:n}:e.is_Object(n)||(n=Object.create(null)),t&&!a(t)?w(t):t)return(e.is_Function(n.parser)?n.parser:D.parser[n.parser]||D.default_parser)(t,n.format,e.gettext.to_standard?e.gettext.to_standard(n.locale):n.locale,n);e.warn("Date_to_String: 無法判斷 date value ["+t+"]！")}function M(t,i,a,o){e.is_Object(o)||(o=Object.create(null));var s=o.original_Date||t,l=M.conversion[a]||M.conversion[M.null_domain],c=M.search[a]||M.search[M.null_domain];return isNaN(o.offset)&&!isNaN(o.zone)&&(o.offset=60*o.zone),isNaN(o.offset)||(t=new Date(t.getTime()+_*(o.offset-w.default_offset))),n(i||M.default_format,function e(i){return i.replace(c,function(i,a,c){var _=c in s?s[c]:"function"==typeof(_=l[c])?l[c](t,o):_ in s?s[_]:/%/.test(_)?n(_,e):_;return a?r(_,a):_})})}N.setFullYear(0),N=N.getTime(),R.year_padding=new Date(0,0,1).getFullYear(),w.default_parser=R,w.parser_PATTERN=/^\s*(?:([^:]+):)?\s*(.+)/i,w.parser={Julian:U,CE:function(t,n,r){e.is_Object(r)||(r=Object.create(null)),"no_year_0"in r||(r.no_year_0=!0);var i=R(t,n,r);return i-Q(r.reform)<0?U(t,n,r):i},PHP:function(){throw new Error("String_to_Date.parser.PHP: Not Yet Implemented!")},strftime:function(){throw new Error("String_to_Date.parser.strftime: Not Yet Implemented!")}},w.zone={CST:8,"Z中國":8,JST:9,"Z日本":9,EST:-5,PST:-8,GMT:0,UTC:0},i.String_to_Date=w,i.is_leap_year=P,i.is_different_leap_year=C,i.Julian_shift_days=I,i.parse_English_date=function(t){var n,r=(t=t.trim().replace(/.+\[(?:\d{1,2}|note \d+)\]$/i,"")).match(/^(?:before|after)[\s ](.+)$/i);if(r&&(t=r[1].trim(),r=r[0]),(r=t.match(/^ca?.(.+)$/))&&(t=r[1].trim(),r=r[0]),/^[a-z]{3,9}\s+-?\d+$/i.test(t)&&(r=t="1 "+t),t.includes("?")&&(r=t,t=t.replace(/\?/g,"")),!isNaN(t)||/^\d+\/\d+$/.test(t))r=t;else{if(isNaN(n=Date.parse(t)))return void e.warn(t);t=new Date(n+w.default_offset*_).toISOString().match(/^\d+-\d+-\d+/)[0].replace(/^0+/,"").replace(/(\d)-0*/g,"$1/")}return[t,r]},D.default_parser=M,D.parser={PHP:function(e,t,n){throw new Error("Date_to_String.parser.PHP: Not Yet Implemented!")},ISO8601:function(e,t,n){throw new Error("Date_to_String.parser.ISO8601: Not Yet Implemented!")},SFS:function(e,t,n){throw new Error("Date_to_String.parser.SFS: Not Yet Implemented!")},strftime:M,Gregorian:$,Julian:Y,CE:function(t,n,r,i){return e.is_Object(i)||(i=Object.create(null)),"no_year_0"in i||(i.no_year_0=!0),(t-Q(i.reform)<0?Y:$)(t,n,r,i)},RFC822:function(e){return e.toUTCString().replace(/UTC/gi,"GMT")}},i.Date_to_String=D,M.default_format="%Y/%m/%d %H:%M:%S.%f",M.set_conversion=function(t,n,r){var i,a,o,s,l,c=e.gettext;for(i in M.search||(e.debug("初始化 strftime",2,"strftime.set_conversion"),M.search=Object.create(null),M.conversion=Object.create(null)),e.is_Object(r)||(r=Object.create(null)),n&&c.to_standard&&!r.no_gettext&&(n=c.to_standard(n)),n||(n=M.null_domain),n in(o=M.conversion)||(o[n]=Object.create(null)),o=o[n],t)if(o[i]=a=t[i],a in o)for(s=[a];a in o&&(o[i]=a=o[a],!s.includes(a));)s.push(a);for(i in a="",s=[],o)(l=i,i=l.replace(/[*?!+.()\[\]\|\-^$\\\/]/g,"\\$0")).length>1?s.push(i):a+=i;return s.sort(function(e,t){return t.length-e.length}),a&&s.push("["+a+"]"),M.search[n]=s=new RegExp("%(\\d?)("+s.join("|")+")","g"),e.debug("use conversion specifications "+n+": "+s,2,"strftime.set_conversion"),s},M.null_domain="";var F=e.gettext.date;F||(F=function(t){return e.locale.gettext?(F=e.locale.gettext.date)[this].apply(F,arguments):t},"year,month,date,week,full_week".split(",").forEach(function(e){F[e]=F.bind(e)}));var z=[0],W=[];function q(e,t,n){return a(e)?(t=0|e.getDate(),n=P(e.getFullYear()),e=0|e.getMonth()):(--e,"number"==typeof n&&(n=P(n))),n&&e>1&&t++,z[e]+t|0}function H(e,t){var n,r=0|e.getFullYear(),i=0|e.getDay(),a=0|q(e);return 0===i&&(i=7),0===(n=(10+a-i)/7|0)?(n=53,r--):n>52&&4!==(a=(i+1-a).mod(7))&&(3!==a||!P(r))&&(n=1,r++),t&&(r=r.pad(4),n="W"+n.pad(2)),a=[r,n,i],1===t?a=a.join(""):2!==t&&(a=a.join("-")),a}function $(t,n,r,i){if("no_year_0"in i?i.no_year_0:D.no_year_0){var a=t.getYear(),o=t.getFullYear(),s=t.getUTCFullYear();(o<1||s<1)&&(e.is_Object(i)||(i=Object.create(null)),i.no_new_Date||(t=new Date(t.getTime())),o<1&&(t.getYear=new Function("return "+(a-1)),t.getFullYear=new Function("return "+(o-1))),s<1&&(t.getUTCFullYear=o===s?t.getFullYear:new Function("return "+(s-1))))}return M(t,n,r,i)}!function(){for(var e,t=new Date(1902,0,1),n=0,r=0;n++<12;)t.setMonth(n,0),W.push(e=t.getDate()),z.push(r+=e)}(),Object.seal(W),Object.seal(z),i.get_month_days=function(e,t,n){(t|=0)&&--t;var r=W.slice(t);return t<2&&("number"==typeof e?P(e):e)&&r[1-t]++,n>1&&(r[0]-=n-1),r},i.ordinal_date=q,i.week_date=H,M.default_conversion={Y:function(e,t){return e.getFullYear()},EY:function(e,t){return F.year(e.getFullYear(),t.numeral||t.locale)},m:function(e,t){return 1+e.getMonth()},B:function(e,t){return F.month(1+e.getMonth(),t.locale)},d:function(e,t){return e.getDate()},Od:function(e,t){return F.date(e.getDate(),t.locale)},a:function(e,t){return F.week(e.getDay(),t.locale)},A:function(e,t){return F.full_week(e.getDay(),t.locale)},w:function(e,t){return e.getDay()},H:function(e,t){return e.getHours()},M:function(e,t){return e.getMinutes()},S:function(e,t){return e.getSeconds()},f:function(e,t){var n=e.getMilliseconds();return n>99?n:n>9?"0"+n:n>=0?"00"+n:n},z:function(e,t){var n="+",r=-e.getTimezoneOffset();return r<0&&(n="-",r=-r),n+=(r/60|0).pad(2)+(r%60).pad(2)},j:function(e,t){return q(e)},W:function(e,t){return H(e)[1]},JDN:J,JD:K,"歲次":fe,"年干支":"歲次","年柱":"歲次","日干支序":ce,"日干支":function(e,t){return pe(ce(e,t))},"日柱":"日干支","時干支序":_e,"時干支":function(e,t){return pe(_e(e,t))},"時柱":"時干支","時刻":function(e,t){var n=Math.floor(_e(e,t)).mod(12);return ne.charAt(n)+(n%2?"正":"初")+"初一二三".charAt(e.getMinutes()/4|0)+"刻"}},M.set_conversion(M.default_conversion,M.null_domain);var B=new Function("return 29");function Y(t,n,r,i){var a=t.getFullYear(),o=2+Math.floor(a/400)-Math.floor(a/100),s=C(a);if(o||s){var l=t.getDay();if(e.is_Object(i)||(i=Object.create(null)),i.original_Date||(i.original_Date=t),i.no_new_Date=!0,(t=new Date(t.getTime())).setDate(t.getDate()+o),s&&t.getFullYear()<=a){var c=t.getMonth();(c<2||t.getFullYear()<a)&&(1===c&&28===t.getDate()?t.getDate=B:t.setDate(t.getDate()+1))}t.getDay()!==l&&(t.getDay=new Function("return "+l))}return t=$(t,n,r,i),e.is_Object(i)&&delete i.original_Date,t}var G=w.default_offset/60/24;function K(e,t){return e=((t&&t.original_Date||e)-X)/c,t&&t.as_UTC_time&&(e+=G),e}function J(e,t){return Math.floor(K(e,t)+.5)}i.Date_to_JD=K,i.Date_to_JDN=J,i.JD_to_Date=function(e){return new Date(X+c*e)};var X=Date.parse("-004713-11-24T12:00:00.000Z");X||(X=(X=w("-4713/1/1 12:0",{parser:"Julian",zone:0})).getTime()+(p-(X.getTimezoneOffset()||0))*_);var V=1582;i.Gregorian_reform_date=new Date(V,9,15);var Z={Italy:"1582/10/15",Poland:"1582/10/15",Portugal:"1582/10/15",Spain:"1582/10/15",France:"1582/12/20",Luxembourg:"1583/1/1",Netherlands:"1583/1/12",Bavaria:"1583/10/16",Austria:"1584/1/17",Switzerland:"1584/1/22",Hungary:"1587/11/1",Germany:"1700/3/1",Norway:"1700/3/1",Denmark:"1700/3/1","Great Britain":"1752/9/14",Sweden:"1753/3/1",Finland:"1753/3/1",Bulgaria:"1916/4/14","Soviet Union":"1918/2/14",Serbia:"1919/2/1",Romania:"1919/2/1",Greece:"1924/3/23","Türkiye":"1926/1/1",Egypt:"1928/10/1"};function Q(e){return a(e)?e=e.getTime():"string"==typeof e&&e in Z&&(e=Z[e]),Number.isFinite(e)?e:i.Gregorian_reform_date}!function(){for(var e in Z)Z[e]=Date.parse(Z[e])}(),Q.regions=Z,i.Gregorian_reform_of=Q;var ee="".indexOf("_"),te="甲乙丙丁戊己庚辛壬癸",ne="子丑寅卯辰巳午未申酉戌亥",re=60,ie=-2696,ae=new Date(1984,2,31),oe=ae.getTimezoneOffset()||0,se=new Date(1984,2,30,23),le=se.getTimezoneOffset()||0;function ce(e,t){t&&t.original_Date&&(e=t.original_Date);var n=Math.floor((e-ae-(e.getTimezoneOffset()-oe)*_)/c);return D["子初分日"]&&23===e.getHours()&&n++,(n%=re)<0&&(n+=re),n}function _e(e,t){return(e=(e=t&&t.original_Date||e)-se-(e.getTimezoneOffset()-le)*_)/u}function ue(t,n,r){return isNaN(t)&&isNaN(t=de(t))||(n||(n=new Date),t-=ce(n),r?r<0&&(t+=r):r=new Date(n).setMonth(n.getMonth()+1,0)-n,t<0&&(t=re+t%re),Math.abs(r)<t&&(e.is_debug()&&e.warn("convert_stem_branch_date: 所欲求之日干支 ["+t+"] 並不在範圍內！"),t-Math.abs(r)>re-t&&(t-=re)),n.setDate(n.getDate()+t+(r<0?r:0))),n}function pe(e){if(!isNaN(e=+e%re))return(e=Math.floor(e))<0&&(e+=re),te.charAt(e%10)+ne.charAt(e%12)}function de(e){if(e&&(e=String(e))){var t=e.charAt(0),n=te.indexOf(t);return e.length>1?n!==ee&&(t=ne.indexOf(e.charAt(1)))!==ee&&(n=(6*n+55*t)%re):n===ee&&(n=ne.indexOf(t)),n>=0?n:void 0}}function fe(e,t){var n,r,i;if(t&&t.original_Date&&(e=t.original_Date),a(e))n=e.getFullYear(),r=e.getMonth();else{if(isNaN(e))throw new Error("guess_year_stem_branch: Not a Date");n=0|e,r=7}if(n-=ie,r<2)if((i=e.getDate())<19&&0===r)n--;else if(i<20||r<1)return"("+pe(n-1)+"或"+pe(n)+")";return!t||!0!==t&&!t.get_index?n=pe(n):(n%=re)<0&&(n+=re),n}function ge(t,n,r){r=e.setup_options(r),n||(n=0===n?new Date(0):new Date);var i,o,s=n-t,l=e.gettext;if(s>=0&&isFinite(s)){a(t)||(t=new Date(t)),a(n)||(n=new Date(n)),i=(o=new Date(n-t)).getFullYear()-new Date(0).getFullYear(),o=o.getMonth()+(o.getDate()-1)/30;var c=(0|r.digits)>=0?0|r.digits:0,_=r.long_format;return i?(s=i+o/12,i=r.月?l(_?"%1 {{PLURAL:%1|year|years}} and %2 {{PLURAL:%2|month|months}}":"%1 Y %2 M",i,Math.round(o)):l(_?"%1 {{PLURAL:%1|year|years}}":"%1 Y",s.to_fixed(c)),r.歲&&(s=n.getFullYear()-t.getFullYear()+("虛"===r.歲?1:0),t-ge.get_new_year(t.getFullYear())<0&&s++,n-ge.get_new_year(n.getFullYear())<0&&s--,i=s+"歲, "+i),i):o>=1&&"day"!==r.max_unit?l(_?"%1 {{PLURAL:%1|month|months}}":"%1 M",o.to_fixed(c)):s<1e3?l(_?"%1 {{PLURAL:%1|millisecond|milliseconds}}":"%1 ms",0|s):(s/=1e3)<60?l(_?"%1 {{PLURAL:%1|second|seconds}}":"%1 s",s.to_fixed(c)):(s/=60)<60?l(_?"%1 {{PLURAL:%1|minute|minutes}}":"%1 min",s.to_fixed(c)):(s/=60)<24?l(_?"%1 {{PLURAL:%1|hour|hours}}":"%1 hr",s.to_fixed(c)):(s/=24)<7||!r.weeks?l(_?"%1 {{PLURAL:%1|day|days}}":"%1 d",s.to_fixed(c)):l(_?"%1 {{PLURAL:%1|week|weeks}}":"%1 W",(s/7).to_fixed(c))}}ae=ae.getTime(),se=se.getTime(),i.STEM_LIST=te,i.BRANCH_LIST=ne,i.SEXAGENARY_CYCLE_LENGTH=re,i.YEAR_STEM_BRANCH_EPOCH=ie,k=new RegExp(k.replace(/\([^()]+\)日/,"(["+te+"]["+ne+"])日")),i.convert_stem_branch_date=ue,w.parser.Chinese=function(t,n,r){e.is_Object(r)||(r=Object.create(null)),isNaN(r.year_padding)&&(r.year_padding=0);var i,a,o=w.parser.CE(t,n,r),s=o&&t.match(k);return s&&(s=s[3])&&(r.period_end=!(a=r.period_end),i=(w.parser.CE(t,n,r)-o)/c,r.period_end=a,o=ue(s,o,i)),o},i.to_stem_branch=pe,i.stem_branch_index=function(e,t){return a(e)?t&&t.hour?_e(e):ce(e):de(e)},i.guess_year_stem_branch=fe,M.set_conversion(Object.assign({R:function(e){return(e=e.getFullYear())>900&&(e-=1911),e}},M.default_conversion),"cmn-Hant-TW"),ge.get_new_year=function(e,t,n,r){return new Date((e<0?e:"000"+e)+"/2/1")},i.age_of=ge;var he=["2 days before yesterday, %H:%M","the day before yesterday, %H:%M","yesterday, %H:%M","today, %H:%M","tomorrow, %H:%M","the day after tomorrow, %H:%M","2 days after tomorrow, %H:%M","3 days after tomorrow, %H:%M"],me=he.indexOf("today, %H:%M");function ye(t,n){n=e.setup_options(n),a(t)||(t=new Date(t));var r=n.base_date;isNaN(r)&&!a(r)&&(r="string"==typeof n.base_date?Date.parse(n.base_date):Date.now());var i=t-r;if(!isNaN(i)){if(Math.abs(i)>(n.max_interval||35*c))return t.format(n.general_format||ye.general_format);var o=i<=0,s=e.gettext;if(o&&(i=-i),(i/=1e3)<1)return s("now");if(i<10)return s(o?"several seconds ago":"soon");if(i<60)return s(o?"%1 {{PLURAL:%1|second|seconds}} ago":"%1 {{PLURAL:%1|second|seconds}} later",Math.round(i));if((i/=60)<60)return s(o?"%1 {{PLURAL:%1|minute|minutes}} ago":"%1 {{PLURAL:%1|minute|minutes}} later",Math.round(i));if((i/=60)<3)return s(o?"%1 {{PLURAL:%1|hour|hours}} ago":"%1 {{PLURAL:%1|hour|hours}} later",Math.round(i));if((i/=24)<=3){var l=t.getDate()-(a(r)?r:new Date(r)).getDate()+me;return l>he.length&&((i=new Date).setDate(0),l-=i.getDate()),l=he[l],t.format(s(l))}return i<=35?s(o?"%1 {{PLURAL:%1|day|days}} ago":"%1 {{PLURAL:%1|day|days}} later",Math.round(i)):t.format(n.general_format||ye.general_format)}}ye.general_format="%Y-%2m-%2d %2H:%2M",i.indicate_date_time=ye;var be,ve,we=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?$/,ke=[["(?:ms|milliseconds?|毫秒|ミリ秒)",1],["(?:s(?:ec)?|秒[鐘钟]?)",1e3],["(?:m(?:in)?|分[鐘钟]?)",60],["(?:h(?:r|ours?)?|[個个]?小?[時时]|[個个]?時間)",60],["(?:d(?:ays?|T)?|[日天])",24],["(?:w(?:eeks?)?|週|[個个]?星期|個?禮拜|个?礼拜)",7,!0],["(?:mon(?:ths?)?|[個个ヶ]?月)",30],["(?:y(?:r|ears?)?|年)",12]];function Ae(t){var n=t.match(Ae.PATTERN);return!n||/[日時]/.test(n[2])&&/[時分秒\/]/.test(n[2].match(/^(?:.*?)([年月日時分秒\/])/)[1])?e.is_debug(2)&&e.warn("parse_period: Cannot parse period ["+t+"]"):((t=n).shift(),!t[1].includes("月")&&(n=t[0].match(/[^年月]+月/))&&(t[1]=n[0]+t[1]),!t[1].includes("年")&&(n=t[0].match(/[^年]+年/))&&(t[1]=n[0]+t[1])),t}function xe(){return this.join("")}function Oe(t,n){if(t){for(var r=t.clone(),i=t.clone(),a=1;a<r.length;a++){var o=r[a];if(a%2!=0){if(o){var s=n.fixed_length||o.startsWith(0);i[a]=s?o.length:0,r[a]=s?"(\\d{"+o.length+"})":"(\\d{1,"+n.max_serial_length+"})"}}else r[a]=e.to_RegExp_pattern(o)}return[r,i]}}function Ee(t){return function(t,n){var r=this.clone();"string"==typeof n?n=n.to_Date()||n:"number"==typeof n&&(n=new Date(n)),a(n)&&n.getTime()||(n&&e.error(["generator_toString: ",{T:["Invalid date: %1",n]}]),n=new Date);for(var i=1,o=1;o<r.length;o++){var s=r[o];Number.isSafeInteger(t)?r[o]="number"==typeof s?s?t.pad(s):t:s?n.format(s):"":r[o]="number"==typeof s?"%"+i++:s}return r.join("")}.bind(t)}function Se(t,n){(n=e.new_options(n)).max_serial_length>0||(n.max_serial_length=4);var r=Object.create(null);function i(e){var t=Oe(e,n);if(t){var i=t[1],a=(t=t[0]).join("");r[a]||((r[a]=[]).generator=i),r[a].push(e)}}t.forEach(function(e){i(function(e,t){var n=[];if(!e&&0!==e)return n;n.toString=xe;var r=/([^\d]+)(0*)([1-9]\d*)?/g,i=t.max_serial_length,a=(e=String(e)).match(/^\d+/);for(a&&((a=a[0]).length>i?n.push(a.slice(0,-i),a.slice(-i)):n.push("",a),r.lastIndex=a.length);a=r.exec(e);){a[3]||(a[3]="");var o=i-a[3].length;a[2].length<=o?n.push(a[1],a[2]+a[3]):0<=o?n.push(a[1]+a[2].slice(0,-o),"0".repeat(o)+a[3]):n.push(a[0],"")}return n}(e,n))}),Object.values(r).forEach(function(t){for(var n=[],r=1;r<t.length;r+=2)for(var a=Object.create(null),o=0;o<t.length;o++){var s=t[o],l=s[r];if(!l)break;l in a?(s[r-1]+=l,s[r]="",n.includes(o)||n.push(o),a[l]>=0&&((s=t[a[l]])[r-1]+=l,s[r]="",n.unshift(a[l]),a[l]=-1)):a[l]=o}n.length>0&&n.sort(e.descending).forEach(function(e){i(t.splice(e,1)[0])})}),Object.keys(r).forEach(function(e){var t=r[e];if(0!==t.length){if(e.includes("(\\d{1,")){var i=Object.clone(n);i.fixed_length=!0;for(var a=0;a<t.length;a++){var o=t[a],s=(e=(e=Oe(o,i))[0]).join("");r[s]&&(t.splice(a--,1),r[s].push(o))}}}else delete r[e]}),Object.keys(r).forEach(function(e){0===r[e].length&&delete r[e]}),Object.values(r).forEach(function(e){for(var t=e.generator,n=1,r=t.length;n<r;n+=2){var i=[];if(!e.some(function(e){var t=e[n];if(!t)return!0;i.push(t)})){var a=[["%Y",function(e){return 1900<=e&&e<=2200}],["%m",function(e){if(1<=e&&e<=12)return e<10&&e.length<2&&(this[2]=!0),!0}],["%d",function(e){if(1<=e&&e<=31)return e<10&&e.length<2&&(this[2]=!0),!0}]];if(0!==(a=a.filter(function(e){return i.every(function(t){return e[1](t)})})).length)switch(t[n]=[t[n]].append(a),a=a[0][0]){case"%Y":case"%m":t["has_"+a]=!0}}}for(n=1;n<t.length;n+=2){var o=t[n];if(Array.isArray(o)){var s=o[0];o=o[1],t[n]="%Y"===o[0]||t["has_%Y"]&&"%m"===o[0]||t["has_%m"]&&"%d"===o[0]?s||o[2]?o[0].replace("%","%"+s):o[0]:s}}});var a=Object.create(null);Object.keys(r).forEach(function(e){var t=e.replace(/\\d{\d{1,2}}/g,"\\d{1,"+n.max_serial_length+"}");if(a[t]){var i,o=r[e].generator.join(""),s=a[t].filter(function(e,t){if(e=r[e].generator.join(""),/%\d([md])/.test(e)!==/%\d([md])/.test(o)&&e.replace(/%\d([md])/g,"%$1")===o.replace(/%\d([md])/g,"%$1"))return i>=0||(i=t),!0});if(0!==s.length)s=s[0],/%\d([md])/.test(o)?(a[t].splice(i,1),a[t].push(o),o=e):(o=s,s=e),r[o].append(r[s]),delete r[s];else a[t].push(e)}else a[t]=[e]});var o=[];return Object.keys(r).forEach(function(e){for(var t=r[e],n=t.generator,i=1;i<n.length;i+=2)"string"==typeof n[i]&&(n[i]=n[i].replace(/^%0([md])$/g,"%$1"));o.push({pattern:new RegExp("^"+e+"$"),generator:Ee(n),items:t,count:t.length})}),o.sort(function(e,t){return t.count-e.count}),o}function Le(e){if(!((e=+e)<this.start[0])){var t=this.start.search_sorted(e,{found:!0}),n=this[t],r=this.contemporary[t];if(r){for(var i=r.end,a=0;i[a]<=e;)a++;r=r.slice(a)}else r=[];if(e<this.get_end(n))r.push(n);else if(0===r.length)return;return r}}return be=1,ve=/(\d+(?:\.\d+)?|\.\d+) ?UNIT(?:[^a-z]|$)/.source,ke=ke.map(function(e){return[new RegExp(ve.replace("UNIT",e[0]),"i"),e[2]?be*e[1]:be*=e[1]]}),i.to_millisecond=function(e){if("string"!=typeof e)return e>0?+e:e||0;var t,n=0,r=e.match(we);return r?e=r[0]:(r=e.match(/(?:^|\s)(\d{1,3}):(\d{1,2})(?::(\d{1,2}))?(?:\s|$)/))&&(e=r[1]+"H"+r[2]+"M"+(r[3]?r[3]+"S":"")),ke.forEach(function(i){(r=e.match(i[0]))&&(t=!0,n+=r[1]*i[1])}),t?n:2!==(r=e.split("/")).length||(r=r.map(function(e){return Date.parse(e)}),isNaN(r[0])||isNaN(r[1]))?void 0:r[1]-r[0]},Ae.PATTERN=/^(.+[^a-z]|[^\d]*\d.+)[\-–~－—─～〜﹣至]\s*([^\-].+)$/i,i.parse_period=Ae,i.get_date_range_via_cutting_month=function(t,n,r){r||n>=1?r=e.setup_options(r):n=(r=e.setup_options(n)).count,Array.isArray(t)||(a(t)||(t=new Date(t)),t=d(t),t=d.to_YMD(t,"CE"));var i=t[0],o=t[1];t=t[2];var s,l=d.from_YMD(i,o+1,1,"CE")-d.from_YMD(i,o,1,"CE");r.slice_days>=1&&!n?n=l/(s=r.slice_days)|0:l-n*(s=l/n|0)>2*s&&s++;var c=(t-1)/s|0;c>=n&&(c=n-1);var _=c*s+1,u=_+s-1;return 0===s?_=u=t:c===n-1&&(u=l),r.get_Date?(_=d.YMD_to_Date(i,o,_,"CE"),u=d.YMD_to_Date(i,o,u,"CE")):r.get_full_date&&(_=[i,o,_],u=[i,o,u]),[_,u]},Se.parse_generator=function(e){for(var t,n=new RegExp(/%(?:(\d?)(conversion)|(1)|(\d?)№)/.source.replace("conversion",Object.keys(M.default_conversion).join("|")),"g"),r=[],i=0;t=n.exec(e);)r.push(e.slice(i,t.index),t[3]?0:t[4]?+t[4]:t[0]),i=n.lastIndex;return i<e.length&&r.push(e.slice(i)),Ee(r)},i.detect_serial_pattern=Se,i.sort_periods=function(e,t,n,r){var i=[],a=[],o="function"==typeof t?t:function(e){return+e[t]},s="function"==typeof n?n:function(e){var t=+e[n];return isNaN(t)?+o(e)+r:t};function l(e,t){a.push([o(e),e])}if(r>0||(r=c),i.get_end=s,"function"==typeof e.forEach)e.forEach(l);else for(var _ in e)l(e[_]);a.sort(function(e,t){return e[0]-t[0]});var u,p,d,f,g=[],h=[];return i.start=g,i.contemporary=h,a.forEach(function(e,t){var n=e[0];i.push(e[1]),g.push(n),u?(u=u.slice(),p=p.slice()):(u=[],p=[]);for(var r=0;p[r]&&n<p[r];)r++;if(r>0&&(p.slice(r),u.slice(r)),n<d){for(r=0;p[r]<=d;)r++;p.splice(r,0,d),u.splice(r,0,f)}u.length>0?(h[t]=u).end=p:u=null,d=s(f=e[1])}),i.get_contemporary=Le,i},e.set_method(String.prototype,{to_Date:t(w)}),e.set_method(Date.prototype,{to_Excel:t(function(e,t){return(e=e.getTime()-(t?m:h))>=1?(e/=c)<60||t?e:e+1:NaN}),age:t(ge,!0),format:t(D)}),i}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki",require:"data.code.compatibility.|data.native.|data.date.",no_extend:"*",code:function(e){function t(r,i,a){if(!this||this.constructor!==t)return t.query.apply(null,arguments);var o,s;(a&&"object"==typeof a?(o=a,a=null):a||i||!r||"object"!=typeof r?o=Object.create(null):(o=r,r=null),r=r||o.user_name,i=i||o.password,a=a||o.API_URL,e.debug("URL of service endpoint: "+a+", default language: "+t.language,3,"wiki_API"),this.actions=[],o.is_running&&("string"==typeof o.is_running&&this.actions.unshift([o.is_running]),this.running=!0),this.token={lgname:r,lgpassword:i},a||"language"in this||this[t.KEY_HOST_SESSION]?"need_initialize"in o||(o.need_initialize=!0):(a=t.language,o.need_initialize=i&&r),"use_SQL"in o?this.use_SQL=o.use_SQL:a&&a.includes("://")&&(this.use_SQL=!1),a&&(a in t.language_code_to_site_alias&&(a=t.language_code_to_site_alias[a]),t.setup_API_language(this,a),t.setup_API_URL(this,a)),["site_name","data_API_URL","SPARQL_API_URL","language"].forEach(function(e){e in o&&(this[e]=o[e])},this),this.general_parameters=Object.clone(t.general_parameters),e.import_options(o,t.general_parameters_normalizer,this.general_parameters),e.is_WWW(!0)&&window.location&&"*"!==this.general_parameters.origin)&&((!window.location.host||(s=new URL(this.API_URL).host)&&s!==window.location.host&&s!==this.general_parameters.origin)&&e.warn(["wiki_API: ",{T:["You may need to set %1 = %2!",".origin",JSON.stringify(s)]}]));o.localStorage_prefix_key&&t.has_storage&&(this.localStorage_prefix=[e.Class,t.site_name(this),o.localStorage_prefix_key,""].join(e.env.module_name_separator)),this.API_parameters=Object.create(null),this.redirects_data=Object.create(null),o.need_initialize&&(this.run_after_initializing=[],this.run(n,o))}function n(n){var r=this;function i(){n.task_configuration_page?r.adapt_task_configurations(n.task_configuration_page,function(e){n.configuration_adapter&&n.configuration_adapter(e),a()}):a()}function a(){e.debug(t.site_name(r)+": 初始化程序登錄完畢。添加之前登錄的 "+r.actions.length+" 個程序",1,"initialization_complete"),r.actions.append(r.run_after_initializing),delete r.run_after_initializing}r.siteinfo(function(){r.load_template_functions?r.load_template_functions(null,i):i()})}return n.is_initializing_process=!0,Object.assign(t,{is_wiki_API:function(e){return e&&(e instanceof t||e.API_URL&&e.token)}}),e.is_WWW(!0)&&"object"==typeof mw&&mw&&"object"==typeof mw.config&&"function"==typeof mw.config.get&&"object"==typeof mediaWiki&&mediaWiki===mw&&(t.mw_web_session=!0),this.finish=function(n,r,i){var a=["namespace","parser","query","page","page.Page","Flow","list","edit","task","parser.wikitext","parser.section","parser.misc"];return e.platform.nodejs&&(t.wmflabs=require("fs").existsSync("/etc/wmflabs-project")&&(e.env.INSTANCENAME||e.env.HOSTNAME||!0)),t.wmflabs&&a.push("Toolforge"),e.debug({T:"Load the main functions and necessary dependencies to operate MediaWiki."},1,"wiki_API"),e.run(i(a),function(){if(t.mw_web_session=!1,t.mw_web_session)for(var n in t.mw_web_session=new t({API_URL:location.origin+mediaWiki.config.get("wgScriptPath")+"/api.php",localStorage_prefix_key:"mw_web_session"}),mediaWiki.user.tokens.values)t.mw_web_session.token[n.toLowerCase()]=mediaWiki.user.tokens.values[n];e.debug({T:"All wiki submodules are loaded."},1,"wiki_API")},r),r},t}}),"function"==typeof CeL&&CeL.run({name:"application.OS.Windows",code:function(e){var t=function(){};if(t.prototype={},t.new_COM="object"==typeof WScript?function(e){return WScript.CreateObject(e)}:"function"==typeof ActiveXObject?function(e){return new ActiveXObject(e)}:"object"==typeof Server&&Server.CreateObject&&function(e){return Server.CreateObject(e)},t.no_COM=!t.new_COM&&"No Component Object Model support!")return t.new_COM=function(t){if(!e.env.ignore_COM_error)throw new Error('new_COM: No method to get Microsoft <a href="http://en.wikipedia.org/wiki/Component_Object_Model" target="_blank">Component Object Model</a> (COM): ['+t+"]! You may need to set `CeL.env.ignore_COM_error = true`!")},t;t.is_COM=function(t){try{if(e.is_Object(t)&&""==""+t&&void 0===t.constructor){var n;for(n in t)return!1;try{return n=String(t),!1}catch(e){return!0}}return!1}catch(e){}},e.set_initializor(function(t){if(e.is_HTA)return e.is_WWW(!0)?document.getElementsByTagName("APPLICATION")[0]:e.is_WWW()&&t&&document.all&&document.all[t]},t);var n,r,i,a="WScript.Shell",o="Shell.Application",s="Scripting.FileSystemObject";function l(i){var c;if("string"==typeof a)try{a=t.new_COM(a),o=t.new_COM(o),s=t.new_COM(s)}catch(t){if(429==(65535&t.number))throw t;e.error(t)}else e.debug("Already initialized!",1,"get_WScript_object");if("object"==typeof WScript)r=Array.prototype.slice.call(WScript.Arguments),-1!==(c=(n=WScript.FullName).lastIndexOf(e.env.path_separator))&&(n=n.slice(c+1));else if((void 0===i?e.is_WWW()&&!t.get_HTA():i)||"undefined"==typeof ActiveXObject)e.is_WWW(1)&&!t.get_HTA()&&setTimeout(function(){l(i)},100);else try{(c=t.get_HTA())&&(r=function(e,t){for(var n,r=[],i=t?/\s+("([^"]*)"|(\S+))/g:/\s*("([^"]*)"|(\S+))/g;n=i.exec(e);)r.push(n[3]||n[2]);return r}(c.commandLine),n="mshta.exe")}catch(e){}try{(function(e){WScript.StdOut.WriteLine(e)})}catch(e){(function(e){WScript.Echo(e)})}if(c={WshShell:a,WinShell:o,FSO:s,args:r,WSH:n},i)throw c;return c}e.set_initializor(l,t),t.get_SpecialFolder=function(t,n){if(!i){var r=l().WshShell.SpecialFolders;i=[],"AllUsersDesktop,AllUsersStartMenu,AllUsersPrograms,AllUsersStartup,AppData,Desktop,Favorites,Fonts,MyDocuments,NetHood,PrintHood,Programs,Recent,SendTo,StartMenu,Startup,Templates".toUpperCase().split(",").forEach(function(t){var n=r.Item(t);n&&(i[t]=n,e.debug("SpecialFolder["+t+"] = ["+n+"]",2))});for(var a=0,o=r.Count();a<o;a++)i[a]=r.Item(a)}return t?(t=i[t.toUpperCase()])&&n&&(t+="\\"+n):t=i,t},t.VBNothing=function(){try{return new_COM("ADODB.RecordSet").ActiveConnection}catch(e){}},t.VBA_to_JSA=function(e){try{return new VBArray(e).toArray()}catch(e){}return[]},t.JSA_to_VBA=function(e){"object"!=typeof e&&(e=[e]);for(var t=0,n=new_COM("Scripting.Dictionary");t<e.length;t++)n.add(t,e[t]);try{return n.items()}finally{}};return t}}),"function"==typeof CeL&&CeL.run({name:"data",require:"data.code.compatibility.|data.native.to_fixed",code:function(e){var t=this.r("to_fixed"),r="".indexOf("_"),i=function(){};function a(n,r,i,a){if(Array.isArray(n)&&n.length){r||(r=10),i||(i=0,n[0]&&n.unshift(""));for(var o=1,s=n.length,l=new Array(s),c=i;++c<s;)o*=r,l[c]=o;if(i)for(c=i,o=1;c--;)o/=r,l[c]=o;if(l[i]=1,a)for(c=0;c<s;c++)n[c]=a+n[c];return e.debug("magnitude array of base "+r+": ["+l+"]",1,"set_order_prefix"),e.debug("prefixes of base "+r+": ["+n+"]",1,"set_order_prefix"),function(r,i){if("string"==typeof r&&(r=parseFloat(r.replace(/[, ]/g,""))),!r||isNaN(r))return 0;for(var a,o=0,c=s;o<(a=o+c>>1);)e.debug("compare: "+r+", ["+a+"]"+l[a],3,"set_order_prefix"),r<l[a]?c=a:o=a;return e.debug("index: ["+a+"] "+l[a]+", "+n[a],2,"set_order_prefix"),o=r/l[a],t.call(o,isNaN(i)||i<0?(c=Math.floor(o))<10?2:c<100?1:0:i)+n[a]}}}function o(t,n,r){var i=r?e.to_1000_prefix:e.to_1024_prefix,a=t+" byte"+(t>1?"s":"");return i=i(t)+"B",n&&"html"===n.toLowerCase()?i='<span title="'+a+'">'+i+"</span>":e.is_Object(n)?i={span:i,title:a}:"()"===n&&(i+=" ("+a+")"),i}function s(e){return e<128?1:e<2048?2:e<65536?3:e<2097152?4:e<67108864?5:e<2147483648?6:7}function l(e,t){for(var n=0,r=e.length;t>0&&n<r;n++)(t-=s(e.charCodeAt(n)))<0&&n--;return n===r?e:e.slice(0,n)}function c(t){var n=0,r=t.length,i=Object.create(null);for(r%2!=0&&e.warn("list_to_Object: The length ("+r+") of list is not an even number!");n<r;n+=2)"string"!=typeof t[n]&&e.warn("Set ("+typeof t[n]+") ["+t[n]+"] as key."),t[n]in i&&e.warn("Duplicated key: ["+t[n]+"]"),e.debug("pair["+t[n]+"] = ["+t[n+1]+"]",3),i[t[n]]=t[n+1];return i}function _(t,n,r){function i(){(a=_)!==s.pop()?(e.error("Bad data structure!"),s!==_&&s.push(_)):(a.d&&(a=c(a)),(_=s.at(-1)).push(a))}for(var a,o=0,s=[],_=s,u=/(.*?)([ldei\d])/g,p=/(-?\d*)(\D)/g,d=/(\d*)(\D)/g;;){if(u.lastIndex=o,!(a=u.exec(t))){o<t.length&&e.error("Last data skipped! ("+t.slice(o)+")");break}switch(a[1]&&(o+=a[1].length,e.error("Some data skipped! ("+a[1]+")")),a[2]){case"l":case"d":++o,s.push(_=[]),"d"===a[2]&&(_.d=!0);break;case"e":++o,i();break;case"i":p.lastIndex=++o,(a=p.exec(t))&&"e"===a[2]?(a[1]?p.lastIndex!==o+a[0].length&&e.error("Some integer data skipped! ("+t.slice(o,p.lastIndex-a[0].length)+")"):e.error('No integer specified ("ie" instead of /id+e/)!'),_.push(parseInt(a[1])),o=p.lastIndex):(e.error("Bad integer format! Exit parse!"),o=t.length);break;default:d.lastIndex=o,(a=d.exec(t))&&":"===a[2]?(a[1]&&0|a[1]?d.lastIndex!==o+a[0].length&&e.error("Some string data skipped! ("+t.slice(o,d.lastIndex-a[0].length)+")"):e.error("No string length specified! ("+a[1]+")"),(o=d.lastIndex)+(a=0|a[1])>t.length&&e.error("The end of string is beyond the end of data! (ask "+(o+a)+" - data left "+t.length+" = lost "+(o+a-t.length)+")"),e.debug(o+"+"+a,3),r?(_.push(t.substr(o,a)),o+=a):(a=l(t.substr(o,a),a),_.push(a),o+=a.length)):(e.error("Bad string format! Exit parse!"),o=t.length)}}for(s.length>1&&e.warn("Illegal data: 有錯誤或缺陷!");s.length>1&&Array.isArray(s.at(-1));)i();return n&&1!==s.length&&(n.error=!0),1===s.length?s[0]:s}function u(e){return e>=1&&Math.floor(e)===e}function p(e){return e>=0&&Math.floor(e)===e}function d(e){return Math.floor(e)===e}function f(t){var n=Object.create(null);return t.split("|").forEach(function(t){var r=t.match(/^([a-z]+):([\s\S]+)$/);if(r){t=r[1];var i=r[2];i in g.filters[t]?i=g.filters[t][i]:"number"===t&&(r=i.match(/([+\-]?\d+(?:\.\d+)?)?\s*[–~－—─～〜﹣至]\s*([+\-]?\d+(?:\.\d+)?)?/))?i=g.filters[t].range.bind([r[1]&&+r[1],r[2]&&+r[2]]):"string"===t?i=(r=i.match(e.PATTERN_RegExp))?new RegExp(r[1],r[2]):i.split(";"):e.warn("import_options: Invalid normalizer: "+i),n[t]=i}else n[t]=!0}),n}function g(t,n,r){for(var i in t=e.setup_options(t),r||(r=Object.create(null)),t){var a=t[i],o=n&&n[i];if("string"==typeof o&&(o=f(o)),"object"==typeof o){var s=Array.isArray(a)?"Array":e.is_RegExp(a)?"RegExp":e.is_Date(a)?"Date":null;if(s&&(s in o||(s=s.toLowerCase())in o)||(s=typeof a),!(s in o))continue;o=o[s]}if(void 0!==o||!n){if("function"==typeof o)a=o(a);else if(!h(o,a))continue;a!==g.INVALID&&(r[i]=a)}}return r}function h(t,n){if("boolean"==typeof t||null==t)return t;if(e.is_RegExp(t))return t.test(n);if("function"==typeof t)return t(n);if("string"==typeof t)return t===n;if(Array.isArray(t))return t.includes(n);throw new TypeError("Invalid filter")}return i.prototype={},i.clone=function t(n,r){if(!n||"object"!=typeof n)return n;if(Array.isArray(n)){if(r){var i=[];return n.forEach(function(e,n){i[n]=t(e,r)}),i}return Array.clone(n)}var a="clone"in n&&"function"==typeof n.clone;if(a)return n.clone();if("Date"===(a=e.is_type(n)))return new Date(n.getTime());if("RegExp"===a)return new RegExp(n);var o;i={};for(a in n)Object.hasOwn(n,a)&&(o=n[a],i[a]=r?t(o,r):o);return i},i.deep_merge_object=function t(n,r){var i;if(Array.isArray(n)?n.forEach(function(e,a){0===a?n=e:a===this.length-1?i=e:n=t([n,e],r)}):i=r,"object"!=typeof n||null===n||!i)return i||n;function a(e,t){for(var n in e)o(n,e,t);return t}function o(t,n,r){var i=n[t];if("object"==typeof i&&t in r){var s=r[t];Array.isArray(i)?Array.isArray(s)?(Object.keys(i).forEach(function(t){e.is_digits(t)||o(t,i,s)}),s.append(i)):"object"==typeof s?a(i,s):r[t]=i:"object"!=typeof s?r[t]=i:a(i,s)}else r[t]=i}return a(i,n)},i.char_frequency=function(t){var n,r,i,a=[],o=""+t,s=o.length,l="",c="",_=-1,u=_;for(n=0;n<s;n++)a[r=o.charCodeAt(n)]?a[r]++:a[r]=1;for(n=_;n<256;n++)a[n]?(u+1===n&&(l+=","+n,c+=u<0?"":"-"+u),_=n):(_+1===n&&(c+=","+n,l+=_<0?"":"-"+_),u=n);for(n=0,o="used:"+l.substr(1)+"\nunused:"+c.substr(1)+"\n",i=function(t,n){var r,i,a,o=[],s=[],l=[];for(r in t)a=isNaN(r)?r:parseFloat(r),void 0===o[i=isNaN(i=t[r])?i:parseFloat(i)]?(l.push(i),o[i]=a):"object"==typeof o[i]?o[i].push(a):o[i]=[o[i],a];for(r=0,l.sort(e.ascending);r<l.length;r++)if("object"==typeof(a=o[l[r]]))if(1===n)s.push(a.join(","));else if(2===n)s.push(a);else for(i in a)s.push(a[i]);else s.push(a);return s}(a,2).reverse();n<i.length;n++)o+=NewLine+(r=i[n])+"["+fromCharCode(r).replace(/\0/g,"\\0").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"]:\t"+(r=a["object"==typeof r?r[0]:r])+"\t"+100*r/s;return alert(o),o},i.count_word=function(e,t){var n=1&t;return"object"==typeof e&&(e.innerText?(e=e.innerText,n=!1):e.innerHTML&&(e=e.innerHTML,n=!0)),"string"!=typeof e?0:(n&&(e=e.replace(/<!--([\s\S]*?)-->/g,"").replace(/<[\s\n]*\/?[\s\n]*[a-z][^<>]*>/gi,"")),2&t&&(e=e.replace(/[\+\-–*\\\/?!,;.<>{}\[\]@#$%^&_|"'~`—…、，；。！？：()（）「」『』“”‘’]{2,}/g,";")),e.replace(/[()（）《》〈〉＊＃]+/g,"").replace(/\d*\.?\d+([^.]|$)/g,"0$1").replace(/\d+\s*[a-zA-Z°]+(\s*\/\s*(\d+\s*)?[a-zA-Z°]+)?/g,"0").replace(/[,;:.?!\-–"'()⟨⟩«»\[\]{}<>$%#@~`^&*\\\/⁄+=|]+/g,"").replace(/[\wÀ-ÖØ-öø-ȳ]{2,}/g,"w").replace(/[\d:+\-–\.\/,]{2,}/g,"0").replace(/[\s\n]+/g,"").length)},i.dec_to_bin=function(e,t){if(t&&e+1<1<<t){for(var n="",r=(i=e.toString(2)).length;r<t;r++)n+="0";return n+i}return e.toString(2);var i},(i.set_Object_value=function(t,n,i,a){if(n&&"string"==typeof t){var o,s,l,c=0,_="=",u=",",p="if(typeof "+t+"!='object')"+t+"=new "+(a?"Array":"Object")+";",d=!1,f="\\u002c",g="\\u003d";for(i&&("string"==typeof o&&('"'!==(o=i.charAt(0))&&"'"!==o||(_=(o=i.split(o))[1],u=o[2],i=o[3])),"int"===i?(i=1,d=!0):"float"===i?i=.1:isNaN(i)?i=0:i===parseInt(i)?(i=parseInt(i),d=!0):i=parseFloat(i)),"string"==typeof n&&(n=n.split(u)),f=new RegExp(f.replace(/([\.\\\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1"),"g"),g=new RegExp(g.replace(/([\.\\\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1"),"g"),i&&(l=-i);c<n.length;c++)n[c].indexOf(_)===r&&(n[c]=a?_+n[c]:n[c]+_),a&&n[c]===_?l+=i:(o=n[c].split(_),(a||o[0])&&(o[0]=o[0].replace(f,",").replace(g,"="),o[1]=o[1].replace(f,",").replace(g,"="),i&&(a?o[0]?isNaN(s=a>0?parseInt(o[0],a):o[0])||(l=d?o[0]=parseInt(s):parseFloat(s)):o[0]=l+=i:o[1]?isNaN(o[1])||(l=d?parseInt(o[1]):parseFloat(o[1])):o[1]=l+=i),(!i||d&&isNaN(s=parseInt(o[1]))||isNaN(s=parseFloat(o[1])))&&(s=o[1]),o=o[0],p+=t+"["+(!i||isNaN(o)?e.dQuote(o):o)+"]="+(!i||isNaN(s)?e.dQuote(s):s)+";"));try{return e.eval_code(p)}catch(p){return e.error("Error @ "+t),void e.error(p)}}}).F={object:0,array:-1},i.split_String_to_Object=function(e,t,n){if("string"!=typeof e||!e)return{};t||(t=/[=:]/);for(var r,i={},a=0,o=(e=e.split(n||/[,;]/)).length;a<o;a++)""!==(r=e[a].split(t,2))[0]&&(i[r[0]]=r[1]);return i},i.same_length=function(e,t){if("string"==typeof m&&"string"==typeof n){if(!e||!t)return 0;var r=e.length,i=0,a=t.length;if(r<a){if(0===t.indexOf(e))return r}else if(r=a,0===e.indexOf(t))return r;for(;(r=r+1>>1)>1&&(a=t.substr(i,r));){0,e.indexOf(a,i)===i&&(i+=r)}return r&&e.charAt(i)===t.charAt(i)?i+1:i}},i.remove_duplicate_characters=function(e){if(!(e=String(e)))return"";for(var t,n=0,r=(e=e.split("")).length,i=[];n<r;n++)(t=e[n].charCodeAt(0))in i?e[n]="":i[t]=1;return e.join("")},i.to_KiB=o,i.to_KB=function(e,t){return o(e,t,!0)},e.set_initializor(function(){var e="yzafpnμm kMGTPEZY",t=e.indexOf(" ");return(e=e.split(""))[t]="",a(e,1e3,t," ")}),e.set_initializor(function(){return a(",Ki,Mi,Gi,Ti,Pi,Ei,Zi,Yi".split(","),1024,0," ")}),i.get_Object_value=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},i.swap_key_value=function(t,n,r){var i;if(n||(n={}),e.is_type(r,"RegExp"))for(i in t)r.test(i)&&(n[t[i]]=i);else for(i in t)n[t[i]]=i;return n},e.dependency_chain&&(i.dependency_chain=e.dependency_chain),i.bytes_of_char_code=s,i.byte_count=function(e){for(var t=0,n=e.length,r=0;t<n;t++)r+=s(e.charCodeAt(t));return r},i.cut_by_bytes=l,i.list_to_Object=c,i.parse_bencode=_,i.parse_torrent=function(t,n){var r=e.get_file(t),i=Object.create(null);if(r&&"d"===r.charAt(0)){if(e.debug(r,4),n){var a=/4:name(\d{1,4}):/,o=r.match(a);return o&&(o=0|o[1])>0?(e.debug("["+t+"] length: "+o,3),l(r.substr(a.lastIndex,o),o)):void 0}return r=_(r,i)}e.error((r?"Illegal":"Cannot get")+" torrent data of ["+t+"]!")},g.filters={number:{range:function(e){return("number"!=typeof this[0]||this[0]<=e)&&("number"!=typeof this[1]||e<=this[1])},natural:u,"ℕ":u,"natural+0":p,"ℕ+0":p,integer:d,"ℤ":d},string:{IPv4:/^[12]?\d{1,2}\.[12]?\d{1,2}\.[12]?\d{1,2}\.[12]?\d{1,2}$/,email:/^[a-z0-9+_~-]+(\.[a-z0-9+_~-]+)*@([a-z\d]([a-z\d-]*[a-z\d])?\.)+([a-z]{2}|com|org|net)\b$/i,decimal:/^[+\-]?(?:\d+|\d*\.\d+)$/,digits:e.is_digits}},g.INVALID={invalid_value:!0},i.import_options=g,i.fit_filter=h,i}}),"function"==typeof CeL&&CeL.run({name:"data.numeral",require:"data.code.compatibility.|data.native.",code:function(e){var t="".indexOf("_"),n=function(){};function r(e){var t,n=[],r=[];function i(e){e&&(1===e.length?n.push(e):r.push(e))}if(Array.isArray(e))e.forEach(i);else for(t in e)i(t);return n=n.length>0?"["+n.join("")+"]":"",r.length>0&&n&&r.push(n),new RegExp(r.length>0?"(?:"+r.join("|")+")":n,"g")}n.prototype={};var i,a="〇一二三四五六七八九",o=a.split(""),s=r(o),l=new RegExp("("+s.source+"|\\d+)","g"),c=new RegExp(l.source+"?([十百千])","g"),_="零壹貳參肆伍陸柒捌玖",u=_.split(""),p=r(u),d=a+_+"〇〡〢〣〤〥〦〧〨〩".slice(1)+"０１２３４５６７８９",f=new RegExp("["+d+"]","g"),g=new RegExp("^["+d+"]+$"),h={"Ｏ":"〇","○":"〇","弌":"壹","弍":"貳","兩":"二","叁":"參","叄":"參","弎":"參","亖":"四","䦉":"肆","壱":"壹","弐":"貳","貮":"貳","参":"參","陆":"陸","廿":"二十","卄":"二十","卅":"三十","丗":"三十","卌":"四十","皕":"二百","陌":"佰","阡":"仟","万":"萬","萬萬":"億","杼":"秭","壤":"穰","厘":"釐"},m=",萬,億,兆,京,垓,秭,穰,溝,澗,正,載,極".split(","),y=r(m),b=new RegExp("(.*?)("+y.source+")","g"),v=new RegExp(l.source+"([分釐毫絲忽微纖沙塵埃渺漠])","g"),w=",十,百,千,萬,億,兆,京,垓,秭,穰,溝,澗,正,載,極".split(","),k=",拾,佰,仟,萬,億,兆,京,垓,秭,穰,溝,澗,正,載,極".split(","),A=new RegExp("(?:負?(?:["+a+"\\d ]["+w.join("")+"]*|["+w.join("")+"]+)+(又|分之)?)+","g"),x=new RegExp("^(?:負?["+a+"\\d "+w.join("")+"又]+|分之)+$"),O=Object.create(null);function E(e){return e.replace(i,function(e){return h[e]})}function S(e){return e.replace(p,function(e){return a.charAt(_.indexOf(e))}).replace(/[拾佰仟]/g,function(e){return"十百千".charAt("拾佰仟".indexOf(e))})}function L(e){return isNaN(e=e.replace(f,function(e){return O[e]}))?e:+e}function T(e){if(!isNaN(e))return+e;c.lastIndex=0;for(var t,n=0,r=0;t=c.exec(e);)r=c.lastIndex,n+=(t[1]&&"〇"!==t[1]?O[t[1]]:1)*O[t[2]];return e=e.slice(r).replace(/^〇+/,""),l.lastIndex=0,(t=l.exec(e))&&(n+=isNaN(t=t[0])?O[t]:+t),n||0}function j(e,t){for(var n,r=0,i="",a=e.length-1,s=t?u:o,l=s[0],c=t?k:w;r<=a;r++)if("0"!==(n=e.charAt(r)))i+=s[n]+c[a-r];else if(i.slice(-1)!=l){if(!Math.floor(e.slice(r+1)))break;i+=l}return i}function N(e,n){if(e="number"==typeof e?e.toString(10):""+e,!/^[+\-]?(?:\d+(?:\.\d*)?|(?:\d*\.)?\d+)$/.test(e))return e.replace(/[+\-]?(?:\d+(?:\.\d*)?|(?:\d*\.)?\d+)/g,function(e){var t=e.match(/^(\s*)(\S.*?)(\s*)$/);return t?t[1]+N(t[2],n)+t[3]:e});var r,i,a,s,l=e.indexOf("."),c=!1,_=n?u:o,p=_[0];if(l===t)l=0;else for(i=(e=e.replace(/0+$/,"")).slice(l+1),e=e.slice(0,l),l="",r=0;r<i.length;r++)l+=_[i.charAt(r)];for("-"===e.charAt(0)?(i="負",e=e.slice(1)):i="",r=(s=(e=e.replace(/^0+/,"")).length%4)-4,a=(e.length-(s||4))/4;r<e.length;s=0,a--)Math.floor(s=s?e.slice(0,s):e.substr(r+=4,4))?(s=j(s,n),(c=c&&s.charAt(0)!=p)?(i+=p+s+m[a],c=!1):i+=s+m[a]):c=!0;return(i?i.replace(/^(負)?[一壹]([十拾])/,"$1$2"):p)+(l?"點"+l:"")}n.Chinese_numerals_Normal_digits=a,n.Chinese_numerals_Formal_digits=_,n.Chinese_numerals_Denominations=m.join(""),function(){var e,t=0;for(o.forEach(function(e){O[e]=t,t++}),e=t,"十,百,千".split(",").forEach(function(n){O[n]=t,t*=e}),e=t,m.forEach(function(n){n&&(O[n]=t,t*=e)}),t=.1,"分釐毫絲忽微纖沙塵埃渺漠".split("").forEach(function(e){e&&(O[e]=t,t/=10)}),t=1;t<"〇〡〢〣〤〥〦〧〨〩".length;t++)e="〇〡〢〣〤〥〦〧〨〩".charAt(t),O[e]=t,h[e]=a[t];for(t=0;t<"０１２３４５６７８９".length;t++)e="０１２３４５６７８９".charAt(t),O[e]=t,h[e]=a[t];i=r(h)}(),n.normalize_Chinese_numeral=E,n.Chinese_numerals_Formal_to_Normal=S,n.Chinese_numerals_Normal_to_Formal=function(e){return e.replace(s,function(e){return _.charAt(a.indexOf(e))}).replace(/[十百千]/g,function(e){return"拾佰仟".charAt("十百千".indexOf(e))})},n.positional_Chinese_numerals_digits=d,n.from_positional_Chinese_numeral=L,n.to_positional_Chinese_numeral=function(e,t){return t=t?u:o,(""+e).replace(/\d/g,function(e){return t[e]})},n.from_Chinese_numeral=function e(t){if(!t||!isNaN(t))return t;if(t=S(E(""+t)),!x.test(t))return A.lastIndex=0,t.replace(A,function(t){var n=t.match(/^(\s*)(\S.*?)(\s*)$/);if(!n)return t;var r=n[2].charAt(0);return n[2]="負十".includes(r)||d.includes(r)||(r=n[2].charAt(1))&&("十".includes(r)||d.includes(r))?e(n[2]):n[2],n[1]+n[2]+n[3]});var n=0,r=0,i="負"===t.charAt(0),a=t.match(/^(負)?(?:(.+)又)?(.+)分之(.+)$/);if(a)return n=(a[2]&&e(a[2])||0)+e(a[4])/e(a[3]),i?-n:n;for(b.lastIndex=0;a=b.exec(t);)n+=T(a[1]||1)*O[a[2]],r=b.lastIndex;if(t=t.slice(r),v.lastIndex=0,(r=v.exec(t))?(r=r.index,a=[,t.slice(0,r),t.slice(r)]):a=t.match(/(.*)[點又.](.*)/)||[,t],n+=g.test(a[1])?L(a[1]):T(a[1]),t=a[2]){var o=.1;for(r=0;;o/=10){if(v.lastIndex=r,a=v.exec(t))r=v.lastIndex,o=O[a[2]],a=a[1];else{if(l.lastIndex=r,!(a=l.exec(t)))break;r=l.lastIndex,a=a[0]}n+=(a=isNaN(a)?O[a]:a>9?a.replace(/^(\d)/,"$1."):+a)*o}}return i?-n:n},n.to_Chinese_numeral=N,n.to_TWD=function(e){return"string"==typeof e&&(e=e.replace(/[\s,$]+/g,"")),"新臺幣"+((e=N(e,!0).replace(/([佰仟萬億兆京垓秭穰溝澗正載極])零/g,"$1").replace(/^拾/,"壹拾")).includes("點")?e.replace(/點(.)(.)?(.)?/,function(e,t,n,r){return"圓"+t+"角"+(n?n+"分"+(r?r+"文":""):"")}):e+"圓整")},n.to_Japanese_numeral=function(e){return N(e).replace(/〇/g,"").replace(/萬/,"万")};var R={0:"zero",1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen",17:"seventeen",18:"eighteen",19:"nineteen",20:"twenty",30:"thirty",40:"forty",50:"fifty",60:"sixty",70:"seventy",80:"eighty",90:"ninety",100:"hundred",1000:"thousand",1000000:"million",1000000000:"billion",1000000000000:"trillion",1000000000000000:"quadrillion",1000000000000000000:"quintillion"};function P(e){var t=e/100|0;if(e%=100)if(e in R)e=R[e];else{var n=e%10;n=n?R[n]:"",(e=e/10|0)?(e=R[10*e],n&&(e+="-"+n)):e=n}return t?(t=R[t]+" "+R[100],e&&(t+=" and "+e)):t=e,t}function C(t,n){var r;if("string"==typeof t&&10===(r=t.chars()).length){var i=new RegExp(t.length===r.length?"["+t+"]":r.join("|"),"g");return r.forEach(function(e,t){h[e]=t}),a.from=function(e){return e=String(e).replace(i,function(e){return h[e]}),isNaN(e)||(e=Number(e)),e},a}function a(e){return String(e).replace(/\d/g,function(e){return r[e]})}e.error("Invalid digits of ["+n+"]: ("+r.length+") ["+t+"]")}n.to_English_numeral=function t(n){if(n!=Math.floor(n)&&e.error("Cannot conver ["+n+"]!"),(n=Math.floor(n))<0)return"negative "+t(-n);if(n<91&&n in R)return R[n];for(var r,i=1,a=[],o=n%1e3;n=Math.floor(n/1e3);)i*=1e3,(r=n%1e3)&&a.unshift(P(r)+" "+R[i]);return(a=a.join(", "))?o&&(a+=" and "+P(o)):a=o?P(o):"",a},function(){var e={Arabic:"٠١٢٣٤٥٦٧٨٩",Perso:"۰۱۲۳۴۵۶۷۸۹",Balinese:"᭐᭑᭒᭓᭔᭕᭖᭗᭘᭙",Bangla:"০১২৩৪৫৬৭৮৯",Brahmi:"𑁦𑁧𑁨𑁩𑁪𑁫𑁬𑁭𑁮𑁯",Chakma:"𑄶𑄷𑄸𑄹𑄺𑄻𑄼𑄽𑄾𑄿",Cham:"꩐꩑꩒꩓꩔꩕꩖꩗꩘꩙",Devanagari:"०१२३४५६७८९",Gujarati:"૦૧૨૩૪૫૬૭૮૯",Gurmukhi:"੦੧੨੩੪੫੬੭੮੯",Javanese:"꧐꧑꧒꧓꧔꧕꧖꧗꧘꧙",Kannada:"೦೧೨೩೪೫೬೭೮೯",Kayah_Li:"꤀꤁꤂꤃꤄꤅꤆꤇꤈꤉",Khmer:"០១២៣៤៥៦៧៨៩",Lanna:"᪀᪁᪂᪃᪄᪅᪆᪇᪈᪉",Tai_Tham:"᪐᪑᪒᪓᪔᪕᪖᪗᪘᪙",Lao:"໐໑໒໓໔໕໖໗໘໙",Lepcha:"᱀᱁᱂᱃᱄᱅᱆᱇᱈᱉",Limbu:"᥆᥇᥈᥉᥊᥋᥌᥍᥎᥏",Malayalam:"൦൧൨൩൪൫൬൭൮൯",Meitei_Mayek:"꯰꯱꯲꯳꯴꯵꯶꯷꯸꯹",Mongolian:"᠐᠑᠒᠓᠔᠕᠖᠗᠘᠙",Myanmar:"၀၁၂၃၄၅၆၇၈၉",Myanmar_Shan:"႐႑႒႓႔႕႖႗႘႙",Neu_Tai_Lue:"᧐᧑᧒᧓᧔᧕᧖᧗᧘᧙",NKo:"߀߁߂߃߄߅߆߇߈߉",Oriya:"୦୧୨୩୪୫୬୭୮୯",Ol_Chiki:"᱐᱑᱒᱓᱔᱕᱖᱗᱘᱙",Osmanya:"𐒠𐒡𐒢𐒣𐒤𐒥𐒦𐒧𐒨𐒩",Saurashtra:"꣐꣑꣒꣓꣔꣕꣖꣗꣘꣙",Sharada:"𑇐𑇑𑇒𑇓𑇔𑇕𑇖𑇗𑇘𑇙",Sorang_Sompeng:"𑃰𑃱𑃲𑃳𑃴𑃵𑃶𑃷𑃸𑃹",Sundanese:"᮰᮱᮲᮳᮴᮵᮶᮷᮸᮹",Takri:"𑛀𑛁𑛂𑛃𑛄𑛅𑛆𑛇𑛈𑛉",Tamil:"௦௧௨௩௪௫௬௭௮௯",Telugu:"౦౧౨౩౪౫౬౭౮౯",Tibetan:"༠༡༢༣༤༥༦༧༨༩",Thai:"๐๑๒๓๔๕๖๗๘๙",Vai:"꘠꘡꘢꘣꘤꘥꘦꘧꘨꘩"};for(var t in e){var r=C(e[t],t);r&&(n["to_"+t+"_numeral"]=r,n["from_"+t+"_numeral"]=r.from)}}();var I,U={"ↅ":"VI","ↆ":"L","Ⅼ":"L","Ⅽ":"C","Ⅾ":"D","Ⅿ":"M","ⅼ":"L","ⅽ":"C","ⅾ":"D","ⅿ":"M","ↀ":"M"},D={},M=[],F="IVXLCDMↁↂↇↈ".split(""),z=F.indexOf("ↁ");function W(t,n){if(!(t>0)||t!=(0|t))return t;var r=[],i=0|t;n=n?F.length:z;for(var a=0;i>0;a+=2){if(a>=n)return void e.error("The number is too large to be expressed in Roman numerals: "+t);var o,s=i%10;i=i/10|0,(s+1)%5==0&&n>(o=a+(4===s?1:2))?o=F[a]+F[o]:(s>4&&(o=F[a+1])?s-=5:o="",o+=F[a].repeat(s)),r.push(o)}return r.reverse().join("")}function q(e,t){if(!t)return e;if(1===t.length)return e+D[t];var n=D[t[0]],r=D[t[1]];return r>n?e+r-n:e+n+r*(t.length-1)}function H(e){return String(e).replace(I,function(e){return U[e]})}return F.forEach(function(e,t){var n=t%2==0;if(D[e]=(n?1:5)*Math.pow(10,t/2|0),n){var r=F[t+1];M.unshift("("+(r?e+"["+r+F[t+2]+"]|"+r+"?":"")+e+"*)")}}),M=new RegExp(M.join(""),"i"),n.to_Roman_numeral=W,n.from_Roman_numeral=function(e){var t=H(e).match(M);return t?t.slice(1).reduce(q,0):e},n.normalize_Roman_numeral=H,"ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ".split("").forEach(function(e,t){U[e]=W(t+1)}),"ⅰⅱⅲⅳⅴⅵⅶⅷⅸⅹⅺⅻ".split("").forEach(function(e,t){U[e]=W(t+1)}),I=new RegExp("["+Object.keys(U)+"]","g"),n}}),"function"==typeof CeL&&CeL.run({name:"application.locale",require:"data.numeral.to_Chinese_numeral|data.numeral.to_positional_Chinese_numeral",code:function(e){var t=this.id,n=this.r("to_Chinese_numeral"),r=this.r("to_positional_Chinese_numeral"),i=function(){};function a(e){return a.parse.call(this,e)}i.prototype={},a.language_RegExp=/^(?:(?:([a-z]{2,3})(?:-([a-z]{4,8}|[a-z]{3}(?:-[a-z]{3}){0,1}))?))(?:-([a-z]{4}))?(?:-([a-z]{2}|\d{3}))?((?:-(?:[a-z\d]{2,8}))*)$/,a.privateuse_RegExp=/^x((?:-(?:[a-z\d]{1,8}))+)$/,a.privateuse_fragment_RegExp=/-([a-z\d]{1,8})/g,a.parse=function(t){this.tag=t,t=String(t).toLowerCase();var n=1,r=a.language_RegExp.exec(t);if(r){if(e.debug(r.join("<br />"),3,"language_tag.parse"),this.language=r[n++],this.extlang=r[n++],this.script=(r[n++]||"").replace(/^[a-z]/,function(e){return e.toUpperCase()}),this.region=(r[n++]||"").toUpperCase(),this.external=r[n++],e.is_debug(2))for(n in this)e.debug(n+" : "+this[n],2,"language_tag.parse")}else if(r=a.privateuse_RegExp.exec(t)){for(e.debug("parse privateuse subtag ["+t+"]",2,"language_tag.parse"),t=r[1],this.privateuse=n=[],a.privateuse_fragment_RegExp.exec("");r=a.privateuse_fragment_RegExp.exec(t);)n.push(r[1]);e.debug("privateuse subtag: "+n,2,"language_tag.parse")}else e.is_debug()&&e.warn("unrecognized language tag: ["+t+"]");return this},a.convert=function(){throw new Error("language_tag.convert: "+f("Not Yet Implemented!"))},a.LANGUAGE_CODE={ZH:"zh",CN:"cmn-Hans",HK:"cmn-Hant",TW:"cmn-Hant",JP:"ja",KR:"ko",GB:"en",UK:"en",US:"en",FR:"fr",DE:"de",RU:"ru",Arab:"arb"},a.language_code=function(t,n){var r=a.LANGUAGE_CODE[a.region_code(t)];if(r||a.LANGUAGE_CODE[r=t.toLowerCase()]||(e.is_debug()&&e.warn("language_tag.language_code: 無法辨識之國家/區域：["+t+"]"),!n))return r},a.REGION_CODE={"臺":"TW","臺灣":"TW","台":"TW","台灣":"TW","中文":"ZH","陸":"CN","大陸":"CN","中國":"CN","中國大陸":"CN",jpn:"JP","日":"JP","日本":"JP","港":"HK","香港":"HK","韓國":"KR","英國":"GB","美國":"US","法國":"FR","德國":"DE","俄國":"RU","俄羅斯":"RU","阿拉伯":"Arab"},function(){for(var e in a.REGION_CODE)(e=a.REGION_CODE[e])&&!a.REGION_CODE[e]&&(a.REGION_CODE[e]=e);for(var t in a.LANGUAGE_CODE)a.REGION_CODE[a.LANGUAGE_CODE[t].toLowerCase()]=t;for(var t in a.LANGUAGE_CODE)(t=a.LANGUAGE_CODE[t])&&!a.LANGUAGE_CODE[t]&&(a.LANGUAGE_CODE[t]=t)}(),a.region_code=function(t,n){var r=a.REGION_CODE[t];if(r||(e.debug("嘗試解析 ["+t+"]。",3,"language_tag.region_code"),/^[a-z\-]+$/i.test(t)?(e.debug("嘗試 reversed alias 的部分。",3,"language_tag.region_code"),r=a.REGION_CODE[t.toLowerCase()]):r=(r=t.match(/^(.+)[語文]$/))?a.REGION_CODE[r[1]]||a.REGION_CODE[r[1]+"國"]:a.REGION_CODE[t+"國"],!r&&(r=t.match(/-([a-z]{2,3})$/))&&(r=a.REGION_CODE[r[1].toUpperCase()]),r||a.REGION_CODE[r=t.toUpperCase()]||(e.is_debug()&&e.warn("language_tag.region_code: 無法辨識之國家/區域：["+t+"]"),!n)))return r},i.language_tag=a;var o={".":"。"},s={"、":",","。":"."},l=/^(?:cmn|yue|ja)-/;function c(e,t){if(!e)return e;if(l.test(t)){if(e in o)return o[e];if(/^ *\.{3,} *$/.test(e))return e=e.trim(),"…".repeat(e.length>6?Math.ceil(e.length/3):2);if(/^ja-/.test(t)&&","===e)return"、";if(1===e.length)if((n=e.charCodeAt(0))<255)return String.fromCharCode(n+65248)}else if(/^[^\x20-\xfe]/.test(e)){if(e in s)return s[e];if(/^…+$/.test(e))return e.length>2?"...".repeat(e.length):"...";var n;if(1===e.length)if((n=e.charCodeAt(0))>65248)return String.fromCharCode(n-65248)}return e.length>1?e.replace(/%(\d)|(:)\s*|./g,function(e,n,r){if(n)return e;if(r){if(!l.test(t))return e;e=r}return c(e,t)}):e}var _="gettext_plural_rules",u=Object.create(null);f.set_plural_rules=function(e){for(var t in e){var n=e[t];(t=f.to_standard(t))&&(u[t]=n)}};var p=/\{\{PLURAL: *(%)?(\d+) *\|/,d=new RegExp("("+p.source+")"+/([\s\S]+?)\}\}/.source,"ig");function f(t){function n(t,n){var r,s;if(e.is_debug(9)&&console.trace(a),"function"==typeof t||"object"==typeof t)i=!0;else if(!(t in a)){var _=String(t).match(g);_&&_[2]in a?(r=_[1],s=_[3],t=_[2]):i=!0}return i||(t=a[t],r&&(t=c(r,l)+t),s&&(t+=c(s,l))),"function"==typeof t?t(l,o,n):t}function r(r,i){var o=[l,a];a=F[l=r]||Object.create(null);var s=String(n(e.is_Object(t)?t[l]:t));return i&&(l=o[0],a=o[1]),s}var i,a,o=arguments,s=o.length,l=this&&this.domain_name||U,_=r(l),h=i&&this&&(this.force_convert||this.getAttribute&&this.getAttribute("force_convert"));if(h&&(Array.isArray(h)||(h=h.split(",")),h.some(function(e){if((e=f.to_standard(e))&&e!==l){var t=r(e,!0);return i?void 0:(l=e,_=t,!0)}})),e.debug("Use domain_name: "+l,6,"gettext"),_=function(e,t,n){var r,i=u[n];return Array.isArray(i)&&(r=i[0],i=i[1]),e=e.replace_till_stable(d,function(e,n,a,o,s){for(var l,c="";l=s.match(p);)c+=n+s.slice(0,l.index),n=l[0],a=l[1],o=l[2],s=s.slice(l.index+n.length);var _=a?t[o]:o;_<0&&(_=-_);var u,d,f=("function"==typeof i?i(+_):i)+1,g=1;return(s=s.split("|")).some(function(e,t){var n=e.match(/^(\d+)=([\s\S]*)$/);return n?(g--,t=+n[1],e=n[2],t==_?(u=e,!0):void(d||(d=e))):(t+=g,f>=1?void(t===f?u=e:2===t&&2!==r&&1!=_&&2===s.length?u=e:d=e):(d=e,t==_?(u=e,!0):void 0))}),c+(void 0===u?d:u)})}(_,o,l),s<=1)return _;for(var m,y=[],b=0,v=!1,k=/([\s\S]*?)%(?:(%)|(?:([^%@\s\/]+)\/)?(?:([^%@\s\d]{1,3})|([^%@]+)@)?(\d{1,2})(\|\d)?)/g;m=k.exec(_);){m[7]&&k.lastIndex--,b=k.lastIndex;var A=m[0];if(m[2])y.push(A);else{var x=+m[6],O=m[4];if(x<s&&(!O&&!(O=m[5])||O in f.conversion)){if(0===x)A=t;else{var E=m[3],S=E&&F[E];if(S){var L=a,T=l;e.debug("臨時改變 domain: "+l+"→"+E,6,"gettext"),l=E,a=S,A=n(o[x],E),e.debug("回存/回復 domain: "+l+"→"+T,6,"gettext"),l=T,a=L}else A=n(o[x])}O&&(A=Array.isArray(x=f.conversion[O])?w(A,x,O):x(A,E||l))}else e.warn("gettext: "+(x<s?"Unknown format ["+O+"]":"given too few arguments: "+s+" <= No. "+x));"object"==typeof A?(v=!0,y.push(m[1],A)):y.push(m[1]+String(A))}}return y.push(_.slice(b)),v?y:y.join("")}var g=/^(\.{3,}\s*)?([\s\S]+?)(\.{3,}|…+|:\s*(%\d)?|[,;:.?!~、，；：。？！～])$/;function h(e){e&&(Array.isArray(e)&&e.every(function(e){return Array.isArray(e)})?this.append(e):this.push(e))}i.trim_punctuation_marks=function(e){var t=e.match(g);return t?t[2]:e};var m=/[\s—、，；：。？！（）［］｛｝「」『』〔〕【】〖〗〈〉《》“”‘’§(\[<{⟨‹«\u4e00-\u9fffぁ-んーァ-ヶ]$/,y=/^[\s)\]>}⟩›»）］｝」』〕】〗〉》”’‰‱]/;function b(e){var t=this.converting();if(e||""===e)return t.join(e);for(var n=0;n<t.length;){var r=t[n];if(r&&!m.test(r)){for(var i,a=n;++n<t.length;)if((i=t[n])||0===i){y.test(i)||(t[a]+=" ");break}}else++n}return t.join("")}function v(t,n,r){t||(t=U);var i=W[t];return i||(W[t]=i=Object.create(null)),n&&((n=[,"system","user"][n])?"boolean"==typeof r&&(e.debug("登記 ["+t+"] 已經載入資源 ["+n+"]。",2,"gettext_check_resources"),i[n]=r):n=null),n?i[n]:i}function w(t,n,r){var i,a=t<n.length?parseInt(t):n.length-1;if(a<0)e.debug({T:["Negative index: %1",a]}),a=1;else for(;a>=0&&!(i=n[a]);)a--;if(i&&"string"==typeof i)return r&&(i=i.replace(/%n/g,r)),i.replace(/%d/g,t);e.warn({T:["Nothing matched for amount [%1]",t]})}function k(n,r,i){var a=n===_;if(n&&(a||(n=f.to_standard(n)))||(n=f.default_domain),n&&(n!==U||i)){n in F||!a||(F[n]=Object.create(null));var o=[];v(n,1)||(e.debug("準備載入系統相應 domain resources。",2,"gettext"),o.push(e.get_module_path(t,CeL.env.resources_directory_name+"/"+n+".js"),function(){a||(e.debug("Resources of module included.",2,"gettext"),v(n,1,!0))})),"function"==typeof z&&(z=z()),"string"!=typeof z||v(n,2)||(e.debug("準備載入 user 指定 domain resources，如語系檔。",2,"gettext"),o.push("string"==typeof z?z+n+".js":z(n),function(){e.debug("User-defined resources included.",2,"gettext"),v(n,2,!0)})),o.length>0?(e.debug("need_to_load: "+o,2,"load_domain"),e.run(o,"function"==typeof r&&function(){e.debug("Running callback...",2,"gettext"),r(n)})):(e.debug("Nothing to load."),v(n,2,!0))}else"function"==typeof r&&r(n)}function A(){if(e.is_WWW())return f.to_standard(navigator.userLanguage||navigator.language||navigator.browserLanguage||navigator.systemLanguage);function t(e,t,n){try{var r=require("child_process").execSync(e,{stdio:"pipe"}).toString();return t&&(r=r.match(t)[1]),n&&(r=n[r]),f.to_standard(r)}catch(e){}}if(e.platform.is_Windows())return t('PowerShell.exe -Command "& {Get-WinSystemLocale | Select-Object LCID}"',/(\d+)[^\d]*$/,A.LCID_mapping)||t("WMIC.EXE OS GET CodeSet",/(\d+)[^\d]*$/,A.code_page_mapping)||t("CHCP",/(\d+)[^\d]*$/,A.code_page_mapping);var n=e.env.LANG;return n?f.to_standard(n):t("locale",/(?:^|\n)LANG=([^\n]+)/)}h.prototype=Object.assign(Object.create(Array.prototype),{constructor:h,converting:function(){var e=[];return this.forEach(function(t){(t=function e(t){if(!Array.isArray(t))return f(t);for(var n=[t[0]],r=1;r<t.length;r++)n[r]=e(t[r]);return f.apply(null,n)}(t))&&e.push(t)}),e},join:b,toString:b}),f.Sentence_combination=h,f.append_message_tail_space=function(e,t){if(t&&"string"!=typeof t&&t.no_more_convert||(e=f.apply(null,arguments)),!e||m.test(e))return e;var n=t&&t.next_sentence;return n&&!y.test(n)||0===n?e+" ":e},f.in_domain=function(e,t){var n="object"==typeof e?e:"string"==typeof e?{domain_name:f.to_standard(e)}:{domain:e};if(arguments.length<=2)return f.call(n,t);var r=Array.prototype.slice.call(arguments);return r.shift(),f.apply(n,r)},f.use_domain_location=function(e){return"string"==typeof e&&(z=e,v("",2,!1)),z},f.get_domain_name=function(){return U},f.is_domain_name=function(e){return U===f.to_standard(e)},f.load_domain=k,f.use_domain=function(t,n,r){if("boolean"==typeof n&&void 0===r&&(r=n,n=void 0),"GUESS"===t&&(t=A()),!t)return t=F[U],"function"==typeof n&&n(t),t;var i=t in F;return i||(i=f.to_standard(t))&&(i=(t=i)in F),i?(U=t,e.debug({T:["已載入過 [%1]，直接設定使用者自訂資源。",t]},2,"gettext.use_domain"),v(t,2,!0),"function"==typeof n&&n(t)):r&&t?(e.is_WWW()&&e.is_included("interact.DOM")?e.debug({T:[t===U?"強制再次載入/使用 [%2] (%1) 領域/語系。":"載入/使用 [%2] (%1) 領域/語系。",t,f.get_alias(t)]},1,"gettext.use_domain"):e.debug((t===U?"FORCE ":"")+"Loading/Using domain/locale ["+f.get_alias(t)+"] ("+t+").",1,"gettext.use_domain"),t in F||(F[t]=Object.create(null)),k(t,function(){U=t,"function"==typeof n&&n(t)})):(t?t!==U&&e.warn({T:["所指定之 domain [%1] 尚未載入，若有必要請使用強制載入 flag。",t]}):"function"==typeof n&&e.is_debug()&&e.warn("無法判別 domain，卻設定有 callback。"),"function"==typeof n&&n(t)),F[t]},A.code_page_mapping={437:"en-US",866:"ru-RU",932:"ja-JP",936:"cmn-Hans-CN",949:"ko-KR",950:"cmn-Hant-TW",1256:"arb-Arab",54936:"cmn-Hans-CN"},A.LCID_mapping={1028:"cmn-Hant-TW",1033:"en-US",1041:"ja-JP",1042:"ko-KR",1049:"ru-RU",2052:"cmn-Hans-CN",2057:"en-GB",3076:"cmn-Hant-HK",14337:"arb-Arab"},f.guess_language=A,f.set_text=function(t,n,r){e.is_Object(t)&&(n||(n=U),n in F||(n=f.to_standard(n)),!r&&n in F?Object.assign(F[n],t):F[n]=t)},f.get_alias=function(e){return arguments.length>0?D[e in D?e:f.to_standard(e)]:D},f.set_alias=function(t){var n,r,i,a,o;if(e.is_Object(t))for(n in t){if("string"==typeof(i=t[n]))i=i.split("|");else if(!Array.isArray(i)){e.warn(["gettext.set_alias: ",{T:["Illegal domain alias list: [%1]",i]}]);continue}for(i.push(n),a=0,o=i.length;a<o;a++){if(r=i[a])e.debug({T:["Adding domain alias [%1] → [%2]...",r,n]},2,"gettext.set_alias"),n in D||(D[n]=r),(r=r.replace(/_/g,"-").toLowerCase()).split(/-/).forEach(function(e){M[e]||(M[e]=[]),M[e].includes(n)||M[e].push(n)})}}},f.to_standard=function(t,n){var r;if("string"==typeof t)return n=!0===n?{get_list:!0}:e.setup_options(n),(t=t.replace(/_/g,"-").toLowerCase()).split(/-/).reverse().some(function(e){if(M[e]){if(r)return(r=Array.intersection(r,M[e])).length<2||void 0;r=M[e]}}),n.get_list?r?r.clone():[]:r&&r[0]};var x={"ja-JP":9,"cmn-Hans-CN":8,"cmn-Hant-TW":8};i.time_zone_of_language=function(e){return e in x?x[e]:x[f.to_standard(e)]},i.detect_HTML_language=function(e){var t=e.match(/<html ([^<>]+)>/);return t&&(t=t[1].match(/lang=(?:"([^"]+)"|([^\s<>]+))/i))?f.to_standard(t[1]||t[2]):(t=e.match(/<meta [^<>]+?content=(?:"([^"]+)"|([^\s<>]+))/i))&&(t=(t[1]||t[2]).match(/charset=([^;]+)/))?(t={big5:"cmn-Hant-TW",gbk:"cmn-Hans-CN",gb2312:"cmn-Hans-CN",eucjp:"ja-JP",shiftjis:"ja-JP",sjis:"ja-JP"}[(t=t[1]).toLowerCase().replace(/[\s\-]/g,"")]||t,f.to_standard(t)):void 0},f.translate_nodes=function(t){e.for_nodes&&(I=f.DOM_id_key,e.for_nodes(f.translate_node,t))},f.translate_node=function(t){var n,r,i,a,o=0;try{!(r=(n=e.DOM_data&&e.DOM_data(t)||t.dataset)&&n[I])&&f.document_title&&("title"===t.tagName.toLowerCase()&&(r=f.document_title),e.set_text.need_check_title||(e.DOM_data(t,I,f.document_title),delete f.document_title))}catch(t){e.warn(["gettext.translate_node: ",{T:"Failed to extract gettext id."}])}if(n){var s=I+"_element_title";if(t.title&&!n[s]&&F[U]&&t.title in F[U]&&(n[s]=t.title),n[s]&&(t.title=f(n[s])),r){for(i=[r];(a=I+ ++o)in n;)i.push(n[a]);t.on_language_changed?t.on_language_changed(i):e.set_text(t,f.apply(t,i))}else t.on_language_changed&&t.on_language_changed(i)}},f.DOM_id_key=I="gettext",f.DOM_separator="|",f.adapt_domain=function(t,n){return e.debug({T:["Loading language / domain [%1]...",t]},1,"gettext.adapt_domain"),f.use_domain(t,function(){e.debug({T:["Language / domain [%1] loaded.",t]},1,"gettext.adapt_domain");try{document.getElementsByTagName("html")[0].setAttribute("lang",t)}catch(e){}e.is_WWW()&&f.translate_nodes(),E.onchange.forEach(function(e){e(t)}),"function"==typeof n&&n(t)},!0),!1};var O={"arb-Arab":"🇦🇪"};function E(t,n,r){if(t&&n&&e.new_node){0;var i=[],a=f.get_domain_name();n.forEach(function(e){var t;if((e=f.to_standard(e))in O)t=O[e];else if(t=e&&e.match(/-([A-Z]{2})$/)){var n="🇦".codePointAt(0)-"A".codePointAt(0);t=String.fromCodePoint.apply(null,t[1].chars().map(function(e){return n+e.codePointAt(0)}))}else t="";var r={option:t+f.get_alias(e),value:e};e===a&&(r.selected=!0),i.push(r)}),i={select:i,onchange:function(t){f.adapt_domain(e.node_value(this))}},(a=E.tag)&&(i=[{T:a},": ",i]),"function"==typeof r&&E.onchange.push(r),e.new_node(i,t)}}E.tag="Language",E.onchange=[],f.create_menu=E;var S={Chinese:!0};function L(e,t){return t&&e in t?e:f.to_standard(e||U)}f.numeral=function(t,r){switch(r=L(r,S),e.debug({T:["轉換數字：[%1]成 %2 格式。",t,r]},6),r){case"Chinese":return n(t);case"en-US":return e.to_English_numeral(t);case"cmn-Hant-TW":default:return t}},f.numeral.decimal_mark=function(e){switch(e=L(e)){case"cmn-Hant-TW":default:return"."}},f.numeral.thousands_separator=function(e){switch(e=L(e)){case"cmn-Hant-TW":default:return","}};var T=["th","st","nd","rd"];function j(e,t){switch(t=L(t,S)){case"Chinese":return"string"==typeof e?e.replace(/\d+/,function(e){return R[e]}):R[e]||r(e);case"en-US":return j[t][e];default:return e}}f.ordinal=function(e,t){switch(t=L(t,S)){case"Chinese":return"第"+f.numeral(e,t);default:var n=0|e;return n!==e||n<1?e:e+(n=3<e&&e<21?T[0]:T[n%10]||T[0])}},f.currency=function(t,n){switch(n=L(n)){case"cmn-Hant-TW":return e.to_TWD(t);case"en-US":var r=function(e){return e.replace(/(\d+)(\d{3}(?:[.,]|$))/,function(e,t,n){return r(t)+","+n})};return r("US$"+t);default:return t}};var N=e.is_Date,R=["","正"],P=[""];function C(e,t,n){switch(t=L(t)){case"cmn-Hant-TW":case"cmn-Hans-CN":return(n?"星期":"")+C.cmn[e];case"ja-JP":return C[t][e]+(n?"曜日":"");case"en-US":var r=C[t][e];return n?r:r.slice(0,3);default:return e}}!function(){for(var e,t=2;t<=12;)R.push(n(t++));for(t=1;t<=30;)(e=n(t++)).length<2?e="初"+e:e.length>2&&(e=e.replace(/二十/,"廿")),P.push(e)}(),Object.assign(j,{"en-US":",January,February,March,April,May,June,July,August,September,October,November,December".split(","),Chinese:R}),Object.assign(C,{"en-US":"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),"ja-JP":"日月火水木金土".split(""),cmn:"日一二三四五六".split("")}),f.date=function(e,t){if(t=L(t),e&&!N(e)&&e.to_Date&&(e=e.to_Date(t)),!e||!e.format)return e;switch(t){case"cmn-Hant-TW":return e.format("%Y年%m月%d日",{locale:t});default:return e}},e.set_method(f.date,{year:function(e,t){switch(t=L(t,S)){case"Chinese":if(1==e)return"元";var i="";return e<0&&(i="前",e=-e),i+(e>99?r(e):n(e));default:return e}},month:j,date:function(e,t){switch(t=L(t,S)){case"Chinese":return P[e]||r(e);default:return e}},week:C,full_week:function(e,t){return C(e,t,!0)}}),f.time=function(e,t){if(t=L(t),e&&!N(e)&&e.to_Date&&(e=e.to_Date(t)),!e||!e.format)return e;switch(t){case"cmn-Hant-TW":return e.format("%H時%M分%S秒",{locale:t});default:return e}},f.datetime=function(e,t){if(t=L(t),e&&!N(e)&&e.to_Date&&(e=e.to_Date(t)),!e||!e.format)return e;switch(t){case"cmn-Hant-TW":return e.format("%Y年%m月%d日 %H時%M分%S秒",{locale:t});default:return e}},f.conversion={"數":function(e){return n(e)},"数":function(t,r){return"ja-JP"===r?e.to_Japanese_numeral(t):n(t).replace(/萬/,"万")},"漢数":e.to_Japanese_numeral,"成":function(e){return(e=n((10*e).to_fixed(1))).includes("點")?e=e.replace(/點/,"成"):e+="成",e},"割":function(e){return(e=n((10*e).to_fixed(1))).includes("點")?e=e.replace(/點/,"割")+"分":e+="割",e},"折":function(e){if((e=(100*e).to_fixed(0))!==(0|e)||e<10||99<e)throw f("無法轉換數字 [%1]！",e);return(e=r(e).replace(/(.)〇/,"$1"))+"折"},"碼":function(e){return 400*e+"碼"},"％":function(e){return(100*e).to_fixed()+"%"},"‰":function(e){return(1e3*e).to_fixed()+"‰"},"‱":function(e){return(1e4*e).to_fixed()+"‱"},d:f.date,t:f.time,T:f.datetime,n:f.numeral,o:f.ordinal,c:f.currency};var I,U,D=Object.create(null),M={}&&Object.create(null),F=Object.create(null),z=e.env.domain_location,W=Object.create(null);f.default_domain={"arb-Arab":"العربية|ar|Arabic|阿拉伯語|ar-arb-Arab|ar-AE|ar-SA","cmn-Hant-TW":"繁體中文|zh-TW|繁體|zh-cmn-Hant-TW|TW|Hant|Chinese|傳統中文|正體中文|正體|漢語|華語|中文|中國|臺灣|台灣|官話|中華民國國語|Traditional Chinese","cmn-Hans-CN":"简体中文|zh-CN|简体|zh-cmn-Hans-CN|CN|Hans|Chinese|简化字|简化中文|簡化字|簡體中文|普通话|中国|中国大陆|官话|Simplified Chinese|Mandarin Chinese","cmn-Hant-HK":"香港普通話|zh-yue-Hant-HK|Cantonese|香港華語|香港官話","nan-Hant-TW":"臺灣閩南語|min-nan-Hant-TW|Taiwanese|zh-min-nan|zh-min-nan-Hant-TW|臺語|台語|臺灣話|台灣話|閩南語|河洛話|福老話","yue-Hant-HK":"香港粵語|zh-yue-Hant-HK|Hong Kong Cantonese|港式粵語|香港話|港式廣東話|港式廣州話","en-US":"English|en-US|英語|en-eng-Latn-US|en-Latn-US|eng-Latn-US|US|USA|United States|美語|美國英語|美式英語","en-GB":"British English|en-GB|英國英語|en-eng-Latn-GB|en-Latn-GB|eng-Latn-GB|en-UK|Great Britain|United Kingdom|英式英語","ja-JP":"日本語|ja-JP|Japanese|日語|日文|国語|日本|JP|ja-jpn-Jpan-JP|ja-Jpan-JP|jpn-Jpan-JP","ko-KR":"한국어|ko-KR|Korean|韓國語|조선어|朝鮮語|조선말|고려말|韓文|韓語|ko-kor-Kore-KR|ko-Kore-KR|kor-Kore-KR|KR","th-TH":"ไทย|th-TH|Thai|泰語|泰國","ru-RU":"Русский|ru-RU|Russian|俄語|rus-Cyrl-RU|ru-rus-Cyrl-RU|RU","tyv-RU":"Тыва дыл|tyv-RU-TY|Tuvan|圖瓦語","fr-FR":"Français|fr-FR|French|法語","de-DE":"Deutsch|de-DE|German|德語","es-ES":"Español|es-ES|Spanish|西班牙語","pt-BR":"Português|pt-BR|Brazilian Portuguese|巴西葡萄牙語|葡萄牙語|Português brasileiro","nl-NL":"Nederlands|nl-NL|Dutch|荷蘭語","sv-SE":"Svenska|sv-SE|Swedish|瑞典語","mk-MK":"Македонски јазик|mk-MK|Macedonian|馬其頓語","kn-IN":"ಕನ್ನಡ|kn-IN|Kannada|康納達語","ks-IN":"کٲشِر|ks-IN-JK|Kashmiri|喀什米爾語","guw-BJ":"gungbe|guw-BJ|Gun|康納達語","lb-LU":"Lëtzebuergesch|lb-LU|Luxembourgish|盧森堡語","pms-IT":"Piemontèis|pms-IT|Piedmontese|皮埃蒙特語"},f.set_alias(f.default_domain),f.default_domain=A(),this.finish=function(e,t){if(k(_),f.default_domain)return f.use_domain(f.default_domain,function(){f.adapt_domain(f.default_domain,t)},!0),t},i.gettext=f;var q=[],H=[],$="萬與兩竝乘亂龜豫爭亙亞佛假會傳體餘倂價侮儉僞僧免兒黨圓册寫處劍劑剩勵勞效敕勉勤勸勳區醫卑單卽嚴參雙收敍臺號喝營嘆囑器團圍圖國圈壓墮塀壘塚鹽增墨壞壤壯聲壹賣變奧奬孃學寶實寬寢對壽專將堯盡屆屬層嶽峽巖巢卷帶歸廳廣廢廊辨瓣辯貳彌彈當徑從德徵應戀恆惠悔惱惡慘愼慨憎懷懲戰戲戾拂拔擇擔拜據擴擧挾插搜揭搖攝擊敏數齊齋斷既舊晝晉晚曉暑曆朗條來樞榮櫻棧梅檢樓樂槪樣槇權橫欄缺歐歡步齒歷殘毆殺殼每氣沒澤淨淺濱海淚渴濟涉澁溪渚溫灣濕滿瀧滯漢潛瀨燈爐點爲燒煮犧狀獨狹獵猪獻獸琢瑤甁畫疊癡發盜縣眞硏碎碑禮社祈祉祐祖祝神祥祿禪禍禎福祕稱稻穀穗穩穰突竊龍節粹肅絲經繪繼續總綠緖練緣繩縱繁纖罐署飜者聰聽膽腦臟臭舍舖艷藝莖莊著藏薰藥虛虜蟲蠶螢蠻衞裝褐襃霸視覺覽觀觸譯證譽讀諸謁謠謹讓豐賓贊贈踐轉輕辭邊遞逸遲遙郞鄕都醉釀釋鐵鑛錢鑄鍊錄鎭關鬪陷險隆隨隱隸雜難靈靜響頻賴顏顯類飮驛驅騷驗髓髮鷄麥黃黑默齡".split(""),B="万与両並乗乱亀予争亘亜仏仮会伝体余併価侮倹偽僧免児党円冊写処剣剤剰励労効勅勉勤勧勲区医卑単即厳参双収叙台号喝営嘆嘱器団囲図国圏圧堕塀塁塚塩増墨壊壌壮声壱売変奥奨嬢学宝実寛寝対寿専将尭尽届属層岳峡巌巣巻帯帰庁広廃廊弁弁弁弐弥弾当径従徳徴応恋恒恵悔悩悪惨慎慨憎懐懲戦戯戻払抜択担拝拠拡挙挟挿捜掲揺摂撃敏数斉斎断既旧昼晋晩暁暑暦朗条来枢栄桜桟梅検楼楽概様槙権横欄欠欧歓歩歯歴残殴殺殻毎気没沢浄浅浜海涙渇済渉渋渓渚温湾湿満滝滞漢潜瀬灯炉点為焼煮犠状独狭猟猪献獣琢瑶瓶画畳痴発盗県真研砕碑礼社祈祉祐祖祝神祥禄禅禍禎福秘称稲穀穂穏穣突窃竜節粋粛糸経絵継続総緑緒練縁縄縦繁繊缶署翻者聡聴胆脳臓臭舎舗艶芸茎荘著蔵薫薬虚虜虫蚕蛍蛮衛装褐褒覇視覚覧観触訳証誉読諸謁謡謹譲豊賓賛贈践転軽辞辺逓逸遅遥郎郷都酔醸釈鉄鉱銭鋳錬録鎮関闘陥険隆随隠隷雑難霊静響頻頼顔顕類飲駅駆騒験髄髪鶏麦黄黒黙齢".split("");return $.forEach(function(e){q.push(new RegExp(e,"g"))}),B.forEach(function(e){H.push(new RegExp(e,"g"))}),i.to_旧字体=function(e){return H.forEach(function(t,n){e=e.replace(t,$[n])}),e},i.to_常用漢字=function(e){return q.forEach(function(t,n){e=e.replace(t,B[n])}),e},i}}),"function"==typeof CeL&&CeL.run({name:"interact.DOM",require:"data.code.compatibility.|data.code.|data.native.|data.split_String_to_Object|application.locale.gettext",code:function module_code(library_namespace){var module_name=this.id,split_String_to_Object=this.r("split_String_to_Object"),gettext=this.r("gettext"),_=function(){};_.prototype={},library_namespace.is_WWW(!0)&&window.matchMedia&&(window.matchMedia("(prefers-color-scheme: dark)").matches?_.navigator_theme="dark":window.matchMedia("(prefers-color-scheme: light)").matches&&(_.navigator_theme="light"));var ELEMENT_NODE=1,TEXT_NODE=3,DOCUMENT_NODE=9;library_namespace.is_WWW(!0)&&!isNaN(document.ELEMENT_NODE)&&(ELEMENT_NODE=document.ELEMENT_NODE,TEXT_NODE=document.TEXT_NODE,DOCUMENT_NODE=document.DOCUMENT_NODE);var W3C_BASE="http://www.w3.org/";W3C_BASE.startsWith("http")||(W3C_BASE=W3C_BASE.slice(W3C_BASE.indexOf("http")));var get_object_type=Object.prototype.toString,element_pattern=/^\[object HTML([A-U][A-Za-z]{1,15})?Element\]$/;_.is_HTML_element=function(e){var t=get_object_type.call(e);return element_pattern.test(t)||"[object Text]"===t&&e.nodeType===TEXT_NODE},_.is_HTML_element_type=function(e,t){var n=get_object_type.call(e);return t===TEXT_NODE?"[object Text]"===n&&e.nodeType===TEXT_NODE:e.nodeType===t&&(t===DOCUMENT_NODE||element_pattern.test(n))},_.is_DOM_NODE=function(e){return e&&e.nodeType===(0|e.nodeType)&&"nextSibling"in e},_.is_ELEMENT_NODE=function(e){return element_pattern.test(get_object_type.call(e))&&e.nodeType===ELEMENT_NODE};var DOCUMENT_TYPE=library_namespace.is_WWW()&&get_object_type.call(document)||"[object HTMLDocument]";_.is_DOCUMENT_NODE=function(e){return get_object_type.call(e)===DOCUMENT_TYPE&&e.nodeType===DOCUMENT_NODE},_.is_NodeList=function(e){var t=get_object_type.call(e);return"[object NodeList]"===t||"[object HTMLCollection]"===t};var NBSP=" ",i;function show_node(e){var t=get_object_type.call(e);_.is_NodeList(e)?library_namespace.debug(e.length+" node list "+t+": "+e[0]+"...",1,"show_node"):_.is_ELEMENT_NODE(e)?library_namespace.debug("node"+(e.tagName?" &lt;"+e.tagName+(e.id?"#"+e.id:"")+"&gt;":"")+": type "+typeof e+", toString.call: "+t+', ""+node: '+e+", nodeType: "+e.nodeType+("outerHTML"in e?": "+e.outerHTML:"innerHTML"in e?": "+e.innerHTML:""),1,"show_node"):(library_namespace.debug(t+(e&&"object"==typeof e?".nodeType = "+e.nodeType+(e.nodeType===DOCUMENT_NODE?" (DOCUMENT_NODE)":""):""),1,"show_node"),e.nodeType===DOCUMENT_NODE&&library_namespace.debug("wondow.document.body: ["+e.body.innerHTML.replace(/</g,"&lt;")+"]",3,"show_node"))}function HandleError(e,t,n){if("Microsoft Internet Explorer"==window.navigator.appName)return!window.confirm(t+"\n\nJavaScript Error: "+n+"\n"+e+"\n\nSee more details?");"Netscape"==window.navigator.appName&&window.navigate("javascript:")}function OnResize(){history.go(0)}function roll_status(e,t,n,r){var i="    ";if(r||(r=e.length,e+=i+e),(!n||n>=r+i.length)&&(n=0),e){if(e.slice(n)!=window.status&&e.length>a)return}else{if("string"!=typeof window.status)return;roll_status(window.status,t)}isNaN(t)||t>999?t=999:t<0&&(t=0);for(var a=99;e.length<a;)e+=i+e;window.status=e.slice(++n),roll_statusS=window.setTimeout('roll_status("'+e+'",'+t+","+n+","+r+");",t)}function disableKM(e,t){if(document.body){if(void 0===e&&(e=1),void 0===disabledKM&&(disabledKM=0),!e)return disabledKM&&(window.ondragstart=document.body.Oondragstart||null,window.oncontextmenu=document.body.Ooncontextmenu||null,window.onselectstart=document.body.Oonselectstart||null,2==disabledKM&&(document.body.style.overflow="string"==typeof document.body.Ooverflow?document.body.Ooverflow:"auto"),window.onmousedown=window.Oonmousedown||null,window.onkeydown=window.Oonkeydown||null,window.onmousedown=document.Oonmousedown||null,window.onkeydown=document.Oonkeydown||null),void(disabledKM=0);disabledKM?2==e?document.body.style.overflow="hidden":"string"==typeof document.body.Ooverflow&&(document.body.style.overflow=document.body.Ooverflow):(document.body.Ooverflow=document.body.style.overflow,2==e&&(document.body.style.overflow="hidden"),void 0!==window.onselectstart&&(document.body.Oonselectstart=window.onselectstart),void 0!==window.oncontextmenu&&(document.body.Ooncontextmenu=window.oncontextmenu),void 0!==window.ondragstart&&(document.body.Oondragstart=window.ondragstart),window.ondragstart=window.oncontextmenu=window.onselectstart=function(){return!1},void 0!==window.onmousedown&&(document.Oonmousedown=window.onmousedown),void 0!==window.onkeydown&&(document.Oonkeydown=window.onkeydown),void 0!==document.onmousedown&&(document.Oonmousedown=document.onmousedown),void 0!==document.onkeydown&&(document.Oonkeydown=document.onkeydown)),window.onmousedown=window.onkeydown=document.onmousedown=document.onkeydown=document.onContextMenu=new Function("e",'if(window.navigator.appName=="Microsoft Internet Explorer"&&event.button!=1||window.navigator.appName=="Netscape"&&e.which!=1){'+(t?"alert("+dQuote(t)+");":"")+"return false;}"),!disabledKM&&window.Event&&window.captureEvents&&(window.captureEvents(Event.MOUSEDOWN),window.captureEvents(Event.KEYDOWN)),disabledKM=e}}function toggle_display(e,t){if(e=get_element(e)){var n=(""+e.tagName).toLowerCase(),r=e.style,i={visible:1,hidden:2,collapse:3};if(void 0!==t&&2!=t||(t=r?"none"===(_.get_style?_.get_style(e,"display"):r.display):"visible"!==e.visibility),"boolean"==typeof t&&(t=t?1:0),isNaN(t)||(t=0==t?r?"none":"tr"===n?"collapse":"hidden":1==t?r?n in{div:1,iframe:1}?"block":"inline":"visible":null),library_namespace.debug("type: "+t,2,"toggle_display"),r)r[t in i?"visibility":"display"]=t;else{if(!(t in i))return;e.visibility=t}return t}}function replace_HTML(e,t){if(e&&"string"==typeof e&&(e=document.getElementById(e)),e&&!t&&"function"==typeof e.replaceChildren)return e.replaceChildren(),e;if(!e||!e.innerHTML)return e;try{e.innerHTML=t||""}catch(e){library_namespace.warn("replace_HTML() error!"),library_namespace.error(e)}return e}function remove_node(e,t){var n;if("string"==typeof e&&(e=document.getElementById(e)),_.is_ELEMENT_NODE(e)){if(t)for("string"==typeof t&&(t=t.toLowerCase()),n=e.childNodes.length;n--;)(1===t||_.is_ELEMENT_NODE(e.childNodes[n])&&t===e.childNodes[n].tagName.toLowerCase())&&e.removeChild(e.childNodes[n]);return t||!(n=e.parentNode)?e:n.removeChild(e)}}function set_attribute(e,t,n){if((e=get_element(e))&&t){var r,i,a=new_node.ns;for(var o in"string"==typeof t&&(t=/[=:]/.test(t)?split_String_to_Object(t):t.split(",")),Array.isArray(t)&&(i=1===t.length?t[0]:1,t=split_String_to_Object(t.join(","))),t)"class"!==o||t.className||(t[o="className"]=t.class),(i||o in t&&null!=t[o])&&("className"==o||"function"==typeof t[o]?i?t[o]=e[o]:e[o]=t[o]:e.setAttributeNS&&(r=o.match(/^(.+):([^:]+)$/))?(-1==(r=r[1]).indexOf("://")&&a[r.toLowerCase()]&&(r=W3C_BASE+a[r.toLowerCase()]),i?t[o]=e.getAttributeNS(r,o):e.setAttributeNS(r,o,t[o])):i?t[o]=e.getAttribute(o):e.setAttribute(o,t[o]));return"string"==typeof i?t[i]:t}}function add_node(e,t){var n=add_node;if((e=get_element(e))&&arguments.length>2)for(var r=1,i=arguments.length;r<i;r++)n(e,arguments[r]);else if(e&&t)if(library_namespace.is_RegExp(t)&&(t=""),"object"!=typeof t)("string"==typeof t||"number"==typeof t&&!isNaN(t))&&_.node_value(e,t);else if(t)if(Array.isArray(t))for(r=0,i=t.length;r<i;r++)n(e,t[r]);else try{e.appendChild(t)}catch(e){library_namespace.warn("add_node: Cannot insert node!")}}_.NBSP=NBSP,function(){try{var e,t=window.document.createElement("div");if(t.nodeType!==ELEMENT_NODE)throw 0;try{e=t.getElementsByTagName("div"),_.is_NodeList(e)||"[object Object]"!==get_object_type.call(e)||(_.is_NodeList=function(e){try{return e&&"[object Object]"===get_object_type.call(e)&&!e.tagName&&void 0!==e.item&&!isNaN(e.length)&&(e.length>0?_.is_HTML_element(e[0]):null===e[0])}catch(e){}})}catch(e){}if(!(e=element_pattern.test(get_object_type.call(t)))){if(element_pattern.test(""+t))_.is_HTML_element=function(e){return e&&(element_pattern.test(""+e)||"object"==typeof e&&e.nodeType===ELEMENT_NODE&&"[object NamedNodeMap]"==""+e.attributes)};else{if("[object Object]"!==get_object_type.call(t))throw 1;_.is_HTML_element=function(e){return"[object Object]"===get_object_type.call(e)&&e&&"number"==typeof e.nodeType},_.is_Object=function(e){return"[object Object]"===get_object_type.call(e)&&e&&"number"!=typeof e.nodeType}}_.is_HTML_element_type=function(e,t){return _.is_HTML_element(e)&&e.nodeType===t},_.is_ELEMENT_NODE=function(e){return _.is_HTML_element(e)&&e.nodeType===ELEMENT_NODE}}}catch(e){}finally{t=null}}(),_.toggle_display=toggle_display,_.replace_HTML=replace_HTML,_.remove_node=remove_node,_.remove_all_child=_.replace_HTML,_.set_attribute=set_attribute,_.add_node=add_node;var need_check_title=library_namespace.is_WWW()&&navigator.userAgent.match(/MSIE (\d+)/),setFrameTarget,setFrameTargetSet;function set_text(e,t,n){if(e=get_element(e)){n=library_namespace.setup_options(n);var r=set_text.p;"string"==typeof r&&r||(set_text.p=r="string"==typeof document.body.textContent?"textContent":"string"==typeof document.body.innerText?"innerText":"innerHTML");var i="string"==typeof e.value?"value":r;if(void 0!==t)if(need_check_title&&"title"===e.tagName.toLowerCase())document.title=t;else if(e[i]=t,"input"===e.tagName.toLowerCase()&&n.resize){var a=String(t);a=a.display_width?a.display_width():a.length,a=get_style(e,"font-size","numeral")*(a+1)/2,n.min_width>0&&!(a>=n.min_width)&&(a=n.min_width),n.max_width>0&&a>n.max_width&&(a=n.max_width),e.offsetWidth<a&&set_style(e,"width",a+"px")}if(3===e.nodeType||4===e.nodeType)return e.data;t=e[i];return"innerHTML"===i&&(t=t.replace(/<(s|del)>[^<]*<\/\1>/gi,"").replace(/<w?br[^>]*>/gi,"\n").replace(/<\/?[A-Za-z][^>]*>/g,"")),t}}function new_node(e,t,n){var r,i,a,o=void 0,s=new_node.handler,l=(n="string"==typeof n?{NS:n}:library_namespace.setup_options(n)).NS;if(null===r||typeof e in{number:1,boolean:1,undefined:1})r=""+e;else if(library_namespace.is_Object(e)){var c,u,p=e.$,d="className",f={A:null,$:null};if(void 0===p){for(r in e)if(!(r in f)){c=p=r;break}}else if(0===p){if(!_.is_DOM_NODE(t))return void library_namespace.warn("new_node: There is no tag and the layer is NOT a HTML Element!");p=t}else void 0!==p&&(r=p);if(_.is_HTML_element(p))r=p;else{if("string"!=typeof p)return void library_namespace.error("new_node: Error creating tag: ["+typeof p+"]["+p+"]");"T"===p&&(c=p="span"),"NS"in e?(f.NS=null,l=e.NS):(u=p.match(/^(.+):([^:]+)$/))&&(p=u[2],l=u[1]);try{l&&document.createElementNS?(l in(u=new_node.ns)&&(l=W3C_BASE+u[l]),r=document.createElementNS(l,p)):r=p?document.createElement(l?l+":"+p:p):e[p]}catch(e){return r=null,void library_namespace.error("new_node: Error create tag: ["+p+"]")}}if(_.is_DOM_NODE(r)){if(u=r.setAttributeNS?function(e,t){if(library_namespace.is_Function(t))r[e]=t;else{var n=e.match(/^(.+):([^:]+)$/);n&&(e=n[2],n=n[1]);try{n?r.setAttributeNS(n in new_node.ns?W3C_BASE+new_node.ns[n]:l,e,t):r.setAttribute(e,t)}catch(n){library_namespace.error("new_node: Error to set attribute ["+e+"] = ["+t+"] of "+r.outerHTML.replace(/</g,"&gt;")+":"),library_namespace.error(n),r.appendChild(new_node({em:"(new_node: Error to set attribute ["+e+"])"}))}}}:function(e,t){library_namespace.is_Function(t)?r[e]=t:r.setAttribute(e,t)},(d in e||(d="class")in e||(d="C")in e)&&(f[d]=null,Array.isArray(e[d])&&(e[d]=e[d].join(" ")),r.className=e[d]),(d="style")in e||(d="S")in e){f[d]=null,d=e[d];var g=r.style;if("string"==typeof d)g.cssText=d;else if(library_namespace.is_Object(d))for(h in d)g["float"===h?"cssFloat"in g?"cssFloat":"styleFloat":h]=d[h];else library_namespace.warn("new_node: Error set style: ["+styleO+"]")}if(((d="dataset")in e||(d="D")in e)&&(f[d]=null,dataset(r,e[d])),(d="I")in e)f[d]=null,o=e.I;else if((d="T")in e){if(f[d]=null,d=e[d],Array.isArray(d)){dataset(r,gettext.DOM_id_key,d[0]);for(var h=1;h<d.length;h++)dataset(r,gettext.DOM_id_key+h,d[h])}else dataset(r,gettext.DOM_id_key,d),d=[d];(o=e[p])?"string"!=typeof o&&"number"!=typeof o||(o=dataset(r,gettext.DOM_id_key,o),e.on_language_changed?e.on_language_changed.call(r,[o]):o=gettext(o)):e.on_language_changed?e.on_language_changed.call(r,d):o=gettext.apply(null,d),d=n.next_node,library_namespace.is_Object(d)&&"T"in d&&(d=d.T,d=Array.isArray(d)?gettext.apply(null,d):gettext(d)),o=gettext.append_message_tail_space(o,{no_more_convert:!0,next_sentence:d})}if((d="R")in e&&(f[d]=null,(d=e[d])&&(d=gettext(d),"title"in e||(r.title=d),"img"===p&&d.length<20&&!("alt"in e)&&(r.alt=d))),f[c||p]=null,void 0===o&&(o=e[c||p]),p in{ol:1,ul:1}&&Array.isArray(o)){h=0;for(var m,y,b=[],v=o.length,w=!1;h<v;h++)if(y=o[h]){if(!(m="string"==typeof y||"number"==typeof y)&&library_namespace.is_Object(m)){if(!(m=y.$))for(m in y)break;m="li"!==m.toLowerCase()}m&&(w=!0),b.push(m?{li:y}:y)}w&&(o=b)}else if("select"===p&&library_namespace.is_Object(o)){for(h in o)break;if("option"!==h){b=[];for(h in o)b.push({option:o[h],value:h});o=b}}if("A"in e){var k=e.A;for(d in"string"==typeof k&&(k=split_String_to_Object(k)),k)u(d,k[d])}for(d in e)d in f||u(d,e[d])}else p&&!_.is_HTML_element(r)&&(show_node(r),library_namespace.warn("new_node: node is not a HTML Element!"))}else{if(!("string"==typeof e||Array.isArray(e)||_.is_NodeList(e)||_.is_HTML_element(e)&&!isNaN(e.nodeType)))return e&&library_namespace.warn("new_node: Unknown nodes ["+e+"]"),void(r=null);r=e}if(null!=t&&(library_namespace.is_Function(t)?i=t:(Array.isArray(t)&&(i=t[1],t=t[0]),i in(a={before:0,first:1,last:2,after:3,clean:null})&&(i=a[i]),0===t?t=document.body:"string"==typeof t&&(t=get_element(t)),library_namespace.is_debug()&&!_.is_DOM_NODE(t)&&(show_node(t),library_namespace.warn("new_node: layer is not a HTML Element!")),1==i&&(a=t.firstChild)?i=s[1]:i>=0&&2!==i&&i<5&&null!==i?(a=t.parentNode)?i=s[i]:library_namespace.warn("new_node: No parent node found!"):_.is_DOM_NODE(t)&&(null===i&&(t=_.remove_all_child(t)),i=s[2]))),library_namespace.is_Function(i)||(i=!1),Array.isArray(r)){r=[];h=0,v=e.length;for(var A=t,x=a,O=i&&function(e){i(e,A,x)}||null;h<v;h++)d=new_node(e[h],O,{NS:l,next_node:e[h+1]}),r.push(d)}else{if(i)try{i(r,t,a)}catch(e){library_namespace.error(e),library_namespace.error("new_node: handler function execution error!<br />"+i)}null!=o&&new_node(o,r,l)}try{return"string"==typeof r?document.createTextNode(r):r}finally{r=null}}function select_node(e,t,n){if(_.is_ELEMENT_NODE(e))return e;library_namespace.debug("Get ["+e+"]",2,"select_node"),library_namespace.is_Object(t)&&(t=t.base);try{var r;if("string"==typeof t&&t&&(t=select_node(t)),t||(library_namespace.debug("Set base to window.document.",3,"select_node"),t=window.document),library_namespace.is_debug(3)&&(library_namespace.debug("base_space: "+t+" (see below):",3,"select_node"),show_node(t)),t.querySelectorAll)try{if(library_namespace.debug("using native .querySelectorAll() to select ["+e.replace(/\$([_a-z][_a-z\d]*)/gi,'[name="$1"]')+"].",2,"select_node"),(r=t.querySelectorAll(e.replace(/\$([_a-z][_a-z\d]*)/gi,'[name="$1"]'))).length>0)return r.length>1?r:r[0];library_namespace.debug("Nothing got. 嘗試本 library 傳統方法。",2,"select_node")}catch(e){library_namespace.debug("可能有不支援的 selector。改回本 library 傳統方法。",2,"select_node")}r=t;var i,a,o,s,l=/\s*([>+~])?\s*(([^#.$\[:>+~\s]*)(?:(::?|[#.$])([^#.$\[:>+~\s]+)|\[([^\]]+)\])|[^#.$\[:>+~\s]+)/g,c=function(e){var n=void 0!==r.getElementById?r.getElementById(e):t.getElementById(e);return!n&&t.frames&&(library_namespace.debug("嘗試採用 document.frames["+e+"]。",2,"select_node"),(n=t.frames[e])&&(n=n.document)),n};for(0;s=l.exec(e);){if(library_namespace.debug("Pattern: ["+s.join("<em>|</em>")+"]",3,"select_node"),i=r,library_namespace.debug("測試是否為從 .getElementsByName(), .getElementsByTagName(), .querySelectorAll() 等得到的 NodeList。",3,"select_node"),_.is_NodeList(i)&&(library_namespace.is_debug(2)&&(1===i.length?library_namespace.debug("It is NodeList. Move to [0].",2,"select_node"):library_namespace.warn("select_node: 共有 "+i.length+" 個 node!")),i=i[0]),library_namespace.debug("測試是否為 ELEMENT_NODE 或 DOCUMENT_NODE。",3,"select_node"),!_.is_ELEMENT_NODE(i)&&!_.is_DOCUMENT_NODE(i)){library_namespace.error("select_node: 基準 node.nodeType = "+i.nodeType+", "+(_.is_ELEMENT_NODE(i)?"":"非 ELEMENT_NODE, ")+(_.is_DOCUMENT_NODE(i)?"":"非 DOCUMENT_NODE, ")+"exit!");break}switch(a=_.is_ELEMENT_NODE(i)?i.tagName:"",library_namespace.debug("測試 &lt;"+a+"&gt; 是否為 frame。",3,"select_node"),"string"==typeof a&&a.toLowerCase()in{frame:1,iframe:1}&&(library_namespace.debug("Reset context for &lt;"+a+">.",2,"select_node"),t=i=i.contentWindow.document),library_namespace.debug("Try to select ["+s.join("<em>|</em>")+"]"+(a?" @ &lt;"+a+"&gt;":""),3,"select_node"),a=s[3]||s[2],o=s[5],s[4]){case"#":if(i=c(o))break;case"$":i=void 0!==i.getElementsByName?i.getElementsByName(o):t.getElementsByName(o)||c(o);break;case".":if(o&&!i.querySelectorAll){(i=find_class(o,i,a))&&1===i.length?(library_namespace.debug("選取單一個 "+a+"."+o+"。",3,"select_node"),i=i[0]):(i&&0===i.length&&(i=void 0),library_namespace.warn("select_node: 共有 "+(i&&i.length)+" 個 node!"));break}default:if(i.querySelectorAll)i=i.querySelectorAll(s[0].replace(/\$([_a-z][_a-z\d]*)/i,'[name="$1"]'));else{if(!a)return library_namespace.error("select_node: unknown selector: 尚未實現之功能！ ["+s.join("<em>|</em>")+"]"),i;i=i.getElementsByTagName?i.getElementsByTagName(a):t.getElementsByTagName(a)}}if(!i){library_namespace.warn("No ["+s[0]+"] got.");break}r=i}return r}catch(t){library_namespace.warn("select_node("+e+"): "+(5007==(65535&t.number)?"The base node isn't YET READY?":"error!")),library_namespace.error(t)}}function for_nodes(e,t,n){if(t?"string"==typeof t&&(t=select_node(t)||get_element(t)):t=document.querySelectorAll?document.querySelectorAll("*"):select_node("*"),_.is_ELEMENT_NODE(t)||_.is_DOCUMENT_NODE(t)?t=t.item&&!isNaN(t.length)?library_namespace.get_tag_list(t):[t]:_.is_NodeList(t)&&(t=library_namespace.get_tag_list(t)),"function"!=typeof e)return!0;var r,i;if(s>0&&library_namespace.debug("get "+s+" nodes.",2,"for_nodes"),library_namespace.is_Object(n)&&(i=n.self,"depth"===(r=n.traversal)?r=1:"breadth"===r?r=2:r&&(r=1),2===r))throw"NYI: breadth-first search";for(var a,o=0,s=t.length;o<s;o++){var l=t[o];if(!l)return;if(1===r&&(a=l.childNodes)&&(a=for_nodes(e,a,n)))return l;if(l.parentNode&&!(n&&n.leaf_only&&l.childNodes.length>0)){if(i?e.call(i,l,o,t):e(l,o,t))return l;0}}}function next_node_of(e){var t=e.firstChild;if(!t)for(0;!(t=e.nextSibling)&&(e=e.parentNode)&&e!==document.body;);return t}function traversal_DOM(e,t,n){if(n||(_.is_ELEMENT_NODE(t)?(n=t,t=null):n=document.body),!e(n)){var r=next_node_of(n);r?setTimeout(function(){traversal_DOM(e,t,r)},0):t&&"function"==typeof t.last&&t.last()}}function previous_node_of(e){var t=e?e.previousSibling:document.body;if(t)for(;t.childNodes&&t.childNodes.length>0;)t=t.childNodes[t.childNodes.length-1];else t=e.parentNode;return t}function traversal_DOM_backward(e,t,n){if(n){if(e(n))return}else _.is_ELEMENT_NODE(t)&&(n=t,t=null);var r=previous_node_of(n);r?setTimeout(function(){traversal_DOM_backward(e,t,r)},0):t&&"function"==typeof t.last&&t.last()}function for_attributes(e,t){"string"==typeof t&&t&&(t=new RegExp(t,"i"));for(var n,r,i=0,a=e.attributes,o=a.length,s=library_namespace.is_RegExp(t);i<o;i++){if(n=a.item(i),s){if(!t.test(n.nodeName))continue}else"function"==typeof t&&t(n.nodeName,n.nodeValue,e);r||(r=Object.create(null)),r[n.nodeName]=n.nodeValue}return r}function setFrame(){if(window.top===window.window){var e,t;try{e=location.hash.slice(1)}catch(e){return}if("object"!=typeof setFrameTargetSet&&(setFrameTargetSet=Object.create(null)),e)try{e=decodeURIComponent(e)}catch(t){e=unescape(e)}e&&(t=(t=e.match(/([^\/]+)$/)?RegExp.$1:e)&&(t=t.match(/^([^?#]+)/)?RegExp.$1:t)&&e in setFrameTargetSet?setFrameTargetSet[t]:setFrameTarget)&&t!=window.name&&window.frames[t]&&window.frames[t].location.href!=e&&window.open(e,t)}else window.top.location.replace(location.href)}set_text.need_check_title=need_check_title=need_check_title&&need_check_title[1]<9,_.set_text=set_text,_.get_node_text=set_text,_.fill_form=function(e,t){var n,r,i,a,o,s="object"==typeof window&&window||{},l=function(e){return library_namespace.debug("test &lt;"+e.tagName+' type="'+e.type+'" name="'+e.name+'" id="'+e.id+'" /&gt;',2,"fill_form.use_list"),_.is_ELEMENT_NODE(e)&&"input"===e.tagName.toLowerCase()&&e.type.toLowerCase()in{radio:1,checkbox:1}},c=function(e){return r=i.getElementById(e),library_namespace.debug(".getElementById("+e+") = "+r,3,"fill_form.set_node"),r&&!l(r)||(r=i.getElementsByName(e),library_namespace.is_debug(2)&&(library_namespace.debug(".getElementsByName("+e+") = "+r,2,"fill_form.set_node"),show_node(r)),r[0]&&l(r[0])?library_namespace.debug("treat [name="+e+"] as checkbox or radio. length = "+r.length,2,"fill_form.set_node"):(1!==r.length&&library_namespace.warn("fill_form: 共有 "+r.length+" 個 [name="+e+"] 可供設定"+(r.length?"，將只設定第一個":"")+"！"),r=r[0])),r},u=function(e){if(r[e])try{if(!o&&(library_namespace.debug("Setup event object for ."+e,2,"fill_form.fire_event"),o={target:r},"event"in s)){o.srcElement=r;try{Object.assign(o,s.event)}catch(e){}}library_namespace.debug("Try to fire ["+n+"]."+e,2,"fill_form.fire_event"),r[e].call(r,o)}catch(t){library_namespace.is_debug()&&(library_namespace.warn("fill_form.fire_event: Error to run ["+n+"]."+e+": "+r[e]),library_namespace.error(t))}return u},p=function(e,t){u("onfocus")("onclick")("oninput"),library_namespace.debug("Set ["+n+"] = ("+typeof t+") ["+t+"]",2,"fill_form.event_sequence"),_.node_value(e,t),u("onpropertychange")("onchange")("onblur")};for(library_namespace.is_Object(t)&&(a=t.submit,i=t.base,t.window&&(s=t.window,library_namespace.debug("Setup window: "+s,2,"fill_form")),!isNaN(i)&&(n=s.document.forms[i])&&(i=n),t.no_fire&&(u=function(){return u})),_.is_ELEMENT_NODE(i)||_.is_DOCUMENT_NODE(i)||(library_namespace.debug("Set base to window_object.document.",2,"fill_form"),i=s.document);!i.getElementById;)i=i.parentNode;if(library_namespace.is_debug(2)&&(library_namespace.debug("base:",1,"fill_form"),show_node(i)),library_namespace.is_Object(e))for(n in e){if(_.is_ELEMENT_NODE(c(n)))p(r,e[n]);else if(_.is_NodeList(r))for(var d,f,g=0,h=r.length,m=e[n];g<h;g++)d=r[g],f=library_namespace.is_Object(m)?m[d.value]:Array.isArray(m)?-1!==m.indexOf(d.value):m,library_namespace.debug("set value ["+f+"].",2,"fill_form"),d.checked!==("boolean"==typeof f?f:f==d.value)&&p(d,!d.checked);o=void 0}(r=a)&&(_.is_ELEMENT_NODE(r)||"string"==typeof r&&_.is_ELEMENT_NODE(c(r)))?"form"===r.tagName.toLowerCase()?r.submit():r.click?r.click():library_namespace.warn("fill_form: Cannot submit ["+a+"]"):!isNaN(a)&&_.is_ELEMENT_NODE(r=s.document.forms[a])&&u("submit"),t&&"function"==typeof t.callback&&t.callback()},_.node_value=function(e,t,n){var r=function(e){var t,n,r;if(Array.isArray(e))for(t=0,n=e.length,r=Object.create(null);t<n;t++)r[e[t]]=!0;else library_namespace.is_Object(e)?r=e:(r=Object.create(null))[e]=!0;return r};if(e&&("string"==typeof e?e=select_node(e,n)||get_element(e):e)){var i,a=_.is_ELEMENT_NODE(e)?e.tagName.toLowerCase():"";if(a in{textarea:1,select:1,option:1}||"input"===a&&!((i=(""+e.type).toLowerCase())in{button:1,file:1,image:1,reset:1,submit:1}))switch(i){case"radio":case"checkbox":"checked"in e&&(e.checked="boolean"==typeof t?t:e.value==t);break;case"select-multiple":if(Array.isArray(t)){c=0;var o=e.options;for(u=Math.min(o.length,t.length);c<u;c++)o[c].selected=!!t[c]}else{t=r(t);for(c=0,u=(o=e.options).length;c<u;c++)o[c].value in p&&(o[c].selected=!!t[o[c].value])}break;default:if("value"in e){if("select"===a){if(void 0!==t&&e.value!=t&&(e.value=t),e.value!=t){var s;for(c=0,u=(o=e.options).length,p=String(t).trim();c<u;c++)if(p==o[c].innerHTML.trim()){e.value=o[c].value,s=!0;break}!s&&!isNaN(t)&&t>=0&&t<e.options.length&&e.selectedIndex!=t&&(e.selectedIndex=t)}}else if(null!=t){var l="maxLength";l in e||(l="maxlength"),t=String(t),!isNaN(e[l])&&e[l]>=0&&t.length>e[l]&&(library_namespace.warn("The length of value ["+t+"]: "+t.length+" > limit "+e[l]+" ! I will fill the first "+e[l]+" characters!"),t=t.slice(0,e[l])),e.value!=t&&(e.value=t)}t=e.value}else library_namespace.warn("Cannot set value of node!"),t=e.innerHTML}else"option"===a?(e.value||(e.value=t),t=e.innerHTML=t):"string"==typeof t&&-1!==t.indexOf("<")?t=e.innerHTML=t:"string"==typeof t||"number"==typeof t?(_.remove_all_child(e),e.appendChild(document.createTextNode(t)),t=e.innerHTML):t=e.innerHTML;return t}if(_.is_NodeList(e)&&e.length&&"checked"in e[0]){0;for(var c=0,u=e.length,p=r(t);c<u;c++)e[c].value in p&&(e[c].checked=!!p[e[c].value])}},new_node.handler=[function(e,t,n){n.insertBefore("string"==typeof e?document.createTextNode(e):e,t)},function(e,t,n){t.insertBefore("string"==typeof e?document.createTextNode(e):e,n)},function(e,t){var n=_.is_DOM_NODE(t),r=n?t.tagName.toLowerCase():null;if("number"==typeof e&&(e=e.toString()),r in{textarea:1,input:1,text:1})t.value=(t.value||"")+(n?e.innerHTML:e);else if("string"==typeof e)if(-1!==(e=e.replace(/\x00/g,'<span class="control_character">\\x00</span>').replace(/(\d{60})/g,"$1­")).indexOf("<")||/&(?:#\d{1,8}|#x[\dA-F]{4,8}|\w{1,50});/i.test(e))try{t.innerHTML+=e}catch(e){}else{"option"!==r||t.value||(t.value=e);try{t.appendChild(document.createTextNode(e))}catch(t){library_namespace.warn("new_node.handler[2]: error: .appendChild(document.createTextNode("+e+"))"),library_namespace.error(t)}}else if(_.is_DOM_NODE(e)){r=t.innerHTML;try{t.appendChild(e)}catch(t){library_namespace.warn("new_node.handler[2]: error: .appendChild("+e+")"),library_namespace.error(t)}0}else if(_.is_NodeList(e))for(var i=0,a=(e=Array.from(e)).length;i<a;i++)t.appendChild(e[i]);else library_namespace.warn("new_node.handler[2]: 類型不相符! (["+typeof e+"] "+e+")");e=null},function(e,t,n){var r=t.nextSibling;r?n.insertBefore("string"==typeof e?document.createTextNode(e):e,r):n.appendChild("string"==typeof e?document.createTextNode(e):e)},function(e,t,n){e.appendChild(n.replaceChild(e,t))}],new_node.ns={svg:"2000/svg",mathml:"1998/Math/MathML",xhtml:"1999/xhtml",xlink:"1999/xlink",html:"TR/REC-html40",html4:"TR/REC-html40",html5:"TR/html5"},_.new_node=new_node,_.XML_node=function(e,t,n,r,i){if("object"==typeof document&&(document.createElement||document.createElementNS)&&document.body){var a,o,s=new_node.ns,l=document.createElementNS?1:0;0,e&&(a=e.match(/^(.+):([^:]+)$/))&&(e=a[2],-1===(a=a[1]).indexOf("://")&&(s=s[a.toLowerCase()])&&(a=W3C_BASE+s));try{o=e?l&&a?document.createElementNS(a,e):document.createElement(e):document.createTextNode(r||"")}catch(o){return void library_namespace.warn("XML_node: Error create tag:\n"+e)}if(e&&_.set_attribute(o,t),e&&i&&o.style)if("string"==typeof i)o.style.cssText=i;else if("object"==typeof i)for(s in i)o.style["float"===s?"cssFloat"in o.style?"cssFloat":"styleFloat":s]=i[s];else 0;if(n){var c=void 0,u=function(e){return"string"==typeof e&&(s=document.getElementById(e))?s:e},p=u(n);if(Array.isArray(p)&&p.length&&(c=p.length>1&&u(p[1])||0,p=u(p[0])),"object"!=typeof p&&(p=document.body,void 0===c&&(c=0)),void 0===c&&(c=p,p=p.parentNode),p)if(c)try{p.insertBefore(o,1===c?p.firstChild:c)}catch(e){library_namespace.warn("XML_node: "+e.message+"\niO:"+p+"\nrO:"+c)}else p.appendChild(o)}e&&_.add_node(o,r);try{return o}finally{o=null}}else library_namespace.warn("XML_node: Cannot create tag ["+e+"].")},_.select_node=select_node,_.for_nodes=for_nodes,_.next_node_of=next_node_of,_.traversal_DOM=traversal_DOM,_.previous_node_of=previous_node_of,_.traversal_DOM.backward=traversal_DOM_backward,_.for_attributes=for_attributes;var setTopPDTopP,setTopP_doTest=.234372464,setAstatusOS;function setTopP(e,t){if(!setTopPDTopP)return 2;if(e||(e=dBasePath(setTopPDTopP)+getFN(setTopPDTopP)),void 0===t)try{t=window.location.search}catch(e){return}var n,r=/[\/\\]$/i,i=/[\/\\](index\.[xs]?html?)?$/i;try{n=window.top.location.href.replace(/[?#](.*)$/,"")}catch(e){n=""}if(!(n==e||r.test(e)&&i.test(n)||i.test(e)&&r.test(n))){if(t===setTopP_doTest)return 1;window.top.location.replace(e+t+"#"+encodeURIComponent(location.href))}}function setAstatus(){library_namespace.is_WWW()&&void 0!==window.event&&"string"==typeof window.status&&for_nodes(function(e){!e.title||e.onmouseover||e.onmouseout||(e.onmouseover=setAstatusOver,e.onmouseout=setAstatusOut)},"a")}function setAstatusOver(){var e=window.event.srcElement;if(e.title)return setAstatusOS=window.status,window.status=e.title,!0}function setAstatusOut(){return window.status=setAstatusOS,!0}function table_list(e,t,n,r){var i,a=0,o=function(e,n){if(Array.isArray(e)){for(var r,i=0,a=document.createElement("tr"),o=e.length;i<o;i++)(r=document.createElement(n||"td")).appendChild(document.createTextNode(e[i])),a.appendChild(r);t.appendChild(a)}};if("string"==typeof t&&(t=document.getElementById(t)),r&&_.remove_all_child(t),n&&o(n,"th"),1===e.length&&"object"==typeof(i=e[0])&&Array.isArray(i[0])&&(e=i),Array.isArray(e))for(i=e.length;a<i;a++)o(e[a]);else if(library_namespace.is_Object(e))for(a in e)o([a,e[a]]);else library_namespace.debug("Error input: not legal data!")}function Array_from_table(e,t){if("string"==typeof e)if(/<table\s/i.test(e)){var n=e;(e=document.createElement("div")).innerHTML=n,n=null}else e=document.getElementById(e);var r=e&&e.tagName;if(r&&(r=r.toLowerCase()),e&&"table"!==r&&"tbody"!==r)if(e.getElementsByTagName){if(1!==(e=e.getElementsByTagName("table")).length)return void library_namespace.error("table element 之個數不恰好為一！");library_namespace.is_debug()&&library_namespace.warn("使用指定 element 唯一之 table element！"),e=e[0]}else e=null;if(e){var i=e.tBodies;i&&1===i.length?(e=i[0],i=null):i=[];for(var a=0,o=e.childNodes,s=o.length,l=[];a<s;a++)"tr"!==(r=o[a].tagName.toLowerCase())&&"th"!==r||c(o[a],"th"===r);return i&&i.length>0&&0===l.length&&(l=Array_from_table(i[0],t)),l}function c(e,t){for(var n=0,r=e.childNodes,i=r.length,a=[];n<i;n++)"td"===r[n].tagName.toLowerCase()&&a.push(r[n].innerHTML);a.length>0&&(t&&(a.is_header=!0),l.push(a))}}_.table_list=table_list,library_namespace.set_method(Array,{from_table:Array_from_table});var clipboardFunctionObj="clipboardFunctionDiv";function clipboardFunction(e,t){if("Microsoft Internet Explorer"==window.navigator.appName){var n,r,i;if(2==e?(n=t,t=""):"string"==typeof t&&(t=document.getElementById(t)),("object"!=typeof t||!t||"textarea"!=(i=(t.tagName||"").toLowerCase())&&"select"!=i&&"option"!=i&&("input"!=i||"text"!=t.type)&&(r=t))&&!(t=document.getElementById(clipboardFunctionObj)))try{document.body.appendChild(t=document.createElement("textarea")),t.id=clipboardFunctionObj}catch(e){return}return 2==e?t.value=n:(r&&(t.value=r.textContent||r.innerText),3==e&&(n=t.value)),t.id==clipboardFunctionObj&&(t.style.display="block"),t.createTextRange().execCommand(e?3==e?"Cut":"Copy":"Paste"),t.id==clipboardFunctionObj&&(t.style.display="none"),3!=e&&(n=t.value),r&&(void 0!==r.textContent?r.textContent=t.value:r.innerText=t.value),n}}function Clipboard(){}function clipB(){}_.Clipboard=Clipboard,Clipboard.get=function(){var e;(e=window.clipboardData)&&e.getData("Text")},Clipboard.set=function(e){var t;(t=window.clipboardData)?(t.clearData(),t.setData("Text",e)):library_namespace.is_WWW()&&window.Components?library_namespace.require_netscape_privilege("UniversalXPConnect",function(){return Components.classes["@mozilla.org/widget/clipboardhelper;1"].getService(Components.interfaces.nsIClipboardHelper).copyString(e)}):navigator.userAgent.indexOf("Opera")},clipB.start_op=function(){var e=this.temp_obj;return e||(document.body.appendChild(e=document.createElement("div")),e.contentEditable=!0,this.temp_obj=e),document.selection.empty(),_.remove_all_child(e),e.style.display="block",e.focus(),e},clipB.end_op=function(){var e=this.temp_obj;document.selection.empty(),e&&(e.style.display="none")},clipB.get_obj=function(e){var t;return"object"==typeof e&&"innerHTML"in e||(t=document.getElementById(""+e))&&(e=t)?[e.innerHTML,e]:[e]},clipB.paste_to=function(e){(e=(e=this.get_obj(e))[1])&&(e.innerHTML=this.get(1))},clipB.set=function(e){e=this.get_obj(e)},clipB.get=function(e){var t=this.start_op(),n=document.selection.createRange();return n.select(),n.execCommand("Paste"),e?n.htmlText:n.text,this.end_op(),e?t.innerHTML:t.textContent||t.innerText},clipB.cut_from=function(e){e=this.get_obj(e)};var disabledKM=0,scrollToXY,scrollToInterval,scrollToOK,doAlertDivName,doAlertOldScrollLocation,referenceDoc,loadReferenceDone,setAutoScrollTimer,setAutoScrollInterval;function get_cookie(e,t,n){if(library_namespace.is_WWW()&&document.cookie){var r,i=library_namespace.is_RegExp(e)?e:new RegExp("("+(e?escape(e):"[^;=\\s]+")+")\\s*=\\s*([^;=\\s]*)","g"),a=document.cookie.match(i);if(library_namespace.debug("["+i+"] = ["+a+"]",2),library_namespace.debug("cookie: ["+document.cookie+"]",2),a){if(i.global&&(i=library_namespace.renew_RegExp_flags(i,"-g")),a.length>1&&(0==t||"number"!=typeof t&&e&&"string"==typeof e)&&(a=a.slice(-1)),1===a.length&&"string"==typeof a[0]&&(r=a[0].match(i))[1]===escape(e))return unescape(r[2]);var o,s=Object.create(null),l=0;for(library_namespace.debug(document.cookie+"\n"+i+"\n"+a.length+"\n"+a,2);l<a.length;l++)"string"==typeof a[l]&&(o=a[l].match(i))&&(s[unescape(o[1])]=unescape(o[2]));return s}}}function get_comments(e,t,n){e||(e=window.document);var r,i=0,a=get_comments;for(isNaN(a.endLevel)&&(a.endLevel=2),isNaN(t)||-1===t?(a.a=[],t=a.endLevel):"object"!=typeof a.a&&(a.a=[]),e=e.childNodes;i<e.length;i++)(r=e[i]).tagName&&"!"===r.tagName?a.a.push(n?r:r.text.replace(/^<!(--)?/,"").replace(/(--)?>$/,"")):8==r.nodeType&&a.a.push(n?r:r.nodeValue),t&&r.childNodes&&a(r,t-1,n);return a.a}function bgLoadImg(e){var t="bgLoadImgOK_"+bgLoadImgId;if("object"!=typeof bgLoadImgA){if(!bgLoadImgA||"file:"===location.protocol)return;var n=document.readyState;if("string"==typeof n&&"complete"!==n)return void setTimeout(bgLoadImg,500);if(bgLoadImgA=bgLoadImgA.replace(/,\s*,/g,",").split(","),"function"==typeof get_cookie&&get_cookie(t)==bgLoadImgA.length)return;if(isNaN(bgLoadImgI)&&(bgLoadImgI=0),"string"!=typeof n)return void setTimeout(bgLoadImg,5e3)}if(isNaN(e)||!(e<bgLoadImgI-1))if(_.set_cookie(t,bgLoadImgI),bgLoadImgI==bgLoadImgA.length)bgLoadImgI++,setTimeout("bgLoadImg();",500);else if(bgLoadImgI<bgLoadImgA.length){var r="function"==typeof getObjURL?getObjURL(bgLoadImgA[bgLoadImgI]):bgLoadImgA[bgLoadImgI];0,bgLoadImgA[bgLoadImgI++]=e=new Image(1,1),e.onload=function(){setTimeout("bgLoadImg();",0)},e.src=r,window.status="bgLoadImg ["+r+"]: "+bgLoadImgI+" / "+bgLoadImgA.length+"..."}else{var i=0;for(e=0;e<bgLoadImgA.length;e++)bgLoadImgA[e].complete||i++;i&&_.set_cookie(t,0),window.status="bgLoadImg "+(i?"end: failed "+i+" / "+bgLoadImgA.length:"complete!"),bgLoadImgA=0}}function cookieForm(e,t,n){if("object"==typeof document){e?"string"==typeof e&&(e=[e]):e=library_namespace.get_tag_list("form");var r,i,a,o=function(e){for(var r,a,s,l,c=0,u=e.childNodes,p=";";c<u.length;c++)if((r=u[c]).hasChildNodes&&o(r),r.name&&void 0!==r.value){if(n&&(n.unselect&&n[r.name]||!n.unselect&&!n[r.name]))continue;if(a="cookieForm_"+i+"_"+r.name,s=r.value,l=r.type.toLowerCase(),isNaN(t)){if(void 0!==(a=get_cookie(a)))if("radio"==l)s==a&&(r.checked=!0);else if("checkbox"==l)-1!=a.indexOf(p+s+p+p)&&(r.checked=!0);else if("select-multiple"==l)for(var d=0;d<r.options.length;d++)r.options[d].selected=-1!=a.indexOf(p+r.options[d].value+p);else r.value=a}else{if("radio"==l){if(!r.checked)continue}else if("checkbox"==l){if(-1!=s.indexOf(p))continue;s=((l=get_cookie(a))&&-1==l.indexOf(p+s+p)?l:p)+s+p+(r.checked?p:"")}else if("select-multiple"==l){s=p+s+p;for(d=r.selectedIndex+1;d<r.options.length;d++)r.options[d].selected&&(s+=r.options[d].value+p)}t?_.set_cookie(a,s):_.set_cookie(a)}}};if(n)for(r in a=n,n={},"string"==typeof a&&(a=a.split(",")),a)n[a[r]]=1;for(""===t&&(t=NaN),isNaN(t)||(t&&(t=7),_.set_cookie(_.set_cookie.f.set_root),_.set_cookie("expires",t)),r=0;r<e.length;r++)(a=e[r])&&("string"==typeof a?a=document.getElementById(i=a):(i=a.id)||(i=a.name),a&&"form"==(a.tagName||"").toLowerCase()&&i&&"string"==typeof i&&o(a));isNaN(t)||_.set_cookie("expires",0)}}function loginFTP(e,t,n,r){(r||(r=location.hostname))&&("ftp"!=e&&"anonymous"!=e||(e=""),!t&&e&&(t=window.prompt("請輸入["+e+"]之密碼：")),null!=t&&(t="ftp://"+(e?e+(t?":"+t:"")+"@":"")+r+"/"+(n||""),window.open(t,"ftpW")))}function get_element(e,t){if(e&&library_namespace.is_WWW()&&(t&&library_namespace.debug(e+", "+t,2),document.body)){if(_.is_NodeList(e))return e[0];if("object"==typeof e)return e;var n;t!==get_element.flag.refOnly&&(n=document.getElementById?document.getElementById(e):document.all?document.all[e]:document.layers?document.layers[e]:window[e]),t&&library_namespace.debug(e+","+t+"\nloadReferenceDone="+loadReferenceDone+"\nreferenceDoc: "+referenceDoc+"\node: "+n+"\nreferenceDoc.get: "+referenceDoc.getElementById(e)+"\n"+referenceDoc.body.innerHTML.slice(0,200),3);try{"object"==typeof t&&"function"==typeof t.getElementById&&(n=t.getElementById(e))||n||t&&1===loadReferenceDone&&(n=referenceDoc.getElementById(e))}catch(e){}return n}}function loadReference(e,t){if(!loadReferenceDone&&"object"==typeof location&&location.protocol&&"https:"!=location.protocol&&!loadReferenceDone){var n=get_element(t||"reference");if("object"==typeof referenceDoc&&"object"==typeof referenceDoc.document&&referenceDoc.document)(n=(referenceDoc=n.contentWindow.document).body)&&n.innerHTML.length?("function"==typeof setupPageR&&setTimeout(setupPageR,9),loadReferenceDone=1):setTimeout(function(){loadReference()},200);else{if("object"!=typeof document||!document.body)return setTimeout(function(){loadReference()},90),1;if(n&&"iframe"==(n.tagName||"").toLowerCase())if(n.src||(n.style.display="none",n.src=e),"object"==typeof n.contentWindow&&"object"==typeof n.contentWindow.document)referenceDoc=n.contentWindow,setTimeout(function(){loadReference()},20);else{0,referenceDoc||(referenceDoc=40);try{return referenceDoc--?(setTimeout(function(){loadReference()},300),2):4}catch(e){return 5}}else loadReferenceDone=2}}}function transRefObj(e,t,n){"string"!=typeof t&&"object"!=typeof t&&(n=t,t="object"==typeof e?e.id:e);var r,i="object"==typeof e?e:get_element(e,get_element.f.self);if(i&&(n||!i.innerHTML)&&(r="object"==typeof t?t:get_element(t,get_element.f.refOnly))&&(n||r.innerHTML))try{0,i.appendChild(r.cloneNode(!0))}catch(e){i.innerHTML=r.innerHTML}return i}function setAutoScroll(e,t){!t&&("object"!=typeof document||setAutoScrollTimer||document.onmousedown||document.ondblclick)||(e?setAutoScrollInterval=e:setAutoScrollInterval||(setAutoScrollInterval=get_cookie("setAutoScrollInterval"))||(setAutoScrollInterval=200),clearInterval(setAutoScrollTimer),setAutoScrollTimer=0,setAutoScrollInterval<0?document.onmousedown=document.ondblclick=null:(document.onmousedown=function(){setAutoScrollTimer&&(window.clearInterval(setAutoScrollTimer),setAutoScrollTimer=0)},document.ondblclick=function(){setAutoScrollTimer||(setAutoScrollTimer=window.setInterval(function(){window.scrollBy(0,1)},setAutoScrollInterval))}))}function scrollTo(e,t){"object"!=typeof scrollToXY&&(scrollToXY={}),"object"!=typeof e||isNaN(e.x)&&isNaN(e.y)?Array.isArray(e)?(scrollToXY.x=e[0],scrollToXY.y=e[1]):(void 0!==t&&(scrollToXY.x=t),void 0!==e&&(scrollToXY.y=e)):(isNaN(e.x)||(scrollToXY.x=e.x),isNaN(e.y)||(scrollToXY.y=e.y)),isNaN(scrollToXY.x)&&(scrollToXY.x=0),isNaN(scrollToXY.y)&&(scrollToXY.y=0),setTimeout(function(){window.scrollTo(scrollToXY.x,scrollToXY.y)},9);var n=get_window_status();n.scrollLeft==scrollToXY.x&&n.scrollTop==scrollToXY.y?!--scrollToOK&&scrollToInterval&&(window.clearInterval(scrollToInterval),scrollToInterval=0):scrollToInterval||(scrollToInterval=window.setInterval(scrollTo,90),scrollToOK=3)}function doAlertResize(){var e;"string"==typeof doAlertDivName&&doAlertDivName&&(o=document.getElementById(doAlertDivName))&&(o.style.position="absolute",o.style.display="block",o.style.width="70%",void 0===window.innerHeight&&(window.innerHeight=document.body.clientHeight),void 0===window.innerWidth&&(window.innerWidth=document.body.clientWidth),(e=(window.innerHeight-o.offsetHeight)/2)<0?(o.style.width=o.style.height="99%",o.style.top=0):o.style.top=e+"px",e=(window.innerWidth-o.offsetWidth)/2,o.style.left=e<0?0:e+"px")}function doAlertInit(e){if(!e)return _.set_cookie(_.set_cookie.f.set_root),void _.set_cookie("doAlert");document.getElementById(e)&&(void 0===doAlertDivName&&(doAlertDivName=e),doAlert())}function doAlert(e,t,n){!e&&"string"==typeof doAlertDivName&&doAlertDivName&&(e=doAlertDivName);var r=document.getElementById(e),i=document.getElementById(e+"Bg"),a=document.getElementById(e+"I");if(document.body&&r&&(!t||alert(r.innerHTML))){if(!a)try{r.parentNode.insertBefore(a=document.createElement("div"),r),a.id=e+"I",a.onclick=function(){doAlertInit(),doAlert()},a.title="注意事項",a.innerHTML=n||"別忘了",a.doAlertScrollT=a.doAlertScrollL=0}catch(e){return}if(!i)try{r.parentNode.insertBefore(i=document.createElement("div"),r),i.id=e+"Bg"}catch(e){return}if(disableKM(2),doAlertResize(),window.Oonresize=window.onresize,window.onresize=doAlertResize,a.style.display="none",a.style.position="absolute",a.style.right=".1em",a.style.top=".1em",i.style.position="absolute",i.style.left=-parseInt(document.body.leftMargin),i.style.top=-parseInt(document.body.topMargin),i.style.width=height="110%",i.style.display="inline",r.filters&&(r.filters.alpha.opacity=85),i.filters)try{i.filters.alpha.opacity=30}catch(e){}else r.style.position="fixed",i.style.position="fixed",i.style.opacity=i.style["-moz-opacity"]=.3,i.style.left=i.style.top=0,i.style.width=i.style.height="100%";get_cookie("doAlert")==e?doAlertAccess(e):(r=get_window_status(),doAlertOldScrollLocation=[r.scrollLeft,r.scrollTop],setTimeout("scrollTo(0,0);",0))}}function doAlertAccess(e){!e&&"string"==typeof doAlertDivName&&doAlertDivName&&(e=doAlertDivName);var t=document.getElementById(e),n=document.getElementById(e+"Bg");n&&(n.style.display="none"),t.style.display="none",disableKM(0),window.onresize=window.Oonresize||null,doAlertOldScrollLocation&&scrollTo(doAlertOldScrollLocation),doAlertScroll(1)}function doAlertScroll(e){var t;"string"==typeof doAlertDivName&&doAlertDivName&&(t=document.getElementById(doAlertDivName+"I"))&&(void 0!==e&&(t.style.display=e?"block":"none",t.doAlertScrollL=t.offsetWidth+(e||0),t.currentStyle?((e=parseInt(t.currentStyle.paddingTop))&&(t.doAlertScrollT=e),e=parseInt(t.currentStyle.paddingLeft),(e=parseInt(t.currentStyle.paddingRight))&&(t.doAlertScrollL+=e)):t.style.position="fixed"),e=get_window_status(),t.style.left=e.scrollLeft+e.windowW-t.doAlertScrollL+"px",t.style.top=e.scrollTop-t.doAlertScrollT+"px")}function set_class(e,t,n){var r;if((e&&"string"==typeof e&&(e=document.getElementById(e)),_.is_ELEMENT_NODE(e))&&(n||(n=Object.create(null)),!t||library_namespace.is_Object(t)||n.remove||(r=(r=Array.isArray(t)?t.join(" "):t).trim(),n.reset?e.className=r:(" "+e.className+" ").includes(" "+r+" ")||(e.className+=" "+r),n.status))){0,r=e.className.split(/\s+/);var i,a=Object.create(null),o=n.reset;if(!o)for(i in r)a[r[i]]=!0;if(library_namespace.is_Object(t)){for(r in t)a[r]!==(i=!!t[r])&&(o=!0,a[r]=i);t=null}if(n.remove&&t)for(i in Array.isArray(t)||(t=[t]),t)(r=t[i])in a&&(o=!0,delete a[r]);if(o){for(i in r=[],a)a[i]&&r.push(i);e.className=r.join(" ").trim()}return a}}function clear_class(e){e&&"string"==typeof e&&(e=document.getElementById(e)),"className"in e&&_.is_ELEMENT_NODE(e)&&(e.className="")}function has_class(e,t){var n,r=e.className;if(r&&t){if(Array.isArray(t)){for(n=r=0;n<t.length;n++)has_class(e,t[n])&&r++;return r}return(t=has_class.pattern(t))?t.test(r):r==t}}function find_class(e,t,n,r,i){var a,o,s=[],l=library_namespace.get_tag_list(n||"*",t||window.document),c=l.length;if(c>0)if("function"!=typeof r&&(r=!1),(a=has_class.pattern(e))||r)for(library_namespace.debug("length: "+c+", pattern: "+a,2),o=0;o<c;o++)library_namespace.debug("#"+o+": "+l[o].className,2),a&&!a.test(l[o].className)||r&&!r.call(l[o])||s.push(l[o]);else s=l;return s}function set_up_popup(e,t,n){e||(e="b");var r,i,a,o=library_namespace.get_tag_list(e);if(set_up_popup.list=[],o.length)for(r=0;r<o.length;r++)if(!(t&&!has_class(o[r],t)||n&&n(o[r]))){for(i=0,a="";i<sPopP.allTypes.length;i++)if(o[r][sPopP.allTypes[i]]){a=sPopP.allTypes[i];break}a&&(a=sPop(o[r],sPopF[a]|sPopF.nopop))&&(set_up_popup.list.push(o[r]),a==sPopF.window?o[r].onclick||(o[r].popup_type=a,o[r].onclick=function(){sPop(this,this.popup_type)},o[r].style.cursor="pointer"):a==sPopF.popup&&(o[r].onmouseover||(o[r].onmouseover=function(){sPop(this,this.popup_type)},o[r].onmouseout||(o[r].onmouseout=function(){sPop(this,sPopF.clearPop)}),o[r].onclick||(o[r].onclick=function(){this.onmouseout=null,sPop(this,a)},o[r].style.cursor="pointer"))))}}_.set_cookie=function(e,t,n){if(library_namespace.is_WWW(!0)&&"string"==typeof document.cookie&&void 0!==e){var r,i=_.set_cookie,a=i.f;if(n?library_namespace.is_Object(n)||(n=Object.assign(Object.create(null),i.c)):n=i.c,library_namespace.is_Object(e)){for(var o in e)i(o,e[o],n);return n}try{if(window.navigator&&!window.navigator.cookieEnabled)throw 1}catch(e){return void library_namespace.warn("set_cookie: We cannot use cookie!")}if(e===a.set_root?(e="path",t="/"):e===a.use_domain?(e="domain",t=location.hostname.replace(/^[^.]+\./,".")):e===a.forever?(e="expires",t=1e14):e===a.moment&&(e="expires",t=-1),"string"==typeof e&&(r=e.match(/^(expires|path|domain|secure)$/i)))return"expires"===(e=r[1])&&"number"==typeof t&&t&&(t=new Date(t<1e14?t<0?0:(new Date).getTime()+(t<8e3?1e3*t*60*60*24:t):1e14).toUTCString()),n[e]=t,e+"="+t+";";var s=e===a.delete_all_root?"expires="+new Date(0).toUTCString()+";path=/;":(void 0===t?"expires="+new Date(0).toUTCString()+";":n.expires?"expires="+n.expires+";":"")+(n.path?"path="+n.path+";":"")+(n.domain?"domain="+n.domain+";":"")+(n.secure?"secure;":"");if(e===a.delete_all||e===a.delete_all_root){var l,c,u=document.cookie.split(";").length;for(o=0;o<u;o++)/^\s*expires\s*$/i.test(c=l[o].split("=")[0])||(document.cookie=c+"=;"+s);return document.cookie}return(t=escape(e)+"="+(void 0===t?"":escape(t))+";"+s).length<4096&&(document.cookie=t)?t:-1}},_.set_cookie.f={moment:-1,delete_all:2,delete_all_root:3,set_root:4,use_domain:5,forever:6},_.set_cookie.c={expires:0,path:0,domain:0,secure:0},_.get_cookie=get_cookie,get_element.flag={self:0,ref:1,refOnly:2},_.get_element=get_element,_.set_class=set_class,_.clear_class=clear_class,has_class.pattern=function(e){if(e)return library_namespace.is_RegExp(e)||(e=new RegExp("(?:^|\\s)"+e+"(?:$|\\s)")),e},_.has_class=has_class,_.find_class=find_class,_.set_up_popup=set_up_popup;var sPopP,sPopF={title:0,auto:0,nopop:8,repeat:16,clearPop:32,force:64},sPopError;function sPopInit(){if(sPopP)alert("sPopP 已被佔用！");else{(sPopP=Object.create(null)).DclassName=",popupedTxt_ruby,popupedTxt,popupedTxt".split(","),sPopP.bgS="bgb,bgn";var e=0,t=sPopP.bgS.split(",");for(sPopP.bgS=Object.create(null);e<t.length;e++)sPopP.bgS[t[e]]=e+1;sPopP.popupS="color:blue;padding:.5em;overflow:auto;position:absolute;top:0;left:0;width:100%;height:100%;scrollbar-face-color:khaki;scrollbar-arrow-color:teal;border:1px solid green;font:normal 10pt tahoma;filter:progid:DXImageTransform.Microsoft.Gradient(GradientType=0, StartColorStr=#ffd700, EndColorStr=#ffffff);",sPopP.RepeatC="‧•◦．。ヽ﹅﹆○●◎◉☆★※＊＃▽▼△▲◆◇□■↓↑",sPopP.autoTypes="title,_sPop",sPopP.types="ruby,popup,window",sPopP.allTypes=(sPopP.autoTypes+","+sPopP.types).split(","),sPopP.functionName="",library_namespace.is_WWW()&&void 0!==window.createPopup&&(sPopP.window=window.createPopup());for(e=0,t=sPopP.types.split(",");e<t.length;)sPopF[t[e]]=++e;sPopP.types=(","+sPopP.types).split(","),sPopP.commentTitle="Comment",sPopP.commentTitlePattern=sPopP.commentTitle+" of %s",sPopP.close_message="Close",sPopP.bigger_message="Bigger",sPopP.reset_message="Reset size"}}sPopInit();var has_ruby_tag=library_namespace.platform({ie:5,firefox:38,chrome:5,safari:5}),captureE;function sPop(e,t,n,r){if(e||n){var i=screen.width-50,a=screen.height>>1;sPopP.width||(sPopP.width=250),sPopP.width>i&&(sPopP.width=i),sPopP.height||(sPopP.height=100),sPopP.height>a&&(sPopP.height=a),!sPopP.functionName&&(sPopP.functionName=library_namespace.parse_function())?sPopF[sPopP.types[0]="_"+(sPopP.functionName=sPopP.functionName.funcName)]=0:sPopP.functionName="";var o="repop"===e,s=t&sPopF.nopop,l=7&t;if(o){if(!sPopP.popObj||"object"!=typeof sPopP.popObj||"string"!=typeof sPopP.popObj.innerHTML||!sPopP.popObj.innerHTML)return;e=sPopP.popObj,l=sPopF.popup}else{var c;if("string"==typeof e&&e&&(e.length<32&&document.getElementById(e)?e=document.getElementById(e):n||(n=e,e=0)),"object"==typeof n&&n.innerHTML?n=n.innerHTML:n&&(n+=""),l==sPopF.auto){"object"!=typeof e||n&&0!=n||(e[sPopP.types[0]]?(n=e[sPopP.types[0]],c=!0):e.title&&(n=e.title,c=!0));var u="string"==typeof n?n.length:0;0;var p=("string"==typeof e.innerText?e.innerText:_.HTML_to_Unicode(e.innerHTML)).length;"object"==typeof e&&(e.doneRuby||!e.innerHTML.match(/<\s*ruby/i)&&u<60&&u<3*p&&.7*u-9<p)?l="ruby":sPopP.window&&u<300?(l="popup","object"==typeof e&&e.title===n&&(e[sPopP.types[0]]=n,e.title="")):l="window","object"!=typeof e||n&&0!=n||e[l]&&(n=e[l],c=!0),l=sPopF[l]}if(!n||0==n&&"object"!=typeof e){if(!((n=e[sPopP.types[l]])||(n=e[sPopP.types[0]])||(n=e.title)))return;c=!0}if(sPopP.left=0,sPopP.top=20,e&&"object"==typeof e){if(!e.className&&sPopP.DclassName[l]){r||!(r=document.body.className)||sPopP.bgS[r]||(r=0),e.className=sPopP.DclassName[l]+(r?"_"+r:"");var d=e.style;!d.fontWeight&&(g=e.parentNode)&&(g=g.style.fontWeight)&&(d.fontWeight=g)}}else try{sPopP.left+=event.offsetX,sPopP.top+=event.offsetY}catch(e){}}if(l!=sPopF.popup||sPopP.window||t&sPopF.force||(l=sPopF.window),l==sPopF.ruby){if("object"!=typeof e||!e.innerHTML)return;if(e.doneRuby)return l;(t&sPopF.repeat||-1!==sPopP.RepeatC.indexOf(n))&&(e.title="",n=has_ruby_tag?n.repeat(("string"==typeof e.innerText?e.innerText:_.HTML_to_Unicode(e.innerHTML)).length/n.length):"");try{e.innerHTML="<ruby><rb>"+e.innerHTML+"</rb><rp>"+(n?window.navigator.userAgent.indexOf("Opera")>=0||/^[a-z\d\s_,.;"'\[\]{}+\-*\/]*$/i.test(n)?"(</rp><rt>"+n+"</rt><rp>)":"（</rp><rt>"+n+"</rt><rp>）":"</rp><rt></rt><rp>")+"</rp></ruby>"}catch(t){var f=65535&t.number;601!=f||void 0!==sPopError&&sPopError==f||alert("Error: "+t.description+" at\n"+e.outerHTML+"\n\n★也許是在這之前的tag出錯，例如有<b>卻沒有</b>。"),sPopError=f}e.doneRuby=!0}else if(l==sPopF.popup){if(s||!sPopP.window)return l;o||(c&&(n=n.replace(/\r*\n/g,"<br />\n")),sPopP.window.document.body.innerHTML='<div style="'+sPopP.popupS+'" onblur="parent.sPopP.window.hide();" title="reference">[<b style="color:peru;cursor:pointer;" onclick="parent.sPopP.window.hide();">'+sPopP.close_message+'</b>] [<b style="color:green;cursor:pointer;" onclick="parent.sPopP.width+=100,parent.sPopP.height+=50,parent.'+sPopP.functionName+"('repop');\">"+sPopP.bigger_message+'</b>] [<b style="color:orange;cursor:pointer;" onclick="parent.sPopP.width=parent.sPopP.height=0,parent.'+sPopP.functionName+"('repop');\">"+sPopP.reset_message+'</b>]<hr style="color:purple;height:1px" />'+n.replace(/'/g,"&#39;")+"</div>",sPopP.popObj=e||document.body),t&sPopF.clearPop?sPopP.window.hide():sPopP.window.show(sPopP.left,sPopP.top,sPopP.width,sPopP.height,e||document.body)}else if(l==sPopF.window){if(s)return l;0;var g="titlebar=no,dependent,resizable=1,menubar=0,toolbar=0,location=0,scrollbars=1,width=550,height=400";try{g=window.open("","comment",g,!1)}catch(e){g=window.open("","comment",g)}var h=sPopP.commentTitle,m=e.innerHTML&&e.innerHTML.length<9?sPopP.commentTitlePattern.replace(/%s/,e.innerHTML):h;0,document.title&&(h+=" @ ["+document.title+"]",m+=" @ "+document.title),g.document.open(),g.document.write('<script type="text/javascript">window.onblur=function(){window.close();};<\/script><b style="color:#11f;">'+h+":</b>"+(e.innerHTML?'<div id="s" style="color:#488;background-color:#FF8;">\n'+e.innerHTML.replace(/\n/g,"<br />").replace(/ /g,"&nbsp;")+"\n</div><hr />":"")+'<div id="c" style="color:#404;background-color:#8FF;">\n'+n.replace(/\n/g,"<br />").replace(/ /g,"&nbsp;")+'\n</div><hr />[ <b style="cursor:pointer;color:#40f;" onclick="javascript:opener.focus();self.close();">'+sPopP.close_message+"</b> ]"),g.document.close(),g.document.title=m,g.focus(),g=null}else 0;return l}}function openAtInit(){"object"==typeof captureE||"object"!=typeof Event&&"function"!=typeof Event||(Event.mousedown&&window.captureEvents(Event.mousedown),Event.keydown&&window.captureEvents(Event.keydown),window.onmousedown=window.onkeydown=function(e){captureE=e});for(var e,t=library_namespace.get_tag_list("a");e<t.length;e++)t[e].onclick&&!t[e].onkeypress&&-1!=(""+t[e].onclick).indexOf("openAt")&&(t[e].onkeypress=t[e].onclick)}function openAt(e,t){var n;if(e?1===e&&(e="_self"):e="_blank",t||"object"!=typeof event||(t=event.srcElement.href),!t&&"object"==typeof captureE&&"object"==typeof captureE.target)for(n=captureE.target;!(t=n.href)&&(n=n.parentNode););return t&&window.open(t,e).focus(),!1}function addValid(e,t){if("file:"!=location.protocol){if(e||(e="valid"),"object"!=typeof e&&(e=document.getElementById(e)),!e)return 1;if(e.innerHTML.replace(/&nbsp;/g,"").replace(/\s+/g,""))return 2;void 0===t&&(t="valid_window");for(var n,r=0,i="",a=["Valid XHTML 1.1! by W3C\thttp://validator.w3.org/check?uri=referer\thttp://www.w3.org/Icons/valid-xhtml11","Valid CSS! by W3C\thttp://jigsaw.w3.org/css-validator/check/referer\thttp://jigsaw.w3.org/css-validator/images/vcss","Validome Validation Services\thttp://www.validome.org/referer\thttp://www.validome.org/images/valid/set2/valid_xhtml_1_1.png","Another HTML-lint check\thttp://openlab.ring.gr.jp/k16/htmllint/htmllint.cgi?ViewSource=o\thttp://openlab.ring.gr.jp/k16/images/ahl-blue.gif","Bobby WAI-AAA Approved by bobby@watchfire.com\thttp://bobby.watchfire.com/bobby/bobbyServlet?URL=~&output=Submit&gl=wcag1-aaa\thttp://bobby.watchfire.com/bobby/html/en/images/approved_aaa.gif","Bobby 508 Approved by bobby@watchfire.com\thttp://bobby.watchfire.com/bobby/bobbyServlet?URL=~&output=Submit&gl=sec508\thttp://bobby.watchfire.com/bobby/html/en/images/approved_508.gif"];r<a.length;r++)(n=a[r].split("\t"))[1]?i+=' <a title="'+n[0]+'" href="'+n[1].replace(/~/g,encodeURI(location.href))+'" target="'+t+'">'+(n[2]?'<img style="display:inline;width:88px;" alt="'+n[0]+'" src="'+n[2]+'" />':n[0])+"</a>":alert("Validate data defined error!");return e.innerHTML="Validate this document:<br />"+i,e.style.display="block",i}}function delayRun(e,t){var n,r=delayRun;return r.fL||(r.fL=[]),n=r.fL.length,r.fL.push(e),setTimeout("delayRun.run("+n+");",t||0),n}delayRun.clear=function(e){delete this.fL[e]},delayRun.run=function(i){var _t=this,f=_t.fL[i];f&&("function"==typeof f?f():Array.isArray(f)?f[0].apply(f[2]||null,f[1]):eval(f),delete _t.fL[i])};var VBalert_flags={ret:0,vbOK:1,vbCancel:2,vbAbort:3,vbRetry:4,vbIgnore:5,vbYes:6,vbNo:7,vbOKOnly:0,vbOKCancel:1,vbAbortRetryIgnore:2,vbYesNoCancel:3,vbYesNo:4,vbRetryCancel:5,vbCritical:16,vbQuestion:32,vbExclamation:48,vbInformation:64,vbDefaultButton1:0,vbDefaultButton2:256,vbDefaultButton3:512,vbDefaultButton4:768,vbApplicationModal:0,vbSystemModal:4096},event_Object;function VBalert(e,t,n,r,i){if(void 0!==e){VBalert_flags.prompt=e||"",VBalert_flags.buttons=t||0,VBalert_flags.title=n||"",VBalert_flags.helpfile=r||"",VBalert_flags.context=i||0;try{return VBalert_vbf(),VBalert_flags.ret}catch(e){alert(VBalert_flags.prompt)}}}function get_window_status(t){var n={scrollLeft:(r=get_window_status.scroll())[0],scrollTop:r[1]},r=void 0!==document.body.scrollHeight&&void 0!==document.body.offsetHeight&&document.body.scrollHeight>document.body.offsetHeight;n.scrollW=r?document.body.scrollWidth:void 0!==document.body.offsetWidth?document.body.offsetWidth:null,n.scrollH=r?document.body.scrollHeight:void 0!==document.body.offsetHeight?document.body.offsetHeight:null;var i,a=-1!=navigator.appVersion.indexOf("MSIE")&&parseInt(navigator.appVersion.split("MSIE")[1])>6;if(n.windowW=void 0!==window.innerWidth?window.innerWidth:a||void 0===document.body.clientWidth?document.documentElement&&!isNaN(document.documentElement.clientWidth)?document.documentElement.clientWidth:null:document.body.clientWidth,n.windowH=void 0!==window.innerHeight?window.innerHeight:a||void 0===document.body.clientHeight?document.documentElement&&!isNaN(document.documentElement.clientHeight)?document.documentElement.clientHeight:null:document.body.clientHeight,t||("object"==typeof window.event?t=window.event:"object"==typeof e?t=e:"object"==typeof event_Object&&(i=!0,t=event_Object)),t){var o=/Safari/i.test(window.navigator.appName);n.windowX=t.clientX-(o?n.scrollLeft:0),n.windowY=t.clientY-(o?n.scrollTop:0),n.mouseX=t.clientX+(o?0:n.scrollLeft),n.mouseY=t.clientY+(o?0:n.scrollTop),i||(event_Object={clientX:t.clientX,clientY:t.clientY})}return n}function set_style(e,t,n){(e&&"string"==typeof e&&(e=document.getElementById(e)),"object"==typeof e.style)?"object"!=typeof t||n?t in e.style?e.style[t]=n:library_namespace.warn("There is no property ["+t+"] in the element!"):Object.assign(e.style,t):library_namespace.warn("The element has no .style property!")}function get_style(e,t,n){if(e&&"string"==typeof e&&(e=document.getElementById(e)),n=library_namespace.setup_options(n),e&&t){var r,i,a;if(t=t.toLowerCase(),i=document.defaultView)try{(r=e.ownerDocument)&&(r=r.defaultView)?i=r:library_namespace.debug("Cannot get .ownerDocument.defaultView of "+(library_namespace.node_description?library_namespace.node_description(e):"node")+" !"),r=i.getComputedStyle(e,null).getPropertyValue(t),"opacity"===t&&""===r&&(r=1)}catch(a){library_namespace.warn("get_style(name: "+t+") error!"),library_namespace.error(a)}else(i=e.currentStyle)?r=i["float"===t?"styleFloat":t.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})]:(i=e.style)&&t in i?r=i[t]:(r=e["offset"+t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()])||(r="");if(library_namespace.debug((library_namespace.node_description?library_namespace.node_description(e):"node")+".style["+t+"] = ["+r+"]"+(i===document.defaultView?" (use W3C .getComputedStyle)":i===e.currentStyle?" (use IE .currentStyle)":"")),n.numeral&&"string"==typeof r){var o=r.match(/^(\d+(\.\d+)?)px$/);o&&(r=+o[1])}return r}}function get_style_sheets(e,t){var n,r,i,a,o,s,l,c=document.styleSheets;if(!c||!c.length)return[];if(library_namespace.is_Object(e))for(n in e){for(r=e[n],i=library_namespace.is_RegExp(r),l=[],a=0,s=c.length;a<s&&(!t||l.length<t);a++)o=c[a][n]||"",(i?r.test(o):-1!==o.indexOf(r))&&l.push(c[a]);c=l}return c}function get_node_offset(e){if(!(e=get_element(e)))return{};_.get_node_offset;var t="offsetWidth"in e?{width:e.offsetWidth,height:e.offsetHeight}:{};if(e.getBoundingClientRect){var n=get_window_status.scroll(e),r=e.getBoundingClientRect();t={left:r.left+n[0]-n[2],top:r.top+n[1]-n[3],width:r.right-r.left,height:r.bottom-r.top}}else if(_.is_HTML_element(e)){0;for(var i=0,a=0,o=e;o&&!isNaN(o.offsetLeft);)i+=o.offsetLeft||0,a+=o.offsetTop||0,o=o.offsetParent;for(o=e;(o=o.parentNode)&&"body"!=o.tagName.toLowerCase();)i-=o.scrollLeft||0,a-=o.scrollTop||0;0,t.left=i,t.top=a}return t}get_window_status.scroll=function(e){var t,n=e&&e.ownerDocument;try{var r=document.createElement("div");r.style.width=r.style.paddingLeft="1px",document.body.appendChild(r),_.get_window_status.box_model=t=2===r.offsetWidth,e||(n=r.ownerDocument),document.body.removeChild(r).style.display="none",r=null}catch(e){}var i=e&&n||window.document,a=i.body,o=i.defaultView,s=o||i.parentWindow;return library_namespace.debug("ownerDocument: "+n+", defaultView: "+o+", box_model: "+t+", pageXOffset: "+s.pageXOffset+", body.scrollLeft: "+a.scrollLeft+", documentElement.scrollLeft: "+i.documentElement.scrollLeft+", scrollX: "+s.scrollX,2,"get_window_status.scroll"),(get_window_status.scroll=isNaN(s.pageXOffset)?t&&!isNaN(i.documentElement.scrollLeft)?function(e){var t=(e&&e.ownerDocument||window.document).documentElement;return[t.scrollLeft,t.scrollTop,t.clientLeft,t.clientTop]}:isNaN(a.scrollLeft)?isNaN(s.scrollX)?function(){return[0,0,0,0]}:function(){var e=document.body;return[window.scrollX,window.scrollY,e.clientLeft,e.clientTop]}:function(e){var t=(e&&e.ownerDocument||window.document).body;return[t.scrollLeft,t.scrollTop,t.clientLeft,t.clientTop]}:function(e){var t=e&&e.ownerDocument||window.document,n=t.defaultView;return t=t.documentElement,[n.pageXOffset,n.pageYOffset,t.clientLeft,t.clientTop]})(e)},_.get_window_status=get_window_status,_.set_style=set_style,_.get_style=get_style,_.get_style_sheets=get_style_sheets,_.get_style_sheet=function(e){return get_style_sheets(e,1)[0]},_.get_node_offset=get_node_offset;var locate_node_flag={resizable:0,moveable:0,autoLocate:0,auto:0,absolute:1,abs:1,relative:2,rel:2,asDialog:3,dialog:3,modeFlag:3,dialogDown:3,dialogUp:7,dialogRight:11,dialogLeft:15,dialogFlag:15,dialogForce:16,noResize:32,noMove:64,keepDisplay:128,create:256},testC,rC,addonload;function locate_node(e,t,n,r){if(r||(r=locate_node_flag.auto),e){if("string"==typeof e){var i=e;!(e=document.getElementById(i))&&r&locate_node_flag.create&&(document.body.appendChild(e=document.createElement("div")),e.id=i)}var a,o=r&locate_node_flag.keepDisplay?e.style.display:"block",s=r&locate_node_flag.keepDisplay?e.style.visibility:"visible",l=(r&locate_node_flag.modeFlag)==locate_node_flag.dialog?r&locate_node_flag.dialogFlag:0,c=function(e,t){if("string"==typeof e){var n=parseFloat(e.match(/([\d.]+)/));e=n?n<2?n*t:n<200?n*t/100:n:0}else isNaN(e)&&(e=0);return e},_=function(e,r){var i=0;"string"==typeof e&&(e=e.split(","),i=1),l||"object"!=typeof e||(void 0===e[r?"left":"X"]&&void 0!==e[0]&&(i=1,e=r?{X:e[0],Y:e[1]}:{left:e[0],top:e[1],width:e[2],height:e[3]}),r?(e.X=c(e.X,a.windowW),e.Y=c(e.Y,a.windowH)):(e.left=c(e.left,a.windowW),e.top=c(e.top,a.windowH),void 0===e.width?(delete e.width,delete e.height):(e.width=c(e.width,a.windowW),e.height=c(e.height,a.windowH)))),i&&(r?n=e:t=e)},u=function(t,n,r,i,a){f<t&&(f=t),g<n&&(g=n);var o=r-e.offsetWidth;f>o&&(t>o?h=r-(f=t):f=o),o=i-e.offsetHeight,g>o?n>o?m=i-(g=n):g=o:a&&(g=a-e.offsetHeight/2)<n&&(g=n)};if(e.style.overflow=e.style.visibility="hidden",e.style.width&&(e.style.width=""),e.style.height&&(e.style.height=""),e.style.display="block","string"==typeof t){var p=document.getElementById(t);p&&(t=p)}if("object"==typeof t&&void 0!==t.offsetLeft)t=get_node_offset(t),(r&locate_node_flag.modeFlag)==locate_node_flag.auto&&(r+=locate_node_flag.dialog-locate_node_flag.auto,l=locate_node_flag.dialog);a=get_window_status(),n?_(n,1):n={X:2,Y:2},t&&"mouse"!=t?((r&locate_node_flag.modeFlag)==locate_node_flag.auto&&"string"==typeof t&&/[%.]/.test(t)&&(r+=locate_node_flag.rel-locate_node_flag.auto),_(t)):t={left:a.mouseX||0,top:a.mouseY||0},(r&locate_node_flag.modeFlag)==locate_node_flag.auto&&(r+=locate_node_flag[t.width&&t.height&&t.top<a.windowH&&t.left<a.windowW?(l=locate_node_flag.dialog)&&"dialog":"abs"]-locate_node_flag.auto),(r&locate_node_flag.modeFlag)==locate_node_flag.rel&&(r+=locate_node_flag.abs-locate_node_flag.rel,t.left+=a.scrollLeft,t.top+=a.scrollTop);var d=!(r&locate_node_flag.noResize),f=t.left,g=t.top,h=-1,m=-1;if(r&locate_node_flag.noMove)d?u((f+=n.X)-n.X,(g+=n.Y)-n.Y,a.scrollLeft+a.windowW,a.scrollTop+a.windowH):((n.X<0||f+n.X>=a.scrollLeft&&f+n.X+e.offsetWidth<a.scrollLeft+a.windowW)&&(f+=n.X),(n.Y<0||g+n.Y>=a.scrollTop&&g+n.Y+e.offsetHeight<a.scrollTop+a.windowH)&&(g+=n.Y));else if(l){l?(t.width||(t.width=0),t.height||(t.height=0)):t={left:a.scrollLeft,top:a.scrollTop,width:0,height:0},e.innerHTML||(e.innerHTML="&nbsp;");var y,b=a.scrollTop+a.windowH-t.top-t.height,v=t.top-a.scrollTop,w=a.scrollLeft+a.windowW-t.left-t.width,k=t.left-a.scrollLeft,A=a.scrollLeft,x=a.scrollTop,O=a.scrollLeft+a.windowW,E=a.scrollTop+a.windowH;0,l&&r&locate_node_flag.dialogForce?y=l:(e.offsetWidth<a.windowW&&(l!=locate_node_flag.dialogRight&&l!=locate_node_flag.dialogLeft||e.offsetHeight>=a.windowH)&&(e.offsetHeight<b&&(l!=locate_node_flag.dialogUp||e.offsetHeight>=v)?y=locate_node_flag.dialogDown:e.offsetHeight<v&&(y=locate_node_flag.dialogUp)),!y&&e.offsetHeight<a.windowH&&(e.offsetWidth<w&&(l!=locate_node_flag.dialogLeft||e.offsetWidth>=k)?y=locate_node_flag.dialogRight:e.offsetWidth<k&&(y=locate_node_flag.dialogLeft)),y||(y=l!=locate_node_flag.dialogRight&&l!=locate_node_flag.dialogLeft?b<v&&d?locate_node_flag.dialogUp:locate_node_flag.dialogDown:w<k&&d?locate_node_flag.dialogLeft:locate_node_flag.dialogRight)),y==locate_node_flag.dialogDown?(x=t.top+t.height,g+=t.height,A||(A=t.left)):y==locate_node_flag.dialogUp?(E=t.top,g-=e.offsetHeight,n.Y=-n.Y,A||(A=t.left)):y==locate_node_flag.dialogRight?(A=t.left+t.width,f+=t.width):(O=t.left,f-=e.offsetWidth,n.X=-n.X),f+=n.X,g+=n.Y,d||((f<A&&n.X<0||f+e.offsetWidth>O&&n.X>0)&&(f-=n.X),(g<x&&n.Y<0||g+e.offsetHeight>E&&n.Y>0)&&(g-=n.Y),O+=e.offsetWidth,E+=e.offsetHeight),u(A,x,O,E,y==locate_node_flag.dialogRight||y==locate_node_flag.dialogLeft?t.top:0)}else f+=n.X,g+=n.Y,u(a.scrollLeft,a.scrollTop,a.scrollLeft+a.windowW,a.scrollTop+a.windowH);return e.style.zIndex=100,e.style.position="absolute",e.style.left=f+"px",e.style.top=g+"px",(h>=0||m>=0)&&(e.style.overflow="auto",h>=0&&(e.style.width=h+"px"),m>=0&&(e.style.height=m+"px")),e.style.display=o,e.style.visibility=s,e}}function limit_input_maxlength(){this.value.length>this.maxLength&&(this.value=this.value.slice(0,this.maxLength))}function limit_input_maxlength_onkeydown(){return this.value.length<=this.maxLength}function check_input_pattern_onkeydown(){return this.validator.test(this.value)}function check_input_onkeydown(e){return!!(e.ctrlKey||e.altKey||[8,9,13,46,35,36,37,38,39,40].includes(e.which))||(!!(window.getSelection&&window.getSelection().toString()||document.selection&&"Control"!==document.selection.type&&document.selection.createRange().text)||(!(this.maxLength>=0)||this.value.length<this.maxLength)&&(!this.validator||this.validator.test(this.value+e.key)))}function Punycode(){}function sort_nodes(e,t,n){"function"!=typeof n&&(n=function(e){return e});for(var r=0,i=e.length,a=[];r<i;r++)a.push([n(e[r]),r]);for(a.sort(t),r=0;r<i;r++);}_.locate_node=locate_node,_.adapt_input_validation=function(){for_nodes(function(e){if("number"===e.type&&(e.hasAttribute("max")||e.hasAttribute("min"))&&e.setAttribute("maxlength",Math.max(e.getAttribute("max")&&e.getAttribute("max").length||0,e.getAttribute("min")&&e.getAttribute("min").length||0)),e.hasAttribute("maxlength")&&(_.add_listener("change",limit_input_maxlength,e),e.onkeydown||(e.onkeydown=check_input_onkeydown)),e.hasAttribute("pattern")){var t=e.getAttribute("pattern");try{t=new RegExp("^"+t+"$"),e.validator=t,e.onkeydown||(e.onkeydown=check_input_onkeydown)}catch(e){library_namespace.error({T:["Invalid pattern: %1",t]})}}},"input")},Punycode.map="abcdefghijklmnopqrstuvwxyz0123456789",Punycode.Dmap=0,Punycode.base=Punycode.map.length,Punycode.tmin=1,Punycode.tmax=26,Punycode.skew=38,Punycode.damp=700,Punycode.initial_bias=72,Punycode.initial_n=128,Punycode.prefix="xn--",Punycode.delimiter="-",Punycode._b=Punycode.base-Punycode.tmin,Punycode._t=Math.floor(Punycode._b*Punycode.tmax/2),Punycode.encodeDomain=function(e){var t=e.match(/^([\w\-]+:\/\/)?([^\/]+)/),n=t?t[2]:"",r=(t=n)?e.indexOf(t):0;return t&&t.replace(/[\x01-\x7f]+/g,"")&&(t=t.replace(/([^.]+)\./g,function(e,t){return Punycode.prefix+Punycode.encode(t)+"."}),e=encodeURI(e.slice(0,r)+t+e.slice(r+n.length))),e},Punycode.decodeDomain=function(e){var t=e.match(/^([\w\-]+:\/\/)?([^\/]+)/),n=t?t[2]:"",r=(t=n)?e.indexOf(t):0;if(t&&(t=t.replace(new RegExp(Punycode.prefix+"([^.]+)\\.","g"),function(e,t){return Punycode.decode(t)+"."}))!=n){e=e.slice(0,r)+t+e.slice(r+n.length);try{e=decodeURI(e)}catch(t){e=unescape(e)}}return e},Punycode.adapt=function(e,t,n){e=n?Math.floor(e/Punycode.damp):e>>1,e+=Math.floor(e/t);for(var r=0;e>_t;r+=Punycode.base)e=Math.floor(e/Punycode._b);return r+Math.floor((Punycode._b+1)*e/(e+Punycode.skew))},Punycode.encode=function(e){var n,r,i,a=Punycode.initial_n,o=[],s=[],l=0,c=0,_=Punycode.initial_bias,u=e.replace(/[^\x01-\x7f]+/g,""),p=u.length,d=p;for(0,d&&(u+=Punycode.delimiter);l<e.length;l++)o.push(r=e.charCodeAt(l)),r>a&&s.push(r);for(s.sort(library_namespace.descending);p<o.length;){do{r=s.pop()}while(n==r);for(c+=((n=r)-a)*(p+1),a=n,l=0;l<o.length;l++)if((r=o[l])<a&&++c,r==a){for(i=c,k=Punycode.base;!(i<(t=k<=_?Punycode.tmin:k>=_+tmax?Punycode.tmax:k-_));k+=Punycode.base)u+=Punycode.map.charAt(t+(i-t)%(Punycode.base-t)),i=Math.floor((i-t)/(base-t));u+=Punycode.map.charAt(i),_=Punycode.adapt(c,p+1,p==d),c=0,p++}c++,a++}return u},Punycode.decode=function(e){var n,r,i,a,o=Punycode.initial_n,s=0,l=e.lastIndexOf(Punycode.delimiter),c=Punycode.initial_bias,_=-1==l?"":e.slice(0,l);if(!Punycode.Dmap)for(r=0,Punycode.Dmap={};r<Punycode.map.length;r++)Punycode.Dmap[Punycode.map.charAt(r)]=r;for(;l<e.length-1;){for(n=s,r=1,k=Punycode.base;;k+=Punycode.base){if(++l>=e.length)return alert("Punycode: invalid input: out of range"),e;if(isNaN(i=Dmap[e.charAt(l)]))return alert("Punycode: invalid input"),e;if(s+=i*r,i<(t=k<=c?Punycode.tmin:k>=c+Punycode.tmax?Punycode.tmax:k-c))break;0,r*=Punycode.base-t}c=Punycode.adapt(s-n,a=_.length+1,0==n),o+=Math.floor(s/a),s%=a,_=_.slice(0,s)+String.fromCharCode(o)+_.slice(s),s++}return _},_.DOM_loaded=function(){return!("complete"!==winodow.document.readyState&&!winodow.document.body)&&(_.DOM_loaded=function(){return!0},!0)},_.on_load=function(){_.on_load;for(var e=_.DOM_loaded(),t=0,n=arguments,r=n.length;t<r;t++)e?n[t].call(document):_.add_listener("load",n[t],document)},_.add_listener=function(e,t,n,r){var i,a,o=_.add_listener;if(library_namespace.is_Object(e)||Array.isArray(e)){if(!(t=get_element(t)))return;for(i in e)library_namespace.debug(i+": "+e[i],2,"add_listener"),Array.isArray(e)?o(e[i],t,n):o(i,e[i],t,n)}else if(e&&t)if("string"==typeof t&&(t=new Function("e",t)),"string"==typeof n&&(n=get_element(n)),"boolean"!=typeof r&&(r=void 0===r?o.p_first:!!r),library_namespace.is_Object(t)||Array.isArray(t))for(i in t)o(e,t[i],n,"true"===i||"false"!==i&&void 0);else if(library_namespace.is_Function(t)){if(n?a=n.addEventListener:(a=o.global_adder)||null===a||(o.global_adder=a=o.get_adder()),i=function(e){if(e||(e=window.event),e.currentTarget||(e.currentTarget=n),e.target||(e.target=e.srcElement||n),e.target&&e.target.nodeType===TEXT_NODE&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),isNaN(e.pageX)&&!isNaN(e.clientX)){var r=get_window_status.scroll();e.pageX=e.clientX+r[0]-r[2],e.pageY=e.clientY+r[1]-r[3]}return t.call(n,e)},a){try{a.call(n,e,i,r)}catch(t){a.call(window.document,e,i,r)}return}return n&&(a=n.attachEvent)?a("on"+e,i):o.default_adder(e,i,r,n)}},_.add_listener.p_first=!1,_.add_listener.get_adder=function(){return window.addEventListener||"function"==typeof window.attachEvent&&function(e,t){window.attachEvent("on"+e,t)}||document.addEventListener||null},_.add_listener.default_adder=function(e,t,n,r){r||(r=window);var i=r[e="on"+e];return r[e]=i?n?function(e){e||(e=window.event),i.call(r,e),t.call(r,e)}:function(e){e||(e=window.event),t.call(r,e),i.call(r,e)}:function(e){t.call(r,e||window.event)}},_.add_listener.list=Object.create(null),_.add_listener.list=Object.create(null),_.stop_event=function(e,t){return e||(e=window.event),"function"==typeof e.preventDefault?e.preventDefault():e.returnValue=!1,t&&("function"==typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0),!1},_.get_selection=function(e){};try{window.getSelection?_.get_selection=function(e){var t=document.activeElement,n=t&&t.tagName&&t.tagName.toLowerCase(),r=window.getSelection();if(!r.rangeCount)return{text:"",element:r,selection:r};r=r.getRangeAt(!isNaN(e)&&0<=e&&e<r.rangeCount?e:0);var i=_.get_node_offset(r.getBoundingClientRect?r:r.endContainer.parentNode);return{left:i.left,top:i.top,width:i.width,height:i.height,text:"textarea"===n||"input"===n||"select"===n?t.value.substring(t.selectionStart,t.selectionEnd):r.toString(),element:r,selection:r}}:document.selection&&document.selection.createRange?(document.execCommand&&document.execCommand("MultipleSelection",!0,!0),_.get_selection=function(e){var t=document.selection.createRange();return"None"!==t.type&&{left:t.boundingLeft,top:t.boundingTop,width:t.boundingWidth,height:t.boundingHeight,text:t.text,selection:t}}):document.getSelection&&(_.get_selection=function(e){return{text:document.getSelection()}})}catch(e){}var is_IE=!1;function add_engine(){throw"TODO"}_.deal_with_barcode=function(e){var t,n=0,r=0;document.onkeypress=function(i){var a=new Date;(a-r>800||a-n>90)&&(r=a,t=""),n=a,(a=(a=i||window.event).keyCode||a.which||a.charCode)>32&&a<120?t+=String.fromCharCode(a):13==a&&e(t,i)}};var HTML_Entities_predefined={quot:'"',amp:"&",apos:"'",lt:"<",gt:">"},HTML_Entities_predefined_values=Object.values(HTML_Entities_predefined),HTML_Entities=Object.assign({nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},HTML_Entities_predefined);function CSSToTxt(e){return e.replace(/\\\\|\\0{0,4}5[cC][ \t\r\n\f]?/g,"\0").replace(/\\([\dA-Fa-f]{1,6})[ \t\r\n\f]?/g,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/\\(.)/g,"$1").replace(/\0/g,"\\")}function TxtToCSS(e,t,n){var r,i=0,a="",o=t&&t>3&&t<9?"0".repeat(t-1):"";for(n||(n=""),n+="\\";i<e.length;i++)r=e.charCodeAt(i).toString(16),a+=n+o.substr(0,t-r.length)+r;return a.slice(n.length-1)}_.HTML_to_Unicode=function(e,t){t=!0===t?{entity:!0,numeric:!0}:t?library_namespace.setup_options(t):{predefined:!0,entity:!0,numeric:!0};var n=e.valueOf();if(t.is_URI)try{n=decodeURIComponent(n)}catch(e){}function r(e,n){if(n>1114111)return e;var r=String.fromCodePoint(n);return!t.predefined&&HTML_Entities_predefined_values.includes(r)?e:r}function i(e,t){return r(e,parseInt(t,16))}return t.numeric&&(n=n.replace(/&#0*(\d{2,8});?/g,r).replace(/&#[xX]0*([\dA-Fa-f]{2,6});?/g,i)),t.entity&&(n=n.replace(/&([a-z]\w{0,49});/gi,function(e,n){return!t.predefined&&n in HTML_Entities_predefined||!(n in HTML_Entities)?e:HTML_Entities[n]})),n},_.HTML_to_Unicode.entities=HTML_Entities,_.to_HTML=function(e,t){for(var n,r="",i=0;i<e.length;i++)n=e.charCodeAt(i),r+="&#"+("x"===t?"x"+n.toString(16):n)+";";return r},_.Unicode_to_HTML=function(e,t,n){return e=(""+e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),e=n?e.replace(/<([^>]+)>/g,function(e,t){if(!(t in n))return"&lt;"+t;for(var r=t.split(/ /),i=1,a=r.length,o=n[t];i<a;i++)return m=r[i].match(/^([^=]+)(.+?)/),m[1]in o&&(library_namespace.is_type(o[m[1]],"RegExp")&&o[m[1]].test(m[2])||library_namespace.is_Function(o[m[1]])&&o[m[1]](m[2]))||(r[i]=""),r.join(" ")}):e.replace(/</g,"&lt;"),4==t?e:(e=e.replace(/ /g,"&nbsp;"),1&t&&(e=e.replace(/	/g,'<span style="margin-left:3em;">&nbsp;</span>')),2&t||(e=e.replace(/(\r?\n)/g,"<br />$1")),e)},_.Unicode_unescape=function(e){var t=e.replace(/\\\\|\\u005[cC]|\\x5[cC]|\\134/g,"\0");return-1!=(t=t.replace(/\\(u[\dA-Fa-f]{4}|x[\dA-Fa-f]{2}|[0-7]{1,3})/g,function(e,t){var n=t.charAt(0);return String.fromCharCode(parseInt("u"==n||"x"==n?t.substr(1):t,16))})).indexOf("\\")&&(t=t.replace(/\\t/g,"<Tab>").replace(/\\n/g,"<Line Feed>").replace(/\\v/g,"<Vertical Tab>").replace(/\\f/g,"<Form Feed>").replace(/\\r/g,"<Carriage Return>").replace(/\\(.)/g,"$1")),t.replace(/\0/g,"\\")},_.Unicode_escape=function(e,t){var n,r=0,i="";for(isNaN(t)&&(t=256);r<e.length;r++)i+=(n=e.charCodeAt(r))<t?e.charAt(r):"\\u0000".substr(0,6-(n=n.toString(16)).length)+n;return i},_.get_query=function(e,t){e||(e=window.location.search.slice(1));var n,r,i,a,o=e.replace(/\+/g," ").split("&"),s=t||Object.create(null);for(n in o)try{(r=o[n].match(/^([^=]*)=(.*)$/))?(i=decodeURIComponent(r[1]),a=decodeURIComponent(r[2]),i in s?"string"==typeof s[i]?s[i]=[s[i],a]:s[i].push(a):s[i]=a):s[decodeURIComponent(o[n])]=void 0}catch(e){}return s},_.to_query_string=function(e){if(library_namespace.is_Object(e)){var t,n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}};var has_RegExp_group=!1,support_dataset,dataset;try{has_RegExp_group=new RegExp("(\\d)\\1").test("00")}catch(e){}function reduce_HTML(e){if(e){var t=reduce_HTML,n=function(e,t,n){return t!=n||t.toLowerCase()in{a:1,p:1,head:1}?e:""};return e=e.replace(/[\s\n]*<(t[dh])([^>]+)>[\s\n]*/gi,function(e,t,n){var r=n.match(/[\s\n](col|row)span=['"]?\d{1,3}['"]?/gi);return"<"+t+(r?r.join(""):"")+">"}).replace(/<\?xml:namespace[^>]+>/g,"").replace(/[\s\n]*(<\/t[dh]>)[\s\n]*/gi,"$1").replace(/<wbr[^>]*>/gi,"<br />").replace(/<([bh]r)[\s\n]+([^>]*)\/?>/gi,function(e,t,n){var r=n.match(/[\s\n;"'][\s\n]*page-break-before[\s\n]*:[\s\n]*([^\s\n;"']+)/);return"<"+t+(r?' style="page-break-before:'+r[1]+'"':"")+">"}).replace(/<(span|font|p|div|b|u|i)[\s\n]+([^>]*)>/gi,function(e,n,r){var i,a="<"+n,o="";return-1!==r.indexOf("Italic")&&(o+="font-style:italic;"),t.keep_color&&(i=r.match(/[\s\n;"'][\s\n]*color[\s\n]*:[\s\n]*([^\s\n;"']+)/))&&(i=t.keep_color(i[1]))&&(o+="color:"+i+";"),a+(o?' style="'+o+'"':"")+">"}).replace(/<(tr|table)[\s\n]+([^>]*)>/gi,"<$1>").replace(/<span>([\s\S]*?)<\/span>/gi,"$1").replace(/<span>([\s\S]*?)<\/span>/gi,"$1").replace(/<font>([\s\S]*?)<\/font>/gi,"$1").replace(/<([a-z\d]+)>[\s\n]*<\/([a-z\d]+)>/gi,n).replace(/<([a-z\d]+)>[\s\n]*<\/([a-z\d]+)>/gi,n).replace(/<o:p>([\s\S]*?)<\/o:p>/gi,"$1").replace(/<st1:[^>]+>([\s\S]*?)<\/st1:[^>]+>/gi,"$1").replace(/<!\[if !vml\]>([\s\S]*?)<!\[endif\]>/gi,"$1").replace(/<o:SmartTagType [^>]+\/>/gi,"").replace(/<(span|p|div|t[dr])([^>]*>)<(span|p)>(([\s\n]+|&nbsp;)*?)<\/(span|p)><\/(span|p|div|t[dr])>/gi,"<$1$2$4</$7>").replace(/[\s\n]*<\/p>([\s\n]*<br\s*\/?>)*[\s\n]*<p[^>]*>/gi,"<br />\n").replace(/<link rel=(File-List|colorSchemeMapping|themeData|Edit-Time-Data)[^>]+>/gi,"").replace(/^[\s\n]*<\html[^>]*>[\s\n]*/,"<html>").replace(/[\s\n]*<\body[^>]+>[\s\n]*/,"<\body>").replace(/[\s\n]*<!--\[if [^\]]+\]>[\s\S]*?<!\[endif\]-->(\r?\n)*/gi,"").replace(/[\s\n]*<\style[^>]*>[\s\S]*?<\/style>[\s\n]*/gi,"").replace(/[\s\n]*<\meta[\s\n][^>]+>[\s\n]*/gi,"").replace(/&#0*(\d{2,7});/gi,function(e,t){return t>1114111?e:String.fromCharCode(t)}).replace(/([\s\n]+|&nbsp;)+$|^([\s\n]+|&nbsp;)+/g,""),has_RegExp_group&&(e=e.replace(/<([bis])[\s\n]*>([^<]*)<\/\1>([\s\n]*)<\1>/gi,"$2")),/<(img|table)[>\s\n]/.test(e)&&(library_namespace.debug("Has table or images."),e=e.replace(/<\/head>/i,'<style type="text/css">table,th,td{border:1px solid #888;border-collapse:collapse;}img{border:0;max-width:99%;}</style></head>')),e}}function to_hyphenated(e){if(library_namespace.is_debug()&&/-[a-z]/.test(e))throw new SyntaxError('The dataset name "'+e+'" contains a U+002D HYPHEN-MINUS character (-) followed by a lowercase ASCII letter.');return"data-"+e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}function dataset_compatible(e,t,n){if(e&&e.nodeType!==TEXT_NODE){if(e.dataset||(e.dataset=Object.create(null)),!t)return dataset_synchronize(e);var r=e.dataset;if(arguments.length>2)void 0===n?delete r[t]:r[t]=String(n),void 0===n?e.removeAttribute(to_hyphenated(t)):e.setAttribute(to_hyphenated(t),n);else{if(library_namespace.is_Object(t)){for(var i in t)dataset_compatible(e,i,t[i]);return e.dataset}void 0!==(n=e.getAttribute?e.getAttribute(to_hyphenated(t)):e[to_hyphenated(t)])&&(r[t]=String(n))}return r[t]}}function dataset_synchronize(e,t){if(e&&e.nodeType!==TEXT_NODE){var n,r=e.dataset;if(void 0===t||t)library_namespace.debug("attribute → dataset.",2,"dataset_synchronize"),for_attributes(e,function(e,t){(e=e.match(/^data-([^A-Z]+)$/))&&(r[e[1].replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})]=t)});if(!t)for(n in library_namespace.debug("dataset → attribute.",2,"dataset_synchronize"),r)e.setAttribute(to_hyphenated(n),r[n]);return r}}reduce_HTML._keep_color=function(e){if("black"!==e)return e},reduce_HTML.file=function(e,t){var n=simpleRead(e,t||simpleFileAutodetectEncode);n?(n.length,n=this(n),e=e.replace(/\.[xs]?html?$/i,function(e){return".reduced"+e}),simpleWrite(e,n,"utf-8")):error("Open ["+e+"] failed.")};try{_.support_dataset=support_dataset=library_namespace.is_WWW(!0)&&library_namespace.is_type(document.body.dataset,"DOMStringMap")}catch(e){}support_dataset?dataset=function(e,t,n){var r=e.dataset;if(!t||!r)return r;if(arguments.length>2)void 0===n?delete r[t]:r[t]=String(n);else if(library_namespace.is_Object(t)){for(var i in t)r[i]=t[i];return r}return r[t]}:(library_namespace.debug("The runtime environment does not support dataset!"),dataset=dataset_compatible),_.DOM_data=dataset;var CSS_position_sticky=library_namespace.platform({firefox:32,chrome:56,safari:5}),is_Safari=library_namespace.platform({safari:5});function auto_TOC(e,t){var n=(t=library_namespace.setup_options(t)).level,r=t.force;if((e=get_element(e))||(e=document.body),r||!(e.scrollHeight<4*screen.height)){var i,a,o,s,l=[],c=[],u=e.firstChild,p=location.href.replace(/#.*$/,"")+"#";for(is_Safari&&(p=encodeURI(p)),n|=0,n=new RegExp("^(h[1-"+(n>=1&&n<=6?n:6)+"]|header)$","i");u;)(i=u.tagName)&&i.match(n)&&y(u),u=u.nextSibling;if(0===l.length&&for_nodes(y,"h2"),l.length>1){var d,f=set_attribute(e,"id"),g=gettext("↑Back to TOC");for((a=set_attribute(e,"title"))||(u=e.firstChild,/^h[1-3]$/i.test(u.tagName)&&(a=set_text(u))),a||(a=f),f=auto_TOC.CSS_prefix+(f||Math.random()),d=f+"_list",o=0,s=c.length;o<s;o++)set_class(u=c[o],auto_TOC.CSS_prefix+"head"),new_node({a:"📑",href:p+f,C:auto_TOC.CSS_prefix+"back",R:g,target:"_self"},[u,1]);l=[{span:[{span:CSS_position_sticky?auto_TOC.icon.unpin:"",onclick:function(){u.style.position=u.style.position?"":"static",this.innerHTML=auto_TOC.icon[u.style.position?"pin":"unpin"],m()},R:"Pin/unpin the TOC"},{span:auto_TOC.icon.right,onclick:function(){u.style.cssFloat=u.style.cssFloat?"":"right",this.innerHTML=auto_TOC.icon[u.style.cssFloat?"left":"right"]},R:"Set TOC to left or right"}],C:auto_TOC.CSS_prefix+"position_control"},{div:["📑",{T:a?["Contents of [%1]",t.title_name&&t.title_name(a)||a]:"Contents"}],C:auto_TOC.CSS_prefix+"control",title:gettext("expand"),onclick:function(){var e="none"!==toggle_display(d);this.title=gettext(e?"collapse":"expand"),e&&m()}},{div:l,id:d,C:auto_TOC.CSS_prefix+"list"}];var h=auto_TOC.CSS_prefix+(CSS_position_sticky?"box":"box_no_sticky");(u=get_element(f))?(_.remove_all_child(u),set_class(u,h),new_node(l,u)):u=new_node({div:l,id:f,C:h},[e,1]),d=get_element(d),library_namespace.run(library_namespace.get_module_path(module_name,"auto_TOC.css"))}else library_namespace.warn("auto_TOC: No "+n+" found.");c=l=null}function m(){if(CSS_position_sticky)if(u.style.position)d.style.height="";else{var e=window.innerHeight;!isNaN(e)&&(e=e-40|0)<d.offsetHeight&&(d.style.height=e+"px")}}function y(e){library_namespace.debug("&lt;"+e.tagName+"&gt;\n"+e.innerHTML.slice(0,200),3),c.push(e),a=set_text(e),o=a.length<auto_TOC.max_length,s=e.tagName.toLowerCase(),e.id||e.name||(e.id=encodeURIComponent(a)),l.push({div:{a:o?a:[a.slice(0,auto_TOC.max_length),{span:"..",C:auto_TOC.CSS_prefix+"more"}],href:p+(e.id||e.name),R:(o?"":a+(e.title?"\n":""))+(e.title||""),target:"_self",onclick:function(){toggle_display(d,!1)}},C:auto_TOC.CSS_prefix+s+("header"===s?"":" "+auto_TOC.CSS_prefix+"header")})}}function random_color(e,t){function n(e,t){return e+Math.random()*t|0}((e|=0)<0||e>255)&&(e=0),t||(t=256-e);for(var r=[],i=3;i--;)r.push(n(e,t));return"rgb("+r+");"}function parse_frame(e){try{var t=e.getElementsByTagName("frameset")[0];t?library_namespace.log(function e(t){for(var n,r,i,a=t.childNodes,o=0,s=a.length,l=[],c=t.cols.trim(),_=random_color(210),u=function(){var e=i.name+"("+p.shift()+")";return i.src?{b:e,title:i.src}:e},p=(c||t.rows.trim()).split(/\s*,\s*/);o<s;o++)(n=(i=a[o]).tagName)&&(r="frame"===(n=n.toLowerCase())?{a:u(),href:"#",onclick:function(){if(library_namespace.show_value)try{library_namespace.show_value(this,this.id||this.name)}catch(e){library_namespace.error(e)}else library_namespace.warn("Need to include application.debug first! Trying now..."),library_namespace.run("application.debug");return!1}.bind(i)}:"frameset"===n&&[{div:u(),S:"width:100%;color:#e73;background-color:"+_+";"},e(i)])&&(r={td:r,S:"background-color:"+_+";"},l.push(c?r:{tr:r}));return{table:{tbody:c?{tr:l}:l},S:"width:100%;border-collapse:collapse;"}}(t)):library_namespace.is_debug()&&library_namespace.warn("No frameset detected.")}catch(e){library_namespace.error(e)}}return auto_TOC.max_length=80,auto_TOC.CSS_prefix="TOC_",auto_TOC.set_text=function(e){gettext.translate_nodes(get_element(e).childNodes),gettext.translate_nodes("."+auto_TOC.CSS_prefix+"back")},auto_TOC.icon={pin:"⚓",unpin:"⇧",left:"⇦",right:"⇨"},_.auto_TOC=auto_TOC,_.parse_frame=parse_frame,_}}),"function"==typeof CeL&&CeL.run({name:"application.net",require:"data.code.compatibility.|data.native.|application.OS.Windows.get_WScript_object|interact.DOM.HTML_to_Unicode",code:function(e){"use strict";var t=this.id,n=/[^a-zA-Z0-9;,/?:@&=+$\-_.!~*'()#]/,r=function(t){t&&!/^UTF-?8$/i.test(t)&&(e.warn("您必須先載入 CeL.! 這訊息只會顯示一次!"),r=null)},i=function(n,a){return e.character?(e.debug("採用 "+e.Class+".character.encode_URI_component 編碼 "+a,1,t),i=e.character.encode_URI_component,r=null,i(n,a)):(r(a),encodeURIComponent(n))},a=function(n,i){return e.character?(e.debug("採用 "+e.Class+".character.encode_URI 編碼 "+i,1,t),a=e.character.encode_URI,r=null,a(n,i)):(r(i),encodeURI(n))},o=function(n,i){return e.character?(e.debug("採用 "+e.Class+".character.decode_URI_component 解碼 "+i,1,t),e.character.decode_URI,o=e.character.decode_URI_component,r=null,o(n,i)):(r(i),decodeURIComponent(n))},s=e.env.not_native_keyword,l=this.r("get_WScript_object"),c=this.r("HTML_to_Unicode"),_=function(){};_.prototype={};"".indexOf("_");_.is_IP=function(e,t){return!t&&/^[12]?\d{1,2}(?:\.[12]?\d{1,2}){3}$/.test(e)||/^[\dA-F]{1,4}(?::[\dA-F]{1,4}){7}$/i.test(e)},_.get_full_URL=function(e,t){if(/([a-z\d]+:)\/\//.test(e))return e;if(e.startsWith("/")){var n=t.match(/([a-z\d]+:)\/\/[^\/]+/);if(n)return n[0]+e}return t.replace(/[^\/]+$/,"")+e};var u={socks4:1080,socks4a:1080,socks5:1080,socks:1080,socks5h:1080,ftp:21,http:80,https:443};_.port_of_protocol=u;var p=/^([\w\-]{2,}:)?(\/\/)?(\/[A-Z]:|(?:[^@]*@)?[^\/#?&:.][^\/#?&:]+(?::\d{1,5})?)?(.*)$/i;function d(t,r,i){if(!m(this))return m(t)?t:new d(t,r,i);if("buffer"===(i=e.new_options(i)).charset&&delete i.charset,(t instanceof URL||m(t))&&(t=t.toString()),!t||"string"!=typeof t)throw new Error("Invalid URI type: ("+typeof t+") "+t);var o=e.simplify_path(t);/^\/\//.test(t)&&(o="/"+o);var l,c=o.match(p);if(!c)throw new Error("Invalid URI: ("+typeof t+") "+t);if(e.debug("parse ["+t+"]: "+c.join("<br />\n"),8,"URI"),t=r&&d(r)||i.as_URL||e.is_WWW()&&{protocol:location.protocol,hostname:location.hostname,port:location.port,host:location.host,pathname:location.pathname},e.need_avoid_assign_to_setter){for(var _ in t)"search"!==_&&(this[_]=t[_]);t=this}else t=Object.assign(this,t);if(o=c[3]&&c[3].toLowerCase()||"",l=c[4]||"",/(?:\w+\.)+(?:com|org|net|info)$/i.test(o)&&(l=l||"/","file:"===t.protocol&&(t.protocol="https:")),c[1]&&(t.protocol=c[1].toLowerCase()),!o||/^\/[A-Z]:$/i.test(o)||"/"!==l.charAt(0)&&!/[@:]/.test(o))l=o+l,o="",t.port=t.port||"",t.host=t.host||"",t.hostname=t.hostname||"",t.username=t.username||"",t.password=t.password||"";else{if(c=o.match(/^([^@]*)@(.+)$/)){if(c.user_passwords=c[1].match(/^([^:]+)(:(.*))?$/),!c.user_passwords)return;t.username=c.user_passwords[1],c.user_passwords[3]&&(t.password=c.user_passwords[3]),o=c[2]}else t.password="",t.username="";if(!(c=o.match(/^([^\/#?&\s:]+)(?::(\d{1,5}))?$/)))throw new Error("Invalid host: "+o);t.hostname=t.host=c[1],c[2]&&c[2]!=u[t.protocol.slice(0,-1).toLowerCase()]&&(t.port=String(parseInt(c[2],10)),t.host+=":"+t.port)}if(t.origin=t.protocol+"//"+t.host,l=l.replace(/\\/g,"/"),/^[A-Z]:/i.test(l)&&(l="/"+l),o||/^\/[A-Z]:/i.test(l)||(r||e.debug("Treat ["+l+"] as pathname!",1,"URI"),t.pathname&&(/^\//.test(l)?(c=!/^\/[A-Z]:/i.test(l)&&t.pathname.match(/^\/[A-Z]:/i))&&(l=c[0]+l):l=t.pathname.replace(/[^\\\/]+$/,"")+l,l=e.simplify_path(l))),l=l.replace(/^\/[a-z]:/g,function(e){return e.toUpperCase()}),e.is_WWW()&&e.debug("local file: ["+location.pathname+"]",9,"URI"),e.debug("parse path: ["+l+"]",9),l&&(c=l.match(/^(([^#?]*\/)?([^\/#?]*))?(\?([^#]*))?(#.*)?$/))){if(e.debug("pathname: ["+c+"]",9),t.pathname=c[1]||"",/%[\dA-F]{2}/i.test(t.pathname))try{t.pathname=decodeURI(t.pathname)}catch(e){}var f;n.test(t.pathname)&&(t.pathname=a(t.pathname,i.charset)),t.directory_path=/^\/[A-Z]:/i.test(t.pathname)?c[2].slice(1).replace(/\//g,"\\"):/^[A-Z]:(?:\/([^\/]|$)|$)/i.test(t.pathname)?c[2].replace(/\//g,"\\"):c[2],t.filename=c[3],Object.defineProperty[s]?(t.hash=c[6],t.search=c[4],f=Object.assign({URI:t},i)):(Object.defineProperty(t,O,{value:c[6]?c[6].slice(1):"",writable:!0}),f=i),c=c[5]}else{if(!o)throw new Error("Invalid URI: "+t);t.pathname&&(t.directory_path=t.pathname.replace(/[^\/]+$/,"")),c=""}i.as_URL?t.searchParams=new URLSearchParams(c,f):(f=Object.assign({URI:t},f),t.search_params=new v(c,f)),i.charset&&(t.charset=i.charset),e.debug("path: ["+t.path+"]",9),Object.defineProperty[s]&&(e.debug("Generate .href of URI by URI_toString()",10),t.toString()),e.debug("href: ["+t.href+"]",8)}function f(e){var t="search_params"in this?this.search_params.toString(e):this.searchParams.toString();return t?"?"+t:""}function g(){var e=this;return(e.protocol?e.protocol+"//":"")+(e.username||e.password?e.username+(e.password?":"+e.password:"")+"@":"")+e.host+e.pathname+e.search+e.hash}function h(e){return this.search=f.call(this,e),(this.hash=String(this.hash))&&!this.hash.startsWith("#")&&(this.hash="#"+this.hash),this.href=g.call(this)}function m(e){return e instanceof d}Object.defineProperties(d.prototype,{hash:{enumerable:!0,get:function(){return this[O]?"#"+this[O]:""},set:function(e){(e=String(e)).startsWith("#")&&(e=e.slice(1)),this[O]=e}},search:{enumerable:!0,get:f,set:function(e){var t=this.search_params||this.searchParams;A(t),URL[s]&&t&&Math.abs(0),(e=String(e)).startsWith("?")&&(e=e.slice(1)),e&&k.call(t,e)}},href:{enumerable:!0,get:Object.defineProperty[s]?h:g,set:function(e){d.call(this,e)}},toString:{value:Object.defineProperty[s]?h:g}}),_.URI=d,_.is_URI=m;var y="function"==typeof Symbol?Symbol("NO_EQUAL_SIGN"):{NO_EQUAL_SIGN:!0};function b(e,t){try{return o(e,t)}catch(e){}return e.replace(/%([\dA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))})}function v(t,n){if(!S(this))return S(t)?t:new v(t,n);n=e.setup_options(n);var r,i,a,o,s=this;"string"==typeof t?r=t.replace(/\+/g,"%20").split(/&/):Array.isArray(t)?r=t:"object"==typeof t?e.is_Map(t)?Array.from(t.entries()).forEach(function(e){s[e[0]]=e[1]}):t instanceof URLSearchParams?Array.from(t.keys()).unique().forEach(function(e){var n=t.getAll(e);s[e]=n.length>1?n:n[0]}):Object.assign(s,t):t&&e.debug({T:["輸入了非字串之參數：[%1]",t]},1,"Search_parameters");for(var l=n.charset,c=0,_=r&&r.length||0;c<_;c++)if(r[c])if(e.is_Object(r[c]))this.set_parameters(r[c],n);else{if("string"!=typeof r[c])return e.error("Must input {String} as search parameter!"),void console.error(r[c]);(o=r[c].match(/^([^=]+)=(.*)$/))?(i=o[1],a=b(o[2],l)):(i=r[c],a="default_value"in n?n.default_value:y);try{i=b(i,l)}catch(e){}if(!(x&&i in x)){if(e.is_debug(2))try{e.debug("["+(c+1)+"/"+_+"] "+(s[i]?'<span style="color:#888;">('+s[i].length+")</span> ["+i+"] += ["+a+"]":"["+i+"] = ["+a+"]"))}catch(e){}n.split_pattern&&"string"==typeof a&&(o=a.split(n.split_pattern)).length>1?i in s?Array.isArray(s[i])?Array.prototype.push.apply(s[i],o):(o.unshift(s[i]),s[i]=o):s[i]=o:w.call(s,i,a)}}n.Array_only&&Object.keys(s).forEach(function(e){x&&e in x||Array.isArray(s[i])||(s[i]=[s[i]])}),"object"==typeof n.URI&&Object.defineProperty(s,E,{value:n.URI})}function w(e,t,n){if(e in this){var r=this[e];Array.isArray(r)?r.push(t):this[e]=[r,t]}else this[e]=t}function k(t,n){return n=Object.assign({charset:this.charset||this[E]&&this[E].charset},n),e.is_Object(t)||(t=v(t,n)),Object.keys(t).forEach(function(e){if(!(x&&e in x)){var r=t[e];n.append?w.call(this,e,r,n):this[e]=r}},this),this}function A(e){return(e=this)?(Object.keys(e).forEach(function(t){x&&t in x||delete e[t]}),this):this}var x,O="function"==typeof Symbol?Symbol("hash"):"\0hash",E=Object.defineProperty[s]||"function"!=typeof Symbol?"\0URL":Symbol("URL");function S(e){return e instanceof v}function L(e,t){var n=Object.entries(new v(e,t));x&&(n=n.filter(function(e){return!(e[0]in x)}));try{if(Map.call(this,n),!this.forEach)throw 1;return}catch(e){}return n=new Map(n),Object.assign(n,L.prototype),n}Object.assign(v.prototype,{clean_parameters:A,set_parameters:k,toString:function(t){var n;"string"==typeof t?(n=t,t=Object.create(null)):(t=e.setup_options(t),n=t.charset),void 0===n&&(n=this.charset||this[E]&&this[E].charset);var r,a=[];function o(t){if(e.is_debug(9)&&"string"!=typeof t&&"number"!=typeof t&&t!==y)try{e.debug({T:["設定 %1 成非字串之參數：%2","object"==typeof JSON?JSON.stringify(r):String(r),"object"==typeof JSON?JSON.stringify(t):String(t)]},1,"parameters_toString.append")}catch(e){}try{a.push(t===y?r:r+"="+i(String(t),n))}catch(n){e.error(n),console.error(n),console.trace([r,t])}}for(var s=0,l=Object.keys(this);s<l.length;s++)if(r=l[s],!(x&&r in x)){var c=this[r];r=i(r,n),Array.isArray(c)?Object.getOwnPropertyDescriptor(c,"toString")?o(c.toString()):c.forEach(o):o(c)}return e.debug([{T:["共%1個參數：",a.length]},"<br />\n",a.map(function(t){return t.length>400?t.slice(0,e.is_debug(6)?2e3:400)+"...":t}).join("<br />\n")],9,"parameters_toString"),a=a.join("&"),this[E]&&(this[E].search=a),a}}),Object.defineProperty[s]&&(x=Object.create(null),"string"!=typeof E&&(E=String(E)),x[E]=!0),_.Search_parameters=v,_.is_Search_parameters=S,Object.assign(L.prototype=Object.create(Map.prototype),{constructor:L,clean:function(){var e=this;return Array.from(this.keys()).forEach(function(t){e.delete(t)}),this},set:function(e,t){e=String(e),t=String(t),Map.prototype.set.call(this,e,t)},append:function(e,t){if(e=String(e),t=String(t),this.has(e)){var n=Map.prototype.get.call(this,e);Array.isArray(n)?n.push(t):Map.prototype.set.call(this,e,[n,t])}else Map.prototype.set.call(this,e,t)},get:function(e){e=String(e);var t=Map.prototype.get.call(this,e);return Array.isArray(t)?t[0]:t},getAll:function(e){if(e=String(e),!this.has(e))return[];var t=Map.prototype.get.call(this,e);return Array.isArray(t)?t:[t]},toString:function(){var e=[];return this.forEach(function(t,n){n=encodeURIComponent(n)+"=",Array.isArray(t)?t.forEach(function(t){e.push(n+encodeURIComponent(String(t)))}):e.push(n+encodeURIComponent(String(t)))}),e.join("&")}});var T={"\n":"＼n","\r":"＼r","\t":"＼t"};function j(t,n){return t=t.trim(),n&&(t=t.replace(/([＼／｜？＊])/g,"＼$1")),t=(t=(t=t.replace(/[\0-\x1f]/g,function(e){if(e in T)return T[e];var t=e.charCodeAt(0).toString(16),n=t.length;return 1===n||3===n?t="0"+t:4<n&&n<8&&(t="000".slice(n-5)+t),"＼"+(2===t.length?"x":"u")+t})).replace(/[\\\/|?*]/g,function(e){return{"\\":"＼","/":"／","|":"｜","?":"？","*":"＊"}[e]})).replace(/"([^"'“”＂]+)"/g,"“$1”").replace(/"/g,"”").replace(/:/g,"：").replace(/</g,"＜").replace(/>/g,"＞"),e.platform.is_Windows()&&(t=t.replace(/(.)\.$/,"$1._")),t.length>255&&(e.warn("to_file_name: The file name will be cutted! ["+t.length+"] ["+t+"]"),t=t.slice(0,255)),t}_.to_file_name=j;var N=/\.([a-z\d\-]+)$/i,R=new Error,P=new Error,C=new Error;function I(t,n){if(!t)if(I.default_module)t=I.default_module;else{for(t in I.module)if(!I.test_module(t)){I.default_module=t;break}I.default_module||(t=void 0)}if(t in I.module&&e.is_Function(t=I.module[t](n)))return t;throw new Error("No module"+(t?" ["+t+"]":"")+" to use!")}return R.name="TARGET_FILE_EXISTS",P.name="NO_EXECUTABLE_FILE",C.name="NOT_YET_IMPLEMENTED",I.test_module=function(t){e.debug("test module: ["+t+"]",1,"URI_accessor.test_module");try{l().WshShell.Run(t,0,!0)}catch(t){return e.error(t),2==(65535&t.number)?P:t}e.debug("test module: ["+t+"]: OK.",1,"URI_accessor.test_module")},I.extract_file_name=function(e){var t=e.replace(/([^&])#.*/,"$1").match(/(([^\/\\]+)[\/\\]+)?([^\/\\]*)$/);if(t)return I.regularize_file_name(c(t[3]||t[1]),!1)},I.regularize_file_name=j,I.setting={window_style:function(){return e.is_debug()?1:0},temporary_file:function(e,t){var n=t.match(N),r=Math.ceil(1e9*Math.random());return"URI_accessor."+(n?"temp."+r+n[0]:r+".temp")},target_exist:[],user_agent:"Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.29 Safari/537.22"},I.target_exist={rename:function(e,t){for(var n=e+".old",r=n,i=0;t.FileExists(r);)r=n+ ++i;try{t.MoveFile(e,r)}catch(e){}return e},move:function(e,t,n){if(t||(t=e+".old"),n.FileExists(t))try{n.DeleteFile(t)}catch(e){}try{n.MoveFile(e,t)}catch(e){}return e}},I.module={curl:function(t){var n=new e.setting_pair(Object.create(null),I.setting,t),r=n("user_agent"),i=n("cookie")||n("cookie_file"),a=["curl --remote-time --insecure --compressed "+(e.is_debug(2)?"-v ":"")+(n("additional_options")?n("additional_options")+" ":"")+(i?'--cookie "'+i+'" ':"")+((i=n("cookie_file")||n("cookie"))?'--cookie-jar "'+i+'" ':"")+'--output "',"",(r?'" --user-agent "'+r:"")+'"'];return n("POST")&&(n("POST_index",a.length+1),a.push(' --data "',"",'"')),a[a.length-1]+=' --referer "',i='" "',(r=n("referer"))?(e.debug(["referer: ",{a:r,href:r}],2,"URI_accessor.module.curl"),a[a.length-1]+=r+i):(n("referer_index",a.length),a.push("",i)),a.push("",'"'),e.debug("command_array: "+a,2,"URI_accessor.module.curl"),I.default_getter(n,a,I.default_apply_command)},wget:function(t){var n=new e.setting_pair(Object.create(null),I.setting,t),r=n("user_agent"),i=["wget --timestamping --keep-session-cookies --no-check-certificate "+(e.is_debug(2)?"-d ":"")+(n("additional_options")?n("additional_options")+" ":"")+'--output-document="',"",(r?'" --user-agent="'+r:"")+'"'];return n("POST")&&(n("POST_index",i.length+1),i.push(' --post-data="',"",'"')),i[i.length-1]+=' --referer="',(r=n("referer"))?(e.debug(["referer: ",{a:r,href:r}],2,"URI_accessor.module.wget"),i[i.length-1]+=r+'" "'):(n("referer_index",i.length),i.push("",'" "')),i.push("",'"'),e.debug("command_array: "+i,2,"URI_accessor.module.wget"),I.default_getter(n,i,I.default_apply_command)}},I.default_apply_command=function(e,t,n,r,i){var a;t[1]=i||r,t[t.length-2]=n,(a=e("referer_index"))&&(t[a]=n),(a=e("POST_index"))&&(t[a]=e("POST")||"")},I.default_getter=function(t,n,r){var i=l();if(i){var a=i.WshShell,o=i.FSO,s=function(n){var r=t(n);r&&!/[\\\/]$/.test(r)&&t(n,r+e.env.path_separator)},c=function(e){"function"!=typeof t(e)&&t(e,void 0)},_=(t("window_style"),t("temporary_file"));e.debug("temporary_file: ["+typeof _+"]"+_,2,"URI_accessor.default_getter"),i=null;var u=function(i,l){var u,p,d,f=new Date;if(e.is_Object(l)&&(t(l),s("directory"),c("callback"),l=t("save_to")),l||(l=I.extract_file_name(i)),(d=t("directory"))&&(l=d+l),o.FileExists(l)&&"target_exist"in t()){if(Array.isArray(d=t("target_exist"))?d=I.target_exist.move(d[0]||l,d[1],o):"string"==typeof d&&"*"===d.charAt(0)&&(d=I.target_exist[d.slice(1)]),"function"==typeof d&&(d=d(l,o)),"string"!=typeof d||!d)return e.debug("Skip ["+i+"]: target file ["+l+"] exists and target_exist of setting refused rename or overwrite.",2,"URI_accessor.default_getter.getter"),u=R,(d=t("callback"))&&d(l,i,u),u;l=d}_&&!/^[\x20-\x7e]+$/.test(l)&&(p="function"==typeof _?_(i,l,o):_,e.debug("temporary file: ["+p+"]←["+_+"]",2,"URI_accessor.default_getter.getter")),e.debug('Downloading [<a href="'+i+'" target="_blank">'+i+"</a>]"+(p?"→["+p+"]":"")+"→["+l+"]..",1,"URI_accessor.default_getter.getter"),r(t,n,i,l,p),e.debug("Execute: ["+n.join("")+"]",2,"URI_accessor.default_getter.getter"),e.debug("WshShell: ["+typeof a+"]"+a,3,"URI_accessor.default_getter.getter");try{(u=a.Run(n.join(""),1,!0))&&(this.lastest_errorno=u,l="[error] "+l),p&&(o.FileExists(p)?o.MoveFile(p,l):e.warn("temporary file does not exists: ["+p+"]")),e.debug("["+i+']→[<a href="'+l+'" target="_blank">'+l+"</a>] @ "+Math.round((new Date-f)/1e3)+" sec "+(u?", <em>error code "+u+"</em>.":""))}catch(t){2==(65535&t.number)?u=P:(e.error(t),u=t)}return(d=t("callback"))&&d(l,i,u,t),u};return u.prototype=I.prototype,s("directory"),c("callback"),u}e.warn("No WScript objects got!")},e.set_method(I.prototype,{list:function(e,t,n){throw C},process:function(e){throw C}}),_.URI_accessor=I,_.get_URI=function e(t,n,r){if(e.getter&&!r)return e.getter(t,n);var i,a,o;for(i in I.module)if((o=(a=new I(i,r))(t,n))!==P){e.getter=a,e.setting=r;break}return o},(e.is_WWW(!0)||e.platform.nodejs)&&(e.set_method(e.env.global,{URL:function(e){return new d(e,null,{as_URL:!0})},URLSearchParams:L}),URLSearchParams.prototype.set_parameters=function(e,t){Array.isArray(e)&&(e=e.join("&")),e=new URLSearchParams(e);var n=this;return e.forEach(function(e,t){n.append(t,e)}),this}),_}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.namespace",require:"data.native.|application.net.|interact.DOM.|application.net.wiki.",no_extend:"*",code:function(e){var t=e.application.net.wiki,n=e.cache_gettext(function(e){n=e});t.general_parameters={format:"json",utf8:1},t.general_parameters_normalizer={origin:function(e){return!0===e&&(e="*"),e},format:"string",utf8:"boolean|number|string"};var r="session",i="host";var a=/\[\[(((?:&#(?:\d{1,8}|x[\da-fA-F]{1,8});|[^\[\]\|{}<>\n#�])+)(#(?:-{[^\[\]{}\n\|]+}-|[^\[\]{}\n\|]+)?)?|#[^\[\]{}\n\|]+)(?:(\||{{\s*!\s*}})([\s\S]+?))?\]\]/,o=new RegExp(a.source,"g"),s=/^(?:(?:https?|s?ftp|telnet|ssh):)?\/\/[^.:\\\/]+\.[^.:\\\/]+/i;function l(e){var t=te(e);if(t)return t.API_URL}function c(t,n,r){if(!Array.isArray(t)||2!==t.length||M.is_page_data(t[0]))return!1;var i=t[0];if(!0===n)return!i||"string"==typeof i;var a=t[1];if(!(a&&("string"==typeof a||Array.isArray(a)||M.is_page_data(a)||a>0&&"object"==typeof r&&r.is_id)))return e.debug("輸入的是問題頁面 title: "+a,2,"is_api_and_title"),!1;if(!i){if("object"!=typeof r)return!!r;e.debug("嘗試從 options[KEY_SESSION] 取得 API_URL。",2,"is_api_and_title"),(i=l(r))&&(t[0]=i)}if("string"!=typeof i)return!i;if("language"===n)return _.test(i);var o=s.test(i);return"URL"===n?o:o||_.test(i)}var _=new RegExp(/^[a-z][a-z\d\-]{0,14}$/.source,"i"),u=/^([a-z\d\_]{2,13})(wiki|wikibooks|wiktionary|wikiquote|wikisource|wikinews|wikiversity|wikivoyage|wikimedia)$/;function p(n,r){if(!n){var i=t.session_of_options(r);return i&&i.API_URL||t.API_URL}var a=(n=String(n)).toLowerCase();a in p.alias&&(n=p.alias[a]),e.debug("project: "+n,3,"api_URL"),_.test(n)&&(a in p.wikimedia?n+=".wikimedia":a in p.family?n=t.language+"."+n:/wik[it]/i.test(n)?n="www."+n:n+=".wikipedia"),/^[a-z][a-z\d\-]{0,14}\.[a-z]+$/i.test(n)&&(n+=".org");var o=new e.URI(n,/:\/\//.test(t.API_URL)&&t.API_URL);return o&&o.hostname?/\/api\.php$/.test(n)?n:(o.protocol||p.default_protocol||"https:")+"//"+o.hostname+"/w/api.php":(e.error("api_URL: Unknown project: ["+n+"]! Using default API URL."),t.API_URL)}function d(e){var t;return e&&(t=e.first_damain_name||e.language||d(e[i])),t}function f(n,r){var i=(r=e.setup_options(r)).is_page_title;if(t.is_page_data(n)&&(n=n.title,i=!0),!i&&n==Math.floor(n)){if(!r.get_name)return n;n=String(n)}var a=te(r),o=r.namespace_hash||a&&a.configurations.namespace_hash||f.hash;if(Array.isArray(n)&&(n=n.join("|")),"string"==typeof n){var s=[];if(n=n.replace(/[\s_]+/g," "),(i?[n.toLowerCase()]:n.toLowerCase().split(/(?:[,;|\u001F]|%7C|%1F)/)).forEach(function(t){i&&t.startsWith(":")&&(t=t.slice(1));var r=t.replace(/:.*$/,"").trim();r?i||isNaN(r)&&"*"!==r?r in o?s.push(o[r]):i?s.push(0):o===f.hash?e.debug("Invalid namespace: ["+t+"] @ namespace list "+n,1,"get_namespace"):s.push(!1===i&&"main"!==r?void 0:0):s.push(r):s.push(0)}),0===s.length)return;if(s=s.unique(),r.get_name){var l=r.name_of_NO||a&&a.configurations.name_of_NO||f.name_of_NO;s=s.map(function(e){return e in l?l[e]:e})}return 1===s.length?s[0]:s.join("|")}n&&e.warn("get_namespace: Invalid namespace: ["+n+"]")}function g(e,t){var n=[];for(var r in e)t[e[r]]=E(r).replace(/^Mediawiki/,"MediaWiki"),r&&n.push(r);return new RegExp("^("+n.join("|").replace(/ /g,"[ _]")+"):(.+)$","i")}function h(n,r){if("string"!=typeof(n=t.normalize_title(n,r)))return e.debug(n,5,"remove_page_title_namespace"),n;var i=te(r),a=i&&i.configurations.namespace_pattern||f.pattern,o=n.match(a);return e.debug("Test "+t.title_link_of(n)+", get ["+o+"] using pattern "+a,4,"remove_page_title_namespace"),o?(o?o[2]:n).trim():n}function m(t){return t?"number"==typeof t?t:"string"==typeof t?e.is_digits(t)?+t:t:t.namespace:0}function y(e,n){var r=m(n);return(t.is_page_data(e)?e.ns:f(e=t.normalize_title(e,n),Object.assign({is_page_title:!0},n)))===f(r,Object.assign({is_page_title:!1},n))}function b(e,n){var r=m(n);function i(e){return r+h(e,n)}return r=f(r,Object.assign({get_name:!0},n))+":",e=t.normalize_title(e,n),Array.isArray(e)?e.map(i):i(e)}function v(e,n){if("object"==typeof e&&(e=e.ns>=0?e.ns:e.title),"string"==typeof e){e=t.normalize_title(e,n).toLowerCase();var r=te(n),i=r&&r.configurations.name_of_NO||t.namespace.name_of_NO;if(r)e=t.namespace(e,n);else{if(e.includes(":")){var a=e.replace(/:.*$/,"");if(!(a in i))return A.test(e)||x.test(e);e=i[a]}e=+e}}if("number"==typeof e)return e>0&&e%2==1}function w(n,r){var i,a=te(r=Object.assign({is_page_title:!0},r));if(t.is_page_data(n))i=n.ns,n=t.title_of(n);else{if(n=t.normalize_title(n,r),!a){if(/^(Special|特殊|特別|Media|媒體|媒体|メディア|Topic|話題|话题):/i.test(n))return;n=n.replace(/^(?:模組|模塊|模块):/i,"Module:")}i=t.namespace(n,r)}if(n&&"string"==typeof n&&!(i<0)){if(v(i,r))return e.debug("Is already talk page: "+n,3,"to_talk_page"),n;var o=a&&a.configurations.name_of_NO||t.namespace.name_of_NO;if(i>=0){if(!(i=o[i+1]))return;return n=i+":"+(n=t.remove_namespace(n,r)),o===t.namespace.name_of_NO&&(n=t.normalize_title(n,r)),n}var s=n.match(/^([a-z_ ]+):(.+)$/i);return!s||/^[a-z _]+$/i.test(i=s[1])&&isNaN(f(i,ne(a,r)))?"Talk:"+n:i+" talk:"+s[2]}}p.wikimedia={meta:!0,commons:!0,species:!0,incubator:!0,phabricator:!0,wikitech:!0,quarry:!0,releases:!0},p.alias={w:"wikipedia",n:"wikinews",b:"wikibooks",q:"wikiquote",s:"wikisource",v:"wikiversity",voy:"wikivoyage",wikt:"wiktionary",m:"meta",metawikipedia:"meta",c:"commons",wikispecies:"species",phab:"phabricator",download:"releases",d:"wikidata",mw:"mediawiki",wmf:"wikimedia",betawikiversity:"beta.wikiversity"},p.family="wikipedia|wikibooks|wikinews|wikiquote|wikisource|wikiversity|wikivoyage|wiktionary".split("|").to_hash(),p.shortcut_of_project=Object.create(null),Object.keys(p.alias).forEach(function(e){p.shortcut_of_project[p.alias[e]]=e}),f.hash={media:-2,special:-1,main:0,"":0,talk:1,user:2,"user talk":3,project:4,wp:4,wb:4,wv:4,ws:4,wn:4,wq:4,wt:4,wikidata:4,wikinews:4,wikipedia:4,"project talk":5,"wikipedia talk":5,file:6,"file talk":7,mediawiki:8,"mediawiki talk":9,template:10,"template talk":11,help:12,"help talk":13,category:14,"category talk":15,portal:100,"portal talk":101,book:108,"book talk":109,draft:118,"draft talk":119,"education program":446,"education program talk":447,timedtext:710,"timedtext talk":711,module:828,"module talk":829,gadget:2300,"gadget talk":2301,"gadget definition":2302,"gadget definition talk":2303,topic:2600},f.name_of_NO=[],f.pattern=g(f.hash,f.name_of_NO),f.name_of=function(e,n){if(!e)return"";var r=te(n);if(e===r&&r.configurations.namespace_hash?r.configurations.namespace_hash.wikipedia:f.hash.wikipedia)return r&&r.family?t.upper_case_initial(function(e){return t.is_wiki_API(e)&&"wikimedia"===e.family&&e.language}(r)||r.family):"Wikipedia";var i=r&&r.configurations.name_of_NO||t.namespace.name_of_NO;return t.upper_case_initial(i[e])};var k,A=/^(?:Talk|討論|讨论|ノート|토론):/i,x=/^([a-z _]+)(?:[ _]talk|討論|讨论|‐ノート|토론):/i;function O(n,r){var i;if(r=Object.assign({is_page_title:!0},r),t.is_page_data(n)?(i=n.ns,n=t.title_of(n)):(n=t.normalize_title(n,r),i=t.namespace(n,r)),!n||"string"!=typeof n)return n;if(i<=0||i%2==0)return e.debug("Is already NOT talk page: "+n,3,"to_talk_page"),n;var a=te(r),o=a&&a.configurations.name_of_NO||t.namespace.name_of_NO;return i>0?(i=o[i-1],n=t.remove_namespace(n,r),i&&(n=i+":"+n,o===t.namespace.name_of_NO&&(n=t.normalize_title(n,r))),n):A.test(n)?n.replace(A,""):x.test(n)?n.replace(x,"$1:"):n}function E(e){return(e=String(e).trim()).charAt(0).toUpperCase()+e.slice(1)}try{k=new RegExp("(?<!{{)#.*")}catch(e){}function S(n,r){if(Array.isArray(n))return n.map(function(e){return S(e,r)});if(t.is_page_data(n)&&(n=n.title),!n||"string"!=typeof n)return n;r=!0===r?{use_underline:!0}:e.setup_options(r),n=n.replace(/<!--[\s\S]*-->/g,""),n=e.HTML_to_Unicode(n,{predefined:!0,entity:!0,numeric:!0,is_URI:!0}),r.keep_anchor||(n=k?n.replace(k,""):n.replace(/([^#]*)#.*/,function(e,t){return/{{$/.test(t)?e:t})),n=n.replace(/[\u200E\u200F]/g,"").trimEnd().replace(/^[:\s_]+/,"").replace(/　/g," ").replace(/([ _]){2,}/g,"$1"),/^int:.+/i.test(n)&&(n="MediaWiki:"+n.slice(4).trimStart());var i,a=r.use_underline;n=(n=a?n.replace(/ /g,"_"):n.replace(/_/g," ")).split(":");var o=te(r),s=o&&o.configurations.interwiki_pattern||/^[a-z][a-z_\-]+$/i,l=!o||!o.configurations.namespace_hash;return n.some(function(e,t){if(e=a?e.replace(/^[\s_]+/,""):e.trimStart(),t===n.length-1)return r.no_upper_case_initial?n[t]=e:n[t]=E(e),!0;if(l&&!(a?/^[a-z][a-z\d\-_]{0,14}$/i:/^[a-z][a-z\d\- ]{0,14}$/i).test(e.trimEnd()))return o&&s.test(e)||r.no_upper_case_initial?n[t]=e:n[t]=E(e),!0;var c=isNaN(e)&&f(e,Object.assign({get_name:!0},r));return c?(n[t]=a?c.replace(/ /g,"_"):c.replace(/_/g," "),!1):i?(o&&s.test(e)?n[t]=e.toLowerCase():n[t]=E(e),!0):(e=a?e.replace(/[\s_]+$/,""):e.trimEnd(),s.test(e)?(e=e.toLowerCase(),i=!0,a&&(e=e.replace(/_/g,"-")),void(n[t]=e)):(n[t]=E(e),!0))}),n.join(":")}function L(n,r,i){if(t.is_page_data(n)&&(n=n.title),!n)return n;if("string"==typeof n&&n.includes("|")&&(n=n.split("|")),Array.isArray(n)){var a=[];return n.forEach(function(e){(e=L(e,!1,i))&&a.push(e)}),(r?"(":"(?:")+a.join("|")+")"}return i&&(n=n.replace(/^[^:]+:\s*/,"")),n=e.ignore_first_char_case(e.to_RegExp_pattern(String(n).trim())).replace(/[ _]/g,"[ _]"),r&&(n="("+n+")"),n}function T(e,t){return(e=L(e,!0))&&new RegExp(T.source.replace(/name/,e),t||"g")}var j="File|Fichier|檔案|档案|文件|ファイル|Image|圖像|图像|画像|Media|媒[體体](?:文件)?";T.source=/\[\[ *(?:(:) *)?(?:Tag) *: *name *(\||\]\])/.source.replace("Tag",e.ignore_case_pattern(j)),j=new RegExp("^ *(: *)?(?:"+j+") *: *"+/((?:&#(?:\d{1,8}|x[\da-fA-F]{1,8});|[^\[\]\|{}<>\n#�])+)/.source,"i");var N=/^ *(?:Category|分類|分类|カテゴリ|분류) *: *([^\[\]\|{}<>\n�]+)/i;function R(e){return this.join(e||"|")}function P(e){var t=this.join(e||"|"),n="}}";return t.includes("\n")&&(n="\n"+n),"{{"+t+n}function C(e){return Array.isArray(e)?e.join("\n"):e}function I(t,n){var r,i=!0;n&&(r="string"==typeof n?n:n.name);var a,o=Array.isArray(t);return r||n&&n.is_slice||!o||!t[0]||(r=t[0],delete t[0]),r?(a=[r]).toString=P:(a=[]).toString=R,Object.keys(t).forEach(function(n){var s=t[n],l=i&&(i=e.is_digits(n));if(void 0===s){if(!Array.isArray(t))return;s=""}else s=C(s);o&&r&&!t[0]?a[n]=s:(l||(s=n+"="+s),a.push(s))}),n&&n.to_Array?a:a.toString(n&&n.separator)}function U(n){if(Array.isArray(n))return t.is_page_data(n[0])?n.map(U):(c(n),U(n[1]));if(e.is_Object(n)){var r=n.title;return r||((r=(n.header||n).revision)&&(r=r.articleTitle)?r:void 0)}return"string"==typeof n&&(n=n.replace(/^[\s:]+/,"")),n}function D(e,t){if(!e)return t?e:"";if(e.slots)for(var n in e=e.slots){e=e[n];break}return t?e["*"]:e["*"]||""}function M(n,r){if(!n)return n;var i=(n[(r="string"==typeof r?{flow_view:r}:"number"==typeof r?{revision_index:r}:e.setup_options(r)).flow_view]||n.header||n).revision;if(i&&(i=i.content))return i.content;if(n.expandtemplates&&"wikitext"in n.expandtemplates){if("expandtemplates"===r.flow_view)return String(n.expandtemplates.wikitext||"");e.debug(t.title_link_of(n)+": The page has expandtemplates.wikitext but do not used.",1,"get_page_content")}return t.is_page_data(n)?"missing"in n||"invalid"in n?r.allow_non_String?void 0:"":(i=e.is_Object(n)&&n.revisions,Array.isArray(i)&&i[0]?i.length>1&&"number"!=typeof r.revision_index?i.map(function(e){return D(e)}):(r.revision_index<0&&(r.revision_index+=i.length),D(i=i[0|r.revision_index])):""):"string"==typeof(i=D(n,!0))?i:String(n||"")}I.join_array=C,M.is_page_data=function(t){return e.is_Object(t)&&(t.title||"pageid"in t)},M.pageid=function(e){return M.is_page_data(e)&&e.pageid},M.revision=function(t,n){return e.is_Object(t)&&t.revisions&&t.revisions[n||0]},M.page_exists=function(e){return M.is_page_data(e)&&!("missing"in e)&&!("invalid"in e)},M.had_fetch_content=function(e,t){return M.is_page_data(e)&&("missing"in e||"invalid"in e||"string"==typeof D(M.revision(e),!0))},M.edit_time=function(t,n,r){var i=e.is_Object(t)&&t.revisions;if(i&&(i=i[n||0]||i[0])&&(i=i.timestamp))return r?Date.parse(i):new Date(i)},M.has_content=function(e){return!!D(M.revision(e))};var F="function"==typeof Symbol?Symbol("correspond page"):"page";function z(n,r){var i=n.configurations;if(n.latest_site_configurations=r,i===t.prototype.configurations&&(n.configurations=i=Object.assign(Object.create(null),t.prototype.configurations)),r){var a=r.general;n.has_languagevariants=a&&!!a.variants,a&&("mainpage|sitename|linktrail|legaltitlechars|invalidusernamechars|case|lang|maxarticlesize|timezone|timeoffset|maxuploadsize".split("|").forEach(function(e){i[e]=a[e]}),i.magiclinks=Object.keys(a.magiclinks),i.lang_fallback=a.fallback.map(function(e){return e.code}));var o=r.interwikimap;o&&(i.interwiki_pattern=new RegExp("^("+o.map(function(e){return e.prefix}).join("|")+")(?::(.*))?$","i"));var s=r.languagevariants;if(s&&s.zh)for(var l in delete s.zh.zh,delete s.zh["zh-hans"],delete s.zh["zh-hant"],i.lang_fallbacks=Object.create(null),s.zh)i.lang_fallbacks[l]=s.zh[l].fallbacks;var c=Object.create(null);i.magic_words_hash=c,r.functionhooks&&r.functionhooks.forEach(function(e){c[e.toUpperCase()]=!0}),r.variables&&r.variables.forEach(function(e){"string"==typeof e&&(c[e.toUpperCase()]=!1)}),r.magicwords&&r.magicwords.forEach(function(e){var t,n=e.name.toUpperCase();n in c?t=c[n]:c[n]=t=n,e.aliases.forEach(function(e){(e=e.toUpperCase())in c||/[#:]|\$\d/.test(e)||(c[e]=t)})});var _=[];r.extensiontags&&r.extensiontags.forEach(function(e){e=e.replace(/^</,"").replace(/>$/,""),_.push(e.toLowerCase())}),i.extensiontag_hash=_.to_hash(),i.PATTERN_extensiontags=t.get_PATTERN_full_tag(_),i.PATTERN_non_extensiontags=t.get_PATTERN_full_tag(t.markup_tags.filter(function(e){return!_.includes(e)}));var u=r.namespaces,p=r.namespacealiases;if(u&&p){var d=i.namespace_hash=Object.create(null);for(var f in i.name_of_NO=Object.create(null),u){var h=u[f];f=+f;var m=h["*"];"string"==typeof m&&(i.name_of_NO[f]=m,d[m.toLowerCase()]=f),h.canonical&&"string"==typeof h.canonical&&h.canonical!==m&&(d[h.canonical.toLowerCase()]=h.id)}p.forEach(function(e){d[e["*"].toLowerCase()]=e.id}),i.namespace_pattern=g(d,[])}}else e.error("adapt_site_configurations: No configurations got!")}t.siteinfo=function(e,n){var r={action:"query",meta:"siteinfo"};if(!t.need_get_API_parameters(r,e,t[r.meta],arguments)){e=Object.assign({siprop:"general|namespaces|namespacealiases|specialpagealiases|magicwords|functionhooks|variables|interwikimap|languagevariants|restrictions|uploaddialog|skins|rightsinfo|extensiontags|protocols|fileextensions"},e);var i=t.session_of_options(e),a=i&&i.get_storage(r.meta);if(a)return z(i,a),void n(a);r=t.extract_parameters(e,r,!0),t.query(r,function(t,a){if(a=a||t&&t.error)n(t,a);else{var o=t.query;o.siprop=e.siprop,i&&(i.set_storage(r.meta,o),z(i,o)),n(o)}},null,i)}},t.prototype.configurations={},t.prototype.adapt_task_configurations=function(r,i,a){a=e.setup_options(a);var o=this,s=o.task_configuration||(o.task_configuration=Object.create(null));if("function"==typeof i?a.once||(o.task_configuration.configuration_adapter=i):i=o.task_configuration.configuration_adapter,r||(r=s.configuration_page_title)){if(e.debug("Try to get configurations from "+r,1,"adapt_task_configurations"),!a.once&&"min_interval"in a&&(a.min_interval>0?s.min_interval=a.min_interval:a.min_interval||delete s.min_interval),s.last_update)return s.min_interval>Date.now()-s.last_update?void(i&&i()):t.is_page_data(r)?void c(r):void o.page(r,function(e){(s.min_interval||0)>Date.parse(e.touched)-s.last_update?i&&i():l()},{prop:"info",redirects:1});l()}else i&&i();function l(){o.page(r,c,{redirects:1})}function c(r){t.content_of.page_exists(r)?e.info("adapt_task_configurations: Get configurations from "+t.title_link_of(r)):e.debug("No configuration page: "+t.title_link_of(r),1,"adapt_task_configurations"),a.once||Object.assign(s,{configuration_page_title:r.title,last_update:Date.now()});var l=t.parse.configuration(r);if(o.latest_task_configuration=l,e.is_Object(l.L10n)){var c=n.to_standard(o.language||t.language);n.set_text(l.L10n,c),e.info("adapt_task_configurations: Load "+Object.keys(l.L10n).length+" "+c+" messages for "+t.site_name(o)+".")}if("function"==typeof i){var _=o.actions.splice(0,o.actions.length);i.call(o,l),o.actions.append(_)}}},t.prototype.delay_time_to_adapt_task_configurations=3e5;var W={"be-x-old":"be-tarask",cmn:"zh",lzh:"zh-classical",nan:"zh-min-nan",nb:"no",nob:"no",rup:"roa-rup",sgs:"bat-smg",vro:"fiu-vro",yue:"zh-yue",bih:"bh",jp:"ja"},q="nds-nl|map-bms".split("|").to_hash();Object.entries(W).forEach(function(e){e[0].includes("-")&&(q[e[0]]=!0),e[1].includes("-")&&(q[e[1]]=!0)});var H="Continue key";function $(r){return t.is_wiki_API(r)&&(r=r.language),"string"==typeof r&&_.test(r)?((r=r.toLowerCase())in W&&(r=W[r]),t.language=r,t.API_URL=n.guess_language&&n.guess_language()||e.is_WWW()&&(navigator.userLanguage||navigator.language)||t.language,t.API_URL in q||(t.API_URL=t.API_URL.toLowerCase().replace(/-.+$/,""),t.API_URL in W&&(t.API_URL=W[t.API_URL])),t.API_URL=p(t.API_URL),e.debug("wiki_API.API_URL = "+t.API_URL,3,"set_default_language"),t.SQL&&t.SQL.config&&t.SQL.config.set_language(t.language),t.prototype.continue_key=n(H),t.language):(r&&e.warn("set_default_language: Invalid language: ["+r+']. e.g., "en".'),t.language)}t.prototype.continue_key=H,$(t.mw_web_session&&mediaWiki.config.get("wgContentLanguage")||"en");var B="ar[cz]?|he|fa|bcc|bqi|ckb|dv|glk|kk|lrc|mzn|pnb|ps|sd|u[gr]|yi|tg-Arab",Y=new RegExp("^(?:"+B+")$");function G(e,n,r){r=Object.assign({namespace:"Template"},r);var i=t.session_of_options(r)||t.is_wiki_API(this)&&this;return"transclusion"===n.type&&(n=n.name),i?(e=i.redirect_target_of(e,r),n=i.redirect_target_of(n,r)):(e=t.normalize_title(e,r),n=t.normalize_title(n,r)),Array.isArray(e)?e.includes(n):Array.isArray(n)?n.includes(e):e===n}t.has_storage="object"==typeof localStorage&&e.is_type(localStorage,"Storage");var K="storage date";var J="+",X="API parameters";function V(n){if(Array.isArray(n)&&(n=c(n,!0)?n[1]:n.join(J)),"string"==typeof n)return n;if(n.path)return n.path;if(e.is_Object(n)){var r=n.action;if(r)return"query"===r&&(t.page.query_modules||["prop","meta","list"]).some(function(e){if(n[e])return r+=J+n[e],!0}),r}}var Z="function"==typeof Symbol?Symbol("API parameters callback"):"\0API parameters callback";t.need_get_API_parameters=function(n,r,i,a){var o=t.session_of_options(r);if(o){if(n=V(n),t.has_storage&&!o.API_parameters[K]&&(o.API_parameters=o.get_storage(X)||o.API_parameters),o.API_parameters[n])return e.debug("Needless to get "+n,3,"need_get_API_parameters"),!1;var s=o.API_parameters[Z];return s||(s=o.API_parameters[Z]=Object.create(null)),i&&(Array.isArray(i)&&void 0===a||(i=[i,null,a]),s[n]?s[n].push(i):(s[n]=[i],e.debug("Will execute caller later after get API parameters of ["+n+"]...",1,"need_get_API_parameters"),ee(n,ne(o),function(e,t,r){if(t)throw t;!function(e,t){var n=e.API_parameters[Z];n[t].forEach(function(e){e[0].apply(e[1],e[2])}),delete n[t]}(o,n)}))),!0}e.error("need_get_API_parameters: Must set session to check the necessity.")};var Q="\0API parameters prefix";function ee(n,r,i){n=V(n),t.query([,{action:"paraminfo",modules:n}],function(a,o){var s=!o&&a&&a.paraminfo&&Array.isArray(a.paraminfo.modules)&&a.paraminfo.modules[0];if(s){var l=t.session_of_options(r);if(l){s.prefix;var c=l.API_parameters[s.path]||(l.API_parameters[s.path]=Object.create(null));"prefix"in s&&(c[Q]=s.prefix),s.parameters.forEach(function(e){var t=e.name;c[t]?Object.assign(c[t],e):c[t]=e}),l.set_storage(X,l.API_parameters),e.info(["get_API_parameters: ",{T:["Cache information about the API modules of %1: module path=%2",t.site_name(l),n]}])}i&&i(s,null,a)}else i(void 0,o||new Error("Unknown query result"))},null,r)}function te(e){return e&&(e[r]||t.is_wiki_API(e)&&e)}function ne(t,n){return n=e.setup_options(n),t&&(n[r]=t),n}return t.get_API_parameters=ee,t.extract_parameters=function(n,i,a){c(i)&&(i=i[1]);var o=t.session_of_options(i)||t.session_of_options(n),s=V(i)||V(n);a||(i=e.Search_parameters(i));var l,_=a?i:new e.Search_parameters;o&&s?(l=o.API_parameters[s])||e.error("No API parameters for: "+s):(e.warn("No session or no path settled!"),console.trace([o,s,n]));var u=i.parameters||Object.keys(n),p=l&&l[Q];return u.forEach(function(r){if(r!==Q){var i=r;if(l){if(p)if(r.startsWith(p))i=r.slice(p.length);else if(p+r in _)return;if(!(i in l))return}var a=n[r];if(t.is_valid_parameters_value(a)){if(r=p?p+i:i,"object"==typeof a&&!Array.isArray(a))try{e.warn("extract_parameters: Invalid value of key: ["+r+"]? "+a)}catch(t){e.warn("extract_parameters: Invalid value of key: ["+r+"]?")}var o=l&&l[i];if(o)switch("deprecated"in o&&e.warn("extract_parameters: Using deprecated parameter: "+s+":"+i),o.type){case"string":case"boolean":break;case"limit":if("max"===a)break;case"integer":e.is_digits(a)||e.warn("extract_parameters: Should be a integer: "+i+"="+a);break;case"timestamp":case"user":case"expiry":break;default:Array.isArray(o.type)&&("multi"in o||o.type.includes(a)||e.warn("extract_parameters: Not in "+JSON.stringify(o.type)+": "+i+"="+a))}_[r]=a}}}),delete _[""],delete _[r],_},Object.assign(t.prototype,{redirect_target_of:function(e,t){return e?(t&&t.namespace?e=this.to_namespace(e,t.namespace):Array.isArray(e)&&"transclusion"===e.type&&(e=this.to_namespace(e.name,"Template")),e=this.normalize_title(e),Array.isArray(e)?e.map(function(e){return this.redirect_target_of(e,t)},this):this.redirects_data[e]||e):e},aliases_of_page:function(t,n){if(t=this.normalize_title(t),n=e.setup_options(n),Array.isArray(t)){var r=[];return t.forEach(function(e){r.append(this.aliases_of_page(e,n))},this),r}return this.redirects_data[t]?Object.keys(this.redirects_data).filter(function(e){return(!n.alias_only||e!==t)&&this.redirects_data[e]===t},this):[t]},is_template:G,get_storage:t.has_storage?function(e){if(this.localStorage_prefix){var t=localStorage.getItem(this.localStorage_prefix+e);try{(t=JSON.parse(t))[K]&&(t[K]=new Date(t[K]))}catch(e){return}return Date.now()-t[K]<this.storage_life?t:void 0}}:e.null_function,set_storage:t.has_storage?function(e,t){this.localStorage_prefix&&(null==t?localStorage.removeItem(this.localStorage_prefix+e):(t[K]=new Date,t=JSON.stringify(t),localStorage.setItem(this.localStorage_prefix+e,t)))}:e.null_function,storage_life:e.to_millisecond("1w"),namespace:function(e,t){return f(e,ne(this,t))},remove_namespace:function(e,t){return h(e,ne(this,t))},is_namespace:function(e,n){return"object"!=typeof n?n={namespace:n||0}:t.is_page_data(n)&&(n={namespace:n.ns}),y(e,ne(this,n))},to_namespace:function(e,t){return"object"!=typeof t&&(t={namespace:t||0}),b(e,ne(this,t))},is_talk_namespace:function(e,t){return v(e,ne(this,t))},to_talk_page:function(e,t){return w(e,ne(this,t))},talk_page_to_main:function(e,t){return O(e,ne(this,t))},normalize_title:function(e,t){return S(e,ne(this,t))},URL_of_page:function(e){return e=this.normalize_title(e,{use_underline:!0}),this.latest_site_configurations.general.server+this.latest_site_configurations.general.articlepath.replace("$1",e)},toString:function(e){return M(this.last_page)||""}}),e.set_method(t,{KEY_SESSION:r,KEY_HOST_SESSION:i,KEY_CORRESPOND_PAGE:F,session_of_options:te,add_session_to_options:ne,setup_API_URL:function(n,r){if(e.debug("API_URL: "+r+", default language: "+t.language,3,"setup_API_URL"),!0===r&&(r=n.API_URL||t.API_URL),r&&"string"==typeof r)if(n.API_URL=p(r),delete n.last_page,delete n[i],delete n.token.csrftoken,delete n.token.lgtoken,e.platform.nodejs){var a=e.application.net.Ajax.setup_node_net(n.API_URL);n.get_URL_options={agent:a}}else n.get_URL_options={};var o=t.site_name(n,{get_all_properties:!0});o&&o.family in p.family&&(n.family=o.family)},setup_API_language:function(n,r){if(r&&"string"==typeof r){r=r.toLowerCase();var i=t.site_name(r,ne(n,{get_all_properties:!0}));if(i&&i.language&&"multilingual"!==i.language&&(r=i.language),_.test(r)&&!/^test|wik[it]/i.test(r)&&!(n.configurations.namespace_pattern||f.pattern).test(r)){"simple"===r?(n.first_damain_name=r,r="en"):r in t.language_code_to_site_alias&&(r=t.language_code_to_site_alias[r]),n.language=r,"multilingual"===(i=t.site_name(n,{get_all_properties:!0})).language&&r===i.project&&(n.language="en"),i=i.site;var a=t.query.edit_time_interval;n.edit_time_interval>=0||!(i in a||r in a)||(n.edit_time_interval=a[i]||a[r],e.debug("Use interval "+n.edit_time_interval+" for language "+r,1,"setup_API_language"))}}},API_URL_of_options:l,is_api_and_title:c,normalize_title_parameter:function(n,r){var i=(r=e.setup_options(r)).multi&&Array.isArray(n)&&2===n.length&&!/^https?:\/\/.+\.php$/.test(n[0])||!c(n,!0)?[,n]:Array.isArray(n)?n.clone():[];if(r.slice_size>=1)if(Array.isArray(i[1])){if(i[1].length>r.slice_size){var a=i[1].splice(r.slice_size,i[1].length);if(Array.isArray(r.titles_left))Array.prototype.unshift.apply(r.titles_left,a);else{if(r.titles_left)throw new Error("normalize_title_parameter: Invalid usage: options.titles_left is not {Array}!");r.titles_left=a,e.warn("normalize_title_parameter: 將 title list 切分成 slice: "+i[1].length+" + "+r.titles_left.length+"。")}}}else!i[1]&&Array.isArray(r.titles_left)&&(i[1]=r.titles_left.splice(0,r.slice_size),e.log("normalize_title_parameter: 接續取得 title list slice: "+i[1].length+" + "+r.titles_left.length+"。"));if(Array.isArray(r.titles_left)&&0===r.titles_left.length&&delete r.titles_left,c(i,!1,r))return i[1]=t.query.title_param(i[1],!0,r.is_id),r.redirects&&(i[1].redirects=1),i;e.warn(["normalize_title_parameter: ",{T:["Invalid title: %1",t.title_link_of(n)||"(title: "+JSON.stringify(n)+")"]}])},set_parameters:function(t,n){n.parameters&&("string"!=typeof t[1]||/^[a-z]+=/.test(t[1])||(e.warn('set_parameters: Did not set action! Will auto add "action=".'),console.trace(t),t[1]="action="+t[1]),t[1]=e.Search_parameters(t[1]),t[1].set_parameters(n.parameters))},is_wikidata_site_nomenclature:function(t){return e.debug("Test "+t,3,"is_wikidata_site_nomenclature"),/^[a-z_\d]{2,20}?(?:wiki(?:[a-z]{4,7})?|wiktionary)$/.test(t)},language_code_to_site_alias:W,PATTERN_URL_prefix:s,PATTERN_wikilink:a,PATTERN_wikilink_global:o,PATTERN_file_prefix:j,PATTERN_URL_WITH_PROTOCOL_GLOBAL:/(^|[^a-z\d_])((https?|s?ftp|telnet|ssh):\/\/([^\0\s\|<>\[\]{}\/][^\0\s\|<>\[\]{}]*))/gi,PATTERN_category_prefix:N,PATTERN_PROJECT_CODE_i:_}),Object.assign(t,{hostname_of_API_URL:function(t){if(/\/api\.php$/.test(t)){var n=new e.URI(t);return n&&n.hostname}},api_URL:p,set_language:$,site_name:function(n,r){var a,o,s,l;n&&"object"==typeof n&&(a=t.session_of_options(n),n=d(n)||d(a)),"string"==typeof r?(o=r,r=null):(s=t.session_of_options(r),o=r&&r.family);var c,_="string"==typeof n&&!n.includes("://")&&n.match(/^[:\s]*(\w+):(?:(\w+):)?(.*)/);_&&(_.family=p.alias[_[1]],l=_[3],n=_.family?_[2]?_[2]:_[3]:(_.family=p.alias[_[2]],_[1]),o=o||_.family),!(_=t.namespace(n,r))||isNaN(_)||_===t.namespace.hash.project&&"project"!==n.trim().toLowerCase()||(n=null),n=String(n||d(s)||t.language).trim().toLowerCase().replace(/[_ ]/g,"-");var f,g,h=s&&s.configurations&&s.configurations.interwiki_pattern,m=e.is_RegExp(h)&&s.latest_site_configurations&&s.latest_site_configurations.interwikimap;if(Array.isArray(m)?(_=n.match(h))&&m.some(function(e){if(e.prefix===_[1])return _=e.url.replace(/\/wiki\/\$1/,"/w/api.php").replace(/\$1/,"")})&&(n=_):n in W?n=W[n]:o||!a||a.family||a[i]||!a.API_URL||(n=a.API_URL),(_=n.replace(/-/g,"_").match(u))?(n=_[1],o=o||_[2]):(_=n.match(/^[a-z\d\-]{2,13}$/))?"wikidata"===(n=_[0])&&(o=n,n="www"):(_=t.hostname_of_API_URL(n))?(c=n,e.debug(n,4,"language_to_site_name"),e.is_IP(_)?_=[_.replace(/\./g,"_")]:2===(_=_.split(".")).length&&_.unshift(""),o=o||_[1],(n=!/^test|wik[it]/i.test(_[0])&&_[0])||(g=!0,n=t.language)):(_=n.match(/^([a-z\d\-_]+)\.([a-z\d\-_]+)/))?(n=_[1],o=o||_[2]):e.error("language_to_site_name: Invalid language: "+n),(o=o||a&&a.family||s&&s.family)&&"wiki"!==o||(o="wikipedia"),c=c||a&&a.API_URL||p(n+"."+o),"wikidata"===o?f=o+"wiki":"wikimedia"===o&&"en"===n||(f=c.match(/\/\/([\w]+)\./))&&/^test/i.test(f=f[1])?(y=f,f+="wiki"):(f=g?"":n.toLowerCase().replace(/-/g,"_"),f+="wikipedia"===o||n in t.api_URL.wikimedia?"wiki":o),e.debug(f,3,"language_to_site_name"),(y=y||"www"===n?o:n in t.api_URL.wikimedia?n:null)?n="multilingual":y=g?o:n+"."+o,r&&r.get_all_properties){var y,b=t.api_URL.shortcut_of_project[o];f={language:n,is_guessing_language:g,family:o,family_prefix:b,interwiki_prefix:g?void 0:(b||o)+":"+n+":",project:y,site:f,API_URL:c},a&&a.configurations&&a.configurations.sitename&&(f.sitename=a.configurations.sitename),a&&a.site_name&&(f.site_name=a.site_name),(y=a&&a.latest_site_configurations&&a.latest_site_configurations.general.wikiid)&&(f.wikiid=y),l&&(f.page_name=l)}return a&&a.site_name||f},get_first_domain_name_of_session:d,LTR_SCRIPTS:B,PATTERN_LTR:Y,PATTERN_category:/\[\[ *(?:Category|分類|分类|カテゴリ|분류) *: *([^\[\]\|{}<>\n�]+)(?:\s*\|\s*([^\[\]\|�]*))?\]\](\s*\n?)/gi,get_PATTERN_full_tag:function(e){return Array.isArray(e)&&(e=e.join("|")),new RegExp("<("+e+")(\\s(?:[^<>]*[^<>/])?)?>([\\s\\S]*?)<\\/(\\1(?:\\s[^<>]*)?)>","ig")},upper_case_initial:E,is_namespace:y,to_namespace:b,remove_namespace:h,is_talk_namespace:v,to_talk_page:w,talk_page_to_main:O,file_pattern:T,plain_text:function(e){return e&&(e=e.trim())?e=e.replace(/<\!--[\s\S]*?-->/g,"").replace(/\s*<br(?:[^\w<>][^<>]*)?>/gi,"\n").replace(/<\/?[a-z][^>]*>/g,"").replace(/{{=\s*}}/gi,"=").replace(/{{[a-z\s]+}}/gi,"").replace(o,function(e,t,n,r,i){return i||t}).replace(/[(（][英中日德法西義韓諺俄独原][語语國国]?文?[名字]?[）)]/g,"").remove_head_tail("'''",0," ").remove_head_tail("''",0," ").replace(/'{2,}/g," ").trim().replace(/\s{2,}/g,function(e){return e.replace(/[^\n]{2,}/g," ").replace(/[\s\S]+\n/g,"\n").replace(/\n{3,}/g,"\n\n")}).replace(/[(（] /g,"(").replace(/ [）)]/g,")"):e},template_text:I,is_template:G,escape_text:function(e,t){function n(e){var n=e.charCodeAt(0);return t?"%"+n.toString(16):"&#"+n+";"}return e.replace(/[\|{}\[\]<>�]/g,n).replace(/''/g,"'"+n("'")).replace(/__/g,"_"+n("_")).replace(/~~~/g,"~~"+n("~")).replace(/\n([*#;:=\n])/g,function(e,t){return"\n"+n(t)})},quit_operation:{quit:!0},is_page_data:M.is_page_data,title_of:U,title_link_of:function(n,r,i){var a,o,s;void 0===i&&(t.is_wiki_API(r)||e.is_Object(r))&&(i=r,r=null);var l=t.session_of_options(i),c=l&&l.configurations.namespace_hash||f.hash;if(t.is_page_data(n)?(o=n.ns===c.category||n.ns===c.file,a=n.title):(Array.isArray(n)&&("link"===n.type||"file"===n.type||"category"===n.type)&&(a=n[0]+n[1])?r=r||n.caption||n[2]:(a=U(n))&&"string"==typeof a)&&(a=a.replace(/^[\s:]+/,""),s=/^ *[a-z]{2}[a-z\d\-]{0,14} *:/i.test(a)&&!(l&&l.configurations.namespace_pattern||f.pattern).test(a),o=N.test(a)||j.test(a)||s),!a)return"";var _=t.get_first_domain_name_of_session(l);return _&&!s&&(a=_+":"+a,l.family&&l.family in p.shortcut_of_project?(a=p.shortcut_of_project[l.family]+":"+a,o=!1):o=!0),o&&(a=":"+a),"[["+a+(r&&r!==a?"|"+r:"")+"]]"},revision_content:D,content_of:M,normalize_title:S,normalize_title_pattern:L,get_hash:function(e,t){var n=Object.create(null);return e.forEach(t?function(e){n[e.pageid]=e}:function(e){n[e.title]=e}),n},unique_list:function(e){var t=[],n=Object.create(null);return e.forEach(function(e){var r="string"==typeof e?e:e.title;r in n||(n[r]=null,t.push(e))}),t}}),f}}),"function"==typeof CeL&&CeL.run({name:"application.net.MIME",require:"",code:function(e){var t=function(){};function n(e){if(e){(e=String(e)).includes("://")&&(e=e.replace(/[#?].*$/,""));var t=e.match(/\.([^.]+)$/i);if(t){if(/[a-z\d\-]+/i.test(t[1]))return t[1]}else if(/^[a-z\d\-]+$/i.test(e))return e}}function r(e,t){var r=n(e);if(r)switch(r=r.toLowerCase()){case"jpg":r="jpeg";case"jpeg":case"png":case"gif":case"webp":case"bmp":return"image/"+r;case"ico":case"icon":return"image/x-icon";case"mp3":return"audio/mpeg";case"3gpp":case"ac3":case"ogg":return"audio/"+r;case"avi":case"mp4":case"mpeg":return"video/"+r;case"txt":return"text/plain";case"htm":r="html";case"html":case"css":case"csv":return"text/"+r;case"svg":return"image/svg+xml";case"xhtml":return"application/xhtml+xml";case"rtf":case"pdf":case"xml":return"application/"+r;case"otf":case"ttf":case"woff":case"woff2":return"font/"+r}}return t.prototype={},t.file_name_extension_of=n,t.MIME_of=r,t.main_MIME_type_of=function(e){var t=r(e);if(t){var n=t.match(/^([a-z]+)\//);return n?n[1]:void 0}},t}}),"function"==typeof CeL&&CeL.run({name:"application.net.Ajax",require:"data.code.compatibility.|data.native|application.net.MIME.|application.net.",code:function(t){function n(e){return t.age_of?t.age_of(0,e,{digits:1}):e%1e3==0?e/1e3+"s":e+"ms"}function r(e){var n=String(e);if(t.gettext){var r=n.match(/^(Error: (?:(?:connect|getaddrinfo) E[A-Z]+|Timeout) )(.+)$/);r&&(n=[r[1]+"%1",r[2]]),n=Array.isArray(n)?t.gettext.apply(null,n):t.gettext(n)}return n}var i="".indexOf("_"),o=function(){};o.prototype={};var s="function"==typeof Symbol?Symbol("URL"):"\0URL to fetch";function l(e,t,n){return(n||""===n)&&(Object.defineProperty[R]&&!/^#/.test(n)&&(n="#"+n),e.hash=n),e.search_params.set_parameters(t),e}function c(e,n,r){return Array.isArray(e)?(e=l(t.URI(e[0]),e[1],e[2]),n&&(e.charset=n)):e=t.URI(e,null,{charset:n}),(r.search||r.hash)&&(e=l(e,r.search,r.hash)),t.debug({T:["Fetching URL: %1","{"+typeof e+"} ["+("string"==typeof e?e:e&&e[s]||e.toString(n))+"]"]},1,"normalize_URL_to_fetch"),e}var _=4,u=t.is_WWW(!0)&&(document.head||document.getElementsByTagName("head")[0]);function p(e,n,r,i,a){if(t.is_Object(r)&&(i=r,r=null),a=t.new_options(a),t.is_Object(e)&&e[s]&&(Object.assign(a,e),i=a.post||i,r=a.charset||r,e=a[s]),e=c(e,r,a),"object"==typeof n){for(var o in t.debug("Trying to JSONP, insert page, need callback.",3,"get_URL"),n)if(t.debug("Trying ("+typeof n[o]+") ["+o+"] = ["+n[o]+"]",3,"get_URL"),o&&"function"==typeof n[o]){var l,p=document.createElement("script");for(r=0;(l="cb"+r)in t;)r++;return t[l]=function(r){t.debug("["+e+"]: callback 完自動移除 .js。",2,"get_URL"),u.removeChild(p),p=null,delete t[l],n[o](r)},e.search_params[o]=t.Class+"."+l,p.src=e.toString(),t.debug("Use script node: ["+p.src+"]",3,"get_URL"),void u.appendChild(p)}t.debug("Skip JSONP. No callback specified.",3,"get_URL")}i&&!a.form_data&&(i=t.Search_parameters(i).toString(r)),n||"function"!=typeof a.onchange||(n=function(){a.onchange(_,d)}),(!1===a.async&&n||"function"!=typeof n)&&(n=!1);var d=t.new_XMLHttp();try{if(d.open(a.method||(i?"POST":"GET"),e.toString(),!!n,a.user||"",a.password||""),a.timeout>0&&!n&&(d.timeout=a.timeout,"function"==typeof a.onfail&&(d.ontimeout=function(e){a.onfail.call(d,e||"Timeout")})),t.is_Object(a.head)&&"setRequestHeader"in d&&Object.keys(a.head).forEach(function(e){d.setRequestHeader(e,a.head[e])}),a.mime?r=a.mime:r&&(r="application/json;charset="+r),r&&d.overrideMimeType&&d.overrideMimeType(r),n&&(d.onreadystatechange=function(){if(d.readyState===_)return n(d);0<d.readyState&&d.readyState<_?"function"==typeof a.onchange&&a.onchange(d.readyState,d):"function"==typeof a.onfail&&a.onfail(d)}),d.send(i||null),!n)return d.responseText}catch(e){t.error(e),"function"==typeof a.onfail?a.onfail(d,e):n&&n(void 0,e)}}o.get_URL=p;var d=t.platform.nodejs,f="\r\n";function g(e){if(this.generated)return this.generated;var t="--"+this.boundary+f,n=this.generated=[t],r=t.length;if(t=f+t,this.forEach(function(e,i){if(Array.isArray(e)){if(!e.content_length)throw console.log(e),new Error("The chunk do not has regular .content_length!");r+=e.content_length}else r+=e.length;n.push(e),i<this.length-1&&(n.push(t),r+=t.length)},this),!(r>0))throw console.log(this),new Error("Illegal chunk.content_length!");return t=f+"--"+this.boundary,e||(t+="--"),n.push(t),r+=t.length,n.content_length=r,n}function h(e){function t(e){return Array.isArray(e)?e.every(t):!e.includes(n)}for(var n,r=0;r++<8;){n=(Number.MAX_SAFE_INTEGER*Math.random()).toString(36);for(var i=1;i<n.length/2|0;i++){var a=n.slice(0,i);if(n.lastIndexOf(a)>0){n=null;break}}if(n&&t(e))return e.boundary=n,n}throw new Error("give_boundary: Retry too many times!")}var m,y,b,v,w,k={form_data_generated:!0};function A(e,n,i){function a(e,n,a,l){var c,_;function u(t,r){var i="Content-Disposition: "+(l?"file":'form-data; name="'+a+'"')+'; filename="'+encodeURIComponent(e)+"\"; filename*=UTF-8''"+encodeURIComponent(e)+f;t&&(i+="Content-Type: "+t+f),d&&Buffer.isBuffer(r)&&(i+="Content-Transfer-Encoding: binary"+f);var o=[i+=f,r];o.content_length=i.length+r.length,(l||s).push(o),n()}if("string"==typeof e?c=e.includes("://"):(c=e.url)?e=c:(_=e.type,e=e.file),!c){var p;if(d)try{p=S.readFileSync(e)}catch(e){}else p=t.get_file(e);return p?(i&&i.file_post_processor&&i.file_post_processor(e,p),e=e.match(/[^\\\/]*$/)[0],_||(_=t.MIME_of(e)),void u(_,p)):(t.error(["to_form_data: ",{T:["Failed to get file: [%1]",e]}]),void n())}t.debug({T:["自網路取得 URL：%1",e]},1,"to_form_data"),o.get_URL(e,function(a,o){if(i&&i.url_post_processor&&i.url_post_processor(e,a,o),o)return t.error(["to_form_data: ",{T:["Got error when retrieving [%1]: %2",e,r(o)]}]),void n();e=e.replace(/[?#].*$/,"").match(/([^\\\/]*)[\\\/]?$/)[1],t.debug({T:["自網路取得 URL：%1，%2{{PLURAL:%2|位元組}}。",e,a.buffer.length]},1,"to_form_data"),u(a.type,a.buffer)},"buffer")}e=t.Search_parameters(e);var s=[],l=Object.keys(e),c=0;return s.to_Array=g,function r(){if(c===l.length)return h(s),s.to_Array(),void n(s);var i=l[c++],o=e[i];if(Array.isArray(o)){var _=[],u=0,p=function(){if(u===o.length){h(_);var e='Content-Disposition: form-data; name="'+i+'"'+f+"Content-Type: multipart/mixed; boundary="+_.boundary+f+f;(_=g.call(_,!0)).unshift(e),_.content_length+=e.length,s.push(_),r()}else a(o[u++],p,void 0,_)};p()}else if(t.is_Object(o))a(o,r,i);else{var m;if(o&&"number"!=typeof o&&"boolean"!=typeof o||(o=String(o)),d&&"string"==typeof o&&(o=Buffer.from(o,"utf8"),m="Content-Type: text/plain; charset=UTF-8"+f),!i)throw new Error("No key for value: "+o);if(!o&&""!==o)throw new TypeError("Invalid type of "+i+": "+typeof o);var y=[m='Content-Disposition: form-data; name="'+i+'"'+f+(m||"")+f,o];y.content_length=m.length+o.length,s.push(y),r()}}(),s}function x(e){var n=arguments.callee;if("object"==typeof n.XMLHttp&&(n.XMLHttp=null),t.is_Object(e)||(a=arguments,e={URL:e,fn:a[1],method:a[2],sendDoc:a[3]}),e.post&&(e.method="POST",e.sendDoc=e.post),e[s]&&(n.XMLHttp=t.new_XMLHttp(e.enc,!/\.x(?:ht)?ml$/i.test(e[s])))){if("boolean"!=typeof e.async)e.async=!!e.fn;else if(e.async){if(!e.fn){if("function"!=typeof n.HandleStateChange||"function"!=typeof n.HandleContent)return;e.fn=n.HandleContent}}else e.fn=null;if(n.multi_request?(n.q||(n.i={},n.q=[]),n.i[e[s]]=n.q.length,n.q.push({uri:e[s],XMLHttp:n.XMLHttp,func:e.fn,start:n.startTime=new Date})):n.q&&"function"==typeof n.clean&&n.clean(),e[s].indexOf("://")!==i&&"object"==typeof netscape){if(n.asked>2)return void n.clean(e[s]);try{void 0===n.asked&&(n.asked=0,alert("我們需要一點權限來使用 XMLHttpRequest.open。\n* 請勾選記住這項設定的方格。")),netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(t){return n.asked++,void n.clean(e[s])}}try{try{n.XMLHttp.setRequestHeader("Accept-Encoding","gzip, deflate, br")}catch(e){}if("POST"===e.method&&n.XMLHttp.setRequestHeader("Content-Type",Array.isArray(e.fn)&&e.fn[1]?"text/xml":"application/x-www-form-urlencoded"),n.XMLHttp.abort(),n.XMLHttp.open(e.method||"GET",e[s],e.async,e.user||null,e.passwd||null),e.async&&(n.doing=(n.doing||0)+1,n.XMLHttp.onreadystatechange="function"==typeof e.fn?e.fn:function(t){n.HandleStateChange(t,e[s],e.fn)},setTimeout("try{deprecated_get_URL."+(n.multi_request?"q["+n.i[e[s]]+"]":"XMLHttp")+".onreadystatechange();}catch(e){}",n.timeout||3e5)),n.XMLHttp.send(e.sendDoc||null),!e.fn)return n.XMLHttp.responseText}catch(t){return"function"==typeof e.fn?e.fn(t):"object"==typeof window&&(window.status=t.message),t}}}function O(e,n){var r=e.last_cookie;Array.isArray(r)||(r=e.last_cookie=e.last_cookie?[e.last_cookie]:[]),n?"string"==typeof n&&(n=n.split(";")):n=[];var i=r.cookie_index_of;i||(r.length>0?(delete e.last_cookie,r=O(e,r)):(r.cookie_index_of=Object.create(null),r.cookie_hash=Object.create(null)),i=r.cookie_index_of);var a=r.cookie_hash;return n.forEach(function(e){if(e=e.trim()){var n,o,s=e.match(/^([^=;]+)(?:=([^;]+))?(.*)$/);t.debug("last_cookie: "+r,3,"merge_cookie"),s?(n=s[1],o=s[2]):(t.warn(["merge_cookie: ",{T:"Invalid cookie?"}," ["+e+"]"]),n=e,o=""),n&&(a[n]=o,n in i?(t.debug([{T:"cookie 名稱重複！以後來/新出現者為準。"}," ["+r[i[n]]+"]→["+e+"]"],3,"merge_cookie"),r[i[n]]=e):(t.debug([{T:"正常情況。登記已存在之 cookie。"}],3,"merge_cookie"),i[n]=r.length,r.push(e)))}}),t.debug("array: "+JSON.stringify(r),3,"merge_cookie"),t.debug("hash: "+JSON.stringify(a),3,"merge_cookie"),r}function E(e,n){if(n.last_cookie){t.debug("agent.last_cookie: "+JSON.stringify(n.last_cookie),3,"set_cookie_to_URL_object"),t.debug("agent.last_cookie.cookie_hash: "+JSON.stringify(n.last_cookie.cookie_hash),3,"set_cookie_to_URL_object");var r=(e.headers.Cookie?e.headers.Cookie+";":"")+(Array.isArray(n.last_cookie)?n.last_cookie.map(function(e){return e.replace(/;.*/,"")}).join("; "):n.last_cookie);r?e.headers.Cookie=r:delete e.headers.Cookie}t.debug("Set cookie: "+JSON.stringify(e.headers.Cookie),3,"set_cookie_to_URL_object"),t.debug("Set protocol: "+e.protocol,3,"set_cookie_to_URL_object"),t.debug("Set headers: "+JSON.stringify(e.headers),3,"set_cookie_to_URL_object")}o.to_form_data=A,x.timeoutCode=-7732147,x.HandleStateChange=function(e,t,n){var r,a,o=0,s=x.multi_request;if(s?(a=(s=x.q[isNaN(t)?x.i[t]:t]).XMLHttp,n=s.func,t=s.uri):a=x.XMLHttp,Array.isArray(n)&&(o=n[1],n=n[0]),!n||"function"!=typeof n)return x.doing--,void x.clean(t);if(!e)if("object"==typeof a&&a){if(a.parseError&&0!==a.parseError.errorCode)e=a.parseError,e=new Error(e.errorCode,e.reason);else if(4===a.readyState)return r=(r=a.status)>=200&&r<300||304===r||!r&&("file:"===location.protocol||"chrome:"===location.protocol),n===x.HandleContent?n(0,r,a,t):n(r?o?a.responseXML:"object"==typeof window&&window.navigator.appVersion.indexOf("KHTML")!==i&&!(e=escape(a.responseText)).indexOf("%u")!==i?e:a.responseText:0,r?a.getAllResponseHeaders():0,a,t),x.doing--,void x.clean(t)}else new Date-(s?s.start:x.startTime)>x.timeout&&(e=new Error(x.timeoutCode,"Timeout"));e&&(n(e,0,a,t),x.doing--,x.clean(t))},x.HandleContent=function(t,n,r,i){n?alert("URL:\t"+i+"\nHead:\n"+r.getAllResponseHeaders()+"\n------------------------\nLastModified: "+r.getResponseHeader("Last-Modified")+"\nResult:\n"+r.responseText.slice(0,200)):t instanceof Error?alert("Error occured!\n"+("object"==typeof e&&e.number?e.number+":"+e.message:e||"")):"object"==typeof r&&r&&alert((404===r.status?"URL doesn't exist!":"Error occured!")+"\n\nStatus: "+r.status+"\n"+r.statusText)},x.clean=function(e,t){if(t||x.multi_request)if(!e&&isNaN(e)){if(x.q)for(e in x.i)try{x.q[x.i[e]].XMLHttp.abort()}catch(e){}x.q=x.i=0}else if(!isNaN(e)||!isNaN(e=x.i["object"==typeof e?e.uri:e])){try{x.q[e].XMLHttp.abort()}catch(e){}delete x.i[x.q[e].uri],x.q[e]=0}},o.merge_cookie=O;var S,L=0,T=0,j={FORCE_POST:!0},N="BAD STATUS",R=t.env.not_native_keyword;"function"==typeof URL&&URL[R];function P(e,i,a,o,l){if(e)if(T++,L>=P.connects_limit){t.debug({T:["Waiting %1/%2 {{PLURAL:%1|connection|connections}}: %3",L,T,String(e)]},3,"get_URL_node");var u=arguments;setTimeout(function(){T--,P.apply(null,u)},500)}else if(L++,t.is_Object(a)&&(o=a,a=null),(l=t.new_options(l)).form_data&&l.form_data!==k)A(o,function(t){l.form_data=k,P(e,i,a,t,l)},l.form_data);else{t.is_Object(e)&&e[s]&&(Object.assign(l,e),o=l.post||o,a=l.charset||a,e=l[s]);var p=l.agent;"string"==typeof e&&e.startsWith("//")&&(e=(p&&p.protocol||"https:")+e);var d=c(e,a,l);if("object"==typeof i)for(var f in t.debug("Trying to JSONP, insert page, need callback.",3,"get_URL_node"),i)if(f&&"function"==typeof i[f]){d.search_params[f]="cb",i=i[f];break}o&&!l.form_data&&(o=t.is_Object(o)&&l.headers&&"string"==typeof l.headers["Content-Type"]&&l.headers["Content-Type"].includes("application/json")?JSON.stringify(o)||j:t.Search_parameters(o).toString(a)||j),i||"function"!=typeof l.onchange||(i=function(){l.onchange(_)}),(!1===l.async&&i||"function"!=typeof i)&&(i=!1),d.path=d.pathname+d.search;var g=/^https:?$/i.test(d.protocol);e=d.toString();var h,x=l.proxy||g&&process.env.HTTPS_PROXY||process.env.http_proxy;if(x&&(x=t.URI(x))&&(g?(t.debug({T:["Using HTTPS proxy to get URL: %1",e]},2,"get_URL_node"),h=x.agent=p,p=new U(x),h&&h.last_cookie&&(p.last_cookie=h.last_cookie),"ALPNProtocols"in d||(d.ALPNProtocols=["http 1.1"])):(t.debug({T:["Using HTTP proxy to get URL: %1",e]},2,"get_URL_node"),d=I(x,d,e))),d.protocol||(d.protocol=p&&p.protocol||(x?"http:":"https:"),g="https:"===d.protocol),p){if(t.debug({T:!0===p?"使用新 agent。":"使用自定義 agent。"},6,"get_URL_node"),!0===p)p=g?new y.Agent:new m.Agent;else if(p.protocol&&p.protocol!==d.protocol){var R={T:["自定義 agent 與 URL 之協定不同，將嘗試採用符合的協定：%1",p.protocol+" !== "+d.protocol]};l.no_protocol_warn?t.debug(R,3,"get_URL_node"):t.warn(["get_URL_node: ",R]),p=g?new y.Agent:new m.Agent,l.agent.last_cookie&&(p.last_cookie=l.agent.last_cookie)}}else t.debug("採用泛用的 agent。",6,"get_URL_node"),p=g?v:b;l.cookie&&!p.last_cookie&&(t.debug({T:["重新設定 cookie 成：%1",l.cookie]},3,"get_URL_node"),p.last_cookie=l.cookie);var C,D,M={responseURL:e},F=function(){if(D)return!0;D=!0,T--,L--,H&&(t.debug("clear timeout "+n($)+" ["+e+"]",3,"get_URL_node"),clearTimeout(H))},z=function(n){if(!F())return l.error_retry>=1&&!(l.error_retry<=l.error_count)?(l.get_URL_cloned||((l=Object.clone(l)).get_URL_cloned=!0),l.error_count>=1?l.error_count++:l.error_count=1,l[s]=e,t.log(["get_URL_node: ",{T:["Retry %1/%2: %3",l.error_count,l.error_retry,r(n)]}]),void P(l,i,a,o)):void("function"!=typeof l.onfail?(l.no_warning||"TIMEOUT"===n.code||("ENOTFOUND"===n.code?t.error(["get_URL_node: ",{T:["URL not found: [%1]",e]}]):"EPROTO"===n.code&&"TLSv1.2"===require("tls").DEFAULT_MIN_VERSION&&t.platform("node",12)?t.error(["get_URL_node: ",{T:"Node.js v12 and later versions disable TLS v1.0 and v1.1 by default."},{T:'Please set tls.DEFAULT_MIN_VERSION = "TLSv1" first!'}," ["+e+"]"]):t.error(["get_URL_node: ",{T:["Got error when retrieving [%1]: %2",e,r(n)]}])),"function"==typeof i&&i(M,n)):l.onfail.call(M,n))};for(var W in d.headers=Object.assign({Host:d.host,"User-Agent":P.default_user_agent,Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,","Accept-Language":"zh-TW,zh;q=0.9,ja;q=0.8,en;q=0.7",Connection:"keep-alive","Upgrade-Insecure-Requests":1,Pragma:"no-cache","Cache-Control":"no-cache"},"image"===l.fetch_type?{Accept:"image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8","Sec-Fetch-Dest":"image","Sec-Fetch-Mode":"no-cors","Sec-Fetch-Site":"cross-site","Sec-Fetch-User":void 0}:{"Sec-Fetch-Dest":l.fetch_type||"document","Sec-Fetch-Mode":"navigate","Sec-Fetch-Site":"none","Sec-Fetch-User":"?1"},l.headers,d.headers),d.headers)void 0===d.headers[W]&&delete d.headers[W];if(w.gunzipSync&&(d.headers["Accept-Encoding"]="gzip, deflate"+(w.brotliDecompressSync?", br":"")),o){d.method="POST";var q=o===j?"":o;0,Object.assign(d.headers,{"Content-Type":l.headers&&l.headers["Content-Type"]||(l.form_data?"multipart/form-data; boundary="+q.boundary:"application/x-www-form-urlencoded"),"Content-Length":l.form_data?q.to_Array().content_length:a?Buffer.byteLength(q,a):Buffer.byteLength(q)})}l.method&&(d.method=l.method),d.agent=p,E(d,p),t.is_debug(3)&&(t.debug("Set headers: "+JSON.stringify(d.headers),3,"get_URL_node"),console.log(d.headers));try{C=(C=g?y:m).request(d,function(n){if(!D){if(l.onresponse&&l.onresponse(n),O(l.agent||p,n.headers["set-cookie"]),3==(n.statusCode/100|0)&&n.headers.location&&n.headers.location!==e&&!l.no_redirect){if(F())return;try{C.destroy()}catch(e){}return l.get_URL_cloned||((l=Object.clone(l)).get_URL_cloned=!0),l[s]=new URL(n.headers.location,e),t.debug({T:["%1 Redirecting to [%2] ← [%3]",n.statusCode,l[s],e]},1,"get_URL_node"),void P(l,i,a,302!=n.statusCode&&o)}if(t.debug({T:["response HEADERS: %1",JSON.stringify(n.headers)]},4,"get_URL_node._onload"),Object.assign(M,{redirected:!!l.get_URL_cloned,status:n.statusCode,statusText:n.statusMessage,headers:n.headers}),l.onfail||2==(n.statusCode/100|0)?t.debug({T:["HTTP status code: %1 %2",n.statusCode,e]},2,"get_URL_node"):l.no_warning||t.warn(["get_URL_node: ",{T:["Exception HTTP status code %1: %2",n.statusCode,e]}]),n.headers["content-type"]&&(M.type=n.headers["content-type"].replace(/;(.*)$/,function(e,t){var n=t.match(/[; ]charset=([^;]+)/i);return n&&(M.charset=n[1].trim()),""}).trim()),n.headers["content-disposition"]){var c=n.headers["content-disposition"].match(/ filename\*\s*=\s*([^';]+)'([^';]*)'([^';]+)/);if(c?c=c[3]:(c=n.headers["content-disposition"].match(/ filename\s*=\s*([^';]+)/))&&(c=c[1]),c&&(c=c.trim())){c=(c.match(/^"(.*)"$/)||c.match(/^'(.*)'$/)||[,c])[1];try{/%[\da-f]{2}/.test(c)||(c=escape(c)),c=decodeURIComponent(c),t.debug({T:["檔案名稱：%1",c]},3,"get_URL_node")}catch(e){}M.filename=t.to_file_name(c)}}if("function"!=typeof i&&!l.write_to&&!l.write_to_directory)return F(),void t.warn(["get_URL_node: ",{T:["Got URL [%1], but there is no listener!",e]}]);t.debug({T:["等待接收從網址 [%1] 傳輸回的資料……",e]},3,"get_URL_node");var _=n.headers["content-encoding"];_=_&&_.trim().toLowerCase(),l.ondatastart&&l.ondatastart(n);var u=[],d=0,f=+n.headers["content-length"];n.on("data",function(n){d+=n.length;var r=[(l.write_to?l.write_to+": ":"")+d+(f?"/"+f:"")+" bytes ("+(f?(100*d/f|0)+"%, ":"")+(d/1.024/((new Date).getTime()-Y)).toFixed(2)+" KiB/s)"];r.push(": "+e),t.debug("receive BODY.length: "+r.join(""),4,"get_URL_node"),l.show_progress&&d!==f&&(l.show_progress>1||r.pop(),t.log_temporary(r.join(""))),d>l.MAX_BUFFER_SIZE?u&&(u=null):u.push(n),l.ondata&&l.ondata(n)}),n.on("end",function(){if(t.debug("end(): "+e,2,"get_URL_node"),l.onend&&l.onend(),u=u&&Buffer.concat(u,d),h&&(h.last_cookie=p.last_cookie),!(2!=(n.statusCode/100|0)&&l.error_retry>=1)||l.error_retry<=l.error_count){if(u)if(l.verify){if("function"==typeof l.verify){if(!l.verify(u))return void z("INVALID")}else if(!1===t.file_type(u,l.verify).verified)return void z("Invalid "+l.verify)}else if(0===u.length&&!l.allow_empty)return void z("EMPTY");if(_&&u)switch(t.debug("content-encoding: "+_,5,"get_URL_node"),_){case"gzip":t.debug("gunzip "+u.length+" bytes data...",2,"get_URL_node");try{u=w.gunzipSync(u)}catch(n){return t.error("get_URL_node: Error: node_zlib.gunzipSync(): "+r(n)+" ["+e+"]"),u=null,void z(n)}break;case"deflate":t.debug("deflate data "+u.length+" bytes...",2,"get_URL_node"),u=w.deflateSync(u);break;case"br":t.debug("brotli data "+u.length+" bytes...",2,"get_URL_node"),u=w.brotliDecompressSync(u);break;default:t.warn(["get_URL_node: ",{T:["Unknown HTTP compression method: [%1]",_]}])}if(u&&403===n.statusCode&&u.toString().includes("Cloudflare")&&u.toString().includes(' id="captcha-bypass"')&&t.error(["get_URL_node: ",{T:"You need to bypass the DDoS protection by Cloudflare!"}]),M.buffer=u,M.response=u,u&&"buffer"!==a&&(u=u.toString(a||void 0)),t.is_debug(4)&&t.debug("BODY: "+u,1,"get_URL_node"),M.responseText=u,2==(n.statusCode/100|0)){if(!F()){if(u&&(l.write_to||l.write_to_directory)){var c=l.write_to||(l.write_to_directory+t.env.path_separator+t.to_file_name(e.replace(/#.*/,"").replace(/[\\\/:*?"<>|]/g,"_"))).slice(0,256);l.no_warning||t.info(["get_URL_node: ",{T:["Write %2 {{PLURAL:%2|byte|bytes}} to file [%1]: %3",c,u.length,e]}]);try{var f=S.openSync(c,"w");if(S.writeSync(f,u,0,u.length,null),S.closeSync(f),n.headers.date)try{S.utimesSync(c,new Date,n.headers.date)}catch(e){}}catch(n){t.error(["get_URL_node: ",{T:["Failed to write %2 {{PLURAL:%2|byte|bytes}} to [%1]: %3",c,u.length,e]}]),console.error(n)}}if("function"==typeof l.content_processor&&l.content_processor(u,e,n.statusCode),"function"==typeof l.check_reget&&l.check_reget(M,l))return l[s]=e,void P(l,i,a,o);"function"==typeof i&&i(M,!u&&!l.allow_empty),u=null}}else z(N)}else z(N)})}})}catch(e){return void z(e)}if(l.max_listeners>=0&&C.setMaxListeners(l.max_listeners),o){q=o===j?"":o;l.form_data?function e(t){Array.isArray(t)?t.forEach(function(t){e(t)}):C.write(t)}(q.to_Array()):"string"==typeof q?(t.debug("set post data: length "+q.length,3,"get_URL_node"),t.debug("set post data: "+q,6,"get_URL_node"),C.write(q)):t.error({T:["Invalid POST data: %1",JSON.stringify(o)]})}var H,$=l.timeout||P.default_timeout,B=function(r){if(!D){try{C.destroy()}catch(e){}l.no_warning||t.info(["get_URL_node: ",{T:["Connection timeout for %1: [%2]",n($),e]}]),r||((r=new Error("Timeout "+n($)+": ["+e+"]")).code="TIMEOUT"),z(r)}};$>0?(C.setTimeout($),C.on("timeout",B),H=setTimeout(B,$),t.debug({T:["Add timeout %1: [%2]",n($),e]},2,"get_URL_node")):$&&t.warn(["get_URL_node: ",{T:["Invalid timeout: %1",$]}]),t.debug("set onerror: "+(l.onfail?"user defined":"default handler"),3,"get_URL_node"),C.on("error",z);var Y=(new Date).getTime();C.end()}else i(void 0,new SyntaxError("No URL input."))}function C(e,n){if(d){if(o.get_URL!==P){require("url"),m=require("http"),y=require("https"),w=require("zlib");try{require("http2")}catch(e){}o.get_URL=t.copy_properties(p,P)}if(void 0!==e){"string"==typeof e&&(e=/^https/i.test(e));var r=e?new y.Agent(n):new m.Agent(n);return n&&n.as_default&&(e?v=r:b=r),r}b=new m.Agent,v=new y.Agent}}function I(e,n,r){var i={host:e.hostname,port:e.port||t.net.port_of_protocol[n.protocol.replace(/:$/,"")]||t.net.port_of_protocol.https,path:r,protocol:n.protocol,headers:{Host:n.host}};return e.agent&&(i.agent=e.agent),e.username&&(i.headers["Proxy-Authorization"]="Basic "+Buffer.from(e.username+":"+(e.password||"")).toString("base64")),i}function U(e,n){if(!(this instanceof U))return new U(e,n);if(y.Agent.call(this,n||{}),this.options=Object.assign({},n),!(e=t.URI(e)))throw new Error("Must specify proxy server: hostname:port");this.proxy_server=e,this.createConnection=function(n,r){var i=Object.assign(I(e,n,n.host+":"+n.port),{method:"CONNECT"});delete i.agent,delete i.protocol,e.agent&&E(i,e.agent),t.debug("Connect to "+i.path,2,"HttpsProxyAgent.createConnection"),(i=m.request(i)).on("connect",function(e,t,i){var a=require("tls").connect({host:n.host,socket:t},function(){r(null,a)})}),i.on("error",r),i.end()}}P.default_user_agent=t.Class+"/"+t.version+" (https://github.com/kanasimi/CeJS)",P.default_timeout=12e5,P.connects_limit=100,P.get_status=function(e){var t={connections:L,requests:T};return e?t[e]:t},o.setup_node_net=C,C(),o.HttpsProxyAgent=U,d&&require("util").inherits(U,y.Agent),U.prototype.getName=function(e){return(e.host||"localhost")+":"+(e.port||"")+":"+(e.path||"")},U.prototype.addRequest=function(e,t){var n=this.getName(t);this.sockets[n]||(this.sockets[n]=[]),this.sockets[n].length<this.maxSockets?(t.request=e,this.createSocket(n,t,function(t,n){t?process.nextTick(function(e,t){e.emit("error",t)},e,t):e.onSocket(n)})):(this.requests[n]||(this.requests[n]=[]),this.requests[n].push(e))},U.prototype.createSocket=function(e,t,n){var r=this;if((t=Object.assign({},t,this.options)).servername=t.host,t.request){var i=t.request.getHeader("host");i&&(t.servername=i.replace(/:.*$/,""))}var a=!1;r.createConnection(t,function(e,i){if(!a)if(a=!0,e){if(e.message+=" while connecting to HTTP(S) proxy server "+r.hostname+":"+r.port,!t.request)throw e;t.request.emit("error",e)}else{var o=r.getName(t);r.sockets[o]||(r.sockets[o]=[]),r.sockets[o].push(i);var s=function(){r.emit("free",i,t)},l=function(e){r.removeSocket(i,t)};i.on("free",s),i.on("close",l),i.on("agentRemove",function e(){r.removeSocket(i,t),i.removeListener("close",l),i.removeListener("free",s),i.removeListener("agentRemove",e)}),n(e,i)}})};try{if(d&&(S=require("fs")),"function"!=typeof S.readFile)throw!0}catch(e){t.debug([this.id+": ",{T:"無 node.js 之 `fs` 套件，因此不具備 node 之檔案操作功能。"}])}function D(e,n,i){"string"==typeof i?i=/\.[a-z\d\-]+$/i.test(i)?{file_name:i}:/[\\\/]+$/i.test(i)?{directory:i}:{encoding:i}:t.is_Object(i)||(i=Object.create(null));var a=i.file_name,s="encoding"in i?i.encoding:D.encoding;if(!a&&(a=decodeURI(e).match(/[^\/]+$/))&&(a=a[0],t.HTML_to_Unicode&&(a=t.HTML_to_Unicode(a)),a=t.to_file_name(a),t.debug([{T:["自 URL 取得檔名：%1",e]},"\n→ "+a],1,"get_URL_cache_node")),"function"==typeof i.file_name_processor&&(a=i.file_name_processor(a)),a){var l;i.directory&&(a=t.append_path_separator(i.directory,a));try{l=S.statSync(a)}catch(e){}if(!i.get_contents&&i.web_resource_date&&l&&(l.mtimeMs||l.mtime)-Date.parse(i.web_resource_date)>-1)return t.debug("File on web ("+i.web_resource_date+") is not newer than local file ("+l.mtime+"): "+a,1,"get_URL_cache_node"),void n(void 0,o.get_URL_cache.NO_NEWS);t.debug([{T:["下載 %1",e]},"\n→ ",{T:["%1 (file encoding %2, charset %3)",a,s,i.charset]}],1,"get_URL_cache_node"),S.readFile(a,s,function(c,_){if(!i.reget){if(!c&&i.web_resource_date&&l&&(l.mtimeMs||l.mtime)-Date.parse(i.web_resource_date)>-1)return void n(_);if(!c&&!i.preserve_newer&&(_||i.allow_empty))return t.debug({T:"Using cached data."},3,"get_URL_cache_node"),t.debug("Cached data: ["+_.slice(0,200)+"]...",5,"get_URL_cache_node"),void n(_);t.debug({T:"No valid cached data. Try to get data (again)..."},3,"get_URL_cache_node")}o.get_URL(e,function(o,c){if(c)return t.error(["get_URL_cache_node.cache: ",{T:["Got error when retrieving [%1]: %2",e,r(c)]}]),void n(void 0,c,o);_=!s&&o.buffer||o.response||o.responseText,"function"==typeof i.postprocessor&&(_=i.postprocessor(_,o)),i.file_name_processor?a=i.file_name_processor(a,o.filename):o.filename&&(i.file_name?i.file_name.endsWith(o.filename)||t.info(["get_URL_cache_node: ",{T:["Set file name: [%1], file name from header: [%2].",i.file_name,o.filename]}]):(a=(i.directory||"")+o.filename,t.info(["get_URL_cache_node: ",{T:["Got file name from HTTP header: %1",o.filename]}])));var u=o.headers.date;if(u&&i.preserve_newer&&l&&(l.mtimeMs||l.mtime)-Date.parse(u)>-1)n(_.toString(),void 0,o);else{if(_&&/[^\\\/]$/.test(a)){if(o.cached_file_path=a,!l)try{if((l=S.statSync(a))&&!i.reget)return t.info(["get_URL_cache_node.cache: ",{T:["重新獲取檔案後發現原檔案已存在，跳過不覆寫：[%1]",a]}]),void n(_.toString(),void 0,o)}catch(e){}i.no_write_info||(t.info(["get_URL_cache_node.cache: ",{T:["Write data to cache file [%1].",a]}]),t.debug({T:["The data to cache: %1...",_&&JSON.stringify(_).slice(0,190)]},3,"get_URL_cache_node"));try{S.writeFileSync(a,_,s)}catch(c){return void n(_.toString(),c,o)}}if(u)try{S.utimesSync(a,new Date,u)}catch(e){}n(_.toString(),void 0,o)}},i.charset,i.post_data,i.get_URL_options)})}else n(void 0,new Error("No file name specified."))}return D.encoding="utf8",d&&(o.get_URL_cache=D,o.get_URL_cache.NO_NEWS="function"==typeof Symbol?Symbol("no news"):{"no news":!0}),d&&(o.fetch=function(e,t){return new Promise(function(n,r){o.get_URL(e,function(e,t){if(t)r(t);else{var i={headers:e.headers,ok:2==(e.status/100|0),redirected:e.redirected,status:e.status,statusText:e.statusText,url:e.responseURL,useFinalURL:!0,_buffer:e.buffer,text:function(){try{return Promise.resolve(this._buffer.toString())}catch(e){return Promise.reject(e)}},json:function(){return this.text().then(JSON.parse)},arrayBuffer:function(){return Promise.resolve(this._buffer.buffer)}};n(i)}},null,t&&t.body,Object.assign({onfail:r},t))})}),o}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.task",require:"data.native.|application.net.Ajax.|application.net.wiki.|application.net.wiki.namespace.",no_extend:"this,*",code:function(e){var t=e.application.net.wiki,n=t.KEY_SESSION,r=t.KEY_CORRESPOND_PAGE,i=t.is_api_and_title,a=t.add_session_to_options,o=e.cache_gettext(function(e){o=e});"".indexOf("_");function s(e){if(e)return e[r]&&(e=e[r]),e.site&&e.title&&e}function l(t){if(!("object"!=typeof t.last_data||t.last_data.error||r in t.last_data&&t.last_page!==t.last_data[r]))return e.debug("Use cached data: [["+(r in t.last_data?t.last_page.id:t.last_data.id)+"]]",1,"last_data_is_usable"),!0}function c(t,n,r,i,a){var o,s=Date.now()-r,l=s/t*(n-t);return l=l>99&&l<1e15?", "+(l=e.age_of(0,l,{digits:1}))+" estimated":"",i>0?(a||(a="page"),o=": "+(o=(o=i/s)<1?(1e3*o).toFixed(2)+" "+a+"/s":o.toFixed(3)+" "+a+"/ms")):o="",(i>0?i===n?t+"/"+n:i+" ":"")+" ("+(100*t/n|0)+"%)"+o+l}t.prototype.set_promise_relying=function(t){if(e.is_thenable(t))return e.debug("設定依賴於本 wiki_API action 的 promise。",3,"set_promise_relying"),this.actions.promise_relying=e.is_thenable(this.actions.promise_relying)?this.actions.promise_relying.then(t):t,!0},t.prototype.test_promise_relying=function(){this.running=!0;var t=this;e.status_of_thenable(this.actions.promise_relying,function(n,r){return r!==t.actions.promise_relying?(e.debug("有其他執行緒鑽空隙，執行了 .set_promise_relying()。需要再檢測一次。",3,"test_promise_relying"),void t.test_promise_relying()):n?(delete t.actions.promise_relying,void(0<t.actions.length?(e.debug("有其他執行緒鑽空隙，設定了 .actions。",3,"test_promise_relying"),t.next()):(e.debug("依賴於本 wiki_API action 的 promise 皆已 fulfilled。本 action 結束。",3,"test_promise_relying"),t.running=!1))):void(0<t.actions.length?t.next():t.running=!1)})},t.KEY_waiting_callback_result_relying_on_this="function"==typeof Symbol?Symbol("waiting callback_result_relying_on_this"):"\0waiting callback_result_relying_on_this",t.prototype.next=function(c){if(this.actions[t.KEY_waiting_callback_result_relying_on_this])return(c=Array.prototype.slice.call(arguments)).unshift("run"),this.actions.push(c),void e.debug("在 callback_result_relying_on_this 中 call this.next() 並且 waiting callback 而跳出。為避免造成多執行序，將執行權交予 call callback_result_relying_on_this() 之母執行序，子執行序這邊跳出。",1,"wiki_API.prototype.next");if("function"==typeof c){this.actions[t.KEY_waiting_callback_result_relying_on_this]=!0;try{c=c.apply(this,Array.prototype.slice.call(arguments,1))}catch(t){e.env.has_console?console.error(t):e.error(t)}delete this.actions[t.KEY_waiting_callback_result_relying_on_this]}if(c&&(this.set_promise_relying(c),c=null),this.running=0<this.actions.length,this.running){e.debug("剩餘 "+this.actions.length+" action(s)",2,"wiki_API.prototype.next"),e.is_debug(3)&&e.show_value&&e.show_value(this.actions.slice(0,10));var _,u=this.actions.shift(),p=u[0];t.list.type_list.includes(p)&&(_=p,p="list"),e.is_debug(3)&&e.debug("處理 "+(this.token.lgname?this.token.lgname+" ":"")+"["+u.map(function(t){var n;if(t&&t.toString)n=t.toString();else try{n=JSON.stringify(t)}catch(r){n=e.is_type(t)}return n&&n.slice(0,80)})+"]",1,"wiki_API.prototype.next");var d=this;switch(p){case"set_URL":t.setup_API_URL(this,u[1]),this.next();break;case"set_language":t.setup_API_language(this,u[1]),this.next();break;case"set_data":t.setup_data_session(this,function(){d.next(u[1])},u[2],u[3],u[4]);break;case"login":e.debug("正 log in 中，當 login 後，會自動執行 .next()，處理餘下的工作。",2,"wiki_API.prototype.next"),this.actions.unshift(u);break;case"logout":t.logout(this,u[1]);break;case"query":throw console.trace("use query"),new Error("Please use .query_API() instead of only .query()!");case"query_API":void 0===u[4]&&e.is_Object(u[3])&&u[3].post_data_only&&(u[4]=u[3],u[3]=u[1],u[1]=""),t.query(u[1],function(e,t){d.next(u[2],e,t)},u[3],a(this,u[4]));break;case"siteinfo":"function"!=typeof u[1]||u[2]||(u[2]=u[1],u[1]=null),t.siteinfo(a(this,u[1]),function(e,t){d.next(u[2],e,t)});break;case"page":if(e.is_Object(u[2])&&!u[3]&&u.splice(2,0,null),t.is_page_data(u[1])&&(t.content_of.has_content(u[1])||u[3]&&u[3].allow_missing&&"missing"in u[1])){e.debug("採用所輸入之 "+t.title_link_of(u[1])+" 作為 this.last_page。",2,"wiki_API.prototype.next"),this.last_page=u[1],this.next(u[2],u[1]);break}if("function"==typeof u[1]){this.next(u[1],this.last_page);break}0,delete this.last_page,t.page(i(u[1])?u[1]:[this.API_URL,u[1]],function(e,t){d.last_page=Array.isArray(e)?e[0]:e,d.next(u[2],e,t)},a(this,u[3]));break;case"tracking_revisions":"object"==typeof u[3]&&(u[4]=u[3],u[3]=null),t.tracking_revisions(u[1],u[2],function(e,t){d.next(u[3],e,t)},a(this,u[4]));break;case"parse":e.is_Object(u[1])&&!u[2]&&u.splice(1,0,null);var f=t.parser(this.last_page,a(this,u[2])).parse();this.next(u[1],f);break;case"purge":"string"==typeof u[1]||"number"==typeof u[1]||u.splice(1,0,this.last_page),e.is_Object(u[2])&&!u[3]&&u.splice(2,0,null),u[1]?t.purge([this.API_URL,u[1]],function(e,t){d.next(u[2],e,t)},a(this,u[3])):(e.warn("wiki_API.prototype.next.purge: No page inputed!"),this.next(u[3],void 0,"no page"));break;case"redirect_to":e.is_Object(u[2])&&!u[3]&&u.splice(2,0,null),t.redirect_to(i(u[1])?u[1]:[this.API_URL,u[1]],function(e,t,n){d.next(u[2],e,t,n)},a(this,u[3]));break;case"list":"function"==typeof u[1]&&"function"!=typeof u[2]&&u.splice(1,0,""),t[_]([this.API_URL,u[1]],function(t,n){d.last_pages=t,"function"==typeof u[2]?c=u[2].call(d,t,n):u[2]&&u[2].each&&(t?d.work(u[2]):e.info("無頁面可處理（已完成？），中斷跳出。")),d.next(c)},a(this,u[3]));break;case"register_redirects":if(e.is_Object(u[2])&&!u[3]&&u.splice(2,0,void 0),u[3]=Object.assign({session:this,include_root:!0,multi:Array.isArray(u[1])&&u[1].length>1},u[3]),u[3].namespace&&(u[1]=this.to_namespace(u[1],u[3].namespace)),u[1]=this.normalize_title(u[1]),u[3].reget);else if(Array.isArray(u[1])){if(u[1]=u[1].filter(function(e){return!(e in d.redirects_data)}).unique(),0===u[1].length){this.next(u[2]);break}}else if(u[1]in this.redirects_data){this.next(u[2]);break}if(Array.isArray(u[1]))for(var g=u[3].one_by_one?1:u[3].slice_size>=1?Math.min(50,u[3].slice_size):50;u[1].length>g;)d.actions.unshift([u[0],1===g?u[1].pop():u[1].splice(u[1].length-g,g),u[2],u[3]]),u[2]=void 0;t.redirects_here(u[1],function(n,r,i){if(i)d.next(u[2],null,i);else{0;var a=Array.isArray(u[1])?u[1]:[u[1]];r?(c(r,Array.isArray(u[1])?u[1][0]:u[1]),l(n)):n.forEach(function(e){c(e.redirect_list||[e],e.original_title||e.title),l(e)}),!u[3].no_languagevariants&&d.has_languagevariants?(u[3].uselang="zh-hant",t.convert_Chinese(a,function(e){_(a,e),u[3].uselang="zh-hans",t.convert_Chinese(a,function(e){_(a,e),d.next(u[2],n)},u[3])},u[3])):d.next(u[2],n)}function s(e,t){e&&(d.redirects_data[e]=t,a.push(e))}function l(e){e.original_title&&s(e.original_title,e.title),e.redirect_from&&s(e.redirect_from,e.title)}function c(n,r){var i=n[0].title,a=!i||"missing"in n[0]||"invalid"in n[0];if(a||n.forEach(function(e){s(e.title,i)}),!u[3].no_message){var l="register_redirects: "+(r===i?"":(t.title_link_of(r)||r)+" → ")+t.title_link_of(i)+": ";if(a)return l+="Missing",void e.warn(l);l+=o(1===n.length?"無頁面重定向至本頁":"共有%1個{{PLURAL:%1|頁面}}重定向至本頁",n.length-1),1<n.length&&n.length<6&&(l+=": "+n.slice(1).map(function(e){return t.title_link_of(e)}).join(o("Comma-separator"))),e.info(l)}}function _(e,t){t.forEach(function(t,n){var r=d.redirects_data[e[n]];d.redirects_data[t]=r})}},u[3]);break;case"search":u[3]||(u[3]=Object.create(null)),u[3].next_mark||(u[3].next_mark=Object.create(null)),t.search([this.API_URL,u[1]],function(e,t){d.last_pages=e,e&&e.sroffset&&(u[3].next_mark.sroffset=e.sroffset),"function"==typeof u[2]?c=u[2].call(d,e||[],t):u[2]&&u[2].each&&d.work(u[2]),d.next(c)},a(this,u[3]));break;case"copy_from":this.running=!1,t.edit.copy_from.apply(this,u.slice(1));break;case"download":this.running=!1,t.download.apply(this,u.slice(1));break;case"check":u[1]=e.new_options(this.check_options,"boolean"==typeof u[1]?{force:u[1]}:"string"==typeof options?{title:u[1]}:u[1]),this.checking_now||"stopped"in this&&!u[1].force?(this.checking_now?e.debug("checking now...",3,"wiki_API.prototype.next"):e.debug("Skip check_stop().",1,"wiki_API.prototype.next"),setTimeout(this.next.bind(this,u[2],this.stopped),0)):(this.checking_now=u[1].title||!0,e.debug("以 .check_stop() 檢查與設定是否須停止編輯作業。",1,"wiki_API.prototype.next"),e.debug("Using options to call check_stop(): "+JSON.stringify(u[1]),2,"wiki_API.prototype.next"),u[1].token=this.token,u[1][n]=this,t.check_stop(function(t){delete d.checking_now,e.debug("check_stop: "+t,1,"wiki_API.prototype.next"),d.stopped=t,d.next(u[2],t)},u[1]));break;case"edit":if("string"==typeof u[2]&&(u[2]={summary:u[2]}),u[2]=e.setup_options(u[2]),u[2].page_to_edit||(u[2].page_to_edit=this.last_page||u[2].task_page_data),!u[2].page_to_edit)throw e.warn("wiki_API.prototype.next: No page in the queue. You must run .page() first! 另請注意: 您不能在 callback 中呼叫 .edit() 之類的 wiki 函數！請在 callback 執行完畢後再執行新的 wiki 函數！例如放在 setTimeout() 中。"),"object"==typeof console&&console.trace&&(console.trace(this),console.trace([this.actions.length,u])),new Error("No page in the queue.");if("string"!=typeof u[1]&&u[2]&&"new"!==u[2].section&&!t.content_of.had_fetch_content(u[2].page_to_edit))throw console.log(u),new Error("wiki_API.prototype.next: There are multiple threads competing with each other? 有多個執行緒互相競爭？");var h=function(){if(u[2].page_to_edit){var e=d.actions[0];e&&"edit"===e[0]&&"string"!=typeof e[1]&&e[2]&&"new"!==e[2].section&&u[2].page_to_edit===e[2].page_to_edit&&d.actions.unshift(["page",e[2].page_to_edit]),delete u[2].page_to_edit.revisions,delete u[2].page_to_edit}};if(!("stopped"in this)){e.debug("edit: rollback, check if need stop 緊急停止.",2,"wiki_API.prototype.next"),this.actions.unshift(["check",null,function(){e.debug("edit: recover next[2].page_to_edit: "+t.title_link_of(u[2].page_to_edit)+".",2,"wiki_API.prototype.next")}],u),this.next();break}if(this.stopped&&!u[2].skip_stopped){e.warn("wiki_API.prototype.next: 已停止作業，放棄編輯"+t.title_link_of(u[2].page_to_edit)+"！"),this.next(u[3],u[2].page_to_edit.title,"已停止作業");break}if(u[2].page_to_edit.is_Flow){if("new"!==u[2].section){e.warn("wiki_API.prototype.next: The page to edit is Flow. I cannot edit it directly: "+t.title_link_of(u[2].page_to_edit)),this.next(u[3],u[2].page_to_edit.title,"is Flow");break}if(!u[2].page_to_edit.header){this.actions.unshift(u),t.Flow.page(u[2].page_to_edit,function(){"function"==typeof u[3]&&(c=u[3].call(this,u[2].page_to_edit.title)),h(),d.next(c)},{flow_view:"header",session:this});break}if((!u[2]||!u[2].ignore_denial)&&t.edit.denied(u[2].page_to_edit,this.token.login_user_name,u[2]&&u[2].notification_name)){e.warn("wiki_API.prototype.next: Denied to edit flow "+t.title_link_of(u[2].page_to_edit)),this.next(u[3],u[2].page_to_edit.title,"denied");break}e.debug("直接採用 Flow 的方式增添新話題。"),"function"==typeof u[1]&&(u[1]=u[1].call(u[2],u[2].page_to_edit)),t.Flow.edit([this.API_URL,u[2].page_to_edit],u[2].sectiontitle,u[1].replace(/[\s\n\-]*~~~~[\s\n\-]*$/,""),this.token,a(this,u[2]),function(e,t,n){"function"==typeof u[3]&&(c=u[3].call(d,e,t,n)),h(),d.next(c)});break}if((!u[2]||!u[2].ignore_denial)&&t.edit.denied(u[2].page_to_edit,this.token.login_user_name,u[2]&&u[2].notification_name)){e.warn("wiki_API.prototype.next: Denied to edit "+t.title_link_of(u[2].page_to_edit)),this.next(u[3],u[2].page_to_edit.title,"denied");break}var m,y=function(e,t){m&&(d.actions.append(m),m=null),t?d.set_promise_relying(e):d.next(e)};if("function"==typeof u[1]&&(u[1]=u[1].call(u[2],u[2].page_to_edit)),u[2]&&u[2].skip_nochange&&u[1]===t.content_of(u[2].page_to_edit)){e.debug("Skip ["+u[2].page_to_edit.title+"]: The same contents.",1,"wiki_API.prototype.next"),y("function"==typeof u[3]&&u[3].call(this,u[2].page_to_edit.title,"nochange"));break}u[2].rollback_action=function(){d.actions.unshift(["page",u[2].page_to_edit.title],u),y(null,!0)},t.edit([this.API_URL,u[2].page_to_edit],u[1],this.token,a(this,u[2]),function(e,t,n){"function"==typeof u[3]&&(c=u[3].apply(d,arguments)),h(),y(c)});break;case"upload":var b=u[1];"object"==typeof b&&(b=b.file_path||b.media_url||b.file_url)?u.splice(1,0,b):"string"==typeof u[2]&&(u[2]={comment:u[2]}),t.upload(u[1],this.token.csrftoken,a(this,u[2]),function(e,t){d.next(u[3],e,t)});break;case"cache":e.is_Object(u[2])&&!u[3]&&u.splice(2,0,void 0),this.running=0<this.actions.length,t.cache(u[1],function(){"function"==typeof u[2]&&d.set_promise_relying(u[2].apply(this,arguments))},Object.assign({session:this},u[3]));break;case"listen":t.wmflabs||(this.running=!1),t.listen(u[1],a(this,u[2])),t.wmflabs&&this.next();break;case"data":if(!("data_session"in this)){this.actions.unshift(["set_data"],u),this.next();break}if("function"==typeof u[1]){if(e.debug("直接將 last_data 輸入 callback: "+u[1],3,"wiki_API.prototype.next.data"),l(this)){this.next(u[1],this.last_data);break}if(e.debug("last data 不能用。",3,"wiki_API.prototype.next.data"),!t.is_page_data(this.last_page)){this.next(u[1],void 0,{code:"no_id",message:"Did not set id! 未設定欲取得之特定實體 id。"});break}u.splice(1,0,this.last_page)}if("function"==typeof u[2]&&u.splice(2,0,null),t.is_entity(u[1])){this.last_data=u[1],this.next(u[3],this.last_data);break}t.is_page_data(u[1])&&!t.is_entity(u[1])&&(this.last_page=u[1]),t.data(u[1],u[2],function(e,t){d.last_data=e||{key:u[1],error:t},d.next(u[3],e,t)},a(this.data_session,u[4]));break;case"edit_data":if(!("data_session"in this)){this.actions.unshift(["set_data"],u),this.next();break}if("function"==typeof u[1]||e.is_Object(u[1])&&!t.is_entity(u[1]))if(e.debug("未設定/不設定 id，第一個 next[1] 即為 data。",6,"wiki_API.next.edit_data"),e.is_Object(u[2])&&u[2].new)u.splice(1,0,null);else if("function"!=typeof u[2]||u[3]||u.splice(2,0,null),l(this))u.splice(1,0,this.last_data);else{if(this.last_data&&this.last_data.error&&this.last_page===this.last_data[r]){e.debug("前一次之wikidata實體取得失敗",6,"wiki_API.next.edit_data"),this.next(u[3],void 0,{code:"last_data_failed",message:"前一次之wikidata實體取得失敗: ["+(this.last_data[r]||this.last_data.site+":"+this.last_data.title)+"]"});break}if(!this.last_page){this.next(u[3],void 0,{code:"no_id",message:"Did not set id! 未設定欲取得之特定實體 id。"});break}e.debug("自 .last_page "+t.title_link_of(this.last_page)+" 取得特定實體。",6,"wiki_API.next.edit_data"),u.splice(1,0,this.last_page)}0,"function"!=typeof u[3]||u[4]||u.splice(3,0,null),t.is_page_data(u[1])&&!t.is_entity(u[1])&&(this.last_page=u[1]),t.edit_data(u[1],u[2],this.data_session.token,a(this.data_session,u[3]),function(e,t){d.last_data=e||{last_data:d.last_data,key:u[1],error:t},d.next(u[4],e,t)});break;case"merge_data":if(!("data_session"in this)){this.actions.unshift(["set_data"],u),this.next();break}"function"!=typeof u[3]||u[4]||u.splice(3,0,null),t.merge_data(u[1],u[2],this.data_session.token,a(this.data_session,u[3]),function(e,t){d.next(u[4],e,t)});break;case"query_data":t.wdq(u[1],function(e){d.last_list=Array.isArray(e)?e:null,d.next(u[2],e)},u[3]);break;case"structured_data":if("function"==typeof u[1]){if(e.debug("直接取得 last_page 之 data: "+u[1],3,"wiki_API.prototype.next.structured_data"),!t.is_page_data(this.last_page)){this.next(u[1],void 0,{code:"no_id",message:"Did not set id! 未設定欲取得之特定實體 id。"});break}u.splice(1,0,this.last_page)}if(i(u[1])||s(u[1])||(u[1]=[t.site_name(this),u[1]]),"commonswiki"!==u[1][s(u[1])?"site":0]&&e.warn("wiki_API.prototype.next.structured_data: Should only using on commonswiki!"),this.is_namespace(u[1][s(u[1])?"title":1],"File")||e.warn("wiki_API.prototype.next.structured_data: Should only using on files! ("+u[1][s(u[1])?"title":1]+")"),"function"==typeof u[2]&&u.splice(2,0,null),t.is_entity(u[1][1])&&t.is_page_data(u[1][1])){e.debug("直接將 next[1] 輸入 callback: "+u[1][1],1,"wiki_API.prototype.next.edit_structured_data"),this.last_page=u[1][1],this.next(u[3],this.last_page);break}if(t.is_page_data(u[1][1])&&(u[1][1]=t.title_of(u[1][1])),t.is_entity(this.last_page)&&u[1][1]===this.last_page.title){this.next(u[3],this.last_page);break}u[4]=a(this,u[4]),u[4].data_API_URL=this.API_URL,t.data(u[1],u[2],function(e,n){e?t.is_page_data(u[1][1])?(d.last_page=Object.assign(t.is_page_data(u[1][1]),e),d.last_page[r]=e[r]):d.last_page=e:d.last_page={title:t.title_of(u[1][1]),error:n},d.next(u[3],e,n)},u[4]);break;case"edit_structured_data":if("string"==typeof u[1]?u[1]=[t.site_name(this),u[1]]:("function"==typeof u[1]||e.is_Object(u[1])&&!t.is_entity(u[1])&&!s(u[1]))&&(e.debug("未設定/不設定 id，第一個 next[1] 即為 data。",6,"wiki_API.next.edit_structured_data"),u.splice(1,0,this.last_page)),t.is_entity(this.last_page)&&u[1]&&this.last_page.title===(i(u[1])?u[1][1]:s(u[1])?s(u[1]).title:u[1].title)?u[1]=this.last_page:this.last_page.id&&"missing"in this.last_page&&s(this.last_page)&&s(this.last_page).title===u[1][1]&&(u[1]=this.last_page),"function"==typeof u[3]&&u.splice(3,0,null),t.is_entity(u[1]))e.debug("沿用原有 entity。",6,"wiki_API.next.edit_structured_data");else{if(!s(u[1])||!u[1][r]){0,t.is_page_data(u[1])||i(u[1])?(e.debug("先取得 last_page 之 data: "+u[1],3,"wiki_API.prototype.next.edit_structured_data"),this.actions.unshift(["structured_data",u[1]],u),this.next()):s(u[1])?(this.actions.unshift(["structured_data",s(u[1])],u),this.next()):this.next(u[4],void 0,{code:"no_id",message:"Did not set id! 未設定欲取得之特定實體 id。"});break}u[1]=s(u[1])}u[1]=Object.clone(u[1]),!u[1].claims&&u[1].statements&&(u[1].claims=u[1].statements,delete u[1].statements),u[3]=a(this,u[3]),u[3].data_API_URL=this.API_URL,t.edit_data(u[1],u[2],this.token,u[3],function(e,t){d.next(u[4],e,t)});break;case"move_page":"move_page"===p&&("function"==typeof u[3]?u.splice(3,0,{from:u[1]}):(u[3]=e.setup_options(u[3]),u[3].from=u[1]),u.splice(1,1),p="move_to");case"move_to":var v=null;"move_to"===p&&"string"==typeof u[1]&&(v=u[1],u.splice(1,1));case"remove":"remove"===p&&(p="delete");case"delete":case"protect":case"rollback":"string"==typeof u[1]&&(this.last_page={title:u[1]},u.splice(1,1)),"function"==typeof u[1]&&u.splice(1,0,void 0),u[1]||(u[1]=Object.create(null)),"move_to"===p&&v&&(u[1].to=v),this.stopped&&!u[1].skip_stopped?(e.warn("wiki_API.prototype.next: 已停止作業，放棄 "+p+" [["+(u[1].title||u[1].pageid||this.last_page&&this.last_page.title)+"]]！"),this.next(u[2],u[1],"已停止作業")):(u[1][n]=this,t[p](u[1],function(e,t){d.next(u[2],e,t)}));break;case"wait":this.actions.unshift(u);break;case"run":if("function"==typeof u[1])if(this.run_after_initializing&&!u[1].is_initializing_process)e.debug("It is now initializing. Push function into queue: "+u[1],1),this.run_after_initializing.push(u);else try{c=u[1].apply(this,u.slice(2))}catch(t){e.error(t)}this.next(c);break;case"run_async":var w=!1;if("function"==typeof u[1]&&(w=!0,u[1]=u[1].apply(this,u.slice(2))),e.is_thenable(u[1])){var k=this.next.bind(this);u[1].then(k,k)}else w||this.next();break;default:e.error("Unknown operation: ["+u.join()+"]"),this.next()}}else e.is_thenable(this.actions.promise_relying)?this.test_promise_relying():e.debug("The queue is empty.",2,"wiki_API.prototype.next")},t.prototype.next.methods="query_API|siteinfo|page|tracking_revisions|parse|redirect_to|purge|check|copy_from|download|edit|upload|cache|listen|category_tree|register_redirects|search|remove|delete|move_page|move_to|protect|rollback|logout|run|run_async|set_URL|set_language|set_data|data|edit_data|merge_data|query_data|structured_data|edit_structured_data|query".split("|");var _=/bot(?:$|[^a-z])|[機机][器械]人|ボット(?:$|[^a-z])|봇$/i;function u(e,r,i){if("string"!=typeof e&&(e=e&&String(e)||""),e=e.trim()){if(r){var a=t.namespace(r,this[n]);(r=t.title_link_of(r))&&(0!==a&&(r="'''"+r+"'''"),r+=" ")}e=(i?"# ":"* ")+(r||"")+e,this.push(e)}}function p(){this.start=this.last=new Date,this.clear()}function d(t,n,r){var i;if(t.slow_query_limit>0)i=t.slow_query_limit;else{t.login_user_info&&Array.isArray(t.login_user_info.rights)&&(i=t.login_user_info.rights.includes("apihighlimits"));var a="query+siteinfo";a=(a=t.API_parameters&&t.API_parameters[a])&&a.prop,i=i?a&&a.highlimit||500:a&&a.lowlimit||50}return n&&(0|n.slice)>=1&&(i=Math.min(0|n.slice,i)),!r||n&&n.is_id||(i=function(t,n,r){r>0||(r=8e3);var i=0,a=t.length;return t.some(function(e,t){return e&&e.pageid>=0?(i+=e.pageid.toString().length+3,t===a||t>=n||i>=r?(a=t,i=0,!0):void 0):(i=1,!0)})&&i>0&&(e.debug("Some pieces are not page data.",1,"check_max_length"),i=0,t.some(function(e,t){if(i+=encodeURIComponent(e&&e.title||e).length+3,t>=n||i>=r)return a=t,!0})),e.debug("1–"+a+"/"+t.length+", length "+i,2,"check_max_length"),a}(r,i)),i}t.prototype.work_date_format="%H:%M:%S",t.prototype.work_title_date_format="%4Y-%2m-%2d %H:%M:%S",t.prototype.work=function(r,i){if("function"==typeof r&&(r={each:r}),r&&r.each)if("no_edit"in r?r.no_edit||r.summary||e.warn("wiki_API.work: Did not set config.summary when edit page (config.no_edit="+r.no_edit+")!"):r.no_edit=!r.summary,i||(i=this.last_pages),i||r.run_empty){e.debug("wiki_API.work: 開始執行作業: 先作環境建構與初始設定。"),r.summary&&e.sinfo(["wiki_API.work: Start the operation [","fg=yellow",String(r.summary),"-fg","]"]);var a,s,l=r.options||{multi:!0,nocreate:1,minor:1,bot:1,tags:"",write_to:"",allow_empty:!1,skip_nochange:!0},f=0;if(e.is_Set(i)&&(i=Array.from(i)),Array.isArray(i)&&0===i.length)return r.no_warning||e.info("wiki_API.work: 列表中沒有項目，快速完結。"),void("function"==typeof r.last&&this.run(r.last.bind(l)));if("function"==typeof r.each)a=[r.each];else{if(!Array.isArray(r.each))throw new Error("wiki_API.work: Invalid function for each page!");a=r.each}if(!r.options)for(s in l)s in r&&(!r[s]&&s in{nocreate:1,minor:1,bot:1,tags:1}?delete l[s]:l[s]=r[s]);a[1]&&Object.assign(r.no_edit?r:l,a[1]),s=r.summary,l.summary=s?_.test(s)?s:(this.token.login_user_name&&this.token.login_user_name.length<9&&_.test(this.token.login_user_name)?this.token.login_user_name:"Robot")+": "+s:"Robot";var g,h=0,m=this,y=Object.assign(Object.create(null),t.prototype.work.log_item,r.log_item),b=[];b[n]=this,b.add=r.no_message?e.null_function:u,b.reset=r.no_message?e.null_function:p,b.reset(),s=a[2],a=a[0],s||(s=r.no_message?e.null_function:function(t,n,i){if(n){if("skip"===n)return h++,void f++;"nochange"===n?(h++,f++,n=o("no change"),i="nochange"):(g=g||n,r.onerror&&r.onerror(n),i=["error",n],n=o("finished: %1",'<span style="color:red; background-color:#ff0;">'+n+"</span>"))}else i&&i.edit?(h++,i.edit.newrevid?(n=" [[Special:Diff/"+i.edit.newrevid+"|"+o("finished")+"]]",i="succeed"):"nochange"in i.edit?(f++,n=o("no change"),i="nochange"):(e.error("無 result.edit.newrevid"),n=o("finished"),i="succeed")):(e.error("wiki_API.work: 無 result.edit"+(i&&i.edit?".newrevid":"")+"！可能是 token lost！"),n='no "result.edit'+(i&&i.edit?'.newrevid".':"."),i=["error","token lost?"]);y[Array.isArray(i)?i.join("_")in y?i.join("_"):i[0]:i]&&(n=o("%1 elapsed, %3 at %2",b.last.age(new Date),(b.last=new Date).format({zone:m.configurations.timeoffset/60,format:r.work_date_format||m.work_date_format}),n),b.add(n,t,!0))}),Array.isArray(i)&&i.slice(0,10).every(function(e){return"string"==typeof e})&&(b.input_title_list=!0);(m=this).running&&m.actions.length;0;var v,w,k=function(n,c){c?(e.error("wiki_API.work: Get error: "+(c.info||c)),n=[]):Array.isArray(n)||(n||0!==v?n?n=[n]:(e.error("wiki_API.work: No valid data got!"),n=[]):(e.info("wiki_API.work: "+r.summary+": 未取得或設定任何頁面。這個部份的任務已完成？"),n=[])),!b.input_title_list&&(i=r.next_mark)&&(i=JSON.stringify(i))&&(m&&("{}"===i||/^{"[^"]+":"[\-|]{0,9}"}$/.test(i))||b.add(m.continue_key+": "+i)),r.no_message||(i=o("First, it takes %1 to get %2 {{PLURAL:%2|page|pages}}.",b.last.age(new Date),n.length),b.last=new Date,y.get_pages&&b.add(i),e.debug(i,2,"wiki_API.work"),e.is_debug()&&e.show_value&&e.show_value(n,"pages")),i=n,"function"==typeof r.before&&r.before.call(m,b,i),"OK_length"in i?(w?E-=i.length-i.OK_length:e.error("wiki_API.work: 回傳內容超過限度而被截斷！僅取得 "+i.length+"/"+v+" 個頁面"),e.debug("一次取得大量頁面時，回傳內容超過限度而被截斷。將回退 "+(i.length-i.OK_length)+"頁"+(i[i.OK_length]?"，下次將自 "+i.OK_length+"/"+i.length+" "+t.title_link_of(i[i.OK_length])+" id "+i[i.OK_length].pageid+" 開始":"")+"。",1,"wiki_API.work"),i=i.slice(0,i.OK_length)):r.no_warning||i.length===v||e.warn("wiki_API.work: 取得 "+i.length+"/"+v+" 個頁面，應有 "+(v-i.length)+" 個不存在或重複頁面。");var u=0;function p(){var n,a;r.no_message||(e.debug("收尾。",1,"wiki_API.work"),n=r.no_edit?i.length===x?"":i.length+"/":i.length===x?h===i.length?"":h+"/":h===i.length?h+"//":h+"/"+i.length+"//",n+=E&&E<x?" "+E+"/"+x+" ("+(100*E/x|0)+"%)":x,n=new o.Sentence_combination(["%1 {{PLURAL:%2|page|pages}} processed"+(y.report?",":""),n,i.length]),y.report&&(f>0&&n.push(h===f?"no page modified,":["%1 {{PLURAL:%1|page|pages}} have not changed,",f]),n.push(["%1 elapsed.",b.start.age(new Date)]),b.unshift(n.toString()),n.truncate(1)),n=n.toString(),m.stopped&&b.add(o("'''Stopped''', give up editing.")),h!==f||r.no_edit||b.add(o("No changes.")),y.title&&r.summary&&b.unshift((a=r.summary,a.toString().replace(/</g,"&lt;").replace(/\[\[\s*(Category|分類|分类|カテゴリ|분류)\s*:/gi,"[[:$1:").replace(/{{/g,"&#123;&#123;")),""));"function"==typeof r.after&&r.after.call(m,b,i);var s="log_to"in r?r.log_to:m.token.login_user_name?"User:"+m.token.login_user_name+"/log/"+(new Date).format("%4Y%2m%2d"):null,l=m.configurations.timeoffset/60,c={section:"new",sectiontitle:(new Date).format({zone:l,format:r.work_title_date_format||m.work_title_date_format})+" UTC"+(l<0?"":"+")+l+": "+n+(r.log_section_title_postfix?" "+r.log_section_title_postfix:""),summary:(m.token.login_user_name&&_.test(m.token.login_user_name)?m.token.login_user_name:"Robot")+": "+r.summary+n,nocreate:1,bot:1,skip_stopped:!0};r.no_message||(s&&(h!==f||r.log_nochange)?m.page(s).edit(b.join("\n"),c,function(n,r,i){r&&(e.warn("wiki_API.work: Cannot write log to "+t.title_link_of(s)+"! Try to write to "+t.title_link_of("User:"+m.token.login_user_name)),e.log("\nlog:<br />\n"+b.join("<br />\n")),m.page("User:"+m.token.login_user_name).edit(b.join("\n"),c))}):e.log("\nlog:<br />\n"+b.join("<br />\n"))),!c.do_not_clean_parsed&&Array.isArray(i)&&i.forEach(function(e,t){e.parsed&&(e.parsed.truncate(),delete e.parsed)}),w&&(r.untouch_page_list?E:0)<A.length?setTimeout(w,0):("function"==typeof r.last&&m.run(r.last.bind(c,g)),r.no_message||m.run(function(){e.log("wiki_API.work: 結束 .work() 作業"+(r.summary?" ["+r.summary+"]":"。"))}))}!function n(){if(b.quit_operation&&(E=A.length,u=i.length),u<i.length){var c=i[u++];if(e.is_debug(2)&&e.show_value&&e.show_value(c,"page"),c){if(m.page(c,r.no_edit&&function(o,s){var l;e.log_temporary(u+"/"+i.length+" "+t.title_link_of(o));try{l=a.call(r,o,b,r)}catch(t){g=g||t,"object"==typeof t?console.error(t):e.error(["wiki_API.work: ",{T:["Page handling function error: %1",String(t)]}])}return e.is_thenable(l)?l.then(function(){m.run(n)},function(e){g=g||e,m.run(n)}):setTimeout(function(){m.run(n)},0),l},L),!r.no_edit){var _=Object.clone(l);_.task_page_data=c,m.edit(function(n){if(r.no_message)e.log_temporary(u+"/"+i.length+" "+t.title_link_of(n));else{var s=["wiki_API.work: "+o("Edit %1",u+"/"+i.length)+" "];"missing"in n?s.push("fg=yellow","Missing page"):"invalid"in n?s.push("fg=yellow","Invalid page title"):s.push("","[[","fg=yellow",n.title,"-fg","]]"),e.sinfo(s)}var l;try{l=a.call(this,n,b,r)}catch(t){g=g||t,"object"==typeof t?console.error(t):e.error(["wiki_API.work: ",{T:["Page edit function error: %1",String(t)]}])}return e.is_thenable(l)&&l.then(e.null_function,function(e){g=g||e}),l},_,function(e,t,r){s.apply(m,arguments),m.run(n)})}}else n()}else setTimeout(function(){m.run(p)},0)}()},A=i,x=A.length,O=d(this,r),E=0,S={do_not_import_original_page_data:!0,handle_continue_response:"merge_response",allow_missing:r.no_warning,multi:!0};Object.keys(S).append(["is_id","redirects","converttitles"]).forEach(function(t){t in r&&(e.debug("Copy ["+t+"] to page_options",2,"wiki_API.work"),S[t]=r[t])}),Object.assign(S,r.page_options);var L=Object.assign({allow_missing:!0},r.page_options);if(delete L.multi,!r.no_edit){var T=r.check_options;!T&&"string"==typeof r.log_to&&(T=r.log_to.match(/\d+$/))&&(T={section:T[0]}),T&&this.check(T)}Array.isArray(A)?(r.untouch_page_list||(A=A.slice()),w=function(){var t=r.untouch_page_list?A.slice(E,E+O):A.splice(0,O),n=d(this,r,t);n<O&&(r.untouch_page_list||Array.prototype.unshift.apply(A,t.slice(n)),t=t.slice(0,n)),0===E&&n===x?e.debug("設定一次先取得所有 "+n+" 個頁面之 revisions (page contents 頁面內容)。",2,"wiki_API.work"):(h=o("處理分塊 %1–%2",E+1,E+Math.min(n,x))+"/"+x,(x>1e4||Date.now()-r.start_working_time>12e4)&&(h+=c(E,x,r.start_working_time)),f="wiki_API.work: ",h=r.summary?[f,"fg=green",String(r.summary),"-fg",": "+h]:[f+h],e.sinfo(h)),h=f=0,b.reset(),v=t.length,E+=v,this.page(t,k,S)}.bind(this),r.start_working_time=Date.now(),w()):(e.debug("取得單一頁面之 (page contents 頁面內容)。",2,"wiki_API.work"),this.page(A,k,S))}else e.warn("wiki_API.work: No list. Please get list first!");else e.warn("wiki_API.work: Bad callback!")},t.prototype.work.log_item={title:!0,report:!0,get_pages:!0,error:!0,succeed:!0},t.assert_user_right=function(n,r,i){TODO,r="function"==typeof r&&r;var a=t.session_of_options(i),o="assert="+(n||"user");a.API_URL&&(e.debug("API URL: ["+a.API_URL+"]。",3,"wiki_API.assert_user_right"),o=[a.API_URL,o]),e.debug("action: ["+o+"]。",3,"wiki_API.assert_user_right"),e.debug("準備確認權限。",1,"wiki_API.assert_user_right"),t.query(o,function(t){if(""===t)return e.debug("You are already logged in.",1,"wiki_API.assert_user_right"),void r(t);r(t)})};t.prototype.get_token=function(n,r){var i=(r="string"==typeof r?{type:r}:e.setup_options(r)).type||"csrf",a=this,o=a.token;return!r.force&&o[i+"token"]?(n(o[i+"token"]),this):(e.debug("Try to get the "+i+"token ...",1,"wiki_API.prototype.get_token"),t.query([a.API_URL,"action=query&meta=tokens"+(i?"&type="+i:"")],function(t){if(t&&t.query&&t.query.tokens)return Object.assign(a.token,t.query.tokens),a.token[i+"token"]||(a.token[i+"token"]="+\\"),e.debug(i+"token: "+a.token[i+"token"]+("+\\"===a.token[i+"token"]?" (login as anonymous!)":""),1,"wiki_API.prototype.token"),void n(a.token[i+"token"]||a.token);e.error("wiki_API.prototype.token: Unknown response: ["+(t&&t.warnings&&t.warnings.tokens&&t.warnings.tokens["*"]||t)+"]"),e.is_debug()&&e.show_value&&e.show_value(t),n()},Object.create(null),a),this)},t.extract_login_user_name=function(e){var n=e.match(/^([^@\n]+)@/);return t.normalize_title(n?n[1].trim():e)},t.login=function(n,r,i){var a,o,s,l;function c(){if(s.actions[0]&&"login"===s.actions[0][0]&&s.actions.shift(),!(a||s.login_user_info&&s.login_user_info.name===s.token.login_user_name))return s.running=!1,void s.userinfo("rights|blockinfo|centralids",function(e,t){s.login_user_info=e,c()});o&&s.run(o.bind(s,s.token.login_user_name,a)),e.debug("已登入 ["+s.token.lgname+"]。自動執行 .next()，處理餘下的工作。",1,"wiki_API.login"),s.next()}function _(n,r){if(s.preserve_password||delete s.token.lgpassword,s.token.lgname&&(s.token.login_user_name=t.extract_login_user_name(s.token.lgname)),delete s.slow_query_limit,n&&n.warnings,r)a=r;else if(n&&(n=n.login))if("Success"===n.result)t.login.copy_keys.forEach(function(e){n[e]&&(s.token[e]=n[e])}),delete s.login_failed_count;else{if(s.login_failed_count>0){if(++s.login_failed_count>t.login.MAX_ERROR_RETRY)throw"wiki_API.login: Login failed "+s.login_failed_count+" times! Exit!"}else s.login_failed_count=1;e.error("wiki_API.login: login ["+s.token.lgname+"] failed "+s.login_failed_count+"/"+t.login.MAX_ERROR_RETRY+": ["+n.result+"] "+n.reason+" ("+s.API_URL+")"),"Failed"!==n.result||n.result,a=n}s.get_token(c)}if(i||r||!e.is_Object(n)||(n=(i=Object.clone(n)).user_name,r=i.password),e.is_Object(i)?(l=i.API_URL,s=t.session_of_options(i),o="function"==typeof i.callback&&i.callback):"function"==typeof i?(o=i,i=Object.create(null)):"string"==typeof i?(l=i,i=Object.create(null)):i=e.new_options(i),e.debug("API_URL: "+l+", default language: "+t.language,3,"wiki_API.login"),s?delete i.is_running:(n&&r&&(i.is_running="login"),s=new t(n,r,i)),!n||!r)return e.warn(["wiki_API.login: ",{T:"No user name or password provided. The login attempt was abandoned."}]),o&&s.run(o.bind(s)),s;e.import_options(i,f,s),"login_mark"in i&&!i.login_mark||i.is_running||(i.login_mark?s.actions.unshift(["login"]):s.actions.push(["login"]));var u={assert:"user"};return s.API_URL&&(e.debug("API URL: ["+s.API_URL+"]。",3,"wiki_API.login"),u=[s.API_URL,u]),e.debug("action: ["+u+"]。",3,"wiki_API.login"),e.debug("準備登入 ["+n+"]。",1,"wiki_API.login"),t.query(u,function(n){if(""===n&&!i.force)return e.debug("You are already logged in.",1,"wiki_API.login"),void _();delete s.token.csrftoken,t.query([s.API_URL,{action:"query",meta:"tokens",type:"login"}],function(n,r){if(r||!n||!n.query||!n.query.tokens||!n.query.tokens.logintoken)return e.error("wiki_API.login: 無法 login！ Abort! Response:"),a=r,e.error(a||n),void(o&&s.run(o.bind(s,null,a||n)));Object.assign(s.token,n.query.tokens);var i=Object.create(null);for(var l in t.login.parameters){var c=t.login.parameters[l];c in s.token&&(i[l]=s.token[c])}t.query([s.API_URL,{action:"login"}],_,i,s)},null,s)},null,s),s},t.login.MAX_ERROR_RETRY=2,t.login.parameters={lgname:"lgname",lgpassword:"lgpassword",lgtoken:"logintoken",lgdomain:"lgdomain"};var f={preserve_password:"boolean"};return t.login.copy_keys="lguserid,lgtoken,cookieprefix,sessionid".split(","),t.logout=function(e,n){var r="string"==typeof e?e:t.API_URL_of_options(e);t.query([r,"action=logout"],function(t){delete e.token,"function"==typeof n&&n.call(e,t)})},e.set_method(t,{max_slice_size:d,BLANK_TOKEN:"+\\"}),Object.assign(t,{estimated_message:c,PATTERN_BOT_NAME:_}),e.env.not_to_extend_keyword}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.parser",require:"application.net.wiki.|application.net.wiki.namespace.|application.net.wiki.task.|interact.DOM.",no_extend:"this,*",code:function(e){var t=e.application.net.wiki,n="".indexOf("_");function r(n,i){if("string"==typeof n||0===n)n=[String(n)];else if(t.is_page_data(n)){var a=n;if(a.parsed&&(!i||!i.reparse&&!i.wikitext))return a.parsed;n=(n=i&&i.wikitext||t.content_of(a,i||0))?[n]:[],a.parsed=n,n.page=a}else if(n){if(!Array.isArray(n)||"plain"!==n.type)throw new Error("page_parser: Invalid wikitext type: {"+typeof n+"} "+JSON.stringify(n)+".");if(n.options)return n}else t.is_valid_parameters_value(n)||e.warn("page_parser: Null wikitext: "+n),n=[];"string"==typeof i&&(i=e.setup_options(i)),e.is_Object(i)&&(n.options=i),Object.assign(n,r.parser_prototype),t.parse.set_wiki_type(n,"plain");var o=t.session_of_options(i);return o&&t.add_session_to_options(o,n),n}function i(e,t,n,r){if(!(t>=e.length)){n="number"==typeof n&&n>=0?Math.min(n,e.length):e.length;for(var i,a=t;t<n;t++){if("string"!=typeof(s=e[t])){if(!i)return;t--;break}if(s){if(i?i+=s:i=s,/[^\s\n]/.test(s))break;e[t]=""}}if(/^\s/.test(i))if(/^\s*?\n/.test(i)){for(var o;a>0;){var s;if(s=e[--a]){o=!/\n\s*?$/.test(s);break}}i=i.replace(/^\s*?\n/,o?"\n":"")}else i=i.replace(/^(\s)*/,r?"":"$1");else;return e[t]=i,t}}function a(t,n,r,a){void 0===n&&t.parent&&t.index>=0&&(n=t.index,t=t.parent);var o=t[n];t[n]="";var s=i(t,n+1,r,a);n>0&&/\n$/.test(t[n-1])&&/^\n/.test(t[s])?t[s]=t[s].replace(/^\n/,""):(0===n||/\n$/.test(t[n-1]))&&/^\s/.test(t[s])&&(n>0&&(t[n-1]=t[n-1].replace(/\n$/,"")),t[s]=t[s].replace(/^\s+/,""));var l=t.parent;if("list_item"===t.type&&l&&t.every(function(e){return e?"string"==typeof e?/^[\s\n]*$/.test(e):"transclusion"===e.type?/^Zh(-[a-z]+)?$/.test(e.name):"comment"===e.type:0!==e})){if(t.index=l.indexOf(t),t.index+1<l.length){var c=l[t.index+1],_=t.list_prefix.match(/^\n*/)[0];c.list_prefix=c.list_prefix.replace(/^\n*/,_)}l.splice(t.index,1)}else"list_item"===t.type&&e.debug("清除 token (如模板)時，還遺留具意涵的元素，未能完全清除掉此 token 所在的列表項目。可能需要手動修飾語句。",1,"remove_token_from_parent");return o}function o(n,i,s,l){if(this){var c;"function"==typeof n&&void 0===l&&(l=s,s=i,i=n,n=void 0),void 0===l&&"object"==typeof s?(s=(c=s).modify,l=c.max_depth):c=Object.create(null),"number"==typeof s&&s>0&&void 0===l&&(l=s,s=void 0);var _,u=t.session_of_options(c);if(!u&&(u=t.session_of_options(this)||t.session_of_options(this.options))&&t.add_session_to_options(u,c),n||""===n){if("string"!=typeof n)return void e.warn("for_each_token: Invalid type ["+n+"]");(_=n.match(/^(Template):(.+)$/i))&&(u?(_=u.redirect_target_of(n),_=u.remove_namespace(_)):_=t.normalize_title(_[2]),n="transclusion"),(n=n.toLowerCase().replace(/\s/g,"_"))in r.type_alias&&(n=r.type_alias[n]),n in t.parse.wiki_token_toString||e.warn("for_each_token: Unknown type ["+n+"]")}var p,d=c.slice;if(d>=0?d=[d]:d&&(!Array.isArray(d)||d.length>2)&&(e.warn("for_each_token: Invalid slice: "+JSON.stringify(d)),d=void 0),this.parsed||"function"!=typeof this.parse||this.parse(),Array.isArray(this)){var f,g,h,m=[];return c.use_global_index&&(!d&&this[t.KEY_page_data].parsed?(d=[this.range[0],this.range[1]])[0]>0&&d[0]--:delete c.use_global_index),function r(g,h,v){var w,k;function A(){if(p||w===k)f&&y(v);else{var e=g[w];if(n&&n!==(Array.isArray(e)?e.type:"plain")||_&&(u?!u.is_template(_,e):e.name!==_))return"all"===c.add_index&&"object"==typeof e&&(e.index=w,e.parent=g),O(e);c.add_index&&"string"!=typeof e&&(e.index=w,e.parent=g),t.template_functions&&t.template_functions.adapt_function(e,w,g,c);var r=i(e,w,g,h);b(r)||f?y(function(t){x(e,t)}):x(e,r)}}function x(n,r){return r===o.exit?(e.debug("Abort the operation",3,"for_each_token"),p=!0,O()):(r===o.remove_token?"list"===g.type?(g.splice(w--,1),k--):("tag"===n.type&&"ref"===n.tag&&n.attributes&&n.attributes.name&&(e.debug("將刪除可能被引用的 <ref>，並嘗試自動刪除所有引用。您仍須自行刪除非{{r|name}}型態的模板參考引用: "+n.toString(),1,"for_each_token"),m.push(n.attributes.name)),a(g,w,k),n=""):s&&("string"==typeof r&&(r=t.parse(r,c,[])),("string"==typeof r||Array.isArray(r))&&(g[w]=n=r)),O(n,r))}function O(e,t){t!==o.skip_inner&&Array.isArray(e)&&!e.is_atom&&e.length>0&&!p&&(!l||h+1<l)?r(e,h+1,E):f&&E()}function E(){w++,A()}for(d&&0===h?(w=0|d[0],k=d[1]>=0?Math.min(0|d[1],g.length):g.length):(w=0,k=g.length);w<k&&!p&&(A(),!f);)w++}(c.use_global_index?this[t.KEY_page_data].parsed:this,0,function(){f=f.then(v).then(g,h)}),f?new Promise(function(e,t){g=e,h=t}):v()}}function y(e){f=f.then(e)}function b(t){if(e.is_thenable(t))return f=f?f.then(function(){return t}):t,!0}function v(){0!==m.length&&(b(o.call(this,"tag_single",function(t,n,r){if("ref"===t.tag&&t.attributes&&m.includes(t.attributes.name))return e.debug("Also remove: "+t.toString(),3,"for_each_token"),o.remove_token})),b(o.call(this,"transclusion",function(t,n,r){if(o.ref_name_templates.includes(t.name)&&m.includes(t.parameters[1])){if(!t.parameters[2])return e.debug("Also remove: "+t.toString(),3,"for_each_token"),o.remove_token;e.warn("for_each_token: Cannot remove: "+t.toString())}})))}}function s(e){/\n$/.test(this.at(-1))||this.push("\n"),this.push(e,"\n")}r.parser_prototype={each:o,parse:function(e){if(!this.parsed||e&&(e.reparse||e.wikitext)){var n=e&&e.wikitext||this[0];!(n=t.parse(n,Object.assign({target_array:this},this.options,e)))||Array.isArray(n)&&"plain"===n.type||(this[0]=n),this.parsed=!0}return this},parse_references:function(e){if(this.reference_list)return this.reference_list;"function"==typeof e&&(e={processor:e});var t=new Array(1);return this.each(function(n){if(n.tag&&"ref"===n.tag.toLowerCase())if("function"==typeof e.processor&&e.processor.apply(null,arguments),n.attributes&&"name"in n.attributes){var r=n.attributes.name,i=t[r];i?(n.reference_index=i.length,i.push(n)):(n.reference_index=0,i=[n],t[r]=i,t.push(i)),!i.main&&"tag"===n.type&&n[1].toString().trim()&&(i.main=n)}else t.push(n)},!1,1/0),this.reference_list=t,t},get_categories:function(t){if(!this.category_Map){this.category_Map=new Map,(t=e.new_options(t)).is_existed=!0,delete t.category_name;var n=this;this.each("Category",function(e,r,i){return n.append_category(e,t)},{modify:t.remove_existed_duplicated})}return Array.from(this.category_Map.values())},append_category:function(n,r){if(r=e.setup_options(r),"string"==typeof n){if(!(n=n.trim()).startsWith("[[")){var i=n.match(/^([^|]+)(\|.*)$/),a=e.new_options(r);a.namespace="category",i?(i[1]=t.to_namespace(i[1],a),n=i[1]+i[2],i=null):n=t.to_namespace(n,a),n="[["+n+"]]"}n=t.parse(n,r)}var o=r.category_name||"function"==typeof r.get_key&&r.get_key(n,r)||n.name;this.category_Map||this.get_categories(r);if(!this.category_Map.has(o))return this.category_Map.set(o,n),void(r.is_existed||s.call(this,n));if(!n.sort_key)return;var l=this.category_Map.get(o);if(l.sort_key&&(e.warn("register_and_append_category: "+e.wiki.title_link_of(this.page)+": Multiple sort key: "+l+", "+n),r.do_not_overwrite_sort_key))return void(r.is_existed||s.call(this,n));0;if(l.set_sort_key(n.sort_key),r.is_existed)return this.each.remove_token},analysis_layout_indices:function(n){var r=this;if(r.layout_indices)return r.layout_indices;var i=Object.create(null),a=0,o=Object.create(null);function s(n,s,l){if(s===o){for(s=a;--s>=0&&"string"==typeof r[s]&&!r[s].trim(););0,s++}if(l||!(i[n]>=0))return i[n]=s>=0?s:a,!0;d.includes(n)&&e.error(["analysis_layout_indices: ",{T:["There are more than one %1 in %2",n,t.title_link_of(r.page)]}])}for(s("page_begin");a<r.length;a++){var l=r[a];if(l)if("string"!=typeof l)switch(l.type){case"transclusion":"Short description"===l.name?s("short_description"):/^(?:(?:About|For|Further|Main|Other|Redirect|See)(?:\w+|([\s\-]?\w+)+)?|Distinguish|Qnote)$/.test(l.name)?s("hatnote_templates"):/^(?:Db-\w+)$|^(?:Proposed deletion|Article for deletion)/.test(l.name)?(s("deletion_templates"),delete i.content):/^Pp/.test(l.name)?s("protection_templates"):/^Dispute/.test(l.name)?s("dispute_templates"):/^Infobox/.test(l.name)?s("infobox_templates"):/^Coord/.test(l.name)?s("coord_templates"):/^(?:\w[ _])?Talk:/.test(l.name)?(s("content"),s("lead_section_end",o)):s("maintenance_templates")||i.content_end>=0&&(s("footer"),/^(?:Succession|S-)$/.test(l.name)?s("succession_templates"):"Authority control"===l.name?s("authority_control_templates"):s("navigation_templates")||(/^(?:Featured list|Featured article|Good article)$/.test(l.name)?s("featured_template"):(/^Stub/.test(l.name)||i.categories>=0||i.DEFAULTSORT>=0)&&s("stub_templates")));break;case"section_title":s("content"),s("lead_section_end",o);break;case"magic_word_function":"DEFAULTSORT"===l.name&&s("DEFAULTSORT"),s("footer",o);break;case"category":s("footer",o),s("categories");break;case"comment":break;default:s("content"),i.content_end=a+1,delete i.navigation_templates,delete i.footer}else{if(!l.trim())continue;s("content")}}s("content"),s("content_end"),s("footer"),s("page_end"),"lead_section_end"in i||s("lead_section_end",o);return a=i.content,s("lead_templates_end",o),r.layout_indices=i},insert_layout_token:function(n,r){var i;"string"==typeof r?(i=r,r=Object.create(null)):(r=e.setup_options(r),i=r.location);i||("string"==typeof n&&(n=t.parse(n,r)),"category"===n.type&&(i="categories"));var a,o=this,s=o.analysis_layout_indices(r),l=s[i];if(!(l>=0)){if((a=p.indexOf(i))>=0)for(;++a<p.length&&!((l=s[p[a]])>=0););if(!(l>=0)){if(!r.force_insert)throw new Error("insert_layout_token: Cannot insert token as "+i);l=o.length}}var c=a>=0||!d.includes(i);"function"==typeof n&&(n=n.call(this,!c&&o[l],l,o));if(!t.is_valid_parameters_value(n))return;if("category"===n.type){var _;if(o.each("Category",function(e){if(n.name===e.name)return n.sort_key&&!e.sort_key?(e[2]=n.sort_key,_="changed"):_=!0,o.each.exit}),_)return"changed"===_}if(!/^\n/.test(n))for(var u=l;u>0;){var f=o[--u];if(f){/\n$/.test(f)||(n="\n"+n);break}}c&&o[l]?(/\n$/.test(n)||/^\n/.test(o[l])||(n+="\n"),n+=o[l]):/\n$/.test(n)||/^\n/.test(o[l+1])||(n+="\n");return o[l]=n,!0},insert_before:function(n,r,i){var a=t.parse(n,i,[]),o=this.order_list;a&&(a=c(a,o));if(!(a>=0))return e.warn("insert_before: skip error/unknown node: "+node_to_test),this;var s=this.length;for(;s-- >0;)if("string"!=typeof this[s]){var l=c(this[s],o);if(l>=0){if(l===a){this.splice(s,0,r);break}if(l<a){this.splice(s+1,0,r);break}}}return this},find_template:function(e,n){var r,i=t.session_of_options(n)||t.session_of_options(this);e=i?i.remove_namespace(e):e.replace(/^Template:/i,"");return e="Template:"+e,this.each(e,function(e,t,n){return(r=e).index=t,r.parent=n,o.exit},n),r}},r.type_alias={wikilink:"link",weblink:"external_link",table_caption:"caption",row:"table_row",tr:"table_row",th:"table_cell",td:"table_cell",template:"transclusion",text:"plain","":"plain"},r.footer_order=c,r.remove_heading_spaces=i,r.remove_token=a,r.token_is_children_of=function(e,t){for(var n;e&&(n=e.parent);){if(t(n))return!0;e=n}},Object.assign(o,{exit:"function"==typeof Symbol?Symbol("EXIT_for_each_token"):["for_each_token.exit: abort the operation"],skip_inner:"function"==typeof Symbol?Symbol("SKIP_CHILDREN"):["for_each_token.skip_inner: skip children"],remove_token:"function"==typeof Symbol?Symbol("REMOVE_TOKEN"):["for_each_token.skip_inner: remove current token"],ref_name_templates:["R"]});var l="transclusion|Coord,Coord Missing|Authority Control|Featured List,Featured Article,Good Article|Persondata|DEFAULTSORT,デフォルトソート|category|Stub".split("|").map(function(e){return e.includes(",")?e.split(","):e});function c(t,r){var i=t.type;if((r||(r=l),"category"===i)&&(a=r.lastIndexOf("category"))>=0)return a;if("transclusion"===i){for(var a=r.length,o=t.name;--a>0;){var s=r[a];if(Array.isArray(s)?s.includes(o):s===o)return a}if("transclusion"===r[0])return 0;0}if("comment"!==i&&"nowiki"!==t.tag)return i?(e.debug("skip error/unknown node: "+t),n):void 0}function _(n,r){var i=r.layout_list,a=i.shift();if(a){var o=a[1];if(Array.isArray(o)){if(0===o.length)return void _(n,r);o=o.shift(),i.unshift(a)}if(a=a[0],/^Template:/i.test(o))!function(e,n,r,i){t.redirects_here(n,function(n,a,o){var s=t.session_of_options(i).configuration.layout_index;s[e]||(s[e]=Object.create(null)),a.forEach(function(t){s[e][t.title]=null}),r()},Object.assign({include_root:!0},i))}(a,o,function(){_(n,r)},r);else{if(!/^Category:/i.test(o))throw new TypeError("Invalid layout to fetch: ["+a+"] "+o);!function(n,r,i,a){t.redirects_root(r,function(o,s){t.list(o,function(o){if(o.error)return e.error(o.error),void i();var s=t.session_of_options(a).configuration.layout_index;s[n]||(s[n]=Object.create(null)),o.forEach(function(e){s[n][e.title]=r}),i()},Object.assign({type:"categorymembers"},a))},a)}(a,o,function(){_(n,r)},r)}}else n()}var u={"short description":"Template:Short description",hatnote:"Category:Hatnote templates","deletion tag":["Category:Speedy deletion templates","Category:Proposed deletion-related templates","Category:Protection templates"],"date style":["Template:Use mdy dates","Template:Use dmy dates"],"foreign character warning box":"Category:Foreign character warning boxes"},p=["page_begin","short_description","hatnote_templates","deletion_templates","protection_templates","dispute_templates","maintenance_templates","infobox_templates","lead_templates_end","content","content_end","footer","succession_templates","navigation_templates","authority_control_templates","coord_templates","featured_template","DEFAULTSORT","categories","stub_templates","page_end"],d=["short_description","authority_control_templates","featured_template","DEFAULTSORT"];return Object.assign(t,{KEY_page_data:"function"==typeof Symbol?Symbol("page data"):"page data",switch_token:function(e,t){e.parent[e.index]=t,t.parent[t.index]=e;var n=e.index;e.index=t.index,t.index=n;var r=e.parent;e.parent=t.parent,t.parent=r},table_to_array:function(n,i){if(t.is_page_data(n)){"string"==typeof i&&(i={file:i});var a=[],o=[],s=i&&i.row_processor;return r(n).parse().forEach(function(t){if("section_title"===t.type){var n=t[0];"link"===n.type&&(n=n[0][0]),a.truncate(t.level),a[t.level]=n.toString().trim()}else"table"===t.type&&(e.debug(t.length+","+t.index+","+t.type,3),t.forEach(function(t){if("table_attributes"!==t.type){var n=[];t.forEach(function(t){if("table_attributes"!==t.type){var r;if("table_attributes"===t[0].type){(r=t[0].toString().match(/(?:^|\W)colspan=(?:"\s*)?(\d{1,2})/i))&&(r=r[1]-1);var i=t[0].toString().match(/(?:^|\W)rowspan=(?:"\s*)?(\d{1,2})/i);i&&i[1]>1&&e.error("We cannot deal with rowspan yet."),t=t.slice(1)}n.push(t&&t.join("").replace(/^[\|\s]+/,"").trim()||""),r>0&&n.append(new Array(r).fill(""))}}),n.length>0&&(i&&i.add_section_header&&(t.header_count>0?n.unshift("",""):n.unshift(a[2]||"",a[3]||"")),s&&(n=s(n)),o.push(n))}}))}),i&&i.file&&(e.write_file&&e.to_CSV_String?e.write_file(i.file,e.to_CSV_String(o,{field_delimiter:"\t"})):e.error("Must includes frrst: "+e.Class+".run(['application.platform.nodejs', 'data.CSV']);")),o}e.error("Invalid page data!")},array_to_table:function(t,n){if(n=e.setup_options(n),!t.length&&!1===n.is_header)return"";var r=['{| class="'+(t.class||n.class||"wikitable")+'"'];return(t.style||n.style)&&(r[0]+=' style="'+(t.style||n.style)+'"'),n.caption&&(r[0]+="\n|+ "+n.caption),t.forEach(function(e,t){var i=!0===n.is_header||void 0===n.is_header&&(0===t||"sortbottom"===e.class)?"!":"|";Array.isArray(e)&&(e=e.join(" "+i+i+" "));var a=e.class?' class="'+e.class+'"':"";e.style&&(a+=' style="'+e.style+'"'),r.push(a+"\n"+i+" "+e)}),r.join("\n|-")+"\n|}"},setup_layout_elements:function(n,r){var i=t.session_of_options(r);i.configuration||(i.configuration=Object.create(null));var a=i.configuration.layout_index;if(a)n();else{a=i.configuration.layout_index=Object.create(null);var o=[];for(var s in u){var l=u[s];o.push([s,l])}r.layout_list=o,e.info("setup_layout_elements: Get all elements..."),_(n,r)}}}),r}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.query",require:"application.net.Ajax.get_URL|application.net.|data.date.|application.net.wiki.|application.net.wiki.namespace.|application.net.wiki.task.",no_extend:"this,*",code:function(e){var t=this.r("get_URL"),n=e.application.net.wiki,r=(n.KEY_SESSION,n.setup_API_URL),i=n.BLANK_TOKEN,a=e.cache_gettext(function(e){a=e}),o=2;var s=new Set(["maxlag","ratelimited"]);function l(c,_,u,p){if(p=e.setup_options(p),"function"!=typeof _)throw new Error("wiki_API_query: No {Function}callback!");e.debug("action: "+c,2,"wiki_API_query"),c instanceof URL||e.is_URI(c)||("string"==typeof c&&/^https?:\/\//.test(c)?c=new e.URI(c):"string"==typeof c||c instanceof URLSearchParams||e.is_Search_parameters(c)||e.is_Object(c)?c=[,c]:Array.isArray(c)||(e.warn(["wiki_API_query: ",{T:["網址無效：%1","["+typeof c+"] "+c]}]),console.trace(c))),Array.isArray(c)?(e.is_Search_parameters(c[1])||("string"!=typeof c[1]||/^[a-z]+=/.test(c[1])||p.post_data_only||(e.warn(["wiki_API_query: ",{T:["Did not set %1!","action"]},{T:["將自動設定 %1。",JSON.stringify("action=")]}]),console.trace(c),c[1]="action="+c[1]),c[1]=e.Search_parameters(c[1])),e.debug("api URL: ("+typeof c[0]+") ["+c[0]+"]"+(c[0]===n.api_URL(c[0])?"":" → ["+n.api_URL(c[0])+"]"),3,"wiki_API_query"),c[0]=n.api_URL(c[0],p),c[0]=e.URI(c[0]),c[0].search_params.set_parameters(c[1]),c[2]&&c[0].search_params.set_parameters(c[2]),c=c[0]):c=e.URI(c),p.additional_query&&(c.search_params.set_parameters(p.additional_query),delete p.additional_query);var d=n.session_of_options(p);if(isNaN(c.search_params.maxlag)){var f=isNaN(p.maxlag)?d&&!isNaN(d.maxlag)?d.maxlag:l.default_maxlag:p.maxlag;f>=0&&(c.search_params.maxlag=f)}var g,h=u&&u.token,m=p.edit_time_interval>=0?p.edit_time_interval:l.default_edit_time_interval;if(h&&(g=m-(Date.now()-l.last_operation_time[c.origin])),g>0)return e.debug({T:["Waiting %1...",e.age_of(0,g,{digits:1})]},2,"wiki_API_query"),void setTimeout(function(){l(c,_,u,p)},g);h?l.last_operation_time[c.origin]=Date.now():e.debug("非 edit (modify)，不延遲等待。",3,"wiki_API_query");var y=c.toString();if(d&&d.general_parameters?c.search_params.set_parameters(d.general_parameters):!c.search_params.format&&n.general_parameters.format&&c.search_params.set_parameters(n.general_parameters),!u&&l.allow_JSONP)return e.debug("採用 JSONP callback 的方法。須注意：若有 error，將不會執行 callback！",2,"wiki_API_query"),e.debug("callback : ("+typeof _+") ["+_+"]",3,"wiki_API_query"),void t(c,{callback:_});var b=Object.assign(Object.clone(l.get_URL_options),p.get_URL_options);if(d){if("edit"===c.search_params.action&&u&&(!u.token||u.token===i)&&d.token&&(d.token.lgpassword||d.preserve_password))throw e.error("wiki_API_query: 未登錄編輯？"),new Error("wiki_API_query: 未登錄編輯？");d.get_URL_options||(e.debug("為 wiki_API instance，但無 agent，需要造出 agent。",2,"wiki_API_query"),r(d,!0)),Object.assign(b,d.get_URL_options)}p.form_data&&(e.debug("Set form_data",6),b.form_data=p.form_data);var v=b.agent;if(v&&v.last_cookie&&(v.last_cookie.length>80||v.cookie_cache)){if(v.last_cookie.length>80){e.debug("重整 cookie["+v.last_cookie.length+"]。",1,"wiki_API_query"),v.cookie_cache||(v.cookie_cache=Object.create(null));var w=v.last_cookie;for(v.last_cookie=[];w.length>0;){var k=w.pop();if(k){var A=k.match(/^([a-z_\d]{2,20})wiki/);if(A)(x=A[1])in v.cookie_cache?v.cookie_cache[x].push(k):v.cookie_cache[x]=[k];else v.last_cookie.push(k)}}e.debug("重整 cookie: → ["+v.last_cookie.length+"]。",1,"wiki_API_query")}var x;(x=n.get_first_domain_name_of_session(d))||(e.debug("未設定 session，自 API_URL 擷取 language: ["+c[0]+"]。",1,"wiki_API_query"),x=(x=n.site_name(c.origin,{get_all_properties:!0}))&&x.language||n.language,e.debug('Get "'+x+'" from '+c,1,"wiki_API_query")),(x=x.replace(/-/g,"_"))in v.cookie_cache&&(v.last_cookie.append(v.cookie_cache[x]),delete v.cookie_cache[x])}function O(t){return this.cached_response=e.deep_merge_object(this.cached_response,t),this.cached_response}"merge_response"===p.handle_continue_response?p.handle_continue_response=O:!0===p.handle_continue_response&&(p.handle_continue_response=function(e,t,n){if("query"!==!t.search_params.action){var r=e.query[t.search_params.prop||t.search_params.list||t.search_params.meta];Array.isArray(r)&&(this.cached_list?this.cached_list.append(r):this.cached_list=r)}}),t(c,function i(d,g){var v,w;if(g?v=g:(v=d.status,w=d.responseText),g||/^[45]/.test(v))"function"==typeof b.onfail?b.onfail(g||v):"function"==typeof _&&(e.warn("wiki_API_query: "+v+": "+c),_(w,g||v));else{if(e.debug("response ("+w.length+" characters): "+(e.platform.nodejs?"\n"+w:w.replace(/</g,"&lt;")),3,"wiki_API_query"),/<\html[\s>]/.test(w.slice(0,40))&&(w=w.between("source-javascript","</pre>").between(">").replace(/<[^>]+>/g,"")).includes("&#")&&(w=e.HTML_to_Unicode(w)),w)try{w=JSON.parse(w)}catch(t){return w.includes(">414 Request-URI Too ")?e.debug(c.toString(),1,"wiki_API_query"):(e.error("wiki_API_query: Invalid content: ["+String(w).slice(0,4e4)+"]"),e.error(t)),void(b.onfail?b.onfail(t):"function"==typeof _&&_(w,t))}if(w&&w.error&&(s.has(w.error.code)||Array.isArray(w.error.messages)&&w.error.messages.some(function(e){return"actionthrottledtext"===e.name}))){var k=w.error.info.match(/([0-9.-]+) seconds? lagged/);return k=k&&1e3*+k[1]||m,e.debug("The "+w.error.code+("maxlag"===w.error.code?" "+f+" s":"")+" hitted. Waiting "+e.age_of(0,k,{digits:1})+" to re-execute wiki_API.query().",1,"wiki_API_query"),void setTimeout(l.bind(null,y,_,u,p),k)}if(p.handle_continue_response&&!w.error&&"continue"in w){for(var A in p.handle_continue_response(w,c,u),w.continue){var x=w.continue[A];c.search_params[A]=x,c.href.length>2e3&&(delete c.search_params[A],u||(u=Object.create(null)),u[A]=x)}t(c,i,null,u,b)}else{if(p.handle_continue_response===O&&delete(w=p.handle_continue_response(w)).continue,"function"!=typeof p.rollback_action){if(h&&(!u||!u.token))throw new Error("wiki_API_query: Edit without options.rollback_action!");p.requery=l.bind(null,y,_,u,p)}!function(t,i,s){var l=n.session_of_options(s);if(l)if(t?t.error?"badtoken"!==t.error.code&&"notoken"!==t.error.code:!s.rollback_action||s.get_page_before_undo||t.edit||"ok"===t.status||t.success:""!==t)t&&t.edit&&("retry_login"in l&&(console.trace("已成功 edit，去除 retry flag。"),delete l.retry_login),"badtoken_count"in l&&(console.trace("已成功 edit，去除 badtoken_count flag。"),delete l.badtoken_count)),i(t);else{if(l.badtoken_count>0?l.badtoken_count++:l.badtoken_count=1,e.warn(["check_session_badtoken: ",(new Date).format()," ",n.site_name(l),": ",{T:"似乎丟失了令牌。"},"("+l.badtoken_count+"/"+o+")"]),l.badtoken_count>=(isNaN(l.max_badtoken_count)?o:l.max_badtoken_count))throw new Error("check_session_badtoken: "+a("Too many badtoken errors! Please re-execute the program!"));if(!e.platform.nodejs)return e.warn(["check_session_badtoken: ",{T:"Not using node.js!"}]),void i(t);if(!l.token.lgpassword)throw new Error("check_session_badtoken: "+a("未保存密碼！"));if("function"==typeof s.rollback_action)s.rollback_action();else{if(!s.requery){var c="check_session_badtoken: "+a("Did not set %1!","options.rollback_action()");throw new Error(c)}l.actions.unshift(["run",s.requery])}if(r(l,!0),"retry_login"in l){if(++l.retry_login>("max_retry_login"in l?l.max_retry_login:2))throw new Error("check_session_badtoken: "+a("Too many failed login attempts: %1","["+l.token.lgname+"]"));e.info("check_session_badtoken: Retry "+l.retry_login)}else l.retry_login=0;e.info(["check_session_badtoken: ",{T:"嘗試重新取得令牌。"}]),n.login(l.token.lgname,l.token.lgpassword,{force:!0,session:l,login_mark:!0})}else i(t)}(w,_,p)}}},null,u,b)}function c(){return this.join("|")}function _(){return"["+this.code+"] "+(this.info||this.message)}return l.get_URL_options={head:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},error_retry:4,timeout:e.to_millisecond("1 min")},l.default_maxlag=5,l.default_edit_time_interval=5e3,l.edit_time_interval={},l.allow_JSONP=e.is_WWW(!0)&&!1,l.last_operation_time=Object.create(null),l.title_param=function(t,r,i,a){var o;Array.isArray(t)?(void 0===r&&(r=o&&o.length>1),o=[],t.every(function(e){if(e&&e.pageid>=0&&e.pageid<1/0)return o.push(e.pageid),!0})?o.toString=c:(e.is_Object(t)&&(e.warn("wiki_API_query.title_param: 看似有些非正規之頁面資料。"),e.info("wiki_API_query.title_param: 將採用 title 為主要查詢方法。")),(o=t.map(function(e){return("object"==typeof e?e.title:e)||""})).toString=c,i||(t=o,o=void 0),e.debug((o||t).toString(),2,"wiki_API_query.title_param"))):e.is_Object(t)?t.pageid>0?o=t.pageid:t=t.title:!1!==i&&"number"==typeof t&&t>0&&t===(0|t)?o=t:t||e.error(["wiki_API_query.title_param: ",{T:["Invalid title: %1",n.title_link_of(t)]}]);var s=new e.Search_parameters;return void 0!==o?s[r?"pageids":"pageid"]=o:t&&(s[a||(r?"titles":"title")]=t),s},l.id_of_page=function(t,r){return Array.isArray(t)?t.map(function(e){l.id_of_page(e,r)}):e.is_Object(t)?!r&&t.pageid||t.title:(t||e.error(["wiki_API_query.id_of_page: ",{T:["Invalid title: %1",n.title_link_of(t)]}]),t)},l.error_toString=_,l.handle_error=function(t,n,r){if(e.is_debug(3)&&e.show_value&&e.show_value(t,"wiki_API_query.handle_error"),n||t||(n=new Error("No data get!")),n)return"function"==typeof r&&r(t,n),n;if(t.warnings){for(var i in t.warnings)e.warn("handle_error: "+t.warnings[i]["*"]);console.trace(t.warnings)}if(n=t.error){if(n.toString=_,n.code){var a=n.toString();Array.isArray(n.messages)&&n.messages.forEach(function(e){e&&(a+=" ["+e.name+"]",e.html&&"string"==typeof e.html["*"]&&e.html["*"].length<200&&(a+=" "+e.html["*"]),Array.isArray(e.parameters)&&e.parameters.length>0&&(a+=" "+JSON.stringify(e.parameters)))}),(n=new Error(a)).message=a,n.code=t.error.code,n.data=t.error}return"function"==typeof r&&r(t,n),n}},l}}),"function"==typeof CeL&&CeL.run({name:"application.storage",require:detect_require,code:function(e){var t,n=function(){};if(n.prototype={},e.platform.nodejs){e.debug("application.storage: use node.js functions."),t=e.application.platform.nodejs;var r=require("fs");n.working_directory=t.working_directory,n.fso_status=t.fs_status,n.chmod=t.chmod,n.file_exists=t.file_exists,n.directory_exists=t.directory_exists,n.read_file=t.fs_read,n.write_file=t.fs_write,n.copy_file=t.fs_copySync,n.remove_file=n.remove_directory=function(e,n){return t.fs_remove(e,n)},n.move_directory=n.move_file=n.move_fso=t.fs_move,n.read_directory=function(t,n){try{return r.readdirSync(t,n)}catch(n){e.debug("Error to read directory: "+t)}},n.directory_is_empty=function(e,t){var r=n.read_directory(e,t);return Array.isArray(r)&&0===r.length},n.create_directory=t.fs_mkdir,n.traverse_file_system=t.traverse_file_system}else this.has_ActiveX&&(t=e.application.OS.Windows.file,n.working_directory=t.working_directory,n.read_file=t.read_file,n.write_file=t.write_file);function i(e,t){for(t&&(e=e.replace(i.PATTERN,function(e,t,n,r){return r||""}));n.fso_status(e);)e=e.replace(i.PATTERN,function(t,n,r,a){if(r>i.max_index)throw new Error("get_not_exist_filename: The index "+r+" is too big! "+e);return(n||!r?" ":"")+"("+(1+(0|r))+")"+(a||"")});return e}n.write_file&&(n.write_file__OS_adapted=n.write_file,n.write_file=function(t,r,i){if(e.is_Object(r)&&/.json$/i.test(t))try{r=JSON.stringify(r)}catch(n){throw e.debug(r),e.error("write_file: Failed to write to "+t+": "+n),e.error(n),n}if(i&&i.changed_only){var a=n.read_file(t,i);if(String(r)===String(a))return new Error("Nothing changed")}if(i&&i.backup&&n.file_exists(t)){var s="string"==typeof i.backup?/[\\\/]/.test(i.backup)?{directory:i.backup}:{directory_name:i.backup}:e.new_options(i.backup);!s.directory&&s.directory_name&&(s.directory=t.replace(/[^\\\/]+$/,"")+s.directory_name);var l=s.directory?o(s.directory,t.match(/[^\\\/]+$/)[0]):s.extension?t+s.extension:t.replace(/(\.\w+)$/,(s.file_name_mark||".bak")+"$1");s.directory&&n.create_directory(s.directory),n.remove_file(l),n.move_file(t,l)}return n.write_file__OS_adapted(t,r,i)}),i.PATTERN=/( )?(?:\((\d{1,3})\))?(\.[^.]*)?$/,i.max_index=999,n.next_fso_NO_unused=i,n.move_fso_with_NO=function(e,t){t=i(t),n.move_fso(e,t)},n.first_exist_fso=function(e){var t;if(Array.isArray(e)||(e=[e]),e.some(function(e){if(n.fso_status(e))return t=e,!0}))return t};var a=e.env.path_separator;function o(e,t){return e?(/[\\\/]$/.test(e)?e=e.replace(/[\\\/]{2,}$/,function(e){return e[0]}):e+=e.includes("/")?"/":e.includes("\\")||e.endsWith(":")?"\\":a,(t||0===t)&&(t=String(t).replace(/^(\.{0,2}[\\\/])+/,"")),t?e+t:e):e}return n.append_path_separator=o,n.extract_wildcard=function(t,n){var r=e.simplify_path(t).match(/^([\s\S]*[\\\/])?([^\\\/]+)$/);if(!r)return[t];var i=r[1]||"."+a;r=r[2],t=e.wildcard_to_RegExp(r);var o=e.read_directory(i);return o=o.filter(function(e){return t.test(e)||e===r}),n&&n.get_name||(o=o.map(function(e){return i+e})),o},n.determin_download_directory=function(t){var r=t&&e.platform.nodejs&&require.main&&require.main.filename;return r&&!/\.html?$/i.test(r)?r=r.match(/[^\\\/]+$/)[0].replace(/\.js$/i,""):t&&(r=n.working_directory().replace(/[\\\/]+$/,""))||((r=e.env.home)?["Downloads","下載"].some(function(e){if(e=o(r,e),n.directory_exists(e))return r=e,!0})?e.debug("預設的主要下載目錄設置於用戶預設之下載目錄下: "+r,1,"determin_download_directory"):e.debug("預設的主要下載目錄設置於用戶個人文件夾  home directory 下: "+r,1,"determin_download_directory"):(e.warn("determin_download_directory: Cannot determin main download directory!"),r=".")),r=o(r),e.debug("預設的主要下載目錄: "+r,1,"determin_download_directory"),r},n}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.Flow",require:"data.native.|application.net.wiki.|application.net.wiki.namespace.|application.net.wiki.query.",no_extend:"this,*",code:function(e){var t=e.application.net.wiki,n=t.KEY_SESSION,r=t.is_api_and_title,i=t.normalize_title_parameter;function a(n,r,a){var s=i(n,a);if(!s)throw"Flow_info: Invalid title: "+t.title_link_of(n);s[1]="action=query&prop=info&"+s[1],t.query(s,"function"==typeof r&&function(t){e.is_debug(2)&&e.show_value&&e.show_value(t,"Flow_info: data");var n=t&&t.error;if(n)return e.error("Flow_info: ["+n.code+"] "+n.info),t.warnings&&t.warnings.query&&t.warnings.query["*"]&&e.warn(t.warnings.query["*"]),void r();if(!t||!t.query||!t.query.pages)return e.warn("Flow_info: Unknown response: ["+("object"==typeof t&&"undefined"!=typeof JSON?JSON.stringify(t):t)+"]"),e.is_debug()&&e.show_value&&e.show_value(t),void r();t=t.query.pages;var i=[];for(var s in t){var l=t[s];i.push(l)}a&&a.multi||(i.length<=1?((i=i[0])&&(i.is_Flow=o(i)),e.debug("只取得單頁面 [["+i.title+"]]，將回傳此頁面資料，而非 Array。",2,"Flow_info")):e.debug("Get "+i.length+" page(s)! The pages will all passed to callback as Array!",2,"Flow_info")),r(i)},null,a)}function o(e){if("contentmodel"in e)return"flow-board"===e.contentmodel;var n=e&&e.flowinfo;return n?n.flow&&"enabled"in n.flow:(e=t.content_of.revision(e))?"flow-board"===(e.contentmodel||e.slots&&e.slots.main&&e.slots.main.contentmodel):void 0}var s={header:"h",topiclist:"tl"};function l(i,a,o){var c;r(i)||(i=[o[n]&&o[n].API_URL,i]),t.is_page_data(i[1])&&(c=i[1]),i[1]="page="+encodeURIComponent(t.title_of(i[1])),o&&o.redirects&&(i[1]+="&redirects=1");var _=o&&o.flow_view||l.default_flow_view;i[1]="action=flow&submodule=view-"+_+"&v"+(s[_]||_.charAt(0).toLowerCase())+"format="+(o&&o.format||"wikitext")+"&"+i[1],i[0]||(i=i[1]),t.query(i,"function"==typeof a&&function(t){e.is_debug(2)&&e.show_value&&e.show_value(t,"Flow_page: data");var n=t&&t.error;return n?(e.error("Flow_page: ["+n.code+"] "+n.info),void a(c)):(t=t.flow)&&(t=t["view-"+_])&&"ok"===t.status?(c?Object.assign(c,t.result):c=t.result[_],void a(c)):(e.error("Flow_page: Error status ["+(t&&t.status)+"]"),void a(c))},null,o)}function c(r,i,a,o,s,l){if(e.is_thenable(a))a.then(function(e){c(r,i,e,o,s,l)},function(e){l(r,e)});else{var _="action=flow";Array.isArray(r)?(_=[r[0],_],r=r[1]):s[n]&&(_=[s[n].API_URL,_]),t.is_page_data(r)&&(r=r.title),r.length>260&&(e.warn("edit_topic: Title is too long and will be truncated: ["+error.code+"]"),r=r.slice(0,260));var u={submodule:"new-topic",page:r,nttopic:i,ntcontent:a,ntformat:"wikitext"};c.copy_keys.forEach(function(e){s[e]&&(u[e]=s[e])}),u.token=e.is_Object(o)?o.csrftoken:o,t.query(_,"function"==typeof l&&function(t){e.is_debug(2)&&e.show_value&&e.show_value(t,"edit_topic: data");var n=t&&t.error;n?e.error("edit_topic: ["+n.code+"] "+n.info):(t=t.flow)&&(t=t["new-topic"])&&"ok"===t.status||(n="edit_topic: Bad status ["+(t&&t.status)+"]",e.error(n)),"function"==typeof l&&l(r.title,n,t)},u,s)}}return l.default_flow_view="topiclist",c.copy_keys="summary|bot|redirect|nocreate".split(","),Object.assign(a,{is_Flow:o,page:l,edit:c}),a}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.page",require:"data.native.|data.|data.date.|application.storage.|application.net.Ajax.|application.net.wiki.|application.net.wiki.namespace.|application.net.wiki.query.|application.net.wiki.Flow.",no_extend:"this,*",code:function(e){var t=e.application.net.wiki,n=t.KEY_SESSION,r=t.is_api_and_title,i=t.normalize_title_parameter,a=t.set_parameters,o=e.platform.nodejs&&require("fs"),s="".indexOf("_"),l=e.cache_gettext(function(e){l=e});var c="keep index",_="keep order";function u(n,r,i){var a=t.session_of_options(i);p.query_modules=Object.keys(a.API_parameters.query).filter(function(e){var t=a.API_parameters.query[e];return t.limit&&t.submodules}),e.info(["setup_query_modules: ",{T:["Found %2 query {{PLURAL:%2|module|modules}}: %1",p.query_modules.join(l("Comma-separator")),p.query_modules.length]}]),p.apply(this,arguments)}function p(o,s,f){var g={action:"query"};if(!t.need_get_API_parameters(g,f,u,arguments))if("object"==typeof s&&void 0===f&&(f=s,s=void 0),(f=e.new_options(f)).get_creation_Date)p(o,function(e,n){!n&&t.content_of.page_exists(e)?(e.creation_Date=t.content_of.edit_time(e),"function"==typeof f.get_creation_Date&&f.get_creation_Date(e.creation_Date,e),delete f.get_creation_Date,delete e.revisions,"query_props"in f||"prop"in f?p(o,function(t,n){s(Object.assign(e,t),n)},f):s(e)):s(e,n)},{rvdir:"newer",rvprop:"timestamp",rvlimit:1});else{if(f.query_props){var h,m=f.query_props,y=function(t){var n;for(t&&(h?Object.assign(h,t):h=t);m.length>0&&!(n=m.shift()););!n||h&&("missing"in h||"invalid"in h)?s(h):(e.debug("Get property: ["+n+"]",1,"wiki_API_page"),f.prop=n,p(o,y,f))};if(delete f.query_props,"string"==typeof m&&(m=m.split("|")),!Array.isArray(m))throw e.error(["wiki_API_page: ",{T:["Invalid parameter: %1",".query_props"]}]),new Error("wiki_API_page: "+l("Invalid parameter: %1",".query_props"));return f.no_content||m.push("revisions"),void y()}if(!(g=i(o,f)))return e.error(["wiki_API_page: ",{T:["Invalid title: %1",t.title_link_of(o)]}]),void s(void 0,l("Invalid title: %1",t.title_link_of(o)));p.query_modules&&p.query_modules.some(function(e){return f[e]})||(f.prop="revisions");var b=f.prop&&f.prop.includes("revisions");for(var v in b&&(g[1].rvslots=f.rvslots||"main","rvlimit"in f?(f.rvlimit>0||"max"===f.rvlimit)&&(g[1].rvlimit=f.rvlimit):g[1].titles||g[1].pageids||(g[1].rvlimit=1),b=Array.isArray(f.rvprop)&&f.rvprop.join("|")||f.rvprop||p.default_rvprop,g[1].rvprop=b,b=b.includes("content")),"converttitles"in f||(f.converttitles=t.site_name(f,{get_all_properties:!0}).language,p.auto_converttitles.includes(f.converttitles)||delete f.converttitles),Array.isArray(f.prop)&&(f.prop=f.prop.join("|")),{rvdir:!0,rvcontinue:!0,converttitles:!0,prop:!0})v in f&&(g[1][v]=f[v]);a(g,f),g[1].action="query",e.debug("get url token: "+g,5,"wiki_API_page");var w=e.Search_parameters();Array.isArray(g[1].pageids)&&(w.pageids=g[1].pageids,delete g[1].pageids),Array.isArray(g[1].titles)&&(w.titles=g[1].titles,delete g[1].titles),t.query(g,"function"==typeof s&&function(i){e.is_debug(2)&&e.show_value&&e.show_value(i,"wiki_API_page: data");var a=i&&i.error;if(a){if(e.error("wiki_API_page: ["+a.code+"] "+a.info),i.warnings&&i.warnings.query&&i.warnings.query["*"]&&e.warn("wiki_API_page: "+i.warnings.query["*"]),"toomanyvalues"===a.code&&a.limit>0){var l=t.session_of_options(f);if(!l||l.slow_query_limit<a.limit||(e.warn(["wiki_API_page: ",{T:["調降取得頁面的上限，改成每次最多 %1 個頁面。",a.limit]}]),l.slow_query_limit=a.limit),f.try_cut_slice&&Array.isArray(o)&&o.length>2)return f.multi=!0,f.slice_size=a.limit,void p(o,s,f)}s(i,a)}else{if(!i||!i.query||!i.query.pages&&!i.query.redirects)return e.warn(["wiki_API_page: ",{T:["Unknown API response: %1","object"==typeof i&&"undefined"!=typeof JSON?JSON.stringify(i):i]}]),e.is_debug()&&e.show_value&&e.show_value(i),void s(void 0,"Unknown response");var u,g,h,m=[],y=m.index_of_title=Object.create(null),v=e.write_file&&f.page_cache_prefix;"continue"in i&&i.continue&&"string"==typeof i.continue.rvcontinue&&(u=i.continue.rvcontinue.match(/\|([1-9]\d*)$/))&&(u=Math.floor(u[1])),i.query.redirects&&(m.redirects=i.query.redirects,Array.isArray(i.query.redirects)&&(m.redirect_from=g=Object.create(null),i.query.redirects.forEach(function(e){g[e.to]=e.from}),i.query.pages||(i.query.pages={title:i.query.redirects[0].from},i.query.pages.title===g[i.query.redirects[0].to]&&(e.warn(["wiki_API_page: ",{T:["Circular redirect: %1↔%2",t.title_link_of(i.query.pages.title),t.title_link_of(i.query.redirects[0].to)]}]),i.query.pages.redirect_loop=!0),i.query.pages={"":i.query.pages}))),i.query.converted&&(m.converted=i.query.converted,Array.isArray(i.query.converted)&&(m.convert_from=h=Object.create(null),i.query.converted.forEach(function(e){h[e.to]=e.from}))),i.query.normalized&&(m.normalized=i.query.normalized,m.convert_from=h||(h=Object.create(null)),i.query.normalized.forEach(function(e){h[e.to]=e.from}));var w=i.query.pages,k=!f.allow_missing&&b;for(var A in w){var x=w[A];if(t.content_of.has_content(x)?v&&e.write_file(v+x.title+".json",JSON.stringify(w),t.encoding,function(){e.debug("The cache file is saved.",1,"wiki_API_page")}):(u&&u===x.pageid&&(m.OK_length=m.length,k=!1),k&&e.warn(["wiki_API_page: ",{T:["invalid"in x?"Invalid title: %1":"missing"in x?"Does not exist: %1":"No content: %1",(x.title?t.title_link_of(x):"id "+x.pageid)+(x.invalidreason?". "+x.invalidreason:"")]}])),g&&g[x.title]&&!x.redirect_loop)for(x.original_title=x.redirect_from=g[x.title];g[x.original_title];)x.original_title=g[x.original_title];if(h)for(h[x.title]&&(x.convert_from=h[x.title],x.original_title&&h[x.original_title]||(x.original_title=x.convert_from));h[x.original_title];)x.original_title=h[x.original_title];y[x.title]=m.length,m.push(x)}if(i.warnings&&i.warnings.query&&"string"==typeof i.warnings.query["*"]&&(k&&e.warn("wiki_API_page: "+i.warnings.query["*"]),i.warnings.query["*"].includes("the limit is ")&&(m.truncated=!0)),f.multi){if((f.multi===c||f.multi===_)&&r(o,!0)&&Array.isArray(o[1])&&o[1].length>=2){var O=o[1].map(function(e){return f.is_id?e.pageid||e:t.title_of(e)}).to_hash(),E=[];0,m.forEach(function(e){var n=e.original_title||e.title;if(!(n in O))throw console.log(O),console.log(n),console.log("-".repeat(70)),console.log("Page list:"),console.log(o[1].map(function(e){return t.title_of(e)}).join("\n")),console.log(e),new Error("wiki_API_page: 取得了未指定的頁面: "+t.title_link_of(n));E[O[n]]=e}),f.multi===_&&(E=E.filter(function(e){return!!e})),["OK_length","truncated","normalized","index_of_title","redirects","redirect_from","converted","convert_from"].forEach(function(e){e in m&&(E[e]=m[e])}),m=E}}else if(m.length<=1){if(e.debug("只取得單頁面 "+t.title_link_of(m)+"，將回傳此頁面內容，而非 Array。",2,"wiki_API_page"),m=m[0],r(o,!0)&&(o=o[1]),!f.do_not_import_original_page_data&&t.is_page_data(o)&&("missing"in o&&delete o.missing,m=Object.assign(o,m)),m&&b&&(m.is_Flow=t.Flow.is_Flow(m))&&f.flow_view)return void t.Flow.page(m,s,f)}else e.debug("Get "+m.length+" page(s)! The pages will all passed to the callback as Array!",2,"wiki_API_page");if(f.save_response&&(m.response=i),f.expandtemplates){if(f.titles_left)throw new Error("There are options.titles_left!");if(!Array.isArray(m)){var S=t.content_of.revision(m);return S?void d(t.revision_content(S),function(){s(m)},Object.assign({page:m,title:x.title,revid:S.revid,includecomments:f.includecomments,session:f[n]},f.expandtemplates)):void s(m)}m.run_serial(function(e,r,i){var a=t.content_of.revision(r);d(t.revision_content(a),e,Object.assign({page:r,title:r.title,revid:a&&a.revid,includecomments:f.includecomments,session:f[n]},f.expandtemplates))},function(){s(m)})}else{if(f.titles_left)return f.titles_buffer?(f.titles_buffer.append(m),m.truncate(),e.error("wiki_API_page: Lost properties: "+Object.keys(m).join(", "))):f.titles_buffer=m,void p(null,s,f);0,f.titles_buffer&&(m=f.titles_buffer.append(m)),s(m)}}},w,f)}}function d(n,r,i){var a={text:n,prop:"wikitext"};for(var o in i=e.new_options(i),d.parameters)o in i&&(i[o]||0===i[o])&&(a[o]=i[o]);t.query({action:"expandtemplates"},function(e,n){t.query.handle_error(e,n,r)||(i.page&&Object.assign(i.page,e),"function"==typeof r&&r(e.expandtemplates))},a,i)}function f(e,n){var r=t.session_of_options(n);r||(r=new t(null,null,n.language||t.language)),r.recentchanges(e,n)}function g(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function h(t,n,r){n>=0||(n=0);var i=t.indexOf("<revision>",n);if(i!==s){var a=0|t.between("<id>","</id>",n),o=Math.floor(t.between("<id>","</id>",i));if(!r||r(a,o)){var l={revid:o,parentid:Math.floor(t.between("<parentid>","</parentid>",i)),minor:t.slice(i).includes("<minor />"),user:g(t.between("<username>","</username>",i)),timestamp:t.between("<timestamp>","</timestamp>",i),slots:{main:{contentmodel:t.between("<model>","</model>",i),contentformat:t.between("<format>","</format>",i),"*":g(t.between("<text ","</text>",i).between(">"))}},comment:g(t.between("<comment>","</comment>",i))};return l.minor?l.minor="":delete l.minor,{pageid:a,ns:0|t.between("<ns>","</ns>",n),title:g(t.between("<title>","</title>",n)),revisions:[l]}}}else e.error("parse_dump_xml: Bad data:\n"+t.slice(0,index))}function m(n,r,i){if("function"!=typeof n||"function"==typeof r||i||(i=r,r=n,n=null),"string"!=typeof n||!n.endsWith(".xml"))return n&&e.log("read_dump: Invalid file path: ["+n+"], try to get the latest dump file..."),void function n(r,i,a){"function"!=typeof r||"function"==typeof i||a||(a=i,i=r,r=null),a=e.new_options(a),r||(r=t.site_name(a||a.project||a.family));var s=a.host||"https://dumps.wikimedia.org/",l=a.latest;if(l){var c,_=a.directory||"./",u=a.filepath||a.filename||r+"-"+l+"-pages-articles.xml";try{o.statSync(_)}catch(t){e.info("get_latest_dump: 存放 dump file 的目錄["+_+"]不存在/已刪除，嘗試創建之。"),o.mkdirSync(_,parseInt("777",8)),o.writeFileSync(_+"_FEEL_FREE_TO_REMOVE_THIS_DIRECTORY_ANYTIME","")}try{c=o.statSync(_+u).size>1e7}catch(e){}if(c)return e.log("get_latest_dump: Using data file (.xml): ["+_+u+"]"),void i(_+u);var p,d=a.archive||u+".bz2";if(t.wmflabs){p="/public/dumps/public/"+r+"/"+l+"/",e.debug("Check if public dump archive exists: ["+p+d+"]",1,"get_latest_dump");try{if(o.statSync(p+d).size>1e7)return e.log("get_latest_dump: Using public dump archive file ["+p+d+"]."),void g()}catch(e){}}p=_,e.debug("Check if file exists: ["+p+d+"]",1,"get_latest_dump");try{if(o.statSync(p+d).size>1e7)return e.log("get_latest_dump: Archive ["+p+d+"] exists."),void g()}catch(e){}e.log("get_latest_dump: Try to save archive to ["+p+d+"]...");var f=require("child_process").spawn("/usr/bin/wget",["--output-document="+p+d,s+r+"/"+l+"/"+d]);f.stdout.setEncoding("utf8"),f.stderr.setEncoding("utf8"),f.stdout.on("data",function(t){e.log_temporary(t)}),f.stderr.on("data",function(e){var t=(e=e.toString("utf8")).match(/([^\n\.]+)[.\s]+(\d+%)\s+(\S+)\s+(\S+)/);if(t)e=t[2]+"  "+t[1]+"  "+t[4]+"                    \r";else if(e.includes("....")||/\d+[ms]/.test(e)||/\.\.\s*\d+%/.test(e))return;process.stderr.write(e)}),f.on("close",function(t){if(t)return e.error("get_latest_dump: Error code "+t),void(a.previous?(e.info("get_latest_dump: Use previous version: ["+a.previous+"]."),a.latest=a.previous,delete a.previous,n(r,i,a)):i());e.log("get_latest_dump: Got archive file ["+p+d+"]."),g()})}else e.get_URL(s+r+"/",function(e){for(var t,o,s=e.responseText,l=0,c=/ href="(\d{8,})/g;o=c.exec(s);)l<(o=Math.floor(o[1]))&&(t=l,l=o);(a=Object.clone(a)).latest=l||"latest",t&&(a.previous=t),n(r,i,a)});function g(){e.log("get_latest_dump.extract: Extracting ["+p+d+"] to ["+_+u+"]..."),require("child_process").exec('/bin/bzip2 -cd "'+p+d+'" > "'+_+u+'"',function(t,n,r){t?e.error(t):e.log("get_latest_dump.extract: Done. Running callback..."),i(_+u)})}}(n,function(e){m(e,r,i)},i);if((i=e.setup_options(i)).get_latest_revid)!function(e,t,n){for(var r,i=Buffer.alloc(65536),a=Math.max(0,o.statSync(e).size-i.length),s=o.openSync(e,"r");;){o.readSync(s,i,0,i.length,a);for(var l,c=i.toString("utf8"),_=/<revision>[\s\n]*<id>(\d{1,16})<\/id>[\s\S]*?$/g;l=_.exec(c);)r>(l=+l[1])||(r=l);if(r>0)return void t(r);if(!(a>0))return void t();a=Math.max(0,a-i.length+256)}}(n,r);else{"function"==typeof i.first&&i.first(n);var a=function(t){e.debug("Finish work.",1,"read_dump"),a&&"function"==typeof i.last&&i.last.call(d,u,t),a=null},l=i.encoding||t.encoding,c="",_="</page>",u=i.anchor&&[],p=i.filter,d=new o.ReadStream(n,{highWaterMark:131072}),f=0;d.setEncoding(l),d.on("error",i.onerror||function(t){e.error("read_dump: Error occurred: "+t)}),e.info("read_dump: Starting read dump file..."),d.on("data",function(t){var n=c.length;for(c+=t;g(n);)n=0;c.length>3e6&&(e.error("read_dump: buffer too long ("+c.length+" characters)! Paused! 有太多無法處理的 buffer，可能是格式錯誤？"),console.log(c.slice(0,1e3)+"..."),d.pause())}),d.on("end",a)}function g(n){if((n=c.indexOf(_,n))!==s){var i=c.lastIndexOf("<page>",n);if(i===s)throw new Error("parse_buffer: We have end mark without start mark!");var o=h(c,i,p);if(!o)return f+=Buffer.byteLength(c.slice(0,n+_.length),l),c=c.slice(n+_.length),!0;var g=o.pageid,m=Buffer.byteLength(c.slice(0,i),l),y=Buffer.byteLength(c.slice(i,n+_.length),l),b=[f+m,y];return u&&(u[g]=b),f+=m+y,c=c.slice(n+_.length),t.quit_operation!==r(o,f,b)||(e.info("read_dump: Quit operation, 中途跳出作業..."),d.end(),c=null,void a(!0))}}}p.default_rvprop="ids|timestamp|content",p.auto_converttitles="zh,gan,iu,kk,ku,shi,sr,tg,uz".split(","),t.tracking_revisions=function(n,r,i,a){if((a=Object.assign({rvlimit:20},a,{save_response:!0})).search_diff&&"function"!=typeof r)throw new TypeError("Only {Function}filter to search for .search_diff=true!");function o(n,i){var o=n.revid?t.revision_content(n):n;if(o)return"string"==typeof r?o.includes(r):a.search_diff?r([,o],n,i):e.fit_filter(r,o)}var s,l=0;function c(n,c){if(c)i(null,n,c);else{var u=0,p=n.revisions;if(s||((s=p[u++]).lines=t.revision_content(s).split("\n"),a.search_diff||a.search_deleted||o(s))){for(;u<p.length;){var d=p[u++];d.lines=t.revision_content(d).split("\n");var f=(s.diff_list=e.LCS(d.lines,s.lines,{diff:!0,line:!0,treat_as_String:!0})).some(function(e){return a.search_diff?r(e,s,d):o(e[a.search_deleted?0:1])&&!o(e[a.search_deleted?1:0])});if(a.revision_post_processor&&a.revision_post_processor(s),delete s.lines,f)return delete d.lines,void i(s,n);s=d}if(delete d.lines,(l+=n.revisions)>a.limit)i(null,n);else{var g=n.response.continue;if(g)return a.rvcontinue=g.rvcontinue,e.debug("tracking_revisions: search next "+a.rvlimit+(a.limit>0?"/"+a.limit:"")+" revisions...",2),void _();!a.search_deleted&&o(s)?i(s,n):i(null,n)}}else i(null,n)}}function _(){t.page(n,c,a)}_()},t.purge=function(n,r,a){var o=i(n,a);if(!o)throw new Error("wiki_API.purge: "+l("Invalid title: %1",t.title_link_of(n)));var s=o[1];o[1]={action:"purge"},t.query(o,"function"==typeof r&&function(n,i){if(!t.query.handle_error(n,i,r)){if(!n||!n.purge)return e.warn(["wiki_API_purge: ",{T:["Unknown API response: %1","object"==typeof n&&"undefined"!=typeof JSON?JSON.stringify(n):n]}]),e.is_debug()&&e.show_value&&e.show_value(n),void r(void 0,n);var o=n.purge;!(o.length<2)||a&&a.multi||(o=o[0]),r(o)}},s,a)},t.redirect_to=function(n,r,i){t.page(n,function(i,a){if(!a&&t.content_of.page_exists(i)){var o=i.response.query.redirects;if(o&&(1!==o.length&&(e.warn("wiki_API.redirect_to: Get "+o.length+" redirects for ["+n+"]!"),e.warn(o)),(o=o[0]).tofragment)){try{o.to_link=o.to+"#"+decodeURIComponent(o.tofragment.replace(/\./g,"%"))}catch(e){o.to_link=o.to+"#"+o.tofragment}return e.debug(t.title_link_of(n)+" redirected to section [["+o.to+"#"+o.tofragment+"]]!",1,"wiki_API.redirect_to"),void r(o,i)}r(i.title,i)}else r(void 0,i,a)},Object.assign({prop:"",redirects:1,save_response:!0},i))},d.parameters={title:void 0,revid:void 0,prop:void 0,includecomments:void 0,templatesandboxprefix:void 0,templatesandboxtitle:void 0,templatesandboxtext:void 0,templatesandboxcontentmodel:void 0,templatesandboxcontentformat:void 0},t.expandtemplates=d,t.convert_Chinese=function(n,r,i){if(n){var a;i="string"==typeof i?{uselang:i}:e.setup_options(i),"object"==typeof n&&(a=n,n=JSON.stringify(n)),n="!"+(n=escape(n).replace(/%u[\dA-F]{4}/g,unescape))+"!";var o={contentmodel:"wikitext",uselang:i.uselang||"zh-hant",prop:"text",text:n},s=t.session_of_options(i);t.query([s&&s.API_URL||t.api_URL("zh"),{action:"parse"}],function(e,t){if(!t&&e){e=(e=e.parse).text["*"].replace(/<!--[\s\S]*?-->/g,"").replace(/![^!]*$/,"").replace(/^[^!]*!/,"");try{if(e=unescape(e),a&&(e=JSON.parse(e),Array.isArray(a)&&a.length!==e.length))throw new Error("wiki_API.convert_Chinese: fault on {Array}: "+a.length+" !== "+e.length)}catch(e){return void r(void 0,e)}r(e)}else r(void 0,t)},o)}else r(0===n?"0":"")},t.is_protected=function(e){var t=e.protection||e;if(Array.isArray(t))return t.some(function(e){return"edit"===e.type&&"sysop"===e.level})},t.recent_via_API=f,t.recent||(t.recent=f),t.listen=function(r,i){if(i?"number"==typeof i&&i>0?i={interval:i}:("string"==typeof i||e.is_RegExp(i))&&(i={title:i}):i=Object.create(null),!(isNaN(i.max_page)||i.max_page>=1))throw new Error("add_listener: assert: isNaN(options.max_page) || options.max_page >= 1");i.limit>0||(i.rvlimit="max");var a=t.session_of_options(i),o=i.SQL_options||(i.SQL_options=Object.create(null));o=o.where||(o.where=Object.create(null)),a||!i.with_diff&&!i.with_content||(a=new t(null,null,i.language||t.language));var s,l="use_SQL"in a?a.use_SQL:t.SQL&&t.SQL.config;l&&("use_SQL"in i?l=i.use_SQL:"object"==typeof i.parameters&&(l=0===Object.keys(i.parameters).filter(function(e){return e&&"rcprop"!==e}).length));var c=l?t.recent:t.recent_via_API,_=!("latest"in i)||i.latest;if(l)s=Object.clone(i.SQL_options),i[n]&&(s[n]=i[n]);else if((s=Object.clone(i)).parameters||(s.parameters=Object.create(null)),s.rcprop&&(s.parameters.rcprop||(s.parameters.rcprop=s.rcprop),delete s.rcprop),Object.assign(s.parameters,{rcdir:"newer",rctype:"edit|new"}),_&&(s.parameters.rctoponly=1),s.parameters.rcprop&&!s.parameters.rcprop.includes("timestamp"))if(Array.isArray(s.parameters.rcprop))s.parameters.rcprop.push("timestamp");else{if("string"!=typeof s.parameters.rcprop)throw new Error("Unkonwn rcprop: "+s.parameters.rcprop);s.parameters.rcprop+="|timestamp"}var u=t.namespace(i.namespace);void 0!==u&&(l?s.namespace=u:s.parameters.rcnamespace=u),i.type&&(l?s.type=i.type:s.parameters.rctype=i.type),!i.with_diff||i.with_diff.diff||i.with_diff.with_diff||(!0===i.with_diff&&(i.with_diff={LCS:!0,line:!0}),i.with_diff.diff=!0);var p,d=e.to_millisecond(i.delay),f=e.to_millisecond(i.interval)||500,g=0|i.revid;i.configuration_adapter||(i.configuration_adapter=a.task_configuration&&a.task_configuration.configuration_adapter);var h="function"==typeof i.configuration_adapter&&t.normalize_title(i.configuration_page)||a.task_configuration&&a.task_configuration.configuration_page_title,m="delay_time_to_adapt_task_configurations"in i?i.delay_time_to_adapt_task_configurations:a.delay_time_to_adapt_task_configurations;d>0||(d=0),!i.delay||"start"in i||(i.start=i.delay),e.is_Date(i.start)?p=isNaN(i.start.getTime())?new Date:i.start:i.start&&!isNaN(p=Date.parse(i.start))?p=new Date(p):(p=e.to_millisecond(i.start))>0?(p>e.to_millisecond("31d")&&e.info(["add_listener: ",{T:["Wikimedia wikis 最多可回溯約 %1。",e.age_of(e.to_millisecond("30D"),{max_unit:"day"})]},{T:["您所指定的時間 [%1]（%2）恐怕過長。",i.start,e.age_of(p,{max_unit:"day"})]}]),p=new Date(Date.now()-p)):p=new Date,e.info(["add_listener: ",{T:[Date.now()-p>100?"開始以 %1 監視、掃描 %2 自 %3 起更改的頁面。":"開始以 %1 監視、掃描 %2 最近更改的頁面。",l?"SQL":"API",a?t.site_name(a):t.language,e.indicate_date_time(p,{base_date:Date.now()})]}]),h&&e.info(["add_listener: ",{T:["Configuration page: %1",t.title_link_of(h)]}]),function n(){function u(){y&&(e.info("已經設定過下次任務。可能是上一個任務還在查詢中，或者應該會 timeout？將會清除之前的任務，重新設定任務。"),console.log(y),clearTimeout(y));var t=Date.now()-b;e.debug("interval from latest receive() starts: "+t+" ms ("+Date.now()+" - "+b+")",3,"receive_next"),y=setTimeout(n,Math.max(f-t,0))}var y=void 0,b=Date.now();e.debug("Get recent change from "+(e.is_Date(p)&&p.getTime()?p.toISOString():p)+", last_query_revid="+g,1,"add_listener.receive"),l?(e.is_Date(p)||(p=new Date(p)),o.timestamp=">="+p.format("%4Y%2m%2d%2H%2M%2S"),o.this_oldid=">"+g,d>0&&(o[""]="rc_timestamp<="+new Date(Date.now()-d).format("%4Y%2m%2d%2H%2M%2S"))):(s.parameters.rcstart=e.is_Date(p)?p.toISOString():p,d>0&&(s.parameters.rcend=new Date(Date.now()-d).toISOString())),c(function(n){if(n){if(n.length>0){for(n.length>1&&n.some(function(e,t){return t>0&&n[t-1].revid>e.revid})&&(e.debug("判別新舊順序: 有新到舊或亂序: Get "+n.length+" recent pages:\n"+n.map(function(e){return e.revid}),2,"add_listener"),e.debug("把從新的排列到舊的或亂序轉成從舊的排列到新的: "+n.map(function(e){return e.revid}),1,"add_listener"),n.sort(function(e,t){return e.revid-t.revid})),e.debug("準備去除掉重複的紀錄。之前已處理到 last_query_revid="+g+", 本次取得 "+n.length+" record(s). revid: "+n.map(function(e){return e.revid}),3);n.length>0&&n[0].revid<=g;)n.shift();n.length>0&&(n.length>i.max_page&&n.truncate(i.max_page),p=n.at(-1),g=p.revid,p=p.timestamp),e.debug("The lastest record: "+JSON.stringify(p),4)}var o,s,l;e.debug("去除掉重複的紀錄之後 last_query_revid="+g+", "+n.length+" record(s) left."+(n.length>0?" revid: "+n.map(function(e){return e.revid}).join(", ")+". title: "+n.map(function(e){return e.title}).join(", "):""),1),e.log_temporary("add_listener: "+p+" ("+e.indicate_date_time(p)+")"),h&&n.forEach(function(e,t){e.title===h&&(o=e)}),o&&(l=function(){delete a.adapt_task_configurations_timer,e.info(["add_listener: ",{T:["設定頁面 %1 已變更。重新解析……",t.title_link_of(h)]}]),a.adapt_task_configurations(o,i.configuration_adapter,"once")},s=m>=0?function(){a.adapt_task_configurations_timer&&clearTimeout(a.adapt_task_configurations_timer),e.info(["add_listener: ",{T:["等待 %1 以應用設定。",e.age_of(0,m)]}]),a.adapt_task_configurations_timer=setTimeout(l,m)}:l),i.filter&&n.length>0&&(n=n.filter("function"==typeof i.filter?i.filter:e.is_RegExp(i.filter)?function(e){return e.title&&i.filter.test(e.title)}:Array.isArray(i.filter)?function(e){return e.title&&i.filter.includes(e.title)}:function(e){return e.title&&(e.title.includes(i.filter)||e.title.startsWith(t.normalize_title(i.filter)))}),e.debug("Get "+n.length+" recent pages after filter:\n"+n.map(function(e){return e.revid}),2,"add_listener")),o&&!n.includes(o)&&(e.is_debug()&&(e.debug("unshift configuration_row revid="+o.revid+":",1,"add_listener"),console.log(o)),n.unshift(o));var c,d=[],f=function(t,n){if(e.is_thenable(t))n?t.then(n,function(e){console.error(e),n()}):d.push(t);else{if(t)return p=new Date,c=t;n&&n()}},y=function(t){c?e.debug("The listener() returns non-null, quit listening.",0,"add_listener.check_and_receive_next"):d.length>0?(e.debug("Waiting "+d.length+" work(s) and then get next recent pages",2,"add_listener.check_and_receive_next"),Promise.allSettled(d).then(u)):(e.debug("Get next recent pages",2,"add_listener.check_and_receive_next"),u())};if(n.length>0){if(e.debug("Get "+n.length+" recent pages:\n"+n.map(function(e){return e.revid}),2,"add_listener"),i.with_diff||i.with_content>=2)return void n.run_serial(function(l,u,d,g){if(u.pageid){e.debug("Get page: "+d+"/"+n.length+" revid="+u.revid,2,"add_listener.with_diff");var h={rvstartid:u.revid};u.old_revid>0&&(h.rvendid=u.old_revid),h={is_id:!0,rvlimit:i.with_content>=3?i.with_content:2,parameters:h,rvprop:"ids|timestamp|content|user|flags|size"},a.page(u.pageid,function(a,g){if(c||!a||g)return g&&console.error(g),void l();var h=a.revisions;if(_&&(!h||!h[0]||h[0].revid!==u.revid))return e.log("add_listener.with_diff: "+t.title_link_of(u)+": 從 recentchanges table 取得的版本 "+u.revid+" 不同於從頁面內容取得的最新版本 "+(h&&h[0]&&h[0].revid)+"，跳過這一項。"),void l();if(Object.assign(u,a),h&&h.length>=1&&h[0]&&h[0].timestamp&&(p=h[0].timestamp),h&&h.length>=1&&i.with_diff){var m=h.length>=2&&t.revision_content(h.at(-1))||"",y=t.revision_content(h[0]);if(!i.with_diff.line){if(m=t.parser(m).parse(),u.from_parsed=m,m=m.map(function(e){if(!e&&(""!==e||1!==m.length))throw console.log(u),new Error(u.title);return e.toString()}),y=(y=t.parser(u).parse()).map(function(e){if(!e&&(""!==e||1!==y.length))throw console.log(u),new Error(u.title);return e.toString()}),t.revision_content(h[0])!==y.join(""))throw console.log(t.revision_content(h[0])),console.log(y),y=t.revision_content(h[0]),console.log(e.LCS(y,parse_wikitext(y).toString(),"diff")),new Error("Parser error (to): "+t.title_link_of(a));if(h.length>1&&t.revision_content(h.at(-1))!==m.join(""))throw console.log(e.LCS(t.revision_content(h.at(-1)),m.join(""),"diff")),new Error("Parser error (from): "+t.title_link_of(a))}i.with_diff.LCS?u.diff=e.LCS(m,y,i.with_diff):u.diff=m.diff_with(y,i.with_diff)}if(o===u)return s(),void l();f(r.call(i,u,d,n),l)},h)}else l()},y);if(i.with_content||o)return void a.page(n.map(function(e){return e.pageid}),function(t,a){if(a||!Array.isArray(t))return"Unknown response"!==a&&e.error(a||"add_listener: No page got!"),void u();var l=Object.create(null);t.forEach(function(e,t){l[e.pageid]=e}),n.some(function(e,t){if(Object.assign(e,l[e.pageid]),o!==e)return f(r.call(i,e,t,n));s()}),l=t=null,y()},Object.assign({is_id:!0,multi:!0},i.with_content));i.input_Array?f(r.call(i,n)):n.some(function(e,t,n){return f(r.call(i,e,t,n))},i)}else i.even_empty&&f(r.call(i,i.input_Array?n:{row:Object.create(null)}));y()}else e.warn((new Date).toISOString()+": No rows get.")},s)}()},t.read_dump=m;var y="SELECT `page`.`page_id` AS `i`, `page`.`page_latest` AS `r` FROM `page` INNER JOIN `revision` ON `page`.`page_latest` = `revision`.`rev_id` WHERE `revision`.`rev_id` > 0 AND `revision`.`rev_deleted` = 0 AND `page`.`page_namespace` = 0";function b(r,i){if("function"==typeof r&&void 0===i?(i=r,r=Object.create(null)):r=e.new_options(r),r.use_dump_only)return e.debug("use dump only: 僅僅使用 dump，不採用 API 取得最新頁面內容。",1,"traversal_pages"),!0===r.use_dump_only&&(r.use_dump_only=null),void m(r.use_dump_only,i,{directory:r.dump_directory});var a;r.filter&&"function"!=typeof r.filter&&!0===(a=r.filter)&&(a=null);var s=r.latest_revid_of_dump;if(s>0){var l,c,_=t.site_name(r,{get_all_properties:!0}).language,u={file_name:r.file_name||b.list_file+"."+_+".json",operator:function(t){if(!Array.isArray(t))throw new Error("traversal_pages: No list get!");3===t.length&&JSON.stringify(t[0])===JSON.stringify(b.id_mark)?(e.info("traversal_pages: 此資料似乎為 page id，來自 production replicas: ["+this.file_name+"]"),c=t[2],(t=t[1]).is_id=!0):e.error("traversal_pages: cache 檔案未設定 rev_list：可能是未知格式？ "+this.file_name),l=t}},p=!("is_id"in r)||r.is_id;Array.isArray(r.list)?(e.debug("採用輸入之 list，列表長度 "+r.list.length+"。",1,"traversal_pages"),u.list=r.list):t.wmflabs&&!r.no_database?(e.debug("若沒有 cache，則嘗試讀取 database 之資料。",1,"traversal_pages"),u.list=function(){e.info("traversal_pages: 嘗試讀取 Wikimedia Toolforge 上之 database replication 資料，一次讀取完版本號 "+s+" 之後，所有頁面最新修訂版本之版本號 rev_id...");var i=p?y:y.replace(/page_id/g,"page_title");i=i.replace(/(`rev_id` > )0 /,"$1"+s+" ");var a=r&&r.SQL_config||t.new_SQL_config&&t.new_SQL_config(r[n]||_);return t.run_SQL(i,d,a),t.cache.abort}):(e.debug("採用 API type = allpages。",1,"traversal_pages"),u.type="allpages"),t.cache(u,function(){var _=t.session_of_options(r)||new t(r.user,r.password,r.language);function u(t,n){if(n)return e.info("traversal_pages: 已中途跳出作業，不再讀取 production database。"),void("function"==typeof r.last&&r.last());"function"==typeof r.filter&&e.log("traversal_pages: 開始讀取 production，執行 .work(): "+(t&&t.length)+" pages..."),_.work({is_id:t.is_id,no_message:!0,no_edit:!("no_edit"in r)||r.no_edit,each:i,page_options:r.page_options,last:r.last},t)}e.log("traversal_pages: 開始遍歷所有 dump 頁面..."),r.filter&&"function"!=typeof r.filter&&(r.filter=function(){var _,p=Date.now(),d=0,f=(r.limit,[]),g=l.is_id;l.forEach(function(t,n){t in f&&e.warn("traversal_pages: 存在重複之id: "+t),f[t]=c[n]}),l=null,c=null,m(a,function(n,r,a){return++d%1e4==0&&e.log(t.estimated_message(r,_,p,d)+". "+t.title_link_of(n)),i(n)},{session:r[n],directory:r.dump_directory,first:function(t){a=t;try{_=o.statSync(t).size}catch(t){throw"ENOENT"===t.code&&e.error("traversal_pages: You need to create the dump directory manually!"),t}},filter:function(e,t){return!(e in f)||(s<t&&(s=t,t===f[e])?(delete f[e],!0):void 0)},last:function(t,n){var i=Object.keys(f);i.is_id=g,f=null;var a=d+i.length,o=1e3*d/a|0;o/=10,e.log("traversal_pages: All "+d+"/"+a+" pages using dump xml file ("+o+"%), "+((Date.now()-p)/1e3|0)+" s elapsed."),r.latest_revid_of_dump=s,u(i,n)}})}),"function"==typeof r.filter?r.filter(u,i,l,c):u(l)},{prefix:r.directory})}else m(a,function(e){r.latest_revid_of_dump=e,b(r,i)},{get_latest_revid:!0,directory:r.dump_directory});function d(t,n,a){if(t)e.error("traversal_pages: Error reading database replication!"),e.error(t),r.no_database=t,delete r.list;else{e.log("traversal_pages: All "+n.length+" pages. 轉換中...");var o=[],s=[];n.forEach(function(e){o.push(p?0|e.i:e.i.toString("utf8")),s.push(e.r)}),r.list=[b.id_mark,o,s]}b(r,i)}}function v(e,t){this.read(e,t)}return b.id_mark={id_mark:"id_mark"},b.list_file="all_newer_pages",v.prototype={KEY_DATA:"data",KEY_ID:"id",encoding:t.encoding,show_skip:9,renew:function(){this[this.KEY_DATA]={}},read:function(t,n){var r,i;"object"!=typeof t||n||(t=(n=t).file),t&&(this.file=t),!0===n?(r=!1,n={preserve:!0}):r=!(n=e.setup_options(n)).preserve,Object.assign(this,n),this.show_skip>0&&(this.continuous_skip=0);try{i=o.readFileSync(t,this.encoding)}catch(e){}i=i&&JSON.parse(i)||{},this.cached=i,r?(Object.seal(i),this.renew()):this[this.KEY_DATA]=i},write:function(t,n){o.writeFile(t||this.file,JSON.stringify(this[this.KEY_DATA]),this.encoding,function(t){e.debug("Write to cache file: done.",1,"revision_cacher.write"),"function"==typeof n&&n(t)})},had:function(n){if(!t.content_of.page_exists(n))return"not exists";var r=t.title_of(n),i=t.content_of.revision(n);if(i&&(i=i.revid),e.debug(t.title_link_of(r)+" revid "+i,4,"revision_cacher.had"),r in this.cached){var a=this[this.KEY_DATA],o=a!==this.cached,s=this.cached[r],l=this.id_only?s:s[this.KEY_ID];if(e.debug(t.title_link_of(r)+" cached revid "+l,4,"revision_cacher.had"),l===i)return o&&(a[r]=s),this.continuous_skip++,e.debug("Skip "+this.continuous_skip+": "+t.title_link_of(r)+" revid "+i,2,"revision_cacher.had"),!0;o&&delete a[r]}this.continuous_skip>0&&(this.continuous_skip>this.show_skip&&e.debug("Skip "+this.continuous_skip+" pages.",1,"revision_cacher.had"),this.continuous_skip=0)},data_of:function(n,r){var i=this[this.KEY_DATA],a="string"==typeof n?n:t.title_of(n);if(a in i)return i[a];if(r||(r=t.content_of.revision(n))&&(r=r.revid)){if(this.id_only)return i[a]=r;var o=i[a]={};return o[this.KEY_ID]=r,o}e.error("revision_cacher.data_of: No revision id (.revid): ("+typeof n+") "+JSON.stringify(n).slice(0,800))},remove:function(e){var n=this[this.KEY_DATA],r="string"==typeof e?e:t.title_of(e);r in n&&delete n[r]}},Object.assign(t,{download:function n(r,i,a){var o=this;if("string"==typeof r||t.is_page_data(r)){if(o.is_namespace(r,"Category"))return void o.category_tree(r,function(e,t){t?a(void 0,t):n.call(o,e,i,a)},Object.assign({namespace:"Category",set_attributes:!0},i));r=[r]}else if(!(Array.isArray(r)||e.is_Object(r)&&r[t.KEY_generator_title]))return void o.next(a,r,new Error("Invalid file_title!"));if("category_tree"===r.list_type&&!i.no_category_tree){if(r.categories_to_process||(r.categories_to_process=Object.values(r.flat_subcategories),r.categories_to_process.total_length=r.categories_to_process.length,t.add_session_to_options(o,i),i.download_file_to=function(n,i,a,s,l){var c=r.flat_subcategories[o.remove_namespace(s.title[t.KEY_generator_title])],_=decodeURIComponent(n.match(/[^\\\/]+$/)[0]);return _=function(n,r){r=e.setup_options(r);for(var i=this,a=t.session_of_options(r),o=[a.remove_namespace(i.title)];i.parent_categories;){var s=i.parent_categories[0];i.parent_categories.forEach(function(e){e.depth<s.depth&&(s=e)}),i=s,o.unshift(a.remove_namespace(i.title))}var l=o.join(e.env.path_separator);return r.directory&&(l=e.append_path_separator(r.directory,l)),!1===r.create_directory||e.directory_exists(l)||e.create_directory(l,r.create_directory||{recursive:!0}),n&&o.push(a.remove_namespace(n)),o=o.join(e.env.path_separator)}.call(c,_,l)}),0===r.categories_to_process.length)return void o.next(a,r);var s=r.categories_to_process.pop();return e.info("wiki_API_download: "+(r.categories_to_process.total_length-r.categories_to_process.length)+"/"+r.categories_to_process.total_length+" "+t.title_link_of(s.title)+"\tof "+t.title_link_of(r.title)),void n.call(o,t.generator_parameters("categorymembers",{title:s.title,namespace:o.namespace("File"),limit:"max"}),i,n.bind(o,r,i,a))}if(0===r.length)return e.debug("No file to download.",1,"wiki_API_download"),void o.next(a,r);var l=(i="string"==typeof i?r.length>1?{directory:i}:{file_name:i}:e.new_options(i)).file_info_type||(i.download_derivatives?"videoinfo":"imageinfo");i.download_derivatives&&"videoinfo"!==l&&e.warn('wiki_API_download: You should set options.file_info_type = "videoinfo" for downloading derivatives!');var c=0;function _(t,n,s){var l;if(i.index>0&&(l=r[i.index-1])&&(s&&s.cached_file_path&&(l.cached_file_path=s.cached_file_path),n===e.get_URL_cache.NO_NEWS?l.no_new_data=!0:n&&(l.error=n,r.error_titles.push([l.title,n]),e.error("Cannot download "+l.title+": "+n))),i.index>=r.length)0===c&&o.next(a,r,r.error_titles.length>0&&r.error_titles);else{var p=(l=r[i.index++])&&l[0];if(!p)return l&&(r.error_titles.push([l&&l.title,"No file_info get"]),e.error("Cannot download "+l.title+(n?": "+n:""))),void _();i.web_resource_date=p.timestamp;var d=p.thumburl||p.url,f=i.download_derivatives;f&&Array.isArray(p.derivatives)?("function"==typeof f&&(f=f(l)),d=Array.isArray(f)?f:[f],f=[],d.forEach(function(e){"string"==typeof e&&(e.startsWith("https://")?f.push(e):(e=e.toLowerCase(),p.derivatives.forEach(function(t){(t.type.toLowerCase().startsWith(e)||t.shorttitle.toLowerCase().startsWith(e)||t.transcodekey&&t.transcodekey.toLowerCase()===e)&&f.push(t.src)})))}),0!==f.length?(d=null,f.forEach(function(e,t){u(e,t===f.length)})):_()):u(d,!0)}}function u(t,n){var a;if("function"==typeof i.download_file_to){var o=i.index-1;try{i.file_name=i.download_file_to(t,r[o],o,r,i)}catch(e){a=e,console.error(e),r.error_titles.push([page_data.title,e])}}a||(c++,e.get_URL_cache(t,function(){c--,_.apply(null,arguments)},i)),n&&(i.index<r.length?c<i.max_threads:0===c)&&_()}var p=Object.assign({type:l,iiprop:"url|timestamp",viprop:"url|timestamp|derivatives",page_filter:i.page_filter,multi:!0},i.file_info_options);i.width>0&&(p.iiurlwidth=i.width),i.height>0&&(p.iiurlheight=i.height),t.list(r,function(e,t){e.error?o.next(a,r,e.error):(r=e,i.index=0,r.error_titles=[],_())},t.add_session_to_options(o,p))},parse_dump_xml:h,traversal:b,revision_cacher:v}),p}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.list",require:"application.net.wiki.|application.net.wiki.namespace.|application.net.Ajax.|application.net.wiki.query.",no_extend:"this,*",code:function e(t){var n=t.application.net.wiki,r=n.KEY_SESSION,i=n.is_api_and_title,a=n.normalize_title_parameter,o=n.set_parameters,s=t.cache_gettext(function(e){s=e}),l="function"==typeof Symbol?Symbol("generator title"):"generator title";function c(e,t){"string"==typeof t&&(t={title:t});var n={generator:e},r=d.type[e];for(var i in Array.isArray(r)&&(r=r[0]),t){var a=t[i];i.startsWith("g"+r)?n[i]=a:!i.startsWith(r)||"g"+i in t?(i="g"+r+i)in n||(n[i]=a):n["g"+i]=a}return n[l]=n["g"+r+"title"],n}function _(e,r){var i;t.is_Object(r)?r=(i=r).callback:i=Object.create(null),n.page(e,function(e){var a,o,s=n.content_of(e),l=i.pattern,c=Object.create(null);for(l||(l=new RegExp(t.to_RegExp_pattern((i.continue_key||n.prototype.continue_key).trim())+" *:? *({[^{}]{0,80}})","g")),t.debug("pattern: "+l,2,"get_continue");a=l.exec(s);)t.debug("continue data: ["+a[1]+"]",2,"get_continue"),(o=/^{\s*}$/.test(a[1]))||(c=Object.assign(c,JSON.parse(a[1])));i.get_all||(o?(t.debug("最後一次之後續檢索用索引值為空，可能已完成？",1,"get_continue"),c=null):((a=i.type)in d.type&&(a=d.type[a]+"continue"),s=c,c=Object.create(null),a in s&&(c[a]=s[a]))),r(c||Object.create(null))},i)}function u(e,t){var n=Object.create(null);return e.forEach(function(e){var r=e[t];e.title in n?n[e.title][t].push(r):(e[t]=[r],n[e.title]=e)}),Object.values(n)}n.generator_parameters=c,n.KEY_generator_title=l;var p="(async function() { try { if (wiki_API_list.exit === await options.for_each(item)) options.abort_operation = true; } catch(e) { library_namespace.error(e); } })();";function d(e,r,a,s){t.debug(e+(r?" "+n.title_link_of(r):"")+", callback: "+a,3,"get_list");var c,p,f=d.type[e];t.debug("parameters: "+JSON.stringify(f),3,"get_list"),Array.isArray(f)?(c=f[1]||d.default_parameter,p=f[2],f=f[0]):c=d.default_parameter;var g={action:"query"};if(g[c]=e,!n.need_get_API_parameters(g,s,d,arguments)){"string"==typeof s||"number"==typeof s?s={namespace:s}:t.is_Object(s)||(s={namespace:s}),"namespace"in s&&(s.namespace=n.namespace(s.namespace),void 0===s.namespace&&(t.warn("get_list: options.namespace 並非為正規 namespace！將被忽略！"),delete s.namespace)),g=i(r,!0)?r.clone():[,r];var m=f+"continue",y=n.session_of_options(s),b;if(s.next_mark);else t.debug("未傳入後續檢索用索引值。",4,"get_list"),s.next_mark=Object.create(null);if("string"==typeof s.get_continue&&(s.get_continue=[y.API_URL,s.get_continue]),s.get_continue)_(Array.isArray(s.get_continue)?s.get_continue:[g[0],s.get_continue],{type:e,session:y,continue_key:y.continue_key,callback:function(n){(n=n[m])?(t.info("get_list: continue from ["+n+"] via page"),delete s.get_continue,s.next_mark[m]=n,d(e,r,a,s)):(t.debug("Nothing to continue!",1,"get_list"),"function"==typeof a&&a(void 0,new Error("Nothing to continue!")))}});else if(m=s[m],Array.isArray(g[1])&&(s.no_post_data?encodeURIComponent(g[1].map(function(e){return n.title_of(e)}).join("|")).length>d.slice_chars:g[1].length>n.max_slice_size(y,s))){s.next_title_index=0,s.multi=!0,s.starting_time=Date.now();var v=function(r,i){if(i)a(null,i);else{r&&(s.overall_pages?s.overall_pages.append(r):(r.titles=g[1],s.overall_pages=r));var o=s.next_title_index;if(!(o<g[1].length))return r=s.overall_pages,delete s.overall_pages,void a(r);if(s.no_post_data){var l=0;do{if((l+=encodeURIComponent(n.title_of(g[1][s.next_title_index++])+"|").length)>d.slice_chars){s.next_title_index--,o===s.next_title_index&&(t.error("第一個元素的長度過長!"),s.next_title_index++);break}}while(s.next_title_index<g[1].length)}else s.next_title_index+=n.max_slice_size(y,s),s.next_title_index>g[1].length&&(s.next_title_index=g[1].length);t.log_temporary("get_list: "+e+" "+o+"/"+g[1].length+n.estimated_message(o,g[1].length,s.starting_time)),d(e,[g[0],g[1].slice(o,s.next_title_index)],v,s)}};v()}else{for(m in!t.is_Object(g[1])||n.is_page_data(g[1])?(g[1]=g[1]?"&"+(c===d.default_parameter?f:"")+n.query.title_param(g[1]):"","function"==typeof p&&(t.debug("title_parameter: ["+g[1]+"]",3,"get_list"),g[1]=p(g[1],s),t.debug("→ ["+g[1]+"]",3,"get_list"))):l in g[1]||t.error("get_list: You should use generator_parameters() to create a  generator title!"),g[1]=t.Search_parameters(g[1]),g[1].action="query",g[1][c]=e,(s.limit>=0||"max"===s.limit)&&(g[1][f+"limit"]=s.limit),s.next_mark)"continue"!==m&&(g[1][m]=s.next_mark[m]),delete s.next_mark[m];for(var c in"namespace"in s&&(g[1][f+"namespace"]=s.namespace),s.redirects&&(g[1].redirects=1),s.converttitles&&(g[1].converttitles=1),s)if(c.startsWith(f)){var w=s[c];t.is_Date(w)&&(w=w.toISOString()),g[1][c]=w}if(o(g,s),g[0]||(g=g[1]),"function"!=typeof a)return t.error("callback is NOT function! callback: ["+a+"]"),void t.debug("可能是想要當作 wiki instance，卻未設定好，直接呼叫了 "+t.Class+".wiki？\ne.g., 想要 var wiki = "+t.Class+".wiki(user, password) 卻呼叫了 var wiki = "+t.Class+".wiki？",3);var k;s.no_post_data||(k=g[1],g[1]=void 0),n.query(g,function(o,l){t.is_debug(2)&&t.show_value&&t.show_value(o,"get_list: "+e),l&&a(void 0,l);var c=[],_=o&&(o.continue||o["query-continue"]);if(t.is_Object(_)){if(c.next_index=_,"query-continue"in o)for(var p in _)Object.assign(s.next_mark,_[p]);else Object.assign(s.next_mark,_);t.debug("next index of "+e+": "+JSON.stringify(s.next_mark),2,"get_list"),t.is_debug(2)&&t.show_value&&t.show_value(_,"get_list: get the continue value"),"max"===s.limit&&e.includes("users")&&t.debug("Too many users so we do not get full list"+(s.augroup?" of ["+s.augroup+"]":"")+"!",1,"get_list")}else if(t.is_Object(o)&&"batchcomplete"in o){var f=d.type[e];f&&(Array.isArray(f)&&(f=f[0]),f+="continue",f in s.next_mark&&(t.debug("去除已經不需要的檢索用索引值。",3,"get_list"),delete s.next_mark[f]))}if(c.list_type=e,"namespace"in s&&(c.namespace=s.namespace),i(r,!0)&&(r=r[1]),n.is_page_data(r)&&(r=r.title),Array.isArray(r)||(c.title=r),!o||!o.query)return t.error("get_list: Unknown response: ["+("object"==typeof o&&"undefined"!=typeof JSON?JSON.stringify(o):o)+"]"),void a(c,o);function g(e){if(s.abort_operation||"function"!=typeof s.for_each)a(c,e);else{var n=[];c.some(function(r){try{0;var i=s.for_each(r);if(i===h.exit)return s.abort_operation=!0,!0;t.is_thenable(i)&&n.push(i)}catch(n){t.error(n),e=e||n}}),n.length>0?(Promise.all(n).catch(function(t){e=e||t}),Promise.allSettled(n).then(function(t){a(c,e)})):a(c,e)}}if("redirects"!==e&&o.query[e]){if(o=o.query[e],Array.isArray(o)){var m=s.page_filter;"function"==typeof m&&(o=o.filter(m)),"exturlusage"===e&&s.combine_pages&&(o=u(o,"url")),c=Object.assign(o,c)}else o.results?("function"==typeof m&&(o.results=o.results.filter(m)),c=Object.assign(o.results,c),c.data=o):c=Object.assign(o,c);return d.post_processor[e]&&(Array.isArray(c)?c.forEach(d.post_processor[e]):d.post_processor[e](c)),Array.isArray(c)&&t.debug(n.title_link_of(r)+": "+c.length+" page(s)",2,"get_list"),void g()}for(var y in o.query.normalized&&(c.normalized=o.query.normalized),o=o.query.pages,o){var b=o[y];if(("function"!=typeof s.page_filter||s.page_filter(b))&&e in b){var v=b[e];Array.isArray(v)?(Object.assign(v,b),delete v[e]):v=b,c.push(v),t.debug("["+b.title+"]: "+v.length+" page(s)",1,"get_list")}}return 1!==c.length||s.multi?0===c.length?(t.debug("No ["+e+"] of "+n.title_link_of(r),1,"get_list"),void a(c)):(t.debug(c.length+" "+e+" got!",1,"get_list"),c.title!==r&&(c.titles=r),void g()):(Object.keys(c).forEach(function(e){"0"!==e&&(c[0][e]=c[e])}),c=c[0],void g())},k,s)}}}function f(e){return e.replace(/^&title=/,"&titles=").replace(/^&pageid=/,"&pageids=")}d.slice_chars=7800,d.post_processor={usercontribs:function(e,n,r){var i=e.comment;if(i){var a=i.match(/ moved page \[\[(.+?)\]\] to \[\[(.+?)\]\]( over redirect)?/);a&&(e.from||e.to?t.warn("usercontribs: There is already item.from or item.to!"):(e.from=a[1],e.to=a[2],a[3]&&(e.redirect=!0)))}}},d.default_parameter="list",d.type={allpages:"ap",allimages:["ai",,function(e){return e.replace(/^&aititle=([^&]+)/,function(e,t){var n=(t=decodeURIComponent(t)).split("|");return 1!==n.length&&2!==n.length?e:n[0]&&!Date.parse(n[0])||n[1]&&!Date.parse(n[1])?(n[0]?"&aifrom="+encodeURIComponent(n[0]):"")+(n[1]?"&aito="+encodeURIComponent(n[1]):""):"&aisort=timestamp"+(n[0]?"&aistart="+new Date(n[0]).toISOString():"")+(n[1]?"&aiend="+new Date(n[1]).toISOString():"")})}],alllinks:"al",allusers:"au",allcategories:"ac",prefixsearch:["ps",,function(e){return e.replace(/^&pstitle=/,"&pssearch=")}],backlinks:"bl",embeddedin:"ei",redirects:["rd","prop",f],imageusage:"iu",imageinfo:["ii","prop",f],stashimageinfo:["sii","prop",f],videoinfo:["vi","prop",f],categorymembers:["cm",,function(e){return/^&cmtitle=(Category|分類|分类|カテゴリ|분류)%3A/gi.test(e)?e:e.replace(/^&cmtitle=/,"&cmtitle=Category:")}],categoryinfo:["ci","prop",function(e,t){return delete t.limit,f(e)}],categories:["cl","prop",f],recentchanges:"rc",usercontribs:["uc",,function(e,n){return!n.ucdir&&n.ucend-n.ucstart>0&&(t.warn('usercontribs: Change ucdir to "newer"'),n.ucdir="newer"),e.replace(/^&uctitle=/,"&ucuser=")}],NYI_langlinks:["ll","prop",function(e,t){return t&&t.lang&&"string"==typeof t.lang?e+"&lllang="+t.lang:e}],linkshere:["lh","prop",f],fileusage:["fu","prop",f],exturlusage:["eu",,function(e){return e.replace(/^&eutitle=([^=&]*)/,function(e,t){if(t){var n=decodeURIComponent(t).match(/^([a-z]+):\/\/(.+)$/i);n&&(t=n[2].replace(/\/.*$/,"")+"&euprotocol="+encodeURIComponent(n[1]))}else t="";return"&euquery="+t})}],links:["pl","prop",f],querypage:["qp",,function(e){return e.replace(/^&qptitle=/,"&qppage=")}],pagepropnames:"ppn",pageswithprop:["pwp",,function(e){return e.replace(/^&pwptitle=/,"&pwppropname=")}],tags:["tg",,function(e){return e?e.replace(/^&tgtitle=/,"&tgprop="):"&tgprop=displayname|description|hitcount|defined|source|active"}],users:["us",,function(e){return e.replace(/^&ustitle=/,"&ususers=")}],globaluserinfo:["gui","meta",function(e){return e.replace(/^&title=/,"&guiuser=")}],userinfo:["ui","meta",function(e){return e.replace(/^&title=/,"&uiprop=")}],logevents:"le"};var g="function"==typeof Symbol?Symbol("page list"):"page list";function h(e,r,i){i=t.new_options(i);var a=n.session_of_options(i);i.initialized||(a||(a=new n),i.type||(i.type=h.default_type),i.initialized=!0),i.limit||(i.limit="max"),i.next_mark||(i.next_mark=Object.create(null)),a[i.type](e,function(o,l){if(o?t.debug("Get "+o.length+" "+i.type+" pages of "+o.title,2,"wiki_API_list"):o=[],l&&(console.trace(l),o.error=l),"function"==typeof i.callback&&i.callback(o,e,i),Array.isArray(i[g]))if(!i.for_each||i.get_list){i[g].append(o);var c="["+i.type+"] ";if(Array.isArray(e)?c+=e.length+" targets:":e[n.KEY_generator_title]?c+="of ["+e.generator+"] "+n.title_link_of(e[n.KEY_generator_title]):c+=n.title_link_of(e),c+=" "+s("%1 {{PLURAL:%1|result|results}}",i[g].length)+": +"+o.length,o.title&&o.length>0&&(c+=" "+n.title_link_of(o[0].title||o[0]),o.length>1&&(c+="–"+n.title_link_of(o.at(-1).title||o.at(-1)))),0===o.length&&i.next_mark)for(var _ in i.next_mark)if("continue"!==_){c+=" ("+_+": "+String(i.next_mark[_]).replace(/^(.{10})[\s\S]*?(.{8})$/,"$1...$2")+")";break}t.info(c)}else i[g].length+=o.length;else if(i[g]&&0!==i[g].length)o.error||(o.error=new Error("options[KEY_page_list] has been set up!"));else{if(!i.for_each||i.get_list);else{var u=o.length;o.truncate(),o.length=u}i[g]?Object.assign(i[g],o):i[g]=o}!o.next_index||i.abort_operation||i[g].length>=i.limit?(t.debug(n.title_link_of(e)+": run callback after all list got or abort operation.",1,"wiki_API_list"),i.for_each?a.run(r,i[g],e,i):r(i[g],e,i)):(t.debug(n.title_link_of(e)+": 尚未取得所有清單，因此繼續取得下一階段清單。",1,"wiki_API_list"),setImmediate(h,e,r,i))},i)}h.exit=["wiki_API_list.exit: abort the operation"],h.default_type="embeddedin",h.type_list=[],function(){var e=n.prototype.next.methods;for(var r in d.type)e.push(r),h.type_list.push(r),n[r]=d.bind(null,r);e.forEach(function(e){t.debug("add action to wiki_API.prototype: "+e,2),n.prototype[e]=function(){var r=[e];Array.prototype.push.apply(r,arguments),t.is_debug()&&this.running;try{t.debug("add action: "+r.map(JSON.stringify).join("<br />\n"),3,"wiki_API.prototype."+e)}catch(e){}return this.actions.push(r),this.running||this.actions[n.KEY_waiting_callback_result_relying_on_this]?(this.actions.length>1&&t.debug(e+": 正在執行中 ("+this.thread_count+", "+this.actions.length+", "+this.running+") "+this.actions.slice(0,9).map(function(e){return e.slice(0,1)}),3,"wiki_API_prototype_methods"),t.is_debug(6)&&(console.trace(e),console.log(this.actions))):this.next(),this}})}();var m=n.namespace("Category");function y(e,r,i){var a=this&&this[n.KEY_subcategories];if(a){e=t.setup_options(e);var o=Object.create(null);for(var s in r||this.title&&(r=n.remove_namespace(this.title,e))?(i=i?Object.clone(i):Object.create(null))[r]=o:i||(i=Object.create(null)),a)o[s]=s in i?"circular_mark"in e?"function"==typeof e.circular_mark?e.circular_mark(s,i):e.circular_mark:i[s]:y.call(a[s],e,s,i);return o}}function b(e,r,i){"object"!=typeof r||i||(i=r,r=null);var a,o=this,s=n.add_session_to_options(o,{type:"categorymembers"}),l=n.add_session_to_options(o,{multi:!0,type:"categoryinfo"});if("function"==typeof i?i={for_each_page:i}:"number"==typeof i&&i>=0?i={depth:i}:(Object.assign(s,i),delete s.page_filter,s.namespace="namespace"in s?n.namespace(n.namespace(s.namespace)+"|"+m):b.default_namespace,i=t.new_options(i)),Array.isArray(e)||(e=[e],i.multi=!1),e.length<1)r(e);else{e=e.map(function(e){return o.to_namespace(e,m)}),i.cmtype?("string"==typeof i.cmtype&&(i.cmtype=i.cmtype.split("|")),a=Object.create(null),i.cmtype.forEach(function(e){a[e+"s"]=!0}),i.cmtype=i.cmtype.join("|")):(a={subcats:!0},i.namespace?String(o.namespace(i.namespace)).split("|").forEach(function(e){(e=+e)===o.namespace("File")?a.files=!0:e>=0&&e!==m&&(a.pages=!0)}):Object.assign(a,{pages:!0,files:!0}));var c,_=i.category_filter||i.filter,u=i.page_filter||i.filter,p=Object.create(null),d=0,f=e,g=0,h=0|(i.depth>=0?i.depth:b.default_depth);A()}function v(e,t){return Object.keys(e).forEach(function(n){isNaN(n)&&(t[n]=e[n])}),t}function w(e,n){if(e.depth=g,d++,p[n]=e,i.for_each_category)try{i.for_each_category(list)}catch(e){t.error(e)}}function k(e){var r=Object.create(null),a=e.filter(function(e){if(!o.is_namespace(e,m)){try{if(u&&!u(e))return!1;i.for_each_page&&i.for_each_page(e)}catch(e){t.error(e)}return!0}var n=o.remove_namespace(e,i),a=p[n];return _&&!_(e)?(t.debug("Skip non-eligibled category:"+n,1,"category_tree"),!1):(r[n]=null,!a&&(c[n]&&"object"!=typeof e||(c[n]=e),!1))});return v(e,a),t.is_empty_object(r)||(a[n.KEY_subcategories]=r),a}function A(){if(c=Object.create(null),k(f),(f=Object.values(c)).length<2)E();else{var e="Get categoryinfo of "+f.length+" categories.";t.is_debug()?t.debug(e,1,"eliminate_empty_categories"):t.log_temporary(e),n.list(f,x,l)}}function x(e){if(e.error)return t.error("for_category_info_list: "+e.error),void E();c=Object.create(null),e.forEach(O),f=Object.values(c),E()}function O(e){var t=n.remove_namespace(e,i);if(!(t in p)){var r=e.categoryinfo;for(var o in a)if(r[o]>0)return void(c[t]=e);var s=v(e,[]);r.subcats>0&&(s[n.KEY_subcategories]=Object.create(null)),w(s,t)}}function E(){if(c=Object.create(null),0!==f.length){var e="Get categorymembers of "+f.length+" categories. ("+d+" subcategories got, "+(h-g)+" levels left)";t.is_debug()?t.debug(e,1,"get_all_categorymembers"):t.log_temporary(e),f.count=0,f.forEach(S)}else j()}function S(e){n.list(e,L,s)}function L(e){if(e.error)return t.error("for_categorymember_list: "+e.error),void T();var r=n.remove_namespace(e.title,i),a="Depth "+(g+1)+"/"+h+": "+(f.count+1)+"/"+f.length+" "+r+": "+e.length+" item(s).";t.is_debug()?t.debug(a,1,"for_categorymember_list"):t.log_temporary(a),a=null,w(e=k(e),r),T()}function T(){++f.count<f.length||(f=Object.values(c),g++!==h&&0!==f.length?A():j())}function j(){i.no_list?r&&r(i.no_list):(Object.keys(p).forEach(N),e=e.map(function(e){var n=o.remove_namespace(e,i),r=p[n];if(r)return r.list_type="category_tree",r.get_category_tree=y,r.flat_subcategories=p,r;t.error("category_tree: Cannot get data of "+n)}),!i.multi&&e.length<2&&(e=e[0]),r&&r(e))}function N(e){var t=p[e],r=t[n.KEY_subcategories];if(r)for(var a in r){var o=r[a]=p[a];o&&(i.set_attributes&&(o.parent_categories||(o.parent_categories=[]),o.parent_categories.push(t)))}}}return n.KEY_subcategories="subcategories",b.default_depth=10,b.default_namespace=n.namespace("main|file|module|template|category|help"),n.prototype.category_tree=b,n.langlinks=function(e,r,a,o){var s;i(e,"language",!0)&&(s=e[0],e=e[1]),e="action=query&prop=langlinks&"+n.query.title_param(e,!0,o&&o.is_id),a&&(e+=(a>0||"max"===a?"&lllimit=":"&lllang=")+a),o&&(o.limit>0||"max"===o.limit)&&(e+="&lllimit="+o.limit),s&&(e=[s,e]),n.query(e,"function"==typeof r&&function(i){if(!i||!i.query||!i.query.pages)return t.is_Object(i)&&"batchcomplete"in i?t.debug(n.title_link_of(e)+": Done.",1,"wiki_API.langlinks"):t.warn("wiki_API.langlinks: Unknown response: ["+("object"==typeof i&&"undefined"!=typeof JSON?JSON.stringify(i):i)+"]"),t.is_debug()&&t.show_value&&t.show_value(i),void r();i=i.query.pages;var s=[];for(var l in i)s.push(i[l]);1!==s.length||o&&o.multi?(t.is_debug()&&t.info("wiki_API.langlinks: Get "+s.length+" page(s)! We will pass all pages to callback!"),r(s)):(t.is_debug()&&!s[0].langlinks&&t.warn("wiki_API.langlinks: "+("pageid"in s[0]?"無"+(a&&isNaN(a)?"所欲求語言["+a+"]之":"其他語言")+"連結":"不存在/已刪除此頁面")+": ["+s[0].title+"]"),s=s[0].langlinks,r(s?a&&isNaN(a)?s[0]["*"]:n.langlinks.parse(s):s))},null,o)},n.langlinks.parse=function(e,r){var i;if(e&&Array.isArray(e.langlinks)&&(e=e.langlinks),Array.isArray(e))return r?e.some(function(e){if(r==e.lang)return i=e["*"],!0}):((i=Object.create(null)).langs=[],e.forEach(function(e){i[e.lang]=e["*"],i.langs.push(e.lang)})),i;t.is_debug()&&(t.warn("wiki_API.langlinks.parse: No langlinks exists?"+(e&&e.title?" "+n.title_link_of(e):"")),t.is_debug(2)&&t.show_value&&t.show_value(e,"langlinks.parse"))},n.search=function(e,i,a){var o;"object"!=typeof a&&("max"===a||a>0)&&(a={srlimit:a}),Array.isArray(e)&&(o=e[0],e=e[1]),t.is_RegExp(e)&&(e=("insource:"+e).replace(/g([^\/]*)$/,"$1")),"namespace"in a&&(a.srnamespace?t.warn("Unrecognized parameter: namespace."):(a.srnamespace=a.namespace,delete a.namespace)),a.srnamespace&&(a.srnamespace=n.namespace(a.srnamespace));var s=Object.clone(a);delete s[r],a.handle_continue_response=!0;var l=t.URI(o);Object.assign(l.search_params,{action:"query",list:"search",srsearch:e},n.search.default_parameters,s),delete l.search_params.next_mark,n.query(l,function(r,o){if(t.is_debug(2)&&t.show_value&&t.show_value(r,"wiki_API.search"),!n.query.handle_error(r,o,i)){var s=a.cached_list;a=r&&(r.continue||r["query-continue"]),!r||a||"batchcomplete"in r?r&&(r=r.query)?(s&&(r.search=s.append(r.search)),a&&Object.assign(r.search,a.search),r.search.searchinfo=r.searchinfo,(r=r.search).search_key=e,"function"==typeof i&&i(r,o)):i(r,new Error("Unknown result")):i(r,new Error("No batchcomplete and no continue in the API result! "+e))}},null,a)},n.search.default_parameters={srnamespace:n.namespace("main|file|module|template|category|help|portal"),srprop:"redirecttitle",srlimit:"max",srinterwiki:1},n.redirects_root=function(e,t,r){r=Object.assign({redirects:1,prop:"info"},r),n.page(e,function(n,r){e=Array.isArray(n)?n.map(function(e){return e.title}):n&&n.title||e,t(e,n,r)},r)},n.redirects_here=function(e,r,i){if(!(i=t.new_options(i)).no_trace)return i.query_title=e,void n.redirects_root(e,function(e,t,a){i.page_data=t,i.no_trace=!0,n.redirects_here(e,r,i)},i);var o=a(e,i);if(!o)throw"wiki_API.redirects_here: Invalid title: "+n.title_link_of(e);o[1]="action=query&prop=redirects&rdlimit=max&"+o[1],o[0]||(o=o[1]),n.query(o,"function"==typeof r&&function(e,a){if(a=e&&e.error)return t.error("wiki_API.redirects_here: ["+a.code+"] "+a.info),e.warnings&&e.warnings.query&&e.warnings.query["*"]&&t.warn(e.warnings.query["*"]),void r(null,null,a);if(!e||!e.query||!e.query.pages)return t.warn("wiki_API.redirects_here: Unknown response: ["+("object"==typeof e&&"undefined"!=typeof JSON?JSON.stringify(e):e)+"]"),t.is_debug()&&t.show_value&&t.show_value(e),void r();e=e.query.pages;var o=[],s=i.page_data,l=n.session_of_options(i);for(var c in e){var _=e[c];i.no_message||n.content_of.page_exists(_)||t.warn(["wiki_API.redirects_here: ",{T:["%1 is not exist in %2.",_.title?n.title_link_of(_):" id "+_.pageid,n.site_name(l)]}]);var u=_.redirects||[];t.debug(n.title_of(_)+": 有 "+u.length+" 個同名頁面(重定向至此頁面)。",2,"wiki_API.redirects_here"),i.include_root&&((u=u.slice()).unshift(_),_.redirect_list=u);var p=s&&s.index_of_title&&s[s.index_of_title[_.title]]||s;p&&(_=Object.assign(p,_)),u.query_title=p&&(p.original_title||p.title)||i.query_title,t.debug("redirects (alias) of "+n.title_link_of(_)+": ("+u.length+") ["+u.slice(0,3).map(n.title_of)+"]...",1,"wiki_API.redirects_here"),o.push(_)}o.length>1?r(o):(o=o[0],r(o,o.redirect_list||_.redirects))},null,i)},n.redirects_here.count=function(e,r){if(!Array.isArray(r))return t.warn("wiki_API.redirects_here.count: Invalid embeddedin list."),0;var i=Object.create(null);return r.forEach(function(r){r=n.title_of(r),t.debug("含有模板{{"+e[r]+"}}←{{"+r+"}}",3,"wiki_API.redirects_here.count"),i[e[r]||r]=null}),Object.keys(i).length},h}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.page.Page",require:"data.code.compatibility.|application.net.wiki.page.|application.net.wiki.list.",no_extend:"this,*",code:function(e){var t=e.application.net.wiki,n=t.KEY_SESSION;function r(e,t,r){this[n]=r,Object.assign(this,{ns:r.namespace(e)||0,title:r.normalize_title(e)})}var i="function"==typeof Symbol&&Symbol.asyncIterator,a={done:!0};function o(e,r){var o=this[n];if((r=t.add_session_to_options(o,r)).type=e,!i||r&&r.get_list)return function(e){return new Promise(function(n,r){t.list(this.title,function(e){e.error?r(e.error):n(e)},e)}.bind(this))}.call(this,r);var s=Object.create(null);return s[i]=function(){function e(){return{value:n.queue.shift(),done:!1}}var n={queue:[],next:function(){if(n.resolve)throw new Error("Call resolve() before latest promise resolved");return n.queue.length>0?Promise.resolve(e()):n.done?Promise.resolve(a):new Promise(function(e,t){n.resolve=e})}};return r.for_each=function(t){n.queue.push(t);var r=n.resolve;r&&(delete n.resolve,r(e()))},t.list(this.title,function(e){n.done=!0;var t=n.resolve;t&&(delete n.resolve,t(a))},r),n}.bind(this),s}return Object.assign(t.prototype,{Page:function(e,t){return new r(e,t,this)}}),t.list.type_list.forEach(function(e){r.prototype[e]=function(t){return o.call(this,e,t)}}),r}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.edit",require:"application.net.wiki.|application.net.wiki.namespace.|application.net.wiki.task.|application.net.wiki.page.",no_extend:"this,*",code:function(e){var t=e.application.net.wiki,n=t.KEY_SESSION,r=t.PATTERN_category_prefix,i=t.BLANK_TOKEN,a=e.cache_gettext(function(e){a=e});function o(n,r,a,s,l,c){var _={action:"edit"};if(!t.need_get_API_parameters(_,s,t[_.action],arguments))if(e.is_thenable(r)){r.then(function(e){o(n,e,a,s,l,c)},function(e){l(n,e)});var u=t.session_of_options(s);u&&u.running&&u.next(r)}else{var p=s&&s.undo;p&&(!0===p?s.undo=p=1:p>=1||delete s.undo);var d,f=s&&(s.undo_count||p&&p<o.undo_count_limit&&p);if(t.Variable_Map.is_Variable_Map(r)&&(r=r.to_page_text_updater()),f||"function"==typeof r)return e.debug("先取得內容再 edit / undo "+t.title_link_of(n)+"。",1,"wiki_API_edit"),f?((d=Object.clone(s)).get_page_before_undo=!0,d.rvlimit||(d.rvlimit=f),d.rvprop||(d.rvprop="function"==typeof r?"ids|timestamp|user":"ids|timestamp")):delete(d=Object.clone(s)).rollback_action,void t.page(n,function(i){if(s&&!s.ignore_denial&&o.denied(i,s.bot_id,s.notification_name))e.warn(["wiki_API_edit: ",{T:["Editing of %1 has been rejected: %2",t.title_link_of(i),s.notification_name]}]),l(i,"denied");else{if(s.page_to_edit=i,f){delete s.undo_count;var _=t.content_of.revision(i);_&&(c=_.timestamp,s.undo=_.revid),s.undoafter=i.revisions.at(-1).parentid}"function"==typeof r&&(r=r.call(s,i)),o(n,r,a,s,l,c)}},d);s.discard_changes&&(r=[o.cancel,r||s.discard_changes]);var g,h,m=!p&&o.check_data(r,n,s,"wiki_API_edit");if(m)return e.debug("直接執行 callback。",2,"wiki_API_edit"),void l(n,s.error_with_symbol?r:m);Array.isArray(n)&&(_=[n[0],_],n=n[1]),s&&s.write_to&&(n=s.write_to,e.debug("依 options.write_to 寫入至 "+t.title_link_of(n),1,"wiki_API_edit")),s&&e.debug("#1: "+Object.keys(s).join(","),4,"wiki_API_edit"),s=p?e.setup_options(s):Object.assign({text:r},s),e.is_Object(n)?(o.set_stamp(s,n),n.pageid?s.pageid=n.pageid:s.title=n.title):s.title=n,(c||s.page_to_edit)&&o.set_stamp(s,c),s.sectiontitle&&"new"!==s.section&&(s.summary=(g=s.summary,(h=s.sectiontitle)?"/* "+h+" */ "+(g||""):g||""),delete s.sectiontitle),e.debug("options.token = "+JSON.stringify(a),6,"wiki_API_edit"),s.token=(e.is_Object(a)?a.csrftoken:a)||i,e.debug("#2: "+Object.keys(s).join(","),4,"wiki_API_edit");var y=t.extract_parameters(s,_);t.query(_,function(i,a){if(a||(i.error?(a=i.error).toString=t.query.error_toString:i.edit&&"Success"!==i.edit.result&&(a={code:i.edit.result,info:i.edit.info||(i.edit.captcha?"必需輸入驗證碼":i.edit.spamblacklist?"Contains spam link 包含被列入黑名單的連結: "+i.edit.spamblacklist:JSON.stringify(i.edit)),toString:t.query.error_toString})),a||!i){if(i&&i.error){if("no-direct-editing"===i.error.code&&"new"===s.section)return e.debug({T:"無法以正常方式編輯，嘗試當作 Flow 討論頁面。"},1,"wiki_API_edit"),void t.Flow.edit(n,s.sectiontitle,r.replace(/[\s\n\-]*~~~~[\s\n\-]*$/,""),s.token,s,l);i.error.code}else;e.warn(["wiki_API_edit: ",{T:["Failed to edit the page %1: %2",t.title_link_of(n),String(a)]}])}else i.edit&&"nochange"in i.edit&&e.info(["wiki_API_edit: ",{T:["No changes to page content: %1",t.title_link_of(n)]}]);"function"==typeof l&&l(n,a,i)},y,s)}}t.check_stop=function(r,i){e.is_Object(i)||(i="string"==typeof i?{title:i}:Object.create(null));var a=i.title;"function"==typeof a&&(a=a(i.token)),a||(a=t.check_stop.title(i.token))||r(),e.debug({T:["檢查緊急停止頁面 %1",t.title_link_of(a)]},1,"wiki_API.check_stop");var o=i[n]||this;t.page([o.API_URL,a],function(n){var o,s=t.content_of(n),l=!1;s?"function"==typeof i.checker?((l=i.checker(s))&&e.warn(["wiki_API.check_stop: ",{T:"已設定緊急停止編輯作業！"}]),s=null):o=i.pattern||i.section&&new RegExp("\n==(.*?)"+i.section+"(.*?)==\n"):e.info(["wiki_API.check_stop: ",{T:["The emergency stop page was not found (%1).",t.title_link_of(a)]},{T:"The operation will proceed as usual."}]),s&&(e.is_RegExp(o)||(o=t.check_stop.pattern),e.debug("wiki_API.check_stop: 採用 pattern: "+o),(l=o.test(s,n))&&e.warn(["wiki_API.check_stop: ",{T:["緊急停止頁面 %1 有留言要停止編輯作業！",t.title_link_of(a)]}])),r(l)},i)},t.check_stop.title=function(e){return e.login_user_name?"User talk:"+e.login_user_name+"/Stop":""},t.check_stop.pattern=/\n=(.+?)=\n/,o.cancel="function"==typeof Symbol?Symbol("CANCEL_EDIT"):{cancel:"放棄編輯頁面用"},o.undo_count_limit=100,o.check_data=function(n,r,i,s){var l;if(n===o.cancel&&(n=[o.cancel]),n||i&&i.allow_empty?Array.isArray(n)&&n[0]===o.cancel&&(1===(l=n.slice(1)).length&&(l[1]=l[0]||a("Abandon change")),l[0]||(l[0]="cancel"),e.debug("採用個別特殊訊息: "+l,2,s||"wiki_API_edit.check_data")):l=["empty",a("string"==typeof n?"Content is empty":"Content is not settled")],l)return"skip"!==l[1]?e.warn((s||"wiki_API_edit.check_data")+": "+t.title_link_of(r)+": "+(l[1]||a("No reason provided"))):e.debug("Skip "+t.title_link_of(r),2,s||"wiki_API_edit.check_data"),l[0]},o.set_stamp=function(n,r){return t.is_page_data(r)&&(r=t.content_of.revision(r))&&(r.revid&&(n.baserevid=r.revid),r=r.timestamp),r&&(e.debug(r,3,"wiki_API_edit.set_stamp"),n.basetimestamp=n.starttimestamp=r),n},o.get_bot=function(t){for(var n,r=[],i=/{{[\s\n]*bots[\s\n]*(\S[\s\S]*?)}}/gi;n=i.exec(t);)e.debug(n.join("<br />"),1,"wiki_API_edit.get_bot"),(n=n[1].trim().replace(/(^\|\s*|\s*\|$)/g,""))&&r.push(n);if(0<r.length)return e.debug(r.join("<br />"),1,"wiki_API_edit.get_bot"),r},o.denied=function(n,r,i){var a;if(n&&(t.is_page_data(n)&&(a=n,n=t.content_of(n)),"string"==typeof n&&(n=n.replace(/<!--[\s\S]*-->/g,"").replace(/<nowiki\s*>[\s\S]*<\/nowiki>/g,"")),n)){e.debug("contents to test: ["+n+"]",3,"wiki_API_edit.denied");var s,l,c=o.get_bot(n);if(c&&(e.debug("test "+r+"/"+i,3,"wiki_API_edit.denied"),r=(r=r&&r.toLowerCase())?new RegExp("(?:^|[\\s,])(?:all|"+r+")(?:$|[\\s,])","i"):o.denied.all,i&&("string"==typeof i&&i.includes(",")&&(i=i.split(",")),Array.isArray(i)&&(i=i.map(function(e){return e.trim()}).join("|")),"string"==typeof i?i=new RegExp("(?:^|[\\s,])(?:all|"+i.trim()+")(?:$|[\\s,])"):e.is_RegExp(i)||(e.warn("wiki_API_edit.denied: Invalid notification_name: ["+i+"]"),i=null)),c.some(function(t){var n,o;if(e.debug("test ["+t+"]",1,"wiki_API_edit.denied"),i)for(o=/(?:^|\|)[\s\n]*optout[\s\n]*=[\s\n]*([^{}|]+)/gi;n=o.exec(t);)if(i.test(n[1]))return s="Opt out of "+n[1];for(o=/(?:^|\|)[\s\n]*deny[\s\n]*=[\s\n]*([^|]+)/gi;n=o.exec(t);)if(r.test(n[1]))return s="Banned: "+n[1];for(o=/(?:^|\|)[\s\n]*allow[\s\n]*=[\s\n]*([^|]+)/gi;n=o.exec(t);){if(!r.test(n[1]))return s="Not in allowed bots list: ["+n[1]+"]";a&&(l=n[1])}})),!s&&/{{[\s\n]*nobots[\s\n]*}}/i.test(n)&&(s="Ban all compliant bots."),s)return e.warn("wiki_API_edit.denied: "+(a?t.title_link_of(a)+" ":"")+s),s;l&&(a.allow_bot=l)}},o.denied.all=/(?:^|[\s,])all(?:$|[\s,])/,o.copy_from=function n(r,i,a){"function"==typeof i&&(a=i,i=void 0),i=t.add_session_to_options(this,i);var o,s=this;function l(){var n,l=t.content_of(r);"function"==typeof i.processor&&(l=i.processor(r,t.content_of(s.last_page))),l||(e.warn("wiki_API_prototype_copy_from: Nothing to copy!"),s.next()),i.append&&(n=t.content_of(s.last_page).trimEnd())&&(l=n+"\n"+l,i.summary="Append from "+t.title_link_of(r,o)+"."),i.summary||(i.summary="Copy from "+t.title_link_of(r,o)+"."),s.actions.unshift(["edit",l,i,a]),s.next()}if(t.is_wiki_API(r)&&!(r=(o=r).last_page))return e.debug("先擷取同名title: "+t.title_link_of(this.last_page,o)),void o.page(t.title_of(this.last_page),function(t){e.debug("Continue coping page"),n.call(s,o,i,a)});if(t.is_page_data(r))l();else{var c=this.last_page;t.page(r,function(e){s.last_page=c,r=e,l()},i)}return this},t.upload=function(i,o,_,p){var d={action:"upload"};if(!t.need_get_API_parameters(d,_,t[d.action],arguments)){"page_text_updater"in(_=e.new_options(_))||!_.variable_Map||(_.page_text_updater=_.variable_Map),_.page_text_updater&&(_.token=o),!_.comment&&_.summary&&(e.warn("wiki_API.upload: Please use .comment instead of .summary!"),_.comment=_.summary);var f=e.new_options(_.structured_data);if(_.text?["description","date","source","author","permission","other_versions","other_fields"].forEach(function(t){t in _&&e.error("wiki_API.upload: Cannot assign both options.text and options."+t+"! Maybe you want to change options.text to options.additional_text?")}):(_.text={description:_.description,date:e.is_Date(_.date)?_.date.toISOString().replace(/\.\d+Z$/,"Z"):_.date,source:_.source_url||_.media_url||_.file_url,author:/^Q\d+/.test(_.author)?"{{label|"+_.author+"}}":_.author,permission:_.permission,other_versions:_.other_versions||_["other versions"],other_fields:_.other_fields||_["other fields"]},f.date||(f.date=_.text.date)),_.location&&(isNaN(_.location[0])||isNaN(_.location[1])?delete _.location:f.location||(f.location=_.location)),_.location&&_.variable_Map&&(_.location[0]&&!_.variable_Map.has("latitude")&&_.variable_Map.set("latitude",_.location[0]),_.location[1]&&!_.variable_Map.has("longitude")&&_.variable_Map.set("longitude",_.location[1]),_.location[2]&&!_.variable_Map.has("altitude")&&_.variable_Map.set("altitude",_.location[2])),e.is_Object(_.text)){var g=_.variable_Map;if(g)for(var h in _.text){var m=_.text[h];!g.has(h)&&t.is_valid_parameters_value(m)&&!u.test(m)&&["date","source"].includes(h)&&g.set(h,m),g.has(h)&&(_.text[h]=g.format(h))}_.text=["== {{int:filedesc}} ==",t.template_text(_.text,{name:"Information",separator:"\n| "})],_.location&&_.text.push(t.template_text([_.location_template_name||"Location",g?g.format("latitude"):_.location[0],g?g.format("longitude"):_.location[1]])),_.text=_.text.join("\n")}_.license&&(_.text+="\n== {{int:license-header}} ==\n"+t.template_text.join_array(_.license)),_.additional_text&&(_.text+="\n"+_.additional_text.trim()),_.categories&&(_.text+="\n"+t.template_text.join_array(_.categories.map(function(e){return e&&!e.includes("[[")&&(r.test(e)||(e="Category:"+e),e="[["+e+"]]"),e})));var y,b=t.extract_parameters(_,d);if(b.token=o,_.form_data||(_.form_data=!0),b.file=i.includes("://")?{url:i}:{file:i},b.filename||(b.filename=i.match(/[^\\\/]*$/)[0].replace(/#/g,"-")),!f["media type"])e.MIME_of?y=e.MIME_of(b.filename):(y=b.filename.match(/\.(png|jpeg|gif|webp|bmp)$/i))&&(y="image/"+y[1].toLowerCase()),y&&(f["media type"]=y);var v=t.session_of_options(_);if(_.show_message&&b.file.url&&e.log(i+"\nUpload to → "+t.title_link_of(v.to_namespace(b.filename,"File"))),v&&v.API_URL&&_.check_media,_.test_only)return"no message"!==_.test_only&&(delete _[n],delete _.text,d=b.text,delete b.text,console.log("-".repeat(80)),console.log(_),console.log(b),e.info("wiki_API.upload: test edit text:\n"+d)),void p(null,"Test edit");t.query(d,function(n,r,i,a){if(a||!i||(a=i.error)||!(i=i.upload)||"Success"!==i.result)return a||(i&&i.result?(a=i.result,i.warnings&&(a+=": "+JSON.stringify(i.warnings))):a="Error on uploading"),r.show_message&&(console.log(i),e.error("object"==typeof a?JSON.stringify(a):a),i&&i.warnings&&e.warn(JSON.stringify(i.warnings))),"string"==typeof a?a=new Error(a):e.is_Object(a)&&(a=new Error(JSON.stringify(a))),void("function"==typeof n&&n(i,a));r.show_message&&console.log(i);if(!r.page_text_updater||!i.warnings||!i.warnings.exists)return void("function"==typeof n&&n(i));!r.summary&&r.comment&&(r.summary=r.comment);delete r.text,delete r.form_data,t.Variable_Map.is_Variable_Map(r.page_text_updater)&&(r.page_text_updater=r.page_text_updater.to_page_text_updater());var o=t.session_of_options(r).to_namespace(i.filename,"File");t.edit(o,r.page_text_updater,r.token,r,n)}.bind(null,function(n,r){f.date||(f.date=_.date),f.location&&!f.location.precision&&(f.location.precision=.1),Object.keys(f).forEach(function(e){if(void 0!==f[e]){var t=l[e];!t||t in f||(f[t]=f[e],delete f[e])}else delete f[e]}),e.is_empty_object(f)?p(n,r):(v.running=!0,v.edit_structured_data(v.to_namespace(b.filename,"File"),function(e){var n=[],r=Object.create(null);for(var i in f)if(!e.claims||!t.data.value_of(e.claims[i])){var o=f[i];r[i]=o;var l=c[i],_=l&&l[s]||i;_=t.title_link_of("d:Property:"+i,_),n.push(_+"="+o)}return 0===n.length?[t.edit.cancel,"skip"]:(this.summary+=n.join(a("Comma-separator")),r)},{bot:_.bot,summary:"Modify structured data: "},function(e,t){r&&n&&n.error&&n.error.code,p(n,r||t)}),v.next())},_),b,_)}};var s="summary_name",l={location:"P9149",depicts:"P180","file format":"P2701","data size":"P3575","media type":"P1163","created datetime":"P571",date:"P571"},c=Object.create(null);function _(t){e.is_Object(t)&&(t=Object.entries(t));try{return void Map.call(this,t)}catch(e){}return t=new Map(t),Object.assign(t,_.prototype),t}Object.keys(l).forEach(function(e){var t=l[e],n=c[t];n||(c[t]=n=Object.create(null)),n[s]||(n[s]=e)}),_.prototype={format:function(t,n){var r,i="\x3c!-- update "+t+": "+a("The text between update comments will be automatically overwritten by the bot.")+" --\x3e",o="\x3c!-- update end: "+t+" --\x3e";this.has(t)?(r=this.get(t),e.is_Object(r)&&(r=r.wikitext)):r=void 0===n?"":n;return i+r+o},update:function(n){var r,i=this;function a(t,n,a,o,s){if(i.has(a)){var l,c=i.get(a);if(e.is_Object(c)&&(l=c.may_not_update,c=c.wikitext),c!==o)return l||(r=a),n+c+s}return t}0;if(n=n.replace(u,a),!r)return[t.edit.cancel,"Variable_Map_update: Nothing to update"];return n},to_page_text_updater:function(){return function(e){var n=t.content_of(e);n||"function"==typeof(n=this.template)&&(n=this.template(e));if(n)return this.update(n);0;return n="Variable_Map__page_text_updater: "+t.title_link_of(e)+": No .template specified.",[o.cancel,n]}.bind(this)},constructor:_},_.is_Variable_Map=function(e){return e&&e.constructor===_};var u=/(<!--\s*update ([^():]+)[\s\S]*?-->)([\s\S]+?)(<!--\s*update end:\s*\2(?:\W[\s\S]*?)?-->)/g;return _.plain_text=function(e){return wiki_link.replace(/<!--[\s\S]*?-->/g,"")},t.Variable_Map=_,o}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.parser.wikitext",require:"application.net.wiki.parser.",no_extend:"this,*",code:function(e){var t=e.application.net.wiki,n=t.PATTERN_wikilink,r=t.PATTERN_wikilink_global,i=t.PATTERN_file_prefix,a=t.PATTERN_URL_WITH_PROTOCOL_GLOBAL,o=t.PATTERN_category_prefix,s="".indexOf("_");function l(e,t){if(e){e.title&&(e=e.title);var n=e.toString().replace(/ \([^()]+\)$/,"");return n.normalize&&(n=n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),t&&(n=n.toLowerCase()),n}}function c(t){if(null!=t){var n=this.sort_key&&l(this.sort_key);if(n){if(n===t)return;(n.length>t||!n.startsWith(t))&&e.debug("The sort key of <code><nowiki>"+this+"</nowiki></code> will be set to "+JSON.stringify(t)+"!",1,"set_sort_key_of_category")}return this[2]=this.sort_key=t,!0}}var _={namespace:!0,page_title:!0,url:!0,style:!0,tag_single:!0,comment:!0};function u(t,n,r){return"string"==typeof t?t=[t]:Array.isArray(t)?t.type&&"plain"!==t.type&&(t=[t]):e.warn("set_wiki_type: The token is not Array!"),t.type=n,n in _&&(t.is_atom=!0),t.toString=v[n],t}function p(e,t,n){for(var r=e.length,i=0|e.last_resolved_length;i<r;i++){var a=e[i];if("string"==typeof a){var o=[];if(a.split(t).forEach(function(r,i){0!==i?0!==(i=r.indexOf(n))?(o.push(e[+r.slice(0,i)]),(r=r.slice(i+n.length))&&o.push(r)):o.push(t):r&&o.push(r)}),o.length>1?u(o,"plain"):o=o[0],o.includes(t))throw new Error("resolve_escaped: 仍有 include mark 殘留！");e[i]=o}}e.last_resolved_length=r}var d=/\[((?:https?:|ftps?:)?\/\/[^\s\|<>\[\]{}\/][^\s\|<>\[\]{}]*)(?:([^\S\r\n]+)([^\]]*))?\]/gi,f="bdi|b|del|ins|i|u|font|big|small|sub|sup|h[1-6]|cite|code|em|strike|strong|s|tt|var|div|center|blockquote|[oud]l|table|caption|pre|ruby|r[tbp]|p|span|abbr|dfn|kbd|samp|data|time|mark|includeonly|noinclude|onlyinclude|langconvert|categorytree|ce|chem|charinsert|gallery|graph|hiero|imagemap|indicator|inputbox|nowiki|mapframe|maplink|math|poem|quiz|ref|references|score|section|source|syntaxhighlight|templatedata|templatestyles|timeline|li|dt|dd",g=new RegExp("<(/)?(nowiki|references|ref|area|base|br|col|embed|hr|img|input|keygen|link|meta|param|source|track|wbr|templatestyles|section)(/|\\s[^<>]*)?>","ig"),h="pre|nowiki|gallery|indicator|langconvert|timeline|hiero|imagemap|source|syntaxhighlight|poem|quiz|score|templatestyles|templatedata|graph|maplink|mapframe|charinsert|ref|references|inputbox|categorytree|section|math|ce|chem",m=t.get_PATTERN_full_tag(h);h=h.split("|"),f=f.split("|");var y=t.get_PATTERN_full_tag(f.filter(function(e){return!h.includes(e)}));function b(e){var t=this.parameters[1]&&this.parameters[1].toString(),n=this.parameters[2]&&this.parameters[2].toString(),r=this.parameters[3]&&this.parameters[3].toString();switch(this.name){case"len":return t.length;case"sub":return r?t.substring(n,r):t.slice(n);case"time":if(!n||"now"===n)return n=new Date,t.replace(/Y/g,n.getUTCFullYear()).replace(/n/g,n.getUTCMonth()+1).replace(/m/g,(n.getUTCMonth()+1).pad(2)).replace(/j/g,n.getUTCDate()).replace(/d/g,n.getUTCDate().pad(2))}return this}h=h.to_hash();var v={namespaced_title:function(){return this.join(this.oddly?"":":")},page_title:function(){return this.join(":")},file:function(){return"[["+this[0]+this[1]+(this.length>2?"|"+this.slice(2).join("|"):"")+"]]"},category:function(){return"[["+this[0]+this[1]+(this.length>2?"|"+this.slice(2).join("|"):"")+"]]"},link:function(){return"[["+this[0]+this[1]+(this.length>2?this.pipe+this[2]:"")+"]]"},external_link:function(){return"["+this.join("")+"]"},url:function(){return this.join("")},parameter:function(){return"{{{"+this.join("|")+"}}}"},transclusion:function(){return"{{"+this.join("|")+"}}"},magic_word_function:function(){return"{{"+this[0]+this.slice(1).join("|")+"}}"},table:function(){return"{|"+this.join("")+"\n|}"},table_attributes:function(){return this.join("")+(this.suffix||"")},caption:function(){return(this.delimiter||"")+this.join("")},table_row:function(){return(this.delimiter||"")+this.join("")},table_cell:function(){return(this.delimiter||"")+this.join("")},convert:function(e,t,n){if(!e)return"-{"+("flag"in this?(this._flag||this.flag)+"|":"")+this.join(";")+"}-";if("rule"===e)return this.join(";");var r=this.flag;if(!n&&r in{H:!0,T:!0,"-":!0})return"";if(r in{R:!0,D:!0})return this.join(";");if(e=e.trim().toLowerCase(),Array.isArray(r))return r.includes(e),this.join(";");this.conversion[e]||(/^zh-(?:tw|hk|mo)/.test(e)?e="zh-hant":/^zh/.test(e)&&(e="zh-hans"));var i,a=this.conversion[e];Array.isArray(a)&&(a=a.map(function(e){return"string"==typeof e?e:"convert"===e.type&&"string"==typeof e.converted?e.converted:void(i=!0)}),a=i?this.conversion[e]:a.join(""));return a||"string"==typeof this.converted&&this.converted||"converter-manual-rule-error"},switch:function(){return"__"+this[0]+"__"},italic:function(){return"''"+this.join("")+(this.no_end?"":"''")},bold:function(){return"'''"+this.join("")+(this.no_end?"":"'''")},section_title:function(e){var t=this.join("");if(e)return t;var n="=".repeat(this.level);return n+t+n+(this.postfix||"")},tag:function(){return"<"+this.tag+(this[0]||"")+">"+this[1]+"</"+(this.end_tag||this.tag)+">"},tag_attributes:function(){return this.join("")},tag_inner:function(){return this.join("")},tag_single:function(){return"<"+(this.slash||"")+this.tag+this.join("")+">"},comment:function(){return"\x3c!--"+this.join("")+(this.no_end?"":"--\x3e")},line:function(){return this.join("\n")},list:function(){return this.join("")},list_item:function(){return(this.list_prefix||"")+this.join("")},pre:function(){return" "+this.join("\n ")},hr:function(){return this[0]},paragraph:function(){return this.join("\n")+(this.separator||"")},plain:function(){return this.join("")}},w="d",k=Object.create(null);"DISPLAYTITLE|DEFAULTSORT|デフォルトソート|ns|nse|lc|lcfirst|uc|ucfirst|urlencode|anchorencode|LOCALURL|FULLURL|FILEPATH|int|msg|raw|msgnw|subst|safesubst".split("|").forEach(function(e){k[e.toUpperCase()]=!0}),"!|=|CURRENTYEAR|CURRENTMONTH|CURRENTDAY|CURRENTTIME|CURRENTHOUR|CURRENTWEEK|CURRENTTIMESTAMP|NAMESPACE|NAMESPACENUMBER|FULLPAGENAME|PAGENAME|BASEPAGENAME|SUBPAGENAME|SUBJECTPAGENAME|ARTICLEPAGENAME|TALKPAGENAME|ROOTPAGENAME|FULLPAGENAMEE|PAGENAMEE|BASEPAGENAMEE|SUBPAGENAMEE|SUBJECTPAGENAMEE|ARTICLEPAGENAMEE|TALKPAGENAMEE|ROOTPAGENAMEE".split("|").forEach(function(e){k[e.toUpperCase()]=!1});var A=/^(([\s\S]+?)=>)?(\s*)(zh(?:-(?:cn|tw|hk|mo|sg|my|hant|hans))?)(\s*:|:\s*)(\S.*?)(\s{2,})?$/,x=/__([A-Z]+(?:_[A-Z]+)*)__/g;x=/__(NOTOC|FORCETOC|TOC|NOEDITSECTION|NEWSECTIONLINK|NONEWSECTIONLINK|NOGALLERY|HIDDENCAT|NOCONTENTCONVERT|NOCC|NOTITLECONVERT|NOTC|INDEX|NOINDEX|STATICREDIRECT|NOGLOBAL)__/g;var O={thumb:"format",thumbnail:"format",frame:"format",framed:"format",frameless:"format",border:"border",right:"location",left:"location",center:"location",none:"location",baseline:"alignment",middle:"alignment",sub:"alignment",super:"alignment","text-top":"alignment","text-bottom":"alignment",top:"alignment",bottom:"alignment",upright:"size"};function E(l,_,f){if(!l)return l;function v(e,t){return u(e,t)}_=e.setup_options(_);var S=t.session_of_options(_),L=_.include_mark||"\0",T=_.end_mark||"",j=_.normalize,N=!f&&["",""],R=_.no_resolve;if(R&&delete _.no_resolve,/\d/.test(T)||L.includes(T))throw new Error("Error end of include_mark!");if(N){if(!l.replace){if(Array.isArray(l)&&l.type)return e.debug("Treat ["+l+"] as parsed token anf return directly!",1,"parse_wikitext"),l;console.trace(l)}!(l=l.replace(new RegExp(L.replace(/([\s\S])/g,"\\$1"),"g"),L+T)).startsWith("\n")&&/^(?:[*#;:=\s]|{\|)/.test(l)&&(l=(N[0]="\n")+l),l.endsWith("\n")||(l+=N[1]="\n"),f=[]}var P=f.section_title_hierarchy||(f.section_title_hierarchy=[]);function C(e){return e.includes(L)&&(e=E(e,_,f)),e}P[0]||(P[0]=_.target_array||Object.create(null),P[0].child_section_titles=[]),f.conversion_table||(f.conversion_table=Object.create(null)),"function"==typeof _.prefix&&(l=_.prefix(l,f,L,T)||l);var I=S&&S.configurations.magic_words_hash||k,U=S&&S.configurations.extensiontag_hash||h,D=S&&S.configurations.PATTERN_extensiontags||m,M=new RegExp(D),F=S&&S.configurations.PATTERN_non_extensiontags||y;var z=/\s*(\w+)(?:=|{{\s*=\s*(?:\|[\s\S]*?)?}})("[^"]*"|'[^']*'|([^\s"'{}\|]*))|\s*([^\s"'{}\|]*)/g;function W(n){return(n=v(C(n||""),"tag_attributes")).attributes=function(n){var r=Object.create(null);if(n.replace(/{{\s*(?:=|ANCHORENCODE:[^{}\|]*)\s*(?:\|[\s\S]*?)?}}/gi,"").includes("{{"))return e.debug("Skip tag attributes with template: "+n),r;for(var i,a=[];(i=z.exec(n))&&i[0];){a.push(E(i[0],_));var o=i[1];if(o){var s=i[3]||i[2].slice(1,-1);t.HTML_to_wikitext&&(s=t.HTML_to_wikitext(s)),s=E(s,_),r[o]=s}else i[4]&&(o=E(i[4],_),r[i[4]]=o)}return z.lastIndex=0,r}(n.toString()),n}function q(t,n,r,i,a){var o,s="nowiki"!==n&&i.match(new RegExp("([\\s\\S]*)<("+n+")(\\s(?:[^<>]*[^<>/])?)?>([\\s\\S]*?)$","i"));s?(o=t.slice(0,s[1].length-s[0].length-a.length-3),n=s[2],r=s[3],i=s[4]):o="",e.debug(o+" + <"+n+">",4,"parse_wikitext.tag");var l=n.toLowerCase()in U;return!l&&/\n[|!]|[|!]{2}/.test(i.replace(M,""))?(e.is_debug(3)&&(e.warn("parse_wikitext.tag: <"+n+"> 在表格 td/th 或 template parameter 中，此時視為一般 text，當作未匹配 match HTML tag 成功。\n"+o),e.info(r),e.log(i),console.trace(new RegExp("^([\\s\\S]*)<("+n+")(\\s(?:[^<>]*[^<>/])?)?>([\\s\\S]*?)$","i"))),t):(e.is_debug(3)&&(e.info("parse_wikitext.tag: <"+n+"> passed:\n"+o),e.debug(r,0),e.log(i)),e.debug("<"+n+"> 內部需再進一步處理。",4,"parse_wikitext.tag"),r=W(r),i=E(i,_,f),"nowiki"===n&&Array.isArray(i)&&(e.debug("-".repeat(70)+"\n<nowiki> 中僅留 -{}- 有效用。",3,"parse_wikitext.transclusion"),i.type&&"plain"!==i.type&&(i=v([i],"plain")),i.forEach(function(e,t){e.type&&(i[t]=i[t].toString())}),i.length<=1&&(i=i[0])),t=[r,i=v([i||""],"tag_inner")],j?n=n.toLowerCase():n!==a&&(t.end_tag=a),t.tag=n,t=v(t,"tag"),i.parent=t,r&&r.attributes&&(t.attributes=r.attributes),f.push(t),o+L+(f.length-1)+T)}function H(e,t,n,r){return r?(j&&(r=r.replace(/[\s\/]*$/," /")),e=[r=W(r)]):e=[""],j&&(n=n.toLowerCase()),t&&(e.slash=t),e.tag=n,v(e,"tag_single"),r&&r.attributes&&(e.attributes=r.attributes,delete r.attributes),f.push(e),L+(f.length-1)+T}function $(e,t,n,r){var i,a=n.lastIndexOf(t),o="";return a!==s&&(o=t+n.slice(0,a),n=n.slice(a+t.length)),n=E(n,_,f),"'''''"===t?(n=[v(n,"bold")],i="italic"):i="''"===t?"italic":"bold",n=v(n,i),t===r?r="":n.no_end=!0,f.push(n),o+L+(f.length-1)+T+r}l=l.replace_till_stable(D,q),N&&(l=l.replace(/<\!--([\s\S]*?)-->/g,function(e,t){return t=(t=E(t,_,f)).toString(),f.push(v(t,"comment")),L+(f.length-1)+T}).replace(/<\!--([\s\S]*)$/,function(e,t){return N[1]&&(t=t.slice(0,-N[1].length),N[1]=""),t=v(t=(t=E(t,_,f)).toString(),"comment"),j||(t.no_end=!0),f.push(t),L+(f.length-1)+T})),l=(l=(l=(l=(l=(l=(l=(l=(l=(l=l.replace_till_stable(/-{(|[^{].*?)}-/g,function(t,n){var r,i=n.lastIndexOf("-{");i>0?(r="-{"+n.slice(0,i),n=n.slice(i+"}-".length)):r="",e.debug(r+" + "+n,4,"parse_wikitext.convert");var a,o=Object.create(null),s=[],l=n.match(/^([a-zA-Z\-;\s]*)\|(.*)$/);if(l){n=l[2];var c=Object.create(null);l=l[1],0===(a=l.split(";").map(function(e){return(e=e.trim())&&(c[e]=!0),e}).filter(function(e){return!!e})).length?a="":["R","N","-","T","H","A","D"].some(function(e){if(c[e])return a=e,!0})}var u=a&&a in{H:!0,A:!0}&&f.conversion_table;(n=n.split(";")).forEach(function(e,t){j&&(e=e.trim()),A.test(e)||0===s.length||!e.trim()&&t+1===n.length?s.push(e):s[s.length-1]+=";"+e});var p=u&&Object.create(null),d=[];return s=s.map(function(e){var t=e.match(A);if(!t||t[1]&&!(t[2]=t[2].trim()))return E(e,_,f);(t=t.slice(1))[6]||t.pop();var n,r=t[3].trim(),i=t[5]=E(t[5],_,f);if(!i)return E(e,_,f);if(o[r]=i,t[2]||t.splice(2,1),t[0]?(n=t[1].trim(),t.splice(1,1)):t.splice(0,2),(e=v(t,"plain")).is_conversion=!0,u)if(n)d.push(n),u[n]?u[n].conversion&&(u[n]=Object.clone(u[n].conversion)):u[n]=Object.create(null),u[n][r]=i;else if("string"==typeof i)p[r]=i;else if(i&&"plain"===i.type){var a;i=i.map(function(e){return"string"==typeof e?e:"convert"===e.type&&"string"==typeof e.converted?e.converted:void(a=!0)}),a||(p[r]=i.join(""))}return e}),_.normalize&&(s=s.filter(function(e){return!!e})).sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),(n=v(s,"convert")).conversion=o,d.length>0&&(n.unidirectional=d.unique()),"string"==typeof l&&(l!==a&&(n._flag=l),n.flag=a,"T"===a&&(_.conversion_title=n)),p&&Object.values(p).forEach(function(e){u[e]=n}),f.switches&&(f.switches.__NOCC__||f.switches.__NOCONTENTCONVERT__)?n.no_convert=!0:0===Object.keys(o).length?n.converted=n[0]:_.language&&(n.converted=n.toString(_.language)),f.push(n),r+L+(f.length-1)+T})).replace_till_stable(r,function(r,a,s,l,u,p){var d,g,h;if(p&&p.includes("[[")){var m=r.lastIndexOf("[[");d=r.slice(0,m),(m=(r=r.slice(m)).match(n))?(a=m[1],s=m[2],l=m[3],u=m[4],p=m[5]):(r=d+r,d="")}else d="";if(/\n=+[^=]=+/.test(p))return r;e.debug("["+d+"] + ["+r+"]",4,"parse_wikitext.link"),s?(l||(l=""),j&&(s=s.trim()),(g=s.match(i))?g[1]&&(g=null):h=s.match(o),s.includes(L)?(s=E(s,_,f)).some(function(e){return e.is_link})?s.oddly="link_inside_link":s.oddly=!0:s=s.split(j?/\s*:\s*/:":"),s=v(s,"namespaced_title")):(s="",l=a),j&&(l=l.trimEnd()),l&&(l=E(l,_,f));var y=[s,l];if("string"==typeof p)if(g){p=E(p,{no_resolve:!0},f),y.index_of=Object.create(null);for(var b,w,k=/([^\|]*?)(\||$)/gi;b=k.exec(p);){var A=b[1].match(/^([\s\n]*)([^={}\[\]<>\s\n][^={}\[\]<>]*?)(?:(=[\s\n]*)([\s\S]*?))?([\s\n]*)$/);if(A){A[2]=E(A[2],_,f);var x="string"==typeof A[4];x?(A[4]=E(A[4],_,f),w=A.slice(1)):w=[A[1],A[2],A[5]];for(var S=(w=v(w,"plain"))[1],N=x&&w[3];!w[0];)w.shift();for(;!w.at(-1);)w.pop();if(1===w.length&&(w=w[0]),y.push(w),!x&&S in O?(!y[O[S]]||"location"!==O[S]&&"format"!==O[S])&&(y[O[S]]=S):!x&&/^(?:(?:\d+)?x)?\d+ *px$/.test(S)?y.size=S:x&&/^(?:link|alt|lang|page|thumbtime|start|end|class)$/.test(S)?("link"===S&&(N=t.normalize_title(N,_)),y[S]=N,y.index_of[S]=y.length-1):x&&/^(?:thumb|thumbnail|upright)$/.test(S)?(y[O[S]]=S,y[S]=N):x?"string"==typeof S&&"string"==typeof N?y.caption=S+"="+N:(y.caption=[S,"=",N],y.caption.toString=w.toString):y.caption=S,!b[2])break}else if((A=b[1].match(/^([\s\n]*)([\s\S]*?)([\s\n]*)$/))[1]||A[3]?(y.caption=A[2]=E(A[2],_,f),A[3]||A.pop(),A.shift(),A[0]||A.shift(),v(A,"plain")):y.caption=A=E(b[1],_,f),y.push(A),!b[2])break}}else{var R=E(p,_,f);y[h?"sort_key":"display_text"]=R,y.push(R)}if("link_inside_link"===s.oddly){for(m=2;m<y.length;m++)"string"==typeof y[m]?y[m]=u+y[m]:"plain"===y[m].type?y[m].unshift(u):y[m]=[u,y[m]];(y=y.flat()).unshift("[["),y.push("]]"),function(e){for(var t=1;t<e.length;)"string"==typeof e[t]?""!==e[t]?"string"==typeof e[t-1]?(e[t-1]+=e[t],e.splice(t,1)):t++:e.splice(t,1):t++}(y),v(y,"plain")}else{g||h?(y.is_link=""===s[0].trim(),g?y.name=t.normalize_title(g[2]):h&&(y.name=t.normalize_title(h[1]))):y.is_link=!0,y.pipe=u;var P=l=l.toString().slice(1).trimEnd();/^([\w\-~!*'();:@&=+$,/?#\[\]]|\.[\dA-F]{2})+$/.test(l)&&(l=l.replace(/\.([\dA-F]{2})/g,"%$1"));try{l=decodeURIComponent(l),/[\x00-\x1F\x7F]/.test(l)&&(l=P)}catch(e){l=P}y.anchor=t.parse.anchor.normalize_anchor(l),v(y,g?"file":h?"category":"link"),h&&(y.set_sort_key=c)}return f.push(y),d+L+(f.length-1)+T})).replace_till_stable(d,function(e,t,n,r){var i=t.match(/^(.+?)(''.*)$/);return i&&(t=i[1],r=n?i[2]+n+r:i[2],n=""),t=[t.includes(L)?E(t,_,f):v(t,"url")],(n||r)&&(j&&(r=r.trimEnd(),n&&(n=" ")),t.push(n,E(r,_,f))),v(t,"external_link"),f.push(t),L+(f.length-1)+T})).replace_till_stable(/{{{(|[^{}][\s\S]*?)}}}/g,function(t,n){var r,i=n.lastIndexOf("{{{");return i>0?(r="{{{"+n.slice(0,i),n=n.slice(i+"}}}".length)):r="",e.debug(r+" + "+n,4,"parse_wikitext.parameter"),v(n=(n=n.split("|")).map(function(e,t){return 0!==t||e.includes(L)?E(e,_,f):v(e.split(j?/\s*:\s*/:":"),"page_title")}),"parameter"),f.push(n),r+L+(f.length-1)+T})).replace_till_stable(/{{([^{}][\s\S]*?)}}/g,function(n,r){var i,a=r.lastIndexOf("{{"),o=Object.create(null),s=Object.create(null);if(a>0?(i="{{"+r.slice(0,a),r=r.slice(a+"}}".length)):i="",e.debug("["+i+"] + ["+r+"]",4,"parse_wikitext.transclusion"),r=r.split("|"),c=r[0].match(/^([\s\n]*#([a-z]+):)([\s\S]*)$/i))r[0]="",r.splice(1,0,c[3]);else if(r[0].each_between(L,T,function(e){!e||!f[e=+e]||f[e].type in{transclusion:!0,magic_word_function:!0,parameter:!0,comment:!0}||(c=!0)}),c||/[{}]/.test(r[0]))return n;if(a=1,r=r.map(function(t,n){var r=t.match(/[\s\n]*$/)[0];if(n>0&&r&&(t=t.slice(0,-r.length)),t=E(t,Object.assign({inside_transclusion:!0},_),f),0===n)return t;"plain"!==t.type&&(t=v([t],"plain"));var i=void 0;if(t.some(function(e,t){return"string"!=typeof e?"comment"!==e.type:e.includes("=")?(i=t,!0):void 0}),void 0===i){1===t.length?t.unshift("",""):t=v(["","",t],"plain"),r&&t.push(r);var l=t[2];return Array.isArray(l)&&l.some(function(e){return"string"==typeof e&&e.includes("=")})?(t.invalid=!0,e.is_debug(3)&&e.error("parse_wikitext.transclusion: Invalid parameter ["+t+"]")):(t.key=a,s[a]=n,"string"==typeof l&&(l=l.trim()),o[a++]=l),t}return t=v([i=t.splice(0,i+1),i.pop(),t],"plain"),(i=t[1].match(/\s*=\s*/)).index>0&&t[0].push(t[1].slice(0,i.index)),t.key=t[0].filter(function(e){return"string"==typeof e}),i.k=t.key.join(""),t.key.length===t[0].length?t[0]=i.k:v(t[0],"plain"),t.key=i.k.trim(),i.i=i.index+i[0].length,i.i<t[1].length&&t[2].unshift(t[1].slice(i.i)),t[1]=i[0],s[t.key]=n,(l=t[2]).length<2&&(t[2]=l=0===l.length?"":l[0],!l&&(i=r.match(/^[^\n]+/))&&(t[1]+=i[0],r=r.slice(i[0].length))),r&&t.push(r),o[t.key]=l,t}),c)r[0]=c[1],r.name=c[2],r.evaluate=b;else{"string"==typeof r[0]?r.name=r[0]:r.name=r[0].filter(function(e){return"comment"!==e.type}).join(""),r.name=r.name.trimStart();var l=r.name.match(/^([^:]+):([\s\S]*)$/);if(l||(l=[,r.name]),l[1]=l[1].trim().toUpperCase(),l[1]in I&&(!1===I[l[1]]||l[0])){var c;r.name=l[1],r.is_magic_word=!0,1===r.length&&"string"==typeof r[0]&&(c=r[0].match(/^(\w+:)([\s\S]*)$/))&&(r[0]=c[1],r.push(c[2]))}else{l[0]?(r.name=l[2],l=l[1]):l=null,r.name=t.normalize_title(r.name);var u=l&&!/^(?:Template|模板|テンプレート|Plantilla|틀)/i.test(l)&&l.toLowerCase()in t.namespace.hash;r.page_title=t.normalize_title((u?l:"Template")+":"+r.name),u&&(r.name=r.page_title)}}return r.parameters=o,r.index_of=s,v(r,c?"magic_word_function":"transclusion"),f.push(r),i+L+(f.length-1)+T})).replace_till_stable(F,q)).replace_till_stable(g,H)).replace_till_stable(/\n{\|([\s\S]*?)\n\|}/g,function(t,n){function r(t,n,r){if(t||n){var i,a,o=t.match(/^([^|]*)\|([\s\S]*)$/);o&&(t=o[2],(o=v(W(o[1]),"table_attributes")).suffix="|",i=o.attributes&&o.attributes["data-sort-type"]);var s=v(C(t),"table_cell");"caption"===r.type&&(s.caption=s.toString().trim(),r.caption||(r.caption=s.caption)),o&&s.unshift(o),n&&(s.delimiter=n),"number"===(i=i&&i.trim())?e.is_digits(t)&&(a=+t):"isoDate"===i&&(a=Date.parse(t)),(a||0===a)&&(s.value=a),(s.is_header=r.cell_is_header_now)?r.header_count++:r.data_count++,r.push(s)}}var i,a=/([\s\S]*?)(\n[|!]|[|!]{2}|$)/g,o=/([\s\S]*?)(\n[|!]|\|\||$)/g;function s(t,n,s){if(t||n){"object"==typeof JSON&&e.debug("parse table_row / row style: "+JSON.stringify(t),5,"parse_wikitext.table");var l,c="\n|+"===n?"caption":"table_row",_=v([],c);_.delimiter=n,_.header_count=0,_.data_count=0,i=o,_.cell_is_header_now=!1;var u="caption"!==c&&t.match(/^.+/);for(u?(_.push(v(W(u[0]),"table_attributes")),i.lastIndex=u[0].length):i.lastIndex=0;(u=i.exec(t))&&(r(u[1],l,_),u[2]);)if(l=u[2],/^\n/.test(l)&&_.cell_is_header_now!==(u="\n!"===l)){var p=i.lastIndex;_.cell_is_header_now=u,(i=u?a:o).lastIndex=p}_.caption&&!s.caption&&(s.caption=_.caption),delete _.cell_is_header_now,s.push(_)}}var l,c=v([],"table"),_=/([\s\S]*?)(\n\|[\-+]|$)/g,u=n.match(/^.+/);for(u&&(c.push(v(W(u[0]),"table_attributes")),_.lastIndex=u[0].length);(u=_.exec(n))&&(s(u[1],l,c),u[2]);)l=u[2];return f.push(c),"\n"+L+(f.length-1)+T})).replace(x,function(e,t){var n=v(t,"switch");return f.switches||(f.switches=Object.create(null)),f.switches[t]?f.switches[t].push(n):f.switches[t]=[n],f.push(n),L+(f.length-1)+T})).replace_till_stable(/('''''|'''?)([^'\n].*?'*)(\1)/g,$);var B=new RegExp(/(^|\n)(={1,6})(.+)\2((?:[ \t]|mark)*)(?=\n|$)/g.source.replace("mark",e.to_RegExp_pattern(L)+"\\d+"+e.to_RegExp_pattern(T)),"g");l=l.replace(B,function(e,n,r,i,a){function o(e){return"string"==typeof e?!/^[ \t]+$/.test(e):"comment"!==e.type}if(a&&a.includes(L)){var s=E(a,_,f);if(l=s,Array.isArray(l)&&l.type&&("plain"===s.type?s.some(o):o(s)))return e;a=s}var l;j&&(i=i.trim()),(i=v(i=t.section_link.pre_parse_section_title(i,_,f),"section_title")).link=t.section_link(i.toString(),Object.assign(Object.clone(_),{target_array:null})),i.title=i.link.id,a&&!j&&(i.postfix=a);var c=r.length;for(i.level=c,i.child_section_titles=[],P.truncate(c),P[c]=i;c>0;){var u=P[--c];if(u){c>0&&(i.parent_section_title=u),u.child_section_titles.push(i);break}}return f.push(i),n+L+(f.length-1)+T}),_.inside_transclusion||(l=l.replace(a,function(e,t,n){return(e=v(n,"url")).is_bare=!0,f.push(e),t+L+(f.length-1)+T}));var Y=[],G=[],K=[],J={";":w,":":w};l=l.split("\n");var X=!N&&l.shift();l.forEach(function(e){function t(e,t,n){return n||(e=E(e,_,f)),(e=v(e,"list_item")).list_prefix=t,o&&(e.parent=o,e.index=o.length,e.list_index=o.length?o.at(-1).list_index+1:0,"#"===o.list_type&&(e.serial=e.list_index+1),o.push(e)),e}for(var n=0,r=0;n<Y.length&&Y[n]===(J[e.charAt(r)]||e.charAt(r));)n++,r++;Y.truncate(r),G.truncate(r);var i,a,o=G[r-1],s=e.slice(r).match(/^([*#;:]+)(\s*)(.*)$/);if(s){r>0?(i="\n"+e.slice(0,r)).endsWith(";")&&o.dt_index.push(o.length):i="";var l=s[1].split("");e=s[3],l.forEach(function(e){var n=v([],"list");if(n.list_type=J[e]||e,n.list_type===w&&(n.dt_index=[]),o){var r=t([n],i,!0);r.list_index--,r.serial>1&&r.serial--,r.no_need_to_count=!0,i=e}else i+=e,f.push(n),K.push(L+(f.length-1)+T);o=n,G.push(n),Y.push(n.list_type)}),a=i.endsWith(";"),i+=s[2],a&&(o.dt_index.push(0),(s=e.match(/^(.*)(:\s*)(.*)$/))&&(t(s[1],i),i=s[2],e=s[3])),t(e,i)}else r>0?(a=(i="\n"+e.slice(0,r)).endsWith(";"),(s=(e=e.slice(r)).match(/^\s+/))&&(i+=s[0],e=e.slice(s[0].length)),a&&(o.dt_index.push(o.length),(s=e.match(/^(.*)(:\s*)(.*)$/))&&(t(s[1],i),i=s[2],e=s[3])),t(e,i)):K.push(e.slice(r))}),l=K,K=[],l.forEach(function(e,t){var n=e.match(/^(-{4,})(.*)$/);if(n&&(0!==t||N)){var r=v(n[1],"hr");f.push(r),K.push(L+(f.length-1)+T+n[2])}else K.push(e)}),l=K,K=[],G=null,l.forEach(function(e,t){if(!e.startsWith(" ")||0===t&&!N)return G&&(G=null),void K.push(e);e=E(e.slice(1),_,f),G?G.push(e):(G=v([e],"pre"),f.push(G),K.push(L+(f.length-1)+T))}),l=K,K=null,N||l.unshift(X),l=l.join("\n"),"function"==typeof _.postfix&&(l=_.postfix(l,f,L,T)||l),N&&(N[0]||N[1])&&(l=l.slice(N[0].length,N[1]?-N[1].length:void 0));var V=/([\s\S]*?)((?:\s*?\n){2,}|$)/g;if(N&&_.parse_paragraph&&/\n\s*?\n/.test(l)&&(l=l.replace(V,function(e,t,n){return e?(e=v(e=(e=t.split("\n")).map(function(e){return E(e,_,f)}),"paragraph"),n&&(e.separator=n),f.push(e),L+(f.length-1)+T):""})),R)return l;if(f.push(l),p(f,L,T),l=f.at(-1),N&&("plain"===l.type||_.with_properties)&&(Array.isArray(_.target_array)&&Array.isArray(l)&&(_.target_array.truncate(),Array.prototype.push.apply(_.target_array,l),l=_.target_array),f.switches&&(l.switches=f.switches),e.is_empty_object(f.conversion_table)||(l.conversion_table=f.conversion_table),_.conversion_title&&(l.conversion_title=f.conversion_title)),f=null,N&&"plain"===l.type&&!_.parse_paragraph){for(var Z=0;Z<l.length;Z++){var Q,ee=l[Z];if("string"==typeof ee){if(!/\n\s*?\n/.test(ee))continue;for(l.splice(Z,1);(Q=V.exec(ee))&&Q[0];)Q[1]&&Q[2]?(l.splice(Z,0,Q[1],Q[2]),Z+=2):l.splice(Z++,0,Q[0]);Z--,V.lastIndex=0}else Z>0&&"string"==typeof(ee=l[Z-1])&&(Q=ee.match(/^([\s\S]*[^\s\n])([\s\n]*\n)$/))&&(l.splice(Z-1,1,Q[1],Q[2]),Z++),"string"==typeof(ee=l[Z+1])&&(Q=ee.match(/^(\n+)([^\n][\s\S]*?)$/))&&l.splice(Z+1,1,Q[1],Q[2])}_.target_array||Object.assign(l,P[0])}return l}return Object.assign(E,{wiki_token_toString:v,set_wiki_type:u}),Object.assign(t,{file_options:O,markup_tags:f,DEFINITION_LIST:w,page_title_to_sort_key:l,HTML_to_wikitext:function(e,t){return e.replace(/<\/i><i>/g,"").replace(/<\/b><b>/g,"").replace(/<\/strong><strong>/g,"").replace(/<i>([\s\S]+?)<\/i>/g,"''$1''").replace(/<b>([\s\S]+?)<\/b>/g,"'''$1'''").replace(/<strong>([\s\S]+?)<\/strong>/g,"'''$1'''").replace_till_stable(/<span(?: [^<>]*)?>([^<>]*?)<\/span>/g,"$1").replace(/<a ([^<>]+)>([\s\S]+?)<\/a>/g,function(e,t,n){var r=t.match(/href="([^"]+)"/);return"["+(r?r[1]:"#")+" "+n+"]"}).replace(/\s*<br(?:[^\w<>][^<>]*)?>[\r\n]*/gi,"\n").replace(/<p ?\/>\n*/gi,"\n\n").replace(/<p>([\s\S]+?)<\/p>\n*/g,"$1\n\n").replace(/\r?\n/g,"\n").replace(/\n{3,}/g,"\n\n")},parse:E}),e.env.not_to_extend_keyword}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.parser.section",require:"application.net.wiki.parser.|application.net.wiki.parser.wikitext",no_extend:"this,*",code:function e(t){var n=t.application.net.wiki,r=n.KEY_SESSION,i=n.PATTERN_BOT_NAME,a=n.parser.parser_prototype.each,o="".indexOf("_"),s={ref:!0,references:!0,math:!0};function l(e,r){for("function"==typeof r.preprocess_section_link_token&&(e=r.preprocess_section_link_token(e,r));"transclusion"===e.type&&"function"==typeof e.expand;)e=n.parse(e.expand(r),r),n.template_functions&&n.template_functions.adapt_function(e,null,null,r);if(e.type in{plain:!0,tag_inner:!0})return a.call(e,function(e,t,n){return e=l(e,r)},r),e;if("comment"===e.type)return"";if("tag"===e.type){if("nowiki"===e.tag)return l(e[1]?e[1].toString():"",r);if(e.tag in{b:!0,i:!0,q:!0,s:!0,u:!0,big:!0,small:!0,sub:!0,sup:!0,em:!0,ins:!0,del:!0,strike:!0,strong:!0,font:!0,code:!0,ruby:!0,rb:!0,rt:!0,span:!0,div:!0,langconvert:!0})return e.tag_attributes=e.shift(),e.original_type=e.type,e.type="plain",e.toString=n.parse.wiki_token_toString[e.type],e;if(r.root_token_list.imprecise_tokens.push(e),e.tag in s)return e.is_atom=!0,e.unconvertible=!0,e;r.root_token_list.tokens_maybe_handlable.push(e);var i=c(e[1]||"",r);return i.tag=e.tag,i}return"tag_single"===e.type?e.tag in{section:!0,br:!0,nowiki:!0}?"":(r.root_token_list.imprecise_tokens.push(e),e.tag in s?(e.is_atom=!0,e.unconvertible=!0,e):(r.root_token_list.tokens_maybe_handlable.push(e),e)):"file"!==e.type&&"category"!==e.type||e.is_link?"link"===e.type||"category"===e.type||"file"===e.type?(e.length>2?((e=e.slice(2)).type="plain",e.toString=function(){return this.join("|")},e=c(e,r)):e=e[0].toString().replace(/^ *:?/,"")+e[1],e):"transclusion"===e.type?/^(?:T[l1n][a-z]{0,3}[23]?)$/.test(e.name)?(e.shift(),e):e.name in{Lang:!0}?l(e.parameters[2],r):(r.root_token_list.imprecise_tokens.push(e),e.is_atom=!0,e.unconvertible=!0,e):"external_link"===e.type?e[2]?c(e[2],r):(r.root_token_list.imprecise_tokens.push(e),e.is_atom=!0,e.unconvertible=!0,e):"switch"===e.type?(r.root_token_list.imprecise_tokens.push(e),""):"bold"===e.type||"italic"===e.type?(e.original_type=e.type,e.type="plain",e.toString=n.parse.wiki_token_toString[e.type],e):"string"==typeof e?(e=t.HTML_to_Unicode(e),/\S/.test(e)&&((e=[e]).is_atom=!0,e.unconvertible=!0,e.is_plain=!0),e):e.type in{convert:!0,url:!0}?e:(e.type in{magic_word_function:!0,parameter:!0}&&(e.unconvertible=!0),e.unconvertible||r.root_token_list.tokens_maybe_handlable.push(e),e.is_plain||r.root_token_list.imprecise_tokens.push(e),e):""}function c(e,t){return"plain"!==e.type&&(e=n.parse.set_wiki_type([e],"plain")),e.imprecise_tokens||(e.imprecise_tokens=[],e.tokens_maybe_handlable=[]),t.root_token_list||(t.root_token_list=e),t.modify=!0,l(e,t)}function _(e,r){return r=t.new_options(r),(e=c(e=n.parse(String(e),r),r)).toString()}function u(e,t){return e=e.replace(t?/[\|{}<>\[\]%]/g:/[\|{}\[\]]/g,function(e){return t?"%"+e.charCodeAt(0).toString(16).toUpperCase():"&#"+e.charCodeAt(0)+";"}).replace(/[ \n]{2,}/g," ")}function p(e,t){var r=(this[1]||"").replace(/�/g,"?"),i=(this[2]||"").replace(/�/g,"?");return i=i?t?'<span style="'+t+'">'+i+"</span>":i:"",n.title_link_of((e||this[0]||"")+"#"+r,i)}var d="\0",f="\0",g=new RegExp(t.to_RegExp_pattern(d),"g"),h=new RegExp(t.to_RegExp_pattern(f),"g"),m,m;function y(e,t,r){var i=(e=e.toString().match(/^([*#;:=\s]*)([\s\S]*)$/))[1];return"plain"!==(e=n.parse(e[2],t,r)).type&&(e=n.parse.set_wiki_type([e],"plain")),i&&("string"==typeof e[0]?e[0]=i+e[0]:e.unshift(i)),e}function b(e,r){var i=y(e,r="string"==typeof r?{page_title:r}:"function"==typeof r?{callback:r}:t.setup_options(r)),o=(i=c(i,r)).toString().trim().replace(/[ \n]{2,}/g," "),s=u(o.replace(/([ _]){2,}/g,"$1").replace(/&/g,"&amp;"),!0);n.session_of_options(r);a.call(i,function(e,t,i){"convert"===e.type?e.toString=function(){var e=this.converted;if(void 0===e)return d+this.join(";")+f;if(Array.isArray(e)){e=e.toString().replace(g,"-{").replace(h,"}-");var t=Object.clone(r);t.is_recursive=!0,e=b(e,t)[2]}return d+e+f}:e.original_type?(e.type=e.original_type,e.toString=n.parse.wiki_token_toString[e.type],"tag"===e.type&&e.unshift(e.tag_attributes)):"tag"===e.type||"tag_single"===e.type?i[t]=e.toString().replace(/</g,"&lt;").replace(/>/g,"&gt;"):e.is_plain&&(e[0]=e[0].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"))},!0);var l=i.toString().trim();l=u(l),r.is_recursive||(l=l.replace(g,"-{").replace(h,"}-"));var _=[r&&r.page_title,s,l];return i.imprecise_tokens&&i.imprecise_tokens.length>0&&(_.imprecise_tokens=i.imprecise_tokens,i.tokens_maybe_handlable&&i.tokens_maybe_handlable.length>0&&(_.tokens_maybe_handlable=i.tokens_maybe_handlable)),Object.assign(_,{id:o,title:e,toString:p}),_}function v(e){var r;if(n.is_page_data(e)&&(r=e,e=n.content_of(r)),!e||"string"!=typeof e)return e;var i=e.indexOf("\n=");for(i>=0&&(e=e.slice(0,i));i=e.match(/^[\s\n]*({{|\[\[)/);){i=i[1];var a=e.indexOf("{{"===i?"}}":"]]");if(a===o){t.debug('有問題的 wikitext，例如有首 "'+i+'" 無尾？ ['+e+"]",2,"lead_text");break}var s=e.lastIndexOf(i,a);e=e.slice(0,s)+e.slice(a+2)}return r&&(r.lead_text=v),e.trim()}function w(e,t){var r;if(n.is_page_data(e)&&(t||(t=n.title_of(e)),(r=page_parser(e).parse()).each_section(function(t,n){t.section_title||(e=t)})),e){var i,o=[];r&&(o.page=r.page,o.title=t,r=null),o.toString=e.toString;for(var s=0;s<e.length;s++){var l=e[s];if("file"!==l.type)if("transclusion"!==l.type){if(("tag"!==l.type&&"tag_single"!==l.type||"ref"!==l.tag)&&"table"!==l.type&&"switch"!==l.type&&l.toString().trim()&&(("bold"===l.type||"plain"===l.type&&l.toString().includes(t))&&(o.title_token=l),"link"===l.type&&!l[0]&&l[1]&&(l[0]=t),o.push(l),o.title_token))break}else{if("NoteTA"===l.name){o.push(l);continue}if(l.name in{Cfn:!0,Sfn:!0,Sfnp:!0,Efn:!0,NoteTag:!0,R:!0,Clear:!0})continue;if(i||(i=l.parameters.image||l.parameters.file),!i){var c=(l=l.toString()).match(/\|[^=]+=([^\|{}]+\.(?:jpg|png|svg|gif|bmp))[\s\n]*[\|}]/i);c&&(i=c[1])}}else i||(i=l)}for(;++s<e.length;)("tag"===(l=e[s]).type||"tag_single"===l.type)&&"ref"===l.tag||"transclusion"===l.type&&"Notetag"===l.name||o.push(l);for(s=o.length;--s>0&&!o[s].toString().trim();)o.pop();return i||r.each("file",function(e){return i=e,a.exit}),"string"==typeof i&&(i=i.replace(/^\[\[[^:]+:/i,"").replace(/\|[\s\S]*/,"").replace(/\]\]$/,""),i=n.parse("[[File:"+n.title_of(i)+"]]")),o.representative_image=i,o}}function k(e){var r;if(n.is_page_data(e)&&(r=e,e=n.content_of(r)),e&&"string"==typeof e){var i,a=[],o=0,s=0,l=/\n(={1,2})([^=\n]+)\1\s*?\n/g;for(a.toString=function(){return this.join("")},a.title=[],a.index=Object.create(null);;){var c=l.exec(e),_=c&&c.index+1,u=c?e.slice(s,_):e.slice(s);if(t.debug("next_index: "+_+"/"+e.length,3,"get_sections"),i&&(a.title[o]=i,i in a?t.debug("重複 section title ["+i+"] 將僅取首個 section text。",2,"get_sections"):(i>=0||(a[i]=u),a.index[i]=o)),a[o++]=u,!c)break;s=_,i=c[2].trim()}return r&&(r.sections=a),a}}function A(e,o){o=t.new_options(o),!o[r]&&this.options&&this.options[r]&&(o[r]=this.options[r]);var s=this,l=this.page&&this.page.title,c=this.sections=[],_=Object.create(null);function u(e){var t=c.length>0?c.at(-1).range[1]:void 0,r=[t>=0?t+1:0,e],i=s.slice(r[0],r[1]);t>=0&&(i.section_title=s[t]),Object.assign(i,{type:"section",range:r,each:a,replace_by:x,toString:s.toString}),i[n.KEY_page_data]=s.page,c.push(i)}var p=Array.isArray(o.level_filter)?0|Math.max.apply(null,o.level_filter)||2:1<=o.level_filter&&0|o.level_filter||2;if(this.each("section_title",function(e,t,n){var r=e.link;l&&(r[0]=l);var i=r.id;if(i in _){for(var a=2,o=i;(i=o+" "+a)in _;)a++;r.duplicate_NO||(r.duplicate_NO=a,Array.isArray(r[1])?r[1].push("_"+a):r[1]+="_"+a,r.id=i)}_[i]=null;var c=e.level;n===s&&c<=p&&u(t)},Object.assign({modify:!1},o)),u(this.length),0===c[0].range[1]&&c.shift(),o.get_users&&c.forEach(function(e){e.users=[],e.dates=[];for(var t,r,a=0,s=[];a<e.length||s.length>0;){for(r=s.length>0?s.shift():e[a++];"list"===r.type;){var l=[];r.forEach(function(e){l.append(e)}),r=l.shift(),Array.prototype.unshift.apply(s,l)}if("string"==typeof r){if(!r.trim()&&r.includes("\n\n")){t=null;continue}}else{r=r.toString();var c=n.parse.user.all(r,!0);0,c.length>0&&(t=c.at(-1),o.ignore_bot&&i.test(t)&&(t=null))}if(t){var _=n.parse.date(r,o);_&&(o.allow_future||Date.now()-_>0)&&(e.dates.push(_),e.users.push(t),t=null)}}var u,p;e.dates.forEach(function(e){e&&!isNaN(e=+e)&&(u<=e?p>=e||(p=e):u=e)}),u&&(e.dates.min_timevalue=u,e.dates.max_timevalue=p||u);var d=A.index_filter(e,!0,"last");d>=0&&(e.last_update_index=d),e.replies=e.users.unique().length>=2?e.users.length-1:0}),"function"==typeof e){p=Array.isArray(o.level_filter)?o.level_filter:1<=o.level_filter&&0|o.level_filter||2;var d=function(e){var t=e.section_title;return!t||(Array.isArray(p)?p.includes(t.level):p===t.level)};if(t.is_async_function(e))return Promise.allSettled(c.map(function(t,n){return d(t)&&e.apply(this,arguments)}));c.some(function(t){return d(t)&&a.exit===e.apply(this,arguments)},this)}return this}function x(e,r){r=t.setup_options(r);var i=this[n.KEY_page_data].parsed,a=this.range[0];for("string"==typeof e&&(e=e.trim()),(void 0===r.preserve_section_title?e:r.preserve_section_title)||a--,e?i[a]+=e+"\n\n":i[a]="";++a<this.range[1];)i[a]=""}function O(e){return e&&t.HTML_to_Unicode(e.toString()).replace(/_/g," ").trim()}function E(e,r){if(!e)return[];var i=Object.create(null);function o(e,t){if("string"==typeof(e=O(e))&&e.length>1e3)throw new Error("Invalid anchor!");!e||e in i||(i[e]=t)}var s=n.parser(e,r).parse();var l=n.session_of_options(r);s.each_section(),s.each("section_title",function(e){var n=e.link;n.imprecise_tokens?n.tokens_maybe_handlable?(t.warn("Title maybe handlable 請檢查是否可處理此標題: "+e.title),console.log(n.tokens_maybe_handlable),console.trace(e)):(t.warn("若包含的是模板，請檢查是否可於 template_functions 添加此標題中的模板: "+e.title),console.trace(n)):o(n.id,e)});var c=Object.clone(r);r&&delete c.print_anchors,s.each("transclusion",function(e){if(e.expand){if(!(t=e.expand())||"function"!=typeof t.toString)return;(t=E(t.toString(),c)).forEach(function(t){o(t,e)})}else{if(/^Cite \w+/.test(e.name)||(l||n).is_template("Citation",e,r)){var t,i=e.parameters;if(t=i.ref)return void("none"!==t&&o(t=n.wikitext_to_plain_text(t),e));t="",i.last&&(t+=i.last.toString().trim());for(var a=1;a<=4;a++)i["last"+a]&&(t+=i["last"+a].toString().trim());var s=i.year;return s||(s=(s=i.date)&&s.toString().match(/[12]\d{3}/))&&(s=s[0]),s&&(t+=s.toString().trim()),void(t&&o("CITEREF"+t,e))}0}}),s.each("tag_attributes",function(e,t,n){var r=e.attributes.id||e.attributes.name;(n.tag?"ref"!==n.tag.toLowerCase():"table_attributes"===n.type)&&(Array.isArray(r)&&("plain"!==r.type&&(r=[r]),a.call(r,"transclusion",function(e,t,n){e.expand&&(n[t]=e.expand())},c),r=r.map(function(e){return"magic_word_function"===e.type&&"ANCHORENCODE"===e.name?e[1]:e})),o(r,e))});var _=Object.keys(i);return r&&r.print_anchors&&(t.info("get_all_anchors: anchors:"),console.trace(_.length>100?JSON.stringify(_):_)),_}return b.pre_parse_section_title=y,A.index_filter=function(e,n,r){var i,a,o;if("function"==typeof n)i=n;else if(Array.isArray(n))i=function(e){return n.includes(e)};else if(t.is_Object(n))i=function(e){return e in n};else if(t.is_RegExp(n))i=function(e){return n.test(e)};else if("string"==typeof n)i=function(e){return n===e};else{if(!0!==n)throw"for_each_section.index_filter: Invalid filter: "+n;i=function(){return!0}}if(!r){var s=[];return e.users.forEach(function(e,t){i(e)&&s.push(t)}),s}return e.dates.forEach(function(t,n){if(t=t.getTime(),!("first"===r?o<=t:"last"===r&&t<o)){var s=e.users[n];i(s)&&(o=t,a=n)}}),a},E.normalize_anchor=O,E.essential_templates=["Citation"],Object.assign(n,{lead_text:v,extract_introduction:w,section_link:b,section_link_escape:u,wikitext_to_plain_text:_}),Object.assign(n.parser.parser_prototype,{each_section:A}),Object.assign(n.parse,{anchor:E}),t.env.not_to_extend_keyword}}),"function"==typeof CeL&&CeL.run({name:"application.net.wiki.parser.misc",require:"application.net.wiki.parser.wikitext.",no_extend:"this,*",code:function(e){var t=e.application.net.wiki,n=t.PATTERN_URL_prefix;function r(e){return e||""===e||0===e}t.is_valid_parameters_value=r;var i={remove_parameter:!0};function a(e,t){var n=e.index_of[t];if(n>=0){var r=e[n],i=r[0];return Array.isArray(i)&&(i=i[0]),i=[i="string"==typeof i?i.match(/^\s*/)[0]:"",r[1],r[3]||""]}}function o(n,r,s){function l(e){return"function"==typeof s&&(s=s(n.parameters[e],e,n)),s}if(e.is_Object(r)){var c=e.setup_options(s);c.parameter_name_only&&(h=r,m=Object.create(null),Object.keys(h).forEach(function(t){var n=h[t];"string"==typeof n||"number"==typeof n?m[t]=function(e){var t=Object.create(null);return t[n]=e,t}:n===i?m[t]=n:e.error("to_parameter_name_only: Replace to invalid parameter name: "+n)}),r=m);var _,u,p,d=0;for(var f in r){if(s=r[f],void 0!==l(f))if((y=n.index_of[f])>=1){var g;if(c.value_only&&("string"==typeof s||"number"==typeof s))n[n.index_of[f]][2]=s,g=1;_=f,p=y,d+=g||o(n,f,s)}else c.value_only&&c.force_add&&(u&&u===_||!(u=c.append_key_value&&_||Object.keys(n.parameters).pop())||(b=a(n,u)),s=b&&b[1]?b[0]+f+b[1]+s+b[2]:f+"="+s,c.append_key_value&&p>=1?n[p]+="|"+s:n.push(s),d=1)}return d}var h,m,y;if(!((y=n.index_of[r])>=1))return 0;if(void 0===l(r))return 0;if(s===i){if(isNaN(r))n.splice(y,1),s=t.parse(n.toString()),Object.clone(s,!1,n);else for(n[y]="";!n.at(-1);)n.pop();return 1}var b=a(n,r);(e.is_Object(s)&&(s=Object.keys(s).map(function(t){var n=s[t];return t||(e.warn("Including empty key: "+JSON.stringify(s)),t=r),b[1]?b[0]+t+b[1]+n+b[2]:t+"="+n})),s=Array.isArray(s)?s.join("|"):s.toString(),b[1]||isNaN(r))||(w=s.match(/^\s*(\d+)\s*=\s*([\s\S]*)$/))&&w[1]==r&&!w[2].replace(/{{ *= *(?:\|[^{}]*)?}}/g,"").includes("=")&&(e.debug("auto remove numbered parameter: "+r,3,"replace_parameter"),s=w[2]);if(b[2].includes("\n")&&!/\n\s*?$/.test(s)&&(s+=b[2]),n[y]&&n[y].toString()===s)return 0;var v=/(?:^|\|)[\s\n]*([^=\s\n][\s\S]*?)=/;if(y+1<n.length);else if(isNaN(r))v.test(s)||e.warn("replace_parameter: Insert named parameter and disrupt the order of parameters? "+n);else{var w;(w=s.match(v))?w[1].trim()!=r&&e.warn("replace_parameter: Insert numerical parameter name and disrupt the order of parameters? "+n):y!=r&&e.warn("replace_parameter: Insert non-named parameter to ["+r+"] and disrupt the order of parameters? "+n)}return e.debug(r+': "'+n[y]+'"→"'+s+'"',2,"replace_parameter"),n[y]=s,1}o.KEY_remove_parameter=i;var s=/{{[\s\n]*([^\s\n#\|{}<>\[\]][^#\|{}<>\[\]]*)[|}]/,l=new RegExp(s.source.replace(/\[[^\[]+$/,""),"g");var c=",جَنؤری,فَرؤری,مارٕچ,اَپریل,مٔیی,جوٗن,جُلَے,اَگَست,سَتَمبَر,اَکتوٗبَر,نَوَمبَر,دَسَمبَر".split(","),_={en:[/([0-2]?\d:[0-6]?\d)[, ]+([0-3]?\d) ([a-z]{3,9}) ([12]\d{3})(?: \(([A-Z]{3})\))?/gi,function(e,t){return e[2]+" "+e[3]+" "+e[4]+" "+e[1]+" "+(e[6]||"UTC")},{format:"%2H:%2M, %d %B %Y (UTC)",zone:0,locale:"en-US"}],ks:[/([0-2]?\d:[0-6]?\d)[, ]+([0-3]?\d) ([\u0624-\u06d2]{4,9}) ([12]\d{3})(?: \(([A-Z]{3})\))?/gi,function(e,t){return e[3]=c.indexOf(e[3]),e[3]>0&&e[4]+"-"+e[3].pad(2)+"-"+ +e[2].pad(2)+" "+e[1]+" "+(e[6]||"UTC")},{format:"%2H:%2M, %d %B %Y (UTC)",zone:0,locale:"ks-IN"}],ja:[/([12]\d{3})年([[01]?\d)月([0-3]?\d)日 \(([日月火水木金土])\)( [0-2]?\d:[0-6]?\d)(?: \(([A-Z]{3})\))?/g,function(e){return e[1]+"/"+e[2]+"/"+e[3]+e[5]+" "+(e[6]||"UTC+9")},{format:"%Y年%m月%d日 (%a) %2H:%2M (UTC)",zone:0,locale:"ja-JP"}],"zh-classical":[/([一二][〇一二三四五六七八九]{3})年([[〇一]?[〇一二三四五六七八九])月([〇一二三]?[〇一二三四五六七八九])日 （([日一二三四五六])）( [〇一二三四五六七八九]{1,2}時[〇一二三四五六七八九]{1,2})分(?: \(([A-Z]{3})\))?/g,function(t,n){return e.from_positional_Chinese_numeral(t[1]+"/"+t[2]+"/"+t[3]+t[5].replace("時",":"))+" "+(t[6]||"UTC+8")},function(t,n){return e.to_positional_Chinese_numeral(t.format({format:"%Y年%m月%d日 （%a） %2H時%2M分 (UTC)",zone:0,locale:"cmn-Hant-TW"}))}],zh:[/([12]\d{3})年([[01]?\d)月([0-3]?\d)日 \(([日一二三四五六])\)( [0-2]?\d:[0-6]?\d)(?: \(([A-Z]{3})\))?/g,function(e,t){return e[1]+"/"+e[2]+"/"+e[3]+e[5]+" "+(e[6]&&"CST"!==e[6]?e[6]:"UTC+8")},{format:"%Y年%m月%d日 (%a) %2H:%2M (UTC)",zone:0,locale:"cmn-Hant-TW"}]};function u(n){var r=t.session_of_options(n);n=!0===n?{get_timevalue:!0}:"string"==typeof n&&n in _?{language:n}:e.new_options(n);var i=t.get_first_domain_name_of_session(n);return r&&(i||(i=(i=t.site_name(r,{get_all_properties:!0}))&&i.language),_[i]||(i=r.language),isNaN(n.timeoffset)?"timeoffset"in n?e.warn("normalize_parse_date_options: Invalid timeoffset: "+n.timeoffset):n.zone=r.configurations.timeoffset/60:n.zone=n.timeoffset/60),n.zone|=0,n.date_parser_config=_[i],n.date_parser_config||(i&&e.error("normalize_parse_date_options: Invalid language: "+i),n.date_parser_config=_[t.language]),n}function p(t,n){var r;if((n=u(n)).get_all_list&&(r=[]),!t)return r;var i,a,o,s=n.date_parser_config[1],l=n.date_parser_config[0];for(l.lastIndex=0;i=l.exec(t);){var c=s(i,n);if(c=c.replace(/ (JST)/,function(t,n){return n=e.String_to_Date&&n in e.String_to_Date.zone?e.String_to_Date.zone[n]:9," UTC"+((r=n)<0?r:"+"+r);var r}),c=Date.parse(c),!isNaN(c)){if(a<c?c<o||(o=c):a=c,n.get_timevalue||(c=new Date(c)),!n.get_all_list)return c;r.push(c)}}return a&&(r.min_timevalue=a,r.max_timevalue=o||a),r}_.multilingual=_.en,p.to_String=function(e,t){var n=(t=u(t)).date_parser_config[2];if("function"==typeof n)e=n(e,t);else{var r=t.zone;isNaN(r)||n.zone===r||((n=Object.clone(n)).zone=r,n.format=n.format.replace(/\(UTC(?:[+\-]\d)?\)/,"(UTC"+(r<0?r:r?"+"+r:"")+")")),e=e.format(n)}return e};var d=/\[\[ *:?(?:[a-z\d\-]{1,14}:?)?(?:user(?:[ _]talk)?|使用者(?:討論)?|用戶(?:討論|對話)?|用户(?:讨论|对话)?|利用者(?:‐会話)?|사용자(?:토론)?|UT?) *: *((?:&#(?:\d{1,8}|x[\da-fA-F]{1,8});|[^\[\]\|{}<>\n#�\/])+)/i,f=/\[\[(?:Special|特別|特殊|特別) *: *(?:Contributions|Contribs|使用者貢獻|用戶貢獻|(?:用户)?贡献|投稿記録|功績)\/((?:&#(?:\d{1,8}|x[\da-fA-F]{1,8});|[^\[\]\|{}<>\n#�\/])+)/i,g=new RegExp(d.source,"ig"),h=new RegExp(f.source,"ig");function m(e,n,r){if(e){var i,a=e.match(d);if(!a){if(!(a=e.match(f)))return;i=!0}"boolean"==typeof n&&(r=n,n=void 0);var o=t.normalize_title(a[1]);if(n){if((n=t.normalize_title(n))!==o)return!1;if(!r)return!0}return r?i?"[[User:"+o+"]]":a[0].trimEnd()+"]]":o}}m.all=function(n,r){function i(i){var s;for(i.lastIndex=0,e.debug(i,3,"parse_all_user_links");s=i.exec(n);){var l=t.normalize_title(s[1]);r&&r!==l||(o?o.push(l):l in a?a[l]++:a[l]=1)}}var a,o;return!0===r?(o=[],r=null):r?r=t.normalize_title(r):a=Object.create(null),n?(e.debug(n,3,"parse_all_user_links"),e.debug("user name: "+r,3,"parse_all_user_links"),i(g),i(h),o||(r?r in a[r]?a[r]:0:a)):r?0:o||a};var y=/^[\s\n]*#(?:REDIRECT|重定向|重新導向|転送|リダイレクト|넘겨주기)\s*(?::\s*)?\[\[([^\[\]\|{}<>\n�]+)(?:\|[^\[\]{}]+?)?\]\]/i;var b=0,v=1,w="function"==typeof Symbol?Symbol("KEY_ORIGINAL_ARRAY"):"|ORIGINAL_ARRAY";function k(n,r){function i(e){if("tag"===e.type)return e.tag in{nowiki:!0,code:!0,syntaxhighlight:!0}?(e[0][0]="",e):i(e[1]);if(Array.isArray(e)){var t=e.map(i);if(t=e.toString.call(t),"list"!==e.type)return t;e.value=t}return e}function a(e){e=(e=(e=i(e)).toString().trim()).replace(/<\/?(?:nowiki|code|syntaxhighlight)>/g,"").replace(/^\[\[([^\[\]\|{}<>\n�]+)(?:\|[^\[\]{}]+?)?\]\]$/,"$1").replace(/<!--[\s\S]*?-->/g,"");try{e=JSON.parse(e)}catch(e){}return e}var o,s,l,c=Object.create(null);return t.is_page_data(n)?(l=o=n.title,s=t.parser(n).parse()):s=t.parse(n,r),Array.isArray(s)?(s.forEach(function(n){if("section_title"!==n.type){if("table"===n.type&&(n.caption||o)){var r=Object.create(null);n.forEach(function(t){if("table_row"===t.type&&!(t.header_count>0)){var n=[];if(t.forEach(function(t){var r,o,s;"table_cell"===t.type&&(t=t.filter(function(e){if("table_attributes"!==e.type)return"list"===e.type?o=!0:s=!!e.toString().trim(),!0;(r=e.toString().match(/data-sort-type\s*=\s*(["']([^"']+)["']|\S+)/))&&(r=r[2]||r[1])}).map(i),o?s?(t.forEach(function(e,n){"list"===e.type&&(t[n]=e.value)}),t=a(t.join(""))):(o=null,t.forEach(function(e){"list"===e.type&&(o?o.append(e.map(a)):o=e.map(a))}),t=o):(t.toString=function(){return this.join("")},t=a(t)),"number"===r?isNaN(r=+t)||(t=r):"isoDate"===r?(r=Date.parse(t.replace(/<[^<>]+>/g,"")),isNaN(r)||(t=new Date(r))):r&&e.warn("Invalid type: ["+r+"] "+t),n.push(t))}),n.length>=2){var o=n[b];o&&"string"==typeof o&&(r[o]=n[v])}}}),r[w]=n,c[n.caption||o]=r,n.caption||(o=null)}"list"===n.type&&(n.list_type===t.DEFINITION_LIST?(n.dt_index.forEach(function(e,t){if(o=a(n[e])){var r=n.dt_index[t+1]||n.length;c[o]=e+2===r?a(n[e+1]):n.slice(e+1,r).map(a)}}),o=null):o&&(c[o]=n.map(a),o=null))}else o=a(n.title)}),l?c.configuration_page_title=l:delete c.configuration_page_title,c):c}k.KEY_ORIGINAL_ARRAY=w;var A=/^(?:https?:)?\/\/([a-z][a-z\d\-]{0,14})\.(?:m\.)?wikipedia\.org\/(?:(?:wiki|zh-[a-z]{2,4})\/|w\/index\.php\?(?:uselang=zh-[a-z]{2}&)?title=)([^ #]+)(#[^ ]*)?( .+)?$/i;function x(e){(e=e.trim()).startsWith("'")&&e.endsWith("'")?e=(e=e.replace(/\\(.)|(.)/g,function(e,t,n){return n?'"'===n?'\\"':e:/^["\\\/bfnrtu]$/.test(t)?e:t}).replace(/^'|'$/g,'"')).replace(/\t/g,"\\t"):e.startsWith('"')&&e.endsWith('"')&&(e=(e=e.replace(/\\(.)/g,function(e,t){return/^["\\\/bfnrtu]$/.test(t)?e:t})).replace(/\t/g,"\\t"));try{return JSON.parse(e)}catch(t){throw console.trace("eval_object: Failed to parse code."),console.log(JSON.stringify(e)),t}}return Object.assign(t.parse,{template:function(n,r,i){var a=(r=t.normalize_title_pattern(r,!0,!0))?new RegExp(/{{[\s\n]*/.source+r+"\\s*[|}]","ig"):new RegExp(s.source,"g");if(e.debug("Use pattern: "+a,3,"parse_template"),r=a.exec(n)){var o=new RegExp("}}|"+l.source,"g"),c=1;for(r.lastIndex=o.lastIndex=a.lastIndex-1;c>0&&(a=o.exec(n));)"}}"===a[0]?c--:c++;var _=[n=o.lastIndex>0?n.slice(r.index,o.lastIndex):n.slice(r.index),r[1].trim(),n.slice(r.lastIndex-r.index,-2)];if(Object.assign(_,{count:c,index:r.index,lastIndex:o.lastIndex}),!i||1===i){var u=1,p=[];_[2].split(/[\s\n]*\|[\s\n]*/).slice(1).forEach(function(e){var t=e.match(/^([^=]+)=(.*)$/);if(t){var n=t[1].trim(),r=t[2].trim();p[n]=r}else p[u++]=e}),1===i?(p[0]=_[1],_=p):_[2]=p}return _}},set_template_object_parameters:function(e,t,n){for(var i in e||(e=Object.create(null)),t){var a=t[i];n&&(a=n[a]),r(a)&&(e[i]=a)}return e},template_object_to_wikitext:function(e,t,n){for(var i=["{{"+e],a=1;r(s=t[a]);)(s=String(s)).includes("=")&&(s=a+"="+s),i[a++]=s;for(var o in t){var s;o in i||r(s=t[o])&&((s=String(s)).includes("\n")&&!i.at(-1).endsWith("\n")&&(i[i.length-1]+="\n"),i.push(o+"="+s))}return n&&(i=n(i)),i.join("|")+"}}"},replace_parameter:o,date:p,user:m,redirect:function(e){var n,r=t.is_page_data(e),i=(n=r?t.content_of(e):e)&&n.match(y);return i?i[1].trim():!!(r&&"redirect"in e)||void 0},configuration:k,wiki_URL:function(r,i,a,o){var s=(r=r.trim()).match(A);if(!s)return e.debug("Cannot parse URL: ["+r+"]. Not a wikipedia link?",3,"URL_to_wiki_link"),i&&(r=n.test(r)?"["+r+"]":t.title_link_of(r)),a&&a(r),r;var l=s[3]||"";if(l){if(l.startsWith("#/media/File:"))return l.slice(8);try{l=decodeURIComponent(l.replace(/\./g,"%"))}catch(e){}}var c=s[1].toLowerCase(),_=decodeURIComponent(s[2]);function u(){var e=(c===t.language?"":":"+c+":")+_+l+(s[4]&&(s[4]=s[4].trim())!==_?"|"+s[4]:!l&&/\([^()]+\)$/.test(_)?"|"+_.replace(/\s*\([^()]+\)$/,""):"");return i&&(e=t.title_link_of(e)),e}if(!a)return u();l||c===t.language?a(u()):t.langlinks([c,_],function(e){e&&(c=t.language,_=e),a(u())},t.language,o)},lua_object:function(n){if(n=t.content_of(n),/^[;\s\n]*return[\s\n]*{/.test(n.replace(/(\n|^)[;\s]*--[^\n]*/g,""))){var r=[];e.debug("轉存 `[=[ string ]=]`",7,"parse_lua_object_code"),n=n.replace(/\[(=*)\[([\s\S]*?)\](?:\1)\]/g,function(e,t,n){return r.push(n),"__strings["+(r.length-1)+"]"}),e.debug('Convert `"string"`, `\'string\'` to "string"',6,"parse_lua_object_code"),n=n.replace(/("(?:\\[\s\S]|[^\\\n"])*"|'(?:\\[\s\S]|[^\\\n'])*')(?:\\t|[\s\n]|--[^\n]*\n)*(?:(\.\.)(?:\\t|[\s\n]|--[^\n]*\n)*)?/g,function(e,t,n){return t=x(t),JSON.stringify(t)+(n||"")}),e.debug('concat `"string".."`',6,"parse_lua_object_code"),n=n.replace_till_stable(/("(?:\\[\s\S]|[^\\"])+)"(?:\\t|[\s\n])*\.\.(?:\\t|[\s\n])*"/g,"$1"),e.debug('轉存 `"string"`',6,"parse_lua_object_code"),n=n.replace(/"(?:\\[\s\S]|[^\\\n"])*"/g,function(e){return r.push(JSON.parse(e)),"__strings["+(r.length-1)+"]"}),e.debug("remove all -- comments",6,"parse_lua_object_code"),n=n.replace(/--[^\n]*/g,"");var i=[];e.debug("patch fieldsep ::= ‘,’ | ‘;’",6,"parse_lua_object_code"),n=n.replace_till_stable(/{([^{}]+)}/g,function(t,n){var r={},a=new Array(1);return n=(n=n.split(/[,;]/)).forEach(function(e){if(e=e.trim()){var t=e.match(/^\[([\s\n]*__strings\[\d+\][\s\n]*)\][\s\n]*=([\s\S]+)$/)||e.match(/^\[([\s\S]+)\][\s\n]*=([\s\S]+)$/);if(t)return t[1]=x(t[1]),void(r[t[1]]=t[2].trim());(t=e.match(/^([\w]+)[\s\n]*=([\s\S]+)$/))?r[t[1]]=t[2].trim():a.push(e)}}),a.length>1?e.is_empty_object(r)?i.push(a):(a.forEach(function(e,t){t>0&&(r[t]=e)}),i.push(r)):i.push(r),"__table_values["+(i.length-1)+"]"}),e.debug("recovery_code...",6,"parse_lua_object_code"),n=(n=(n=(n=(n=function e(t){return t?t.replace(/__table_values\[(\d+)\]/g,function(t,n){var r=i[+n];if(Array.isArray(r))return void 0===(r=r.map(e))[0]&&(r[0]=JSON.stringify(null)),"["+r+"]";var a=[];for(var o in r)a.push(JSON.stringify(o)+":"+e(r[o]));return"{"+a+"}"}):t}(n)).replace_till_stable(/([\W])nil([\W])/g,"$1null$2")).replace(/__strings\[(\d+)\]/g,function(e,t){return JSON.stringify(r[t])})).replace(/^[;\s\n]*return[\s\n]*{/,"{")).replace(/\t/g,"\\t");try{n=JSON.parse(n)}catch(t){return void e.error("parse_lua_object_code: Cannot parse: "+JSON.stringify(n))}return n}e.warn("parse_lua_object_code: Invalid lua code? "+("string"==typeof n&&n.length>200?n.slice(0,200)+"...":n))},every:function(e,n,r,i){var a,o=0;for(i||("string"==typeof e&&(a=e.match(/{{([^{}]+)}}/))&&(e=["template",a[1]]),Array.isArray(e)&&(i=t.parse[a=e[0]],"string"==typeof(e=e[1])&&"template"===a&&(e=new RegExp("{{ *(?:"+e+")(?:}}|[^a-z].*?}})","ig"))));a=e.exec(n);){if(i){var s=a;if(!(a=i(a[0])))continue;a.index=s.index}a.lastIndex=e.lastIndex,a.count=o++,r(a)}}}),e.env.not_to_extend_keyword}}),"function"==typeof CeL&&CeL.application.locale.gettext.set_plural_rules({ach:[2,function(e){return+(e>1)}],af:[2,function(e){return+(1!=e)}],ak:[2,function(e){return+(e>1)}],am:[2,function(e){return+(e>1)}],ar:[6,function(e){return 0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11&&e%100<=99?4:5}],arn:[2,function(e){return+(e>1)}],ast:[2,function(e){return+(1!=e)}],ay:[1,0],az:[2,function(e){return+(1!=e)}],be:[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],bg:[2,function(e){return+(1!=e)}],bn:[2,function(e){return+(1!=e)}],bo:[1,0],br:[2,function(e){return+(e>1)}],bs:[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],ca:[2,function(e){return+(1!=e)}],cgg:[1,0],cs:[3,function(e){return 1==e?0:e>=2&&e<=4?1:2}],csb:[3,function(e){return 1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],cy:[6,function(e){return 0==e?0:1==e?1:2==e?2:3==e?3:6==e?4:5}],da:[2,function(e){return+(1!=e)}],de:[2,function(e){return+(1!=e)}],dz:[1,0],el:[2,function(e){return+(1!=e)}],en:[2,function(e){return+(1!=e)}],"en-gb":[2,function(e){return+(1!=e)}],eo:[2,function(e){return+(1!=e)}],es:[2,function(e){return+(1!=e)}],et:[2,function(e){return+(1!=e)}],eu:[2,function(e){return+(1!=e)}],fa:[1,0],fi:[2,function(e){return+(1!=e)}],fil:[2,function(e){return+(e>1)}],fo:[2,function(e){return+(1!=e)}],fr:[2,function(e){return+(e>1)}],fur:[2,function(e){return+(1!=e)}],fy:[2,function(e){return+(1!=e)}],ga:[5,function(e){return 1==e?0:2==e?1:e<7?2:e<11?3:4}],gd:[4,function(e){return 1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3}],gl:[2,function(e){return+(1!=e)}],gu:[2,function(e){return+(1!=e)}],gun:[2,function(e){return+(e>1)}],ha:[2,function(e){return+(1!=e)}],he:[2,function(e){return+(1!=e)}],hi:[2,function(e){return+(1!=e)}],hr:[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],hu:[2,function(e){return+(1!=e)}],hy:[2,function(e){return+(1!=e)}],ia:[2,function(e){return+(1!=e)}],id:[1,0],is:[2,function(e){return+(1!=e)}],it:[2,function(e){return+(1!=e)}],ja:[1,0],jbo:[1,0],jv:[2,function(e){return+(0!=e)}],ka:[1,0],kk:[1,0],km:[1,0],kn:[2,function(e){return+(1!=e)}],ko:[1,0],ku:[2,function(e){return+(1!=e)}],kw:[4,function(e){return 1==e?0:2==e?1:3==e?2:3}],ky:[1,0],lb:[2,function(e){return+(1!=e)}],ln:[2,function(e){return+(e>1)}],lo:[1,0],lt:[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2}],lv:[3,function(e){return e%10==1&&e%100!=11?0:0!=e?1:2}],mai:[2,function(e){return+(1!=e)}],mfe:[2,function(e){return+(e>1)}],mg:[2,function(e){return+(e>1)}],mi:[2,function(e){return+(e>1)}],mk:[2,function(e){return+(1==e||e%10==1?0:1)}],ml:[2,function(e){return+(1!=e)}],mn:[2,function(e){return+(1!=e)}],mnk:[3,function(e){return 0==e?0:1==e?1:2}],mr:[2,function(e){return+(1!=e)}],ms:[1,0],mt:[4,function(e){return 1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3}],nah:[2,function(e){return+(1!=e)}],nap:[2,function(e){return+(1!=e)}],nb:[2,function(e){return+(1!=e)}],ne:[2,function(e){return+(1!=e)}],nl:[2,function(e){return+(1!=e)}],nn:[2,function(e){return+(1!=e)}],no:[2,function(e){return+(1!=e)}],nso:[2,function(e){return+(e>1)}],oc:[2,function(e){return+(e>1)}],or:[2,function(e){return+(1!=e)}],pa:[2,function(e){return+(1!=e)}],pap:[2,function(e){return+(1!=e)}],pl:[3,function(e){return 1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],pms:[2,function(e){return+(1!=e)}],ps:[2,function(e){return+(1!=e)}],pt:[2,function(e){return+(1!=e)}],"pt-br":[2,function(e){return+(e>1)}],rm:[2,function(e){return+(1!=e)}],ro:[3,function(e){return 1==e?0:0==e||e%100>0&&e%100<20?1:2}],ru:[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],sco:[2,function(e){return+(1!=e)}],si:[2,function(e){return+(1!=e)}],sk:[3,function(e){return 1==e?0:e>=2&&e<=4?1:2}],sl:[4,function(e){return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3}],so:[2,function(e){return+(1!=e)}],sq:[2,function(e){return+(1!=e)}],sr:[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],"sr-ec":[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],"sr-el":[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],su:[1,0],sv:[2,function(e){return+(1!=e)}],sw:[2,function(e){return+(1!=e)}],ta:[2,function(e){return+(1!=e)}],te:[2,function(e){return+(1!=e)}],tg:[2,function(e){return+(1!=e)}],th:[1,0],ti:[2,function(e){return+(e>1)}],tk:[2,function(e){return+(1!=e)}],tr:[1,0],tt:[1,0],ug:[1,0],uk:[3,function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}],ur:[2,function(e){return+(1!=e)}],uz:[1,0],vi:[1,0],wa:[2,function(e){return+(e>1)}],wo:[1,0],yo:[2,function(e){return+(1!=e)}],zh:[1,0],"zh-hans":[1,0],"zh-hant":[1,0],"zh-tw":[1,0]}),"function"==typeof CeL&&CeL.application.locale.gettext.set_text({"España":"西班牙","Calendrier républicain":"法國共和曆","untranslated message count":"7","Load failed":"載入失敗","語法錯誤！":"語法錯誤！","函數名稱不相符，可能是用了 reference？":"函數名稱不相符，可能是用了 reference？","Treat [%1] as RegExp.":"將[%1]視為 RegExp。","Invalid flags: [%1]":"無效標誌：[%1]","Illegal pattern: [%1]":"違反規則的模式：[%1]","轉換模式 [%1] 出錯：並非 RegExp？ %2":"轉換模式 [%1] 出錯：並非 RegExp？ %2","Treat pattern [%1] as Windows wildcard search string.":"將模式[%1]視為 Windows 萬用字元搜尋字串。","無法轉換模式 [%1]！":"無法轉換模式 [%1]！","歲次":"歲次","日干支":"日干支",Italy:"義大利",Poland:"波蘭",Portugal:"葡萄牙",Spain:"西班牙",France:"法國",Luxembourg:"盧森堡",Netherlands:"荷蘭",Bavaria:"巴伐利亞",Austria:"奧地利",Switzerland:"瑞士",Hungary:"匈牙利",Germany:"德國",Norway:"挪威",Denmark:"丹麥","Great Britain":"英國",Sweden:"瑞典",Finland:"芬蘭",Bulgaria:"保加利亞","Soviet Union":"蘇聯",Serbia:"塞爾維亞",Romania:"羅馬尼亞",Greece:"希臘","Türkiye":"土耳其",Egypt:"埃及","%1 {{PLURAL:%1|year|years}} and %2 {{PLURAL:%2|month|months}}":"%1{{PLURAL:%1|年}}%2{{PLURAL:%2|個月}}","%1 Y %2 M":"%1年%2個月","%1 {{PLURAL:%1|year|years}}":"%1{{PLURAL:%1|年}}","%1 Y":"%1年","%1 {{PLURAL:%1|month|months}}":"%1個{{PLURAL:%1|月}}","%1 M":"%1個月","%1 {{PLURAL:%1|millisecond|milliseconds}}":"%1{{PLURAL:%1|毫秒}}","%1 ms":"%1毫秒","%1 {{PLURAL:%1|second|seconds}}":"%1{{PLURAL:%1|秒鐘}}","%1 s":"%1秒","%1 {{PLURAL:%1|minute|minutes}}":"%1{{PLURAL:%1|分鐘}}","%1 min":"%1分","%1 {{PLURAL:%1|hour|hours}}":"%1{{PLURAL:%1|小時}}","%1 hr":"%1小時","%1 {{PLURAL:%1|day|days}}":"%1{{PLURAL:%1|天}}","%1 d":"%1天","%1 {{PLURAL:%1|week|weeks}}":"%1個{{PLURAL:%1|禮拜}}","%1 W":"%1週","2 days before yesterday, %H:%M":"大前天%H時%M分","the day before yesterday, %H:%M":"前天%H時%M分","yesterday, %H:%M":"昨天%H時%M分","today, %H:%M":"今天%H時%M分","tomorrow, %H:%M":"明天%H時%M分","the day after tomorrow, %H:%M":"後天%H時%M分","2 days after tomorrow, %H:%M":"大後天%H時%M分","3 days after tomorrow, %H:%M":"大大後天%H時%M分",now:"現在","several seconds ago":"幾秒前",soon:"馬上","%1 {{PLURAL:%1|second|seconds}} ago":"%1{{PLURAL:%1|秒}}前","%1 {{PLURAL:%1|second|seconds}} later":"%1{{PLURAL:%1|秒}}後","%1 {{PLURAL:%1|minute|minutes}} ago":"%1{{PLURAL:%1|分}}前","%1 {{PLURAL:%1|minute|minutes}} later":"%1{{PLURAL:%1|分}}後","%1 {{PLURAL:%1|hour|hours}} ago":"%1{{PLURAL:%1|小時}}前","%1 {{PLURAL:%1|hour|hours}} later":"%1{{PLURAL:%1|小時}}後","%1 {{PLURAL:%1|day|days}} ago":"%1{{PLURAL:%1|天}}前","%1 {{PLURAL:%1|day|days}} later":"%1{{PLURAL:%1|天}}後","%1 {{PLURAL:%1|week|weeks}} ago":"%1{{PLURAL:%1|週}}前","%1 {PLURAL:%1|week|weeks}} later":"%1{{PLURAL:%1|週}}後","Invalid date: %1":"無效的日期：%1","You may need to set %1 = %2!":"您也許需要設定 %1 = %2","Load the main functions and necessary dependencies to operate MediaWiki.":"載入操作 MediaWiki 系統的主要功能與必要的依賴鍊。","All wiki submodules are loaded.":"已加載所有wiki子模塊。","Not Yet Implemented!":"尚未實現！","已載入過 [%1]，直接設定使用者自訂資源。":"已載入過 [%1]，直接設定使用者自訂資源。","強制再次載入/使用 [%2] (%1) 領域/語系。":"強制再次載入/使用 [%2] (%1) 領域/語系。","載入/使用 [%2] (%1) 領域/語系。":"載入/使用 [%2] (%1) 領域/語系。","所指定之 domain [%1] 尚未載入，若有必要請使用強制載入 flag。":"所指定之 domain [%1] 尚未載入，若有必要請使用強制載入 flag。","無法判別 domain，卻設定有 callback。":"無法判別 domain，卻設定有 callback。","Illegal domain alias list: [%1]":"領域別名列表無效：[%1]","Adding domain alias [%1] → [%2]...":"添加領域別名 [%1]→[%2] ...","Testing domain alias [%1]...":"測試領域別名 [%1] ...","Failed to extract gettext id.":"提取 gettext id 失敗。","Loading language / domain [%1]...":"正在加載語言/領域 [%1] ...","Language / domain [%1] loaded.":"已加載[%1]語言/領域。","Cannot find menu node: [%1]":"找不到選單節點：[%1]",Language:"語言","轉換數字：[%1]成 %2 格式。":"轉換數字：[%1]成 %2 格式。","星期":"星期","曜日":"日語星期","無法轉換數字 [%1]！":"無法轉換數字 [%1]！","↑Back to TOC":"↑回到目錄","Pin/unpin the TOC":"設定目錄為固定或相對定位","Set TOC to left or right":"設定目錄左右定位","Contents of [%1]":"[%1] 的目錄",Contents:"目次",expand:"展開",collapse:"收合","輸入了非字串之參數：[%1]":"輸入了非字串之參數：[%1]","設定 %1 成非字串之參數：%2":"設定 %1 成非字串之參數：%2","共%1個參數：":"共%1個參數：","Invalid title: %1":"標題無效：%1","Continue key":"後續索引","Cache information about the API modules of %1: module path=%2":"快取 %1 的 API 模組資訊：模組路徑為 %2","Error: connect ECONNREFUSED %1":"與 %1 的連線被拒","Error: connect ETIMEDOUT %1":"與 %1 的連線逾時","Error: getaddrinfo ENOTFOUND %1":"找不到此域名：%1","Error: Timeout %1":"錯誤：連線超過 %1，已逾時。","Error: read ECONNRESET":"服務器重設連線","Error: socket hang up":"連線中斷","Error: unexpected end of file":"接收到的資料不完整","Error: write ECONNABORTED":"服務器沒有正常的關閉連線","The chunk do not has regular .content_length!":"本小塊未設定正規的 .content_length！","Illegal chunk.content_length!":"違反規則的 chunk.content_length！","Retry too many times!":"重試太多次了！","Failed to get file: [%1]":"無法獲取檔案：[%1]","自網路取得 URL：%1":"自網路取得 URL：%1","Got error when retrieving [%1]: %2":"獲取 [%1] 出錯：%2","自網路取得 URL：%1，%2{{PLURAL:%2|位元組}}。":"自網路取得 URL：%1，%2{{PLURAL:%2|位元組}}。","Invalid cookie?":"cookie 無效？","cookie 名稱重複！以後來/新出現者為準。":"cookie 名稱重複！以後來/新出現者為準。","Waiting %1/%2 {{PLURAL:%1|connection|connections}}: %3":"正在等待 %1/%2 個{{PLURAL:%1|連接}}：%3","Using HTTPS proxy to get URL: %1":"使用HTTPS代理獲取URL：%1","Using HTTP proxy to get URL: %1":"使用HTTP代理獲取URL：%1","使用新 agent。":"使用新 agent。","使用自定義 agent。":"使用自定義 agent。","自定義 agent 與 URL 之協定不同，將嘗試採用符合的協定：%1":"自定義 agent 與 URL 之協定不同，將嘗試採用符合的協定：%1","採用泛用的 agent。":"採用泛用的 agent。","重新設定 cookie 成：%1":"重新設定 cookie 成：%1","Retry %1/%2: %3":"重試 %1/%2：%3","URL not found: [%1]":"找不到網址：[%1]","Node.js v12 and later versions disable TLS v1.0 and v1.1 by default.":"Node.js v12及更高版本默認禁用TLS v1.0和v1.1。",'Please set tls.DEFAULT_MIN_VERSION = "TLSv1" first!':"請先設置tls.DEFAULT_MIN_VERSION =“TLSv1”！","%1 Redirecting to [%2] ← [%3]":"%1重定向到 [%2] ← [%3]","response HEADERS: %1":"HTTP 回應標頭欄位：%1","HTTP status code: %1 %2":"HTTP 狀態碼：%1 %2","Exception HTTP status code %1: %2":"異常 HTTP 狀態碼 %1：%2","檔案名稱：%1":"檔案名稱：%1","Got URL [%1], but there is no listener!":"取得了網址 [%1] 的資料，但沒有設置處理資料的方法！","等待接收從網址 [%1] 傳輸回的資料……":"等待接收從網址 [%1] 傳輸回的資料……","Unknown HTTP compression method: [%1]":"未知的 HTTP 壓縮方法：[%1]","You need to bypass the DDoS protection by Cloudflare!":"您需要繞過 Cloudflare 的阻斷服務攻擊保護！","Write %2 {{PLURAL:%2|byte|bytes}} to file [%1]: %3":"將 %2 {{PLURAL:%2|位元組}}寫入檔案 [%1]：%3","Failed to write %2 {{PLURAL:%2|byte|bytes}} to [%1]: %3":"無法將 %2 {{PLURAL:%2|位元組}}寫入 [%1]：%3","Request path contains unescaped characters":"請求路徑包含未解碼的字符","Invalid POST data: %1":"無效的 POST 表單數據：%1","Connection timeout for %1: [%2]":"連線超過 %1，已逾時：%2","Add timeout %1: [%2]":"添加逾時設定 %1：[%2]","Invalid timeout: %1":"無效的逾時時間：%1","Must specify proxy server: hostname:port":'必須指定代理服務器："hostname:port"',"無 node.js 之 `fs` 套件，因此不具備 node 之檔案操作功能。":"無 node.js 之 `fs` 套件，因此不具備 node 之檔案操作功能。","自 URL 取得檔名：%1":"自 URL 取得檔名：%1","No file name specified.":"沒有指定檔案名。","下載 %1":"下載 %1","%1 (file encoding %2, charset %3)":"%1（檔案編碼%2，字元編碼%3）","Using cached data.":"使用快取資料。","No valid cached data. Try to get data (again)...":"沒有有效的快取資料。嘗試（再次）獲取資料……","Got file name from HTTP header: %1":"從 HTTP 標頭獲得檔案名：%1","Set file name: [%1], file name from header: [%2].":"設置檔案名：[%1]，HTTP 標頭指定的檔案名：[%2]。","重新獲取檔案後發現原檔案已存在，跳過不覆寫：[%1]":"重新獲取檔案後發現原檔案已存在，跳過不覆寫：[%1]","Write data to cache file [%1].":"將資料寫入快取檔案 [%1]。","The data to cache: %1...":"要快取的資料：%1 ...","無頁面重定向至本頁":"無頁面重定向至本頁","共有%1個{{PLURAL:%1|頁面}}重定向至本頁":"共有%1個{{PLURAL:%1|頁面}}重定向至本頁","no change":"無改變","finished: %1":"結束：%1",finished:"完成","%1 elapsed, %3 at %2":"隔 %1，%2 %3","First, it takes %1 to get %2 {{PLURAL:%2|page|pages}}.":"首先使用 %1 以取得 %2 個{{PLURAL:%2|頁面}}內容。","Processed %1 {{PLURAL:%1|page|pages}}.":"處理了%1個{{PLURAL:%1|頁面}}。","Page handling function error: %1":"頁面處理函數錯誤：%1","Edit %1":"編輯 %1","Missing page":"佚失頁面","Invalid page title":"頁面標題錯誤","Page edit function error: %1":"頁面編輯函數錯誤：%1","%1 {{PLURAL:%2|page|pages}} processed":"完成 %1 {{PLURAL:%2|條目}}","no page modified,":"未改變任何條目。","%1 {{PLURAL:%1|page|pages}} have not changed,":"%1 {{PLURAL:%1|條目}}未作變更。","%1 elapsed.":"共費時 %1。","'''Stopped''', give up editing.":"'''已停止作業'''，放棄編輯。","No changes.":"全無變更。","處理分塊 %1–%2":"處理分塊 %1–%2","No user name or password provided. The login attempt was abandoned.":"未提供用戶名或密碼。放棄登錄。","There are more than one %1 in %2":"於%1有多於一個%2","似乎丟失了令牌。":"似乎丟失了令牌。","Too many badtoken errors! Please re-execute the program!":"太多 badtoken 錯誤！請重新執行程序！","Not using node.js!":"非使用 node.js！","未保存密碼！":"未保存密碼！","Did not set %1!":"未設定 %1！","Too many failed login attempts: %1":"登入失敗次數過多：%1","嘗試重新取得令牌。":"嘗試重新取得令牌。","網址無效：%1":"網址無效：%1","將自動設定 %1。":"將自動設定 %1。","Waiting %1...":"等待 %1...","Found %2 query {{PLURAL:%2|module|modules}}: %1":"共有%2種查詢{{PLURAL:%2|模組}}：%1","Comma-separator":"、","Invalid parameter: %1":"無效的參數：%1","調降取得頁面的上限，改成每次最多 %1 個頁面。":"調降取得頁面的上限，改成每次最多 %1 個頁面。","Unknown API response: %1":"未知的 API 回應：%1","Circular redirect: %1↔%2":"循環重定向：%1↔%2","Does not exist":"不存在","No content":"無內容","The cache file is saved.":"快取檔已儲存。","Wikimedia wikis 最多可回溯約 %1。":"Wikimedia wikis 最多可回溯約 %1。","您所指定的時間 [%1]（%2）恐怕過長。":"您所指定的時間 [%1]（%2）恐怕過長。","開始以 %1 監視、掃描 %2 自 %3 起更改的頁面。":"開始以 %1 監視、掃描 %2 自 %3 起更改的頁面。","開始以 %1 監視、掃描 %2 最近更改的頁面。":"開始以 %1 監視、掃描 %2 最近更改的頁面。","Configuration page: %1":"設定頁：%1。","設定頁面 %1 已變更。重新解析……":"設定頁面 %1 已變更。重新解析……","等待 %1 以應用設定。":"等待 %1 以應用設定。","wikitext parser checking: %1":"測試 wikitext 解析器：%1","%1 {{PLURAL:%1|result|results}}":"%1筆{{PLURAL:%1|結果}}","%1 is not exist in %2.":"%2 中無 %1。","檢查緊急停止頁面 %1":"檢查緊急停止頁面 %1","The emergency stop page was not found (%1).":"未發現用來停止作業的頁面 %1。","The operation will proceed as usual.":"將如常進行作業。","已設定緊急停止編輯作業！":"已設定緊急停止編輯作業！","緊急停止頁面 %1 有留言要停止編輯作業！":"緊急停止頁面 %1 有留言要停止編輯作業！","Editing of %1 has been rejected: %2":"已被拒絕編輯 %1：%2","無法以正常方式編輯，嘗試當作 Flow 討論頁面。":"無法以正常方式編輯，嘗試當作 Flow 討論頁面。","Failed to edit the page %1: %2":"編輯頁面 %1 失敗：%2。","No changes to page content: %1":"頁面內容無更動：%1。","Content is empty":"內容被清空","Content is not settled":"未設定編輯內容","Abandon change":"放棄編輯頁面","No reason provided":"未描述原因","The text between update comments will be automatically overwritten by the bot.":"機器人將自動覆寫更新註解間的文字。","清除訊息":"清除訊息","顯示/隱藏訊息":"顯示/隱藏訊息","訊息提示與紀錄欄":"訊息提示與紀錄欄","公元年/中曆月日":"公元年/中曆月日","Convert an era name to the specified format":"轉換紀年成指定之格式","地理座標：":"地理座標：","自訂輸出格式":"自訂輸出格式","紀年轉換工具":"紀年轉換工具","緯度：":"緯度：","經度：":"經度：","輸出格式":"輸出格式","前綴":"前綴","時區：":"時區：","請注意：本欄僅供開發人員使用。":"請注意：本欄僅供開發人員使用。","朝代紀年日期":"朝代紀年日期","批次轉換":"批次轉換","公元日期":"公元日期","Loading...":"載入中…","約%1年":"約%1年","公元":"公元","မြန်မာ":"緬甸","Việt Nam":"越南",Unpin:"拔起",Pin:"釘選","除去此欄":"除去此欄","分類":"分類","%1/%2/%3":"%1/%2/%3","%1 BCE":"前%1年","%1 CE":"%1年","年譜":"年譜","曆譜":"曆譜","共有 %1 個時段{{PLURAL:%1|紀錄}}":"共有 %1 個時段{{PLURAL:%1|紀錄}}","共有 %1 個年段{{PLURAL:%1|紀錄}}":"共有 %1 個年段{{PLURAL:%1|紀錄}}","無可供列出之曆譜！":"無可供列出之曆譜！","嘗試加注日期":"嘗試加注日期","全不選":"全不選","增加此欄":"增加此欄","中國皇帝生卒":"中國皇帝生卒","臺灣地震":"臺灣地震","君主生卒":"君主生卒","難辨識時段：":"難辨識時段：","general data layer":"一般","資料圖層":"資料圖層","導覽列：":"導覽列：","所有國家":"所有國家","共存紀年":"共存紀年","測試範例":"測試範例","輸入紀錄":"輸入紀錄","使用說明":"使用說明","紀年線圖":"紀年線圖","設定":"設定","標注文本":"標注文本","曆數處理":"曆數處理","問題回報":"問題回報","年月日干支":"年月日干支","四柱八字":"四柱八字","Julian Day Number":"儒略日數","採用曆法":"採用曆法","出典":"出典","君主名":"君主姓名","表字":"表字","君主號":"別號","諱":"名諱","諡":"諡","廟號":"廟號","出生":"出生","逝世":"逝世","在位":"在位","加冕":"加冕","前任":"前任","繼任":"繼任","父親":"父親","母親":"母親","配偶":"配偶","展示線圖":"展示線圖","紀年 %1":"紀年 %1","Initializing...":"初始化中…","六曜":"六曜","紀年線圖選項：":"紀年線圖選項：","標記正處理的紀年":"標記正處理的紀年","合併歷史時期":"合併歷史時期","擴張範圍至君主在世時段":"擴張範圍至君主在世時段","請選擇所欲載入之資料圖層。":"請選擇所欲載入之資料圖層。","已載入 %1 筆資料。":"已載入 %1 筆資料。","Data will be presented at next calculation.":"資料將於下次演算時呈現。",Aries:"白羊宮",Taurus:"金牛宮",Gemini:"雙子宮",Cancer:"巨蟹宮",Leo:"獅子宮",Virgo:"處女宮",Libra:"天秤宮",Scorpio:"天蠍宮",Sagittarius:"人馬宮",Capricorn:"摩羯宮",Aquarius:"水瓶宮",Pisces:"雙魚宮","月相":"月相",JDN:"儒略日數",JD:"儒略日","Julian Date":"儒略日","年日期":"年日期","週日期":"週日期","Unix time":"Unix時間","君主實歲":"君主實歲","同國共存紀年":"同國共存紀年","general precession":"綜合歲差","天文節氣":"天文節氣","節氣經過日數":"節氣經過日數","Sun's apparent longitude":"太陽視黃經","Moon longitude":"月亮視黃經","Moon latitude":"月亮視黃緯","月日視黃經差":"月日視黃經差","晦日":"晦日","朔":"朔","saros %1":"沙羅序列%1","日出日落":"日出日落","曙暮光":"曙暮光","月出月落":"月出月落",calendar:"曆法","Gregorian calendar":"格里曆","Julian calendar":"儒略曆","Revised Julian calendar":"儒略改革曆","伊斯蘭曆":"伊斯蘭曆","گاه‌شماری هجری خورشیدی":"現代伊朗曆","Bangla calendar":"現行孟加拉曆","希伯來曆":"希伯來曆","長紀曆":"長紀曆","Maya Tzolk'in":"馬雅卓爾金曆","Maya Haab'":"馬雅哈布曆","傣曆":"傣曆","မြန်မာ ပြက္ခဒိန်":"緬曆","彝曆":"彝曆","हिन्दू पंचांग":"印度曆","भारतीय राष्ट्रीय पंचांग":"印度國定曆","佛曆":"佛曆","ਨਾਨਕਸ਼ਾਹੀ":"錫克教曆","گاه‌شماری بهائی":"巴哈伊曆","科普特曆":"科普特曆","衣索比亞曆":"衣索比亞曆","教會亞美尼亞曆":"教會亞美尼亞曆","Byzantine calendar":"拜占庭曆","古埃及曆":"古埃及曆","東亞陰陽曆":"東亞陰陽曆","天文夏曆":"天文夏曆","曆注":"曆注","月干支":"月干支","明清節氣":"明清節氣","建除":"建除","中國":"中國","月の別名":"月令別名","七曜":"七曜","二十八宿":"二十八宿","二十七宿":"二十七宿","zodiac sign":"黃道十二宮","Year naming":"紀年法","生肖":"生肖","Year numbering":"編年法","民國":"民國","黃帝紀元":"黃帝紀元","皇紀":"皇紀","단군기원":"檀紀","泰國佛曆":"泰國佛曆","羅馬建城":"羅馬建城","Seleucid era":"塞琉古紀元","Before Present":"距今","Holocene calendar":"全新世紀年","Gregorian reform":"公曆改曆","著名地點：":"著名地點：","Loading %1%...":"已載入 %1%…","中文數字":"中文數字",astronomy:"天文","上弦":"上弦","望":"望","下弦":"下弦","annular solar eclipse":"日環食","hybrid solar eclipse":"全環食","partial lunar eclipse":"月偏食","partial solar eclipse":"日偏食","penumbral lunar eclipse":"半影月食","total lunar eclipse":"月全食","total solar eclipse":"日全食","lunar eclipse":"月食","solar eclipse":"日食","lower culmination":"下中天",moonrise:"月升",sunrise:"日出","upper culmination":"上中天",moonset:"月降",sunset:"日落","astronomical twilight begin":"天文曙光","civil twilight begin":"民用曙光","nautical twilight begin":"航海曙光","astronomical twilight end":"天文暮光","civil twilight end":"民用暮光","nautical twilight end":"航海暮光","log-type-debug":"偵錯","log-type-em":"重要","log-type-error":"錯誤","log-type-fatal":"致命","log-type-info":"訊息","log-type-log":"記錄","log-type-trace":"追蹤","log-type-warn":"警告","跳過 %2 之 %1 設定，因數值已存在且未設定 %3。":"跳過 %2 之 %1 設定，因數值已存在且未設定 %3。","%1 必須更名為 %2 才能起作用！":"%1 必須更名為 %2 才能起作用！","Cannot convert Lua pattern to RegExp pattern: %1":"無法將 Lua 的匹配模式轉換成 RegExp 的：%1","無法從網址擷取作品 id：%1":"無法從網址擷取作品 id：%1","Starting %1":"載入 %1","《%1》已 %2 沒有更新，時間過久不再強制重新下載，僅在章節數量有變化時才重新下載。":"《%1》已 %2 沒有更新，時間過久不再強制重新下載，僅在章節數量有變化時才重新下載。",'"%1" 這個值所允許的數值類型為 %4，但現在被設定成 {%2} %3':'"%1" 這個值所允許的數值類型為 %4，但現在被設定成 {%2} %3',"至少一個由「%1」所指定的%2路徑不存在：%3":"至少一個由「%1」所指定的%2路徑不存在：%3",directories:"目錄",directory:"目錄",file:"檔案",files:"檔案",'無法處理 "%1" 在數值類型為 %2 時之條件！':'無法處理 "%1" 在數值類型為 %2 時之條件！','"%1" 被設定成了有問題的值：{%2} %3':'"%1" 被設定成了有問題的值：{%2} %3',"未提供鍵值":"未提供鍵值","Using proxy server: %1":"使用代理伺服器：%1","無法解析的時間":"無法解析的時間","未設定 User-Agent。":"未設定 User-Agent。","Referer 不可為 undefined。":"Referer 不可為 undefined。","設定 Referer：%1":"設定 Referer：%1","最小圖片大小應大於等於零":"最小圖片大小應大於等於零","無法解析 %1":"無法解析 %1","無法設定 %1：%2":"無法設定 %1：%2","由命令列":"由命令列",boolean:"真偽",fso_directories:"目錄路徑",fso_directory:"目錄路徑",fso_file:"檔案路徑",fso_files:"檔案路徑",function:"函數",number:"數字",string:"字串","跳過之前已下載或檢查過，已無需再檢查的章節。":"跳過之前已下載或檢查過，已無需再檢查的章節。","跳過所有章節":"跳過所有章節","僅檢查 %1個{{PLURAL:%1|章節}}：%2":"僅檢查 %1個{{PLURAL:%1|章節}}：%2","取消下載《%1》。":"取消下載《%1》。","暫停下載《%1》。":"暫停下載《%1》。","跳過本章節不下載。":"跳過本章節不下載。","不在 chapter_filter 所篩範圍內。跳過本章節不下載。":"不在 chapter_filter 所篩範圍內。跳過本章節不下載。","跳過 %1 不處理：%2":"跳過 %1 不處理：%2","下載第 %1 %2之章節內容前先等待 %3。":"下載第 %1 %2之章節內容前先等待 %3。","《%2》§%3：執行 %1 時發生嚴重錯誤，異常中斷。":"《%2》§%3：執行 %1 時發生嚴重錯誤，異常中斷。","原已設定 chapter_list.%1=%2，後又設定 chapter_data.%1=%3，兩者相衝突！":"原已設定 chapter_list.%1=%2，後又設定 chapter_data.%1=%3，兩者相衝突！","The serial number of the work part (NO_in_part) is invalid: %1":"作品分部/分卷之序號無效：%1","《%1》：轉成由舊至新之順序。":"《%1》：轉成由舊至新之順序。","《%1》：":"《%1》：","下次從 %1《%2》起下載。":"下次從 %1《%2》起下載。","本作依章節標題來決定章節編號；建議設置 recheck=multi_parts_changed 選項來避免多次下載時，遇上缺話的情況。":"本作依章節標題來決定章節編號；建議設置 recheck=multi_parts_changed 選項來避免多次下載時，遇上缺話的情況。","《%1》出現章節編號倒置的情況：%2":"《%1》出現章節編號倒置的情況：%2","無法從章節標題《%1》判斷章節序號。":"無法從章節標題《%1》判斷章節序號。","無法從章節資料判斷章節序號：%1。":"無法從章節資料判斷章節序號：%1。","依序將章節序號設定為 %1。":"依序將章節序號設定為 %1。","工具檔設定了 part_title %1，卻似乎未設定應設定的 `work_data.chapter_list.part_NO`? (part_NO: %2)":"工具檔設定了 part_title %1，卻似乎未設定應設定的 `work_data.chapter_list.part_NO`? (part_NO: %2)","本作存有不同的 part；建議設置 recheck=multi_parts_changed 選項來避免多次下載時，遇上缺話的情況。":"本作存有不同的 part；建議設置 recheck=multi_parts_changed 選項來避免多次下載時，遇上缺話的情況。","Invalid chapter_data: %1":"章節資料無效：%1","無法取得 §%1 的網址。":"無法取得 §%1 的網址。","Getting data of chapter %1, %2":"獲取章節資料 %1，%2","Getting data of chapter %1":"獲取章節資料 %1","先創建章節目錄：%1":"先創建章節目錄：%1","解開圖片壓縮檔：%1":"解開圖片壓縮檔：%1","讀取圖片壓縮檔：%1":"讀取圖片壓縮檔：%1","刪除章節內容頁面：%1":"刪除章節內容頁面：%1","%1 [%2] %3 {{PLURAL:%3|image|images}}.":"%1 [%2] 共 %3 張{{PLURAL:%3|圖片}}。","（本章為需要付費/被鎖住的章節）":"（本章為需要付費/被鎖住的章節）","File extension: %1":"延伸檔名：%1","%1：已派發完工作，開始並行下載各圖片。":"%1：已派發完工作，開始並行下載各圖片。","下載圖 %1":"下載圖 %1","下载第 %2 張{{PLURAL:%2|圖片}}前先等待 %1。":"下载第 %2 張{{PLURAL:%2|圖片}}前先等待 %1。","無法取得第 %1 章的內容。":"無法取得第 %1 章的內容。","跳過 %1 §%2 並接著下載下一章。":"跳過 %1 §%2 並接著下載下一章。",MESSAGE_NEED_RE_DOWNLOAD:"仙人拍鼓有時錯，跤步踏差啥人無？下載出錯了，例如服務器暫時斷線、檔案闕失(404)。請確認排除錯誤或錯誤不再持續後，重新執行以接續下載。","Retry %1/%2":"重試 %1/%2","因快取檔案壞了（例如為空檔案），將重新取得 chapter_URL，設定 .reget_chapter。":"因快取檔案壞了（例如為空檔案），將重新取得 chapter_URL，設定 .reget_chapter。","章節編號依序應為 %1，但無法自章節內容取得編號。":"章節編號依序應為 %1，但無法自章節內容取得編號。","章節編號不一致：依序應為 %1，但從內容擷取出 %2。":"章節編號不一致：依序應為 %1，但從內容擷取出 %2。","等待 %2 之後再重新取得章節內容頁面：%1":"等待 %2 之後再重新取得章節內容頁面：%1","重新取得章節內容頁面：%1":"重新取得章節內容頁面：%1","等待 %2 之後再取得章節內容頁面：%1":"等待 %2 之後再取得章節內容頁面：%1","取得章節內容頁面：%1":"取得章節內容頁面：%1","解析出空的頁面資訊！":"解析出空的頁面資訊！","解析章節頁面時發生錯誤，中斷跳出：%1":"解析章節頁面時發生錯誤，中斷跳出：%1","本章為需要付費/被鎖住的章節。":"本章為需要付費/被鎖住的章節。","本章節沒有獲取到任何圖片！":"本章節沒有獲取到任何圖片！","所登記的圖形數量%1與有圖形列表長度%2不同！":"所登記的圖形數量%1與有圖形列表長度%2不同！","原先的章節資料設定了分部標題，但 .parse_chapter_data() 傳回的章節資料缺少了分部標題。或許您可以沿用原先的章節資料。":"原先的章節資料設定了分部標題，但 .parse_chapter_data() 傳回的章節資料缺少了分部標題。或許您可以沿用原先的章節資料。","剩 %1 張{{PLURAL:%1|圖}}...":"剩 %1 張{{PLURAL:%1|圖}}...","等待尚未下載完成的圖片檔案：":"等待尚未下載完成的圖片檔案：","%1：%2筆{{PLURAL:%2|圖片}}下載錯誤紀錄":"%1：%2筆{{PLURAL:%2|圖片}}下載錯誤紀錄","從圖片壓縮檔刪除%1張本次下載成功、上次下載失敗的損壞圖片：%2":"從圖片壓縮檔刪除%1張本次下載成功、上次下載失敗的損壞圖片：%2","更新圖片壓縮檔：%1":"更新圖片壓縮檔：%1","創建圖片壓縮檔：%1":"創建圖片壓縮檔：%1","%2: jump to chapter %1":"《%2》：跳到章節編號%1","若欲動態增加章節，必須手動增加章節數量: work_data.chapter_count++！":"若欲動態增加章節，必須手動增加章節數量: work_data.chapter_count++！","（本次下載共處理 %1個{{PLURAL:%1|字}}）":"（本次下載共處理 %1個{{PLURAL:%1|字}}）","（本次下載共處理 %1張{{PLURAL:%1|圖}}）":"（本次下載共處理 %1張{{PLURAL:%1|圖}}）","於 %1 下載完畢。":"於 %1 下載完畢。","有些為付費/受限章節。":"有些為付費/受限章節。","%1：本次下載作業，本作品共 %2張{{PLURAL:%2|圖片}}下載錯誤。":"%1：本次下載作業，本作品共 %2張{{PLURAL:%2|圖片}}下載錯誤。","章節編號%1：":"章節編號%1：","Insert a chapter url after chapter %1: %2":"在章節編號 %1 之後插入新頁面：%2","將覆寫繁簡中文轉換快取目錄 [%1] 中的檔案。":"將覆寫繁簡中文轉換快取目錄 [%1] 中的檔案。","解壓縮繁簡中文轉換快取檔案：[%1]。":"解壓縮繁簡中文轉換快取檔案：[%1]。","壓縮繁簡中文轉換快取檔案：[%1]。":"壓縮繁簡中文轉換快取檔案：[%1]。","語言轉換":"語言轉換","Extract ebook as cache: [%1]":"解開電子書以當作快取：[%1]","將簡體中文轉換成繁體中文：《%1》":"將簡體中文轉換成繁體中文：《%1》","将繁体中文转换成简体中文：《%1》":"將繁體中文轉換成簡體中文：《%1》","繁化: %1":"繁化: %1","简化: %1":"簡化: %1","字數過少（%1{{PLURAL:%1|字元}}）":"字數過少（%1{{PLURAL:%1|字元}}）","不存在封存檔案用的目錄：%1":"不存在封存檔案用的目錄：%1","保留舊檔：":"保留舊檔：","搬移至 →":"搬移至 →","移除舊檔案：":"移除舊檔案：","打包 epub 電子書：%1":"打包 epub 電子書：%1","未指定圖片資料":"未指定圖片資料","Invalid acceptable_types: %1":"`acceptable_types` 無效：%1","必須先將URL編碼：%1":"必須先將URL編碼：%1","測試圖片是否完整：%1":"測試圖片是否完整：%1","無法處理類型為 %2 之圖片檔：%1":"無法處理類型為 %2 之圖片檔：%1","無法判別圖片檔之類型：%1":"無法判別圖片檔之類型：%1","出錯次數：%1":"出錯次數：%1","強制將非圖片檔儲存為圖片。":"強制將非圖片檔儲存為圖片。","強制將空內容儲存為圖片。":"強制將空內容儲存為圖片。","強制儲存損壞的圖片。":"強制儲存損壞的圖片。","HTTP status code %1.":"HTTP 狀態碼 %1。","Error: %1":"錯誤發生：%1","File size: %1.":"檔案大小 %1。","刪除損壞的舊圖片檔：%1":"刪除損壞的舊圖片檔：%1","壓縮檔內的圖片品質比目錄中的更好，但在下載完後將可能在壓縮時被覆蓋：%1":"壓縮檔內的圖片品質比目錄中的更好，但在下載完後將可能在壓縮時被覆蓋：%1","壓縮檔內的圖片品質比目錄中的更好：%1":"壓縮檔內的圖片品質比目錄中的更好：%1","保存圖片數據到硬碟上：%1":"保存圖片數據到硬碟上：%1","無法寫入圖片檔案 [%1]。":"無法寫入圖片檔案 [%1]。","可能因為作品下載目錄改變了，而快取資料指向不存在的舊位置。":"可能因為作品下載目錄改變了，而快取資料指向不存在的舊位置。","可能因為作品資訊快取與當前網站上之作品章節結構不同。":"可能因為作品資訊快取與當前網站上之作品章節結構不同。","若您之前曾經下載過本作品的話，請封存原有作品目錄，或將作品資訊快取檔（作品目錄下的 作品id.json）改名之後嘗試全新下載。":"若您之前曾經下載過本作品的話，請封存原有作品目錄，或將作品資訊快取檔（作品目錄下的 作品id.json）改名之後嘗試全新下載。","存在較大的舊檔 (%2)，將不覆蓋：%1":"存在較大的舊檔 (%2)，將不覆蓋：%1","圖檔損壞：":"圖檔損壞：","無法取得圖片。":"無法取得圖片。","圖片無內容：":"圖片無內容：","檔案過小，僅 %1 位元組：":"檔案過小，僅 %1 位元組：","檔案僅 %1 {{PLURAL:$1|位元組}}：":"檔案僅 %1 {{PLURAL:$1|位元組}}：","或許圖片是完整的，只是過小而未達標，例如幾乎為空白之圖片。":"或許圖片是完整的，只是過小而未達標，例如幾乎為空白之圖片。","work_crawler-skip-image-error-prompt":"您可設定 MIN_LENGTH，如 MIN_LENGTH=%1 表示允許最小為 %1 位元組的圖片；或者先設定 skip_error=true 來忽略圖片錯誤，待取得檔案後，自行更改檔名，去掉錯誤檔名後綴 %2 以跳過此錯誤。","下載所得的圖片大小不同：%1。":"下載所得的圖片大小不同：%1。","若非因網站提早截斷連線，那麼您或許需要增長時限來提供足夠的時間下載圖片？":"若非因網站提早截斷連線，那麼您或許需要增長時限來提供足夠的時間下載圖片？","若錯誤持續發生，您可以設定 skip_error=true 來忽略圖片錯誤。":"若錯誤持續發生，您可以設定 skip_error=true 來忽略圖片錯誤。","您必須設定 skip_error 或 allow_EOI_error 選項，才會儲存損壞的檔案。":"您必須設定 skip_error 或 allow_EOI_error 選項，才會儲存損壞的檔案。","若您需要重新下載之前下載失敗的章節，請開啟 recheck 選項。":"若您需要重新下載之前下載失敗的章節，請開啟 recheck 選項。","圖片下載錯誤":"圖片下載錯誤","等待 %2 之後再重新取得圖片：%1":"等待 %2 之後再重新取得圖片：%1","Invalid token pattern: {%1} %2":"無法採用此種分隔作品欄位之樣式：{%1} %2","嘗試取得被屏蔽的作品。":"嘗試取得被屏蔽的作品。","使用之前的快取，自 §%1 接續下載。":"使用之前的快取，自 §%1 接續下載。","無法解析《%1》§%2 之章節資料！":"無法解析《%1》§%2 之章節資料！","§%1 已被屏蔽，不再嘗試解析其他章節。":"§%1 已被屏蔽，不再嘗試解析其他章節。","已無閱讀卷可用。":"已無閱讀卷可用。","此後的作品標題都被當作是網頁限定作品。":"此後的作品標題都被當作是網頁限定作品。","本網站不支援封存舊作品功能 (.archive_old_works)！":"本網站不支援封存舊作品功能 (.archive_old_works)！","下次收到閱讀券還要 %1。":"下次收到閱讀券還要 %1。","將倒序章節列表轉為正序。":"將倒序章節列表轉為正序。","還有%1張閱讀卷，且第 %2/%3 章還有沒下載過，從此章開始檢查。":"還有%1張閱讀卷，且第 %2/%3 章還有沒下載過，從此章開始檢查。","已購買章節《%1》。":"已購買章節《%1》。","在 %1 之前（還有 %2）可以閱讀本章節《%3》。":"在 %1 之前（還有 %2）可以閱讀本章節《%3》。","之前已下載過章節《%1》，不再重新購買。":"之前已下載過章節《%1》，不再重新購買。","本章節狀況不明(%1)。跳過《%1》不採用閱讀卷。":"本章節狀況不明(%1)。跳過《%1》不採用閱讀卷。",'未設定讓本工具自動使用閱讀卷。若您並非使用安裝包，並想要讓本工具自動使用閱讀卷，請打開檔案總管，到安裝本工具的目錄下（若是您使用安裝包，就不能夠設定帳號密碼了。），在 work_crawler.configuration.js 這個檔案中設定好帳號密碼資料，以及 "auto_use_ticket:true"。您可以參考 work_crawler.default_configuration.js 這個檔案來做設定。':'未設定讓本工具自動使用閱讀卷。若您並非使用安裝包，並想要讓本工具自動使用閱讀卷，請打開檔案總管，到安裝本工具的目錄下（若是您使用安裝包，就不能夠設定帳號密碼了。），在 work_crawler.configuration.js 這個檔案中設定好帳號密碼資料，以及 "auto_use_ticket:true"。您可以參考 work_crawler.default_configuration.js 這個檔案來做設定。',"用閱讀券閱讀《%1》。":"用閱讀券閱讀《%1》。","網頁改版？無法解析！":"網頁改版？無法解析！","Invalid image url: %1":"圖片網址錯誤：%1","Login as [%1]":"登入為[%1]","已收到%1項有期限的物品。":"已收到%1項有期限的物品。","下載時發生錯誤，無法順利取得檔案內容！":"下載時發生錯誤，無法順利取得檔案內容！","Different url: %1 ≠ %2":"網址不同：%1 ≠ %2","或許是下載的檔案出現錯誤？您可嘗試過段時間再下載，或選用 .recheck 選項來忽略快取、重新下載每個圖片的頁面。":"或許是下載的檔案出現錯誤？您可嘗試過段時間再下載，或選用 .recheck 選項來忽略快取、重新下載每個圖片的頁面。","有些篇章之URL檔名非數字：%1":"有些篇章之URL檔名非數字：%1","本章節上一張圖片下載成功。下載本章節下一幅圖片。":"本章節上一張圖片下載成功。下載本章節下一幅圖片。","第一張圖就下載失敗了。結束下載本作品。":"第一張圖就下載失敗了。結束下載本作品。","無法解析章節資料並取得章節內容文字！":"無法解析章節資料並取得章節內容文字！","無法從章節內容中之連結抽取出圖片網址：%1":"無法從章節內容中之連結抽取出圖片網址：%1","從[%1]取得 %2 個圖片伺服器：%3":"從[%1]取得 %2 個圖片伺服器：%3","無法從[%1]抽取出圖片伺服器列表！":"無法從[%1]抽取出圖片伺服器列表！","%1: 沒有輸入 work_id！":"%1: 沒有輸入 work_id！","開始處理《%1》，儲存至 %2":"開始處理《%1》，儲存至 %2","Cannot create base directory: %1":"無法創建下載基層目錄：%1",'作品列表區塊注解 "*/" 後面的"%1"會被忽略':'作品列表區塊注解 "*/" 後面的"%1"會被忽略',"無法讀取列表檔案：%1":"無法讀取列表檔案：%1","重新整理列表檔案：%1":"重新整理列表檔案：%1","重新整理列表檔案 [%1]，處理了%2個作品。":"重新整理列表檔案 [%1]，處理了%2個作品。","重新整理列表檔案 [%1]，注解排除了%2個作品。":"重新整理列表檔案 [%1]，注解排除了%2個作品。","重新整理列表檔案 [%1]，未作改變。":"重新整理列表檔案 [%1]，未作改變。","您可能錯把下載工具檔當作了列表檔案：%1":"您可能錯把下載工具檔當作了列表檔案：%1","改採用列表檔案：%1":"改採用列表檔案：%1","作品 id 無效：%1":"作品 id 無效：%1","自作品列表中刪除將封存之作品：《%1》":"自作品列表中刪除將封存之作品：《%1》","已封存：":"已封存：","封存日期：%1，最後一次於 %2 下載":"封存日期：%1，最後一次於 %2 下載","封存舊作品：《%1》":"封存舊作品：《%1》",'警告：正下載以"%2"開始、長度 %1 的作品列表中。重複下載作品列表可能造成錯誤！':'警告：正下載以"%2"開始、長度 %1 的作品列表中。重複下載作品列表可能造成錯誤！',"Using convert_id[%1]":"使用解析器[%1]","Using convert_id[%1] via url: %2":"使用解析器[%1]，從 %2 解析出作品列表。","Invalid id converter for %1":"解析器無效：%1","Downloading %1: %2":"下載作品列表 %1：%2","共%1個作品下載完畢。":"共%1個作品下載完畢。","共%1個作品出現特殊狀況，記錄於[%2]。":"共%1個作品出現特殊狀況，記錄於[%2]。","準備取消下載作業中，將會在下載完本章節後生效。":"準備取消下載作業中，將會在下載完本章節後生效。","準備暫停下載作業中，將會在下載完本章節後生效。":"準備暫停下載作業中，將會在下載完本章節後生效。","繼續下載《%1》。":"繼續下載《%1》。","預估還需 %1 下載完本作品。":"預估還需 %1 下載完本作品。","work_data.author":"作者","work_data.chapter_count":"章節數量","work_data.chapter_list":"章節列表","work_data.description":"作品簡介","work_data.directory":"儲存目錄","work_data.id":"作品 id","work_data.last_download.chapter":"下載章節","work_data.last_download.date":"下載日期","work_data.last_update":"更新日期","work_data.status":"狀態","work_data.title":"作品標題","work_data.url":"作品網址","work_status-finished":"已完成","work_status-limited":"有限制","work_status-not found":"未找到","Work information":"作品資訊","work_data.chapter_NO":"章節編號","work_data.chapter_title":"章節標題",'您可指定 "start_chapter_NO=章節編號數字" 或 "start_chapter_title=章節標題" 來選擇要開始下載的章節。':'您可指定 "start_chapter_NO=章節編號數字" 或 "start_chapter_title=章節標題" 來選擇要開始下載的章節。','或指定 "chapter_filter=章節標題" 僅下載某個章節。':'或指定 "chapter_filter=章節標題" 僅下載某個章節。',"無法儲存作品《%1》之資訊至檔案！":"無法儲存作品《%1》之資訊至檔案！","創建並使用作品網址 RegExp：%1":"創建並使用作品網址 RegExp：%1","自作品網址提取出 work id：%1":"自作品網址提取出 work id：%1","無法自作品網址提取出 work id！作品資訊：%1":"無法自作品網址提取出 work id！作品資訊：%1","找到%1個作品：%2":"找到%1個作品：%2","crawler.extract_work_id() 不應回傳 true！請修改工具檔程式碼！":"crawler.extract_work_id() 不應回傳 true！請修改工具檔程式碼！","Cache file of previous search for works: %1":"記錄先前搜尋作品所獲得結果的快取檔案：%1","重新搜尋作品《%1》":"重新搜尋作品《%1》","已快取作品 id，不再重新搜尋：%1":"已快取作品 id，不再重新搜尋：%1","本網路作品網站 %1 的模組未提供搜尋功能。":"本網路作品網站 %1 的模組未提供搜尋功能。","請先輸入作品 id，下載過一次後工具會自動記錄作品標題與 id 的轉換。":"請先輸入作品 id，下載過一次後工具會自動記錄作品標題與 id 的轉換。","亦可手動設定，編輯《%1》之 id 於 %2":"亦可手動設定，編輯《%1》之 id 於 %2","沒有《%1》的搜索結果（網站暫時不可用或改版？）":"沒有《%1》的搜索結果（網站暫時不可用或改版？）","沒有搜索結果。網站暫時不可用或改版？":"沒有搜索結果。網站暫時不可用或改版？","作品網址解析函數 parse_search_result 未回傳結果！":"作品網址解析函數 parse_search_result 未回傳結果！","作品網址解析函數 parse_search_result 未回傳正規結果！":"作品網址解析函數 parse_search_result 未回傳正規結果！","無法解析搜尋作品《%1》之結果！":"無法解析搜尋作品《%1》之結果！","無法解析搜尋作品之結果！":"無法解析搜尋作品之結果！","搜尋《%1》找到 %2個{{PLURAL:%2|作品}}：%3":"搜尋《%1》找到 %2個{{PLURAL:%2|作品}}：%3","未搜尋到與《%1》相符者。":"未搜尋到與《%1》相符者。","找到%2個與《%1》相符者。":"找到%2個與《%1》相符者。","若您輸入的是 work id，請回報議題讓下載工具設定 extract_work_id()，以免將 work id 誤判為 work title。":"若您輸入的是 work id，請回報議題讓下載工具設定 extract_work_id()，以免將 work id 誤判為 work title。","Using title:":"採用標題：","下載%1 - 資訊 @ %2":"下載%1 - 資訊 @ %2","等待 %2 之後取得作品資訊頁面：%1":"等待 %2 之後取得作品資訊頁面：%1","無法取得 %1 的作品資訊：%2":"無法取得 %1 的作品資訊：%2","取得空的內容":"取得空的內容","等待 %2 之後再重新取得作品資訊頁面：%1":"等待 %2 之後再重新取得作品資訊頁面：%1","重新取得作品資訊頁面：%1":"重新取得作品資訊頁面：%1","《%1》（id：%2）非中日韓文作品標題。":"《%1》（id：%2）非中日韓文作品標題。","無法取得或未設定作品標題《%1》（id：%2）。":"無法取得或未設定作品標題《%1》（id：%2）。","下載%1 - 目次 @ %2":"下載%1 - 目次 @ %2","自訂作品目錄名稱模式 %1 令不同作品產生相同名稱，改採預設作品目錄模式！":"自訂作品目錄名稱模式 %1 令不同作品產生相同名稱，改採預設作品目錄模式！","刪除已存在的作品資料快取：%1":"刪除已存在的作品資料快取：%1","新資料→":"新資料→","Cannot get chapter list page!":"無法取得章節列表頁面！","Create work_data.directory: %1":"創建作品目錄：%1","last saved date":"最後儲存日期","last updated date":"作品最後更新日期","《%2》：執行 %1 時發生嚴重錯誤，異常中斷。":"《%2》：執行 %1 時發生嚴重錯誤，異常中斷。","自章節資料→":"自章節資料→","輸入 §%1 的網址，僅下載此一章節。":"輸入 §%1 的網址，僅下載此一章節。","作品不存在或已被刪除。":"作品不存在或已被刪除。","Cannot get chapter count!":"無法取得章節數量！","或許作品已被刪除或屏蔽？":"或許作品已被刪除或屏蔽？","或許作品已被刪除或屏蔽，或者網站改版了？":"或許作品已被刪除或屏蔽，或者網站改版了？","Remove chapter list page: %1":"刪除已存在的章節列表頁面：%1","手動指定了不下載任何章節！":"手動指定了不下載任何章節！","僅下載章節編號：%1":"僅下載章節編號：%1","已設定 .recheck 選項，且之前曾下載過本作品，作品目錄有內容。":"已設定 .recheck 選項，且之前曾下載過本作品，作品目錄有內容。","既已設定 .recheck 選項，則將 .reget_chapter 選項設定為 %1 將無作用！":"既已設定 .recheck 選項，則將 .reget_chapter 選項設定為 %1 將無作用！","將自動把 .reget_chapter 轉為 true，明確指定 reget_chapter 以重新取得章節內容。":"將自動把 .reget_chapter 轉為 true，明確指定 reget_chapter 以重新取得章節內容。","作品變更過，且符合需要更新的條件。":"作品變更過，且符合需要更新的條件。","因章節數量有變化，將重新下載並檢查所有章節內容：":"因章節數量有變化，將重新下載並檢查所有章節內容：","章節數量無變化，共 %1 %2；":"章節數量無變化，共 %1 %2；","章節數量變化過小（僅差 %1 %2），因此不重新下載；":"章節數量變化過小（僅差 %1 %2），因此不重新下載；","但已設定下載所有章節內容。":"但已設定下載所有章節內容。","僅利用快取重建資料（如小說、電子書），不重新下載所有章節內容。":"僅利用快取重建資料（如小說、電子書），不重新下載所有章節內容。","跳過本作品不處理。":"跳過本作品不處理。","之前已下載到較新的第 %2 %3，因指定 start_chapter_title=%1 而回溯。":"之前已下載到較新的第 %2 %3，因指定 start_chapter_title=%1 而回溯。","之前已下載到較新的第 %2 %3，因指定 start_chapter_NO=%1 而回溯。":"之前已下載到較新的第 %2 %3，因指定 start_chapter_NO=%1 而回溯。","章節數量 %1 比將開始/接續之下載章節編號 %2 還少，或許因為章節有經過重整，或者上次下載時中途增刪過章節。":"章節數量 %1 比將開始/接續之下載章節編號 %2 還少，或許因為章節有經過重整，或者上次下載時中途增刪過章節。","將先備份舊內容、移動目錄，而後重新自第 %1 %2下載！":"將先備份舊內容、移動目錄，而後重新自第 %1 %2下載！","將從頭檢查、自第 %1 %2重新下載。":"將從頭檢查、自第 %1 %2重新下載。","將從頭檢查、自第 %1 %2重新生成電子書。":"將從頭檢查、自第 %1 %2重新生成電子書。","跳過 %1 不處理。":"跳過 %1 不處理。",Unknown:"未知","自 §%1 接續下載。":"自 §%1 接續下載。",'以點 "." 作為結尾的目錄名稱，將導致沒有辦法刪除或者複製：%1':'以點 "." 作為結尾的目錄名稱，將導致沒有辦法刪除或者複製：%1',"創建目錄 [%1] 失敗：%2":"創建目錄 [%1] 失敗：%2","Recursively removing subdirectories of %1":"遞歸刪除 %1 的子目錄","Removing directory: %1":"刪除目錄：%1","Removing file: %1":"正在刪除檔案：%1","Cannot save data to file [%1]!":"無法將數據保存到檔案 [%1]！","Move %1 to %2 failed: %3":"將 %1 移動到 %2 失敗：%3","不存在檔案或目錄：%1":"不存在檔案或目錄：%1","處理完畢：%1":"處理完畢：%1","Invalid command-line argument: [%1]":"無效的命令行參數：[%1]","JScript 檔案只能在 Windows 環境下執行！":"JScript 檔案只能在 Windows 環境下執行！","本函式庫尚不支援多 rootfile (.opf)！":"本函式庫尚不支援多 rootfile (.opf)！","Invalid id prefix: %1":"id 前綴無效：%1","未設定電子書章節目錄，將把所有章節內容直接放在電子書根目錄底下！":"未設定電子書章節目錄，將把所有章節內容直接放在電子書根目錄底下！","重建 index_of_id……":"重建 index_of_id……","<spine> 中包含了重複的 id，將跳過之：%1":"<spine> 中包含了重複的 id，將跳過之：%1","Duplicate element: %1":"有重複的元素：%1","Invalid metadata value: %1":"無效的 metadata 值：%1","已經存在相同 id 之資源，後面的資源將直接消失！":"已經存在相同 id 之資源，後面的資源將直接消失！","已經存在相同 id 之章節，後面的章節將直接消失！":"已經存在相同 id 之章節，後面的章節將直接消失！","無法編碼無效的 id：%1":"無法編碼無效的 id：%1","無法解碼：[%1]":"無法解碼：[%1]","無法判別檔案 [%1] 的類型。":"無法判別檔案 [%1] 的類型。","項目資訊無效：%1":"項目資訊無效：%1","先前已經存在相同 id 之章節，將更改後者之 id。":"先前已經存在相同 id 之章節，將更改後者之 id。","未設定 media-type，或 media-type 無效：%1":"未設定 media-type，或 media-type 無效：%1","正規化 XHTML 書籍章節內容：%1":"正規化 XHTML 書籍章節內容：%1","正規化後之章節內容：%1":"正規化後之章節內容：%1","設定多個檔案為相同的內容：%1":"設定多個檔案為相同的內容：%1","已經有相同的資源檔 [%1] %2。":"已經有相同的資源檔 [%1] %2。","但 .href 不同，您必須手動修正：%1":"但 .href 不同，您必須手動修正：%1","檔案已在下載隊列中，跳過重複下載動作：%1":"檔案已在下載隊列中，跳過重複下載動作：%1","下載隊列中存在相同檔名，卻有著不同網址的資源：下載隊列中 URL [%1] ≠ 準備下載之 URL [%2]，嘗試改成另一個檔案名稱。":"下載隊列中存在相同檔名，卻有著不同網址的資源：下載隊列中 URL [%1] ≠ 準備下載之 URL [%2]，嘗試改成另一個檔案名稱。","儲存檔名改變，您需要自行修正原參照檔案中之檔名：":"儲存檔名改變，您需要自行修正原參照檔案中之檔名：","id 改變，您需要自行修正原參照檔案中之檔名：":"id 改變，您需要自行修正原參照檔案中之檔名：","已取得之資源，其內容之媒體類型為 [%1]，與從副檔名所得到的媒體類型 [%2] 不同！":"已取得之資源，其內容之媒體類型為 [%1]，與從副檔名所得到的媒體類型 [%2] 不同！","無法判別已取得資源之媒體類型：%1":"無法判別已取得資源之媒體類型：%1","所取得之資源，類型為[%1]，並非圖像檔：%2":"所取得之資源，類型為[%1]，並非圖像檔：%2","已取得資源：[%1] %2":"已取得資源：[%1] %2","檔案並未在下載隊列中：%1":"檔案並未在下載隊列中：%1","資源仍在下載中：":"資源仍在下載中：","所有資源下載完畢。開始執行後續 %1 個已登記之{{PLURAL:%1|作業}}。":"所有資源下載完畢。開始執行後續 %1 個已登記之{{PLURAL:%1|作業}}。","已經有相同的篇章或資源檔，將不覆寫：%1":"已經有相同的篇章或資源檔，將不覆寫：%1","跳過資料 URI scheme：%1":"跳過資料 URI scheme：%1","檔案路徑：%1":"檔案路徑：%1","跳過網頁資源：%1":"跳過網頁資源：%1","未設定標題：%1……":"未設定標題：%1……","Content Length: %1 {{PLURAL:%1|character|characters}}":"內容共長 %1 {{PLURAL:%1|字元}}","No content received: %1":"未取得任何內容：%1","%1 {{PLURAL:%1|word|words}}":"%1{{PLURAL:%1|字}}","因為欲設定的內容長度過短或者無內容，將從快取檔案中取得舊的內容（%1 個{{PLURAL:%1|字元}}）：":"因為欲設定的內容長度過短或者無內容，將從快取檔案中取得舊的內容（%1 個{{PLURAL:%1|字元}}）：","Writing %1 {{PLURAL:%1|character|characters}} to [%2]...":"正在寫入 %1 {{PLURAL:%1|字元}}至檔案 [%2]……","僅設定項目資料索引，未自動寫入檔案 [%1]，您需要自己完成這動作。":"僅設定項目資料索引，未自動寫入檔案 [%1]，您需要自己完成這動作。","跳過長度過短的內容（%1 個{{PLURAL:%1|字元}}）：":"跳過長度過短的內容（%1 個{{PLURAL:%1|字元}}）：","跳過無內容/空章節：":"跳過無內容/空章節：","too short":"內容長度過短","若是已存在此章節則先移除：%1":"若是已存在此章節則先移除：%1","Using language: %1":"使用語言：%1","TOC.calibre:series":"叢書","TOC.creator":"作者","TOC.date":"日期","TOC.dcterms:modified":"作品最後編輯時間","TOC.description":"簡介","TOC.identifier":"識別符","TOC.language":"語言","TOC.publisher":"發布者","TOC.source":"來源","TOC.subject":"標籤","TOC.title":"標題","word count":"字數","%1 {{PLURAL:%1|chapter|chapters}}":"%1{{PLURAL:%1|章}}","Waiting for all resources loaded...":"等待所有資源載入中……","開始寫入電子書資料……":"開始寫入電子書資料……","丟失資源項目 %1":"丟失資源項目 %1",'所欲封入注釋的詮釋資料本身含有 "%2D%2D" 或 "%2D-" 之類文字，將造成解碼時出現錯誤！':'所欲封入注釋的詮釋資料本身含有 "%2D%2D" 或 "%2D-" 之類文字，將造成解碼時出現錯誤！',"開始建構電子書……":"開始建構電子書……","移除空目錄：%1":"移除空目錄：%1","以 7zip 創建電子書：%1……":"以 7zip 創建電子書：%1……","檔案列表過長，改成壓縮整個目錄。":"檔案列表過長，改成壓縮整個目錄。","電子書創建完畢：%1":"電子書創建完畢：%1","Unknown type: %1, please install %2":"無法處理壓縮類型 %1，請安裝程式 %2","Working directory: %1":"當前操作目錄：%1","Callback execution error!":"回呼函式執行出錯！","%1 execution error!":"%1 執行出錯！","Duplicate FSO path: %1":"檔案或目錄路徑衝突：%1","%1 未提供這種功能：%2":"%1 未提供這種功能：%2","在壓縮檔所在目錄下操作 %1。":"在壓縮檔所在目錄下操作 %1。","Changing working directory: [%1]→[%2]":"改變操作目錄：[%1]→[%2]","Invalid set of number ranges: %1":"無效的數字範圍集合：%1","Invalid number range: %1":"無效的數字範圍：%1","年號":"年號","註":"註","五行":"五行","紀年":"紀年","跳過 [%1]：本[%2]僅供參照用。":"跳過[%1]：此[%2]僅供參照用。","無年號或帝王紀年名稱作 [%1]！":"無年號或帝王紀年名稱作 [%1]！","琉球":"琉球","日本":"日本","한국":"韓國","Bắc thuộc":"北屬時期","Thời kỳ độc lập":"獨立時期","ไทย":"泰國","ราชวงศ์พระร่วง":"帕鑾王朝","อาณาจักรสุโขทัย":"素可泰王國","อาณาจักรอยุธยา":"大城王國","สมเด็จพระเจ้ากรุงธนบุรี":"鄭信","ราชวงศ์ธนบุรี":"吞武里王朝","อาณาจักรธนบุรี":"吞武里王國","ราชวงศ์จักรี":"卻克里王朝","อาณาจักรรัตนโกสินทร์":"拉達那哥欣王國",Pagan:"蒲甘",Toungoo:"東吁","ကုန်းဘောင်ခေတ်":"貢榜","မြန်မာပြည်":"緬甸聯邦共和國",India:"印度",Mesopotamian:"美索不達米亞文明","Neo-Assyrian":"新亞述",Babylon:"巴比倫","Babylonian Dynasty of E":"巴比倫第九王朝","Babylonian calendar":"巴比倫尼亞曆","Neo-Babylonian":"新巴比倫",Persia:"波斯","Μακεδονία":"馬其頓","Σελευκιδών":"塞琉古","Ἀθῆναι":"古雅典","Σπάρτη":"斯巴達",Hittite:"西臺",British:"英國",Maya:"瑪雅",Palenque:"帕倫克","Search style name [%1] in `SGR_code.style_name_alias`...":"在 `SGR_code.style_name_alias` 中搜尋樣式名稱 [%1]……","Unknown style name: [%1].":"未知樣式名稱：[%1]。","Invalid name of color: [%1].":"顏色名稱無效：[%1]。","Invalid value [%1] of style: [%2]:":"樣式的值[%1]無效：[%2]：","無法將真偽值轉為樣式。":"無法將真偽值轉為樣式。","欲設定的樣式值並非數字。":"欲設定的樣式值並非數字。","樣式值不在可設定的樣式資料[%1]中。":"樣式值不在可設定的樣式資料[%1]中。","Searching style {%2} [%1] in SGR_code.style_value_alias...":"在 SGR_code.style_value_alias 中搜尋樣式 {%2} [%1]……","Find style [%1] normalized to → [%2]":"找到樣式 [%1] 標準化為→[%2]","Parse {%2} [%1] if it is a primitive value.":"解析簡單型態的樣式值：{%2} [%1]",'Test if [%1] is "[+-] style name".':"測試[%1]是否為“[+-]樣式名稱”。","Invalid configuration of style: [%1].":"樣式配置無效：[%1]。",'Set style "%1" = %2.':'設置樣式 "%1" = %2。','Test if [%1] is "style name = style value (0, 1, false, true, ...)".':"測試[%1]是否為“style name = style value （0,1，false，true，……）”。","Parse {%2} [%1] if it is a object.":"解析物件型態的樣式值：{%2} [%1]","Reset style {%2} [%1].":"重置樣式{%2} [%1]。","Unknown style: [%1].":"未知樣式：[%1]。","Illegal %1: [%2]":"有問題（無效或不合理）的%1：[%2]","%1轉換對":"%1轉換對","強制使用 LTP server，跳過對 LTP server 的運作測試。請只在您準備全程使用 cache 的情況下才使用這個選項。":"強制使用 LTP server，跳過對 LTP server 的運作測試。請只在您準備全程使用 cache 的情況下才使用這個選項。","生成 %1 的解答檔":"生成 %1 的解答檔","跳過已載入的檔案：%1":"跳過已載入的檔案：%1","多次匹配的計數：":"多次匹配的計數：","有多個轉換標的：%1":"有多個轉換標的：%1","未設定任何同義詞：%1":"未設定任何同義詞：%1","未設定文字：%1":"未設定文字：%1","這條規則似乎沒有必要":"這條規則似乎沒有必要","Cannot move to %1":"無法移到%1","Close %1 {{PLURAL:%1|request|requests}}: %2":"關閉 %1 {{PLURAL:%1|請求}}：%2","Treat %1 as language: %2.":"將 %1 視為語言：%2。","Cannot detect language of %1!":"無法識別 %1 的語言！","Get parameter %1=%2 from command line":"從命令列獲得參數 %1=%2","Change section title:":"更改章節標題：","Get %1 from edit summary: %2":"從編輯摘要中取得%1: %2","revision id":"版本標識符","Get %2 edit {{PLURAL:%2|summary|summaries}} of %1":"取得%1的%2個編輯摘要","Get %2 {{PLURAL:%2|revision|revisions}} of %1":"取得%1的%2個版本","No section title set!":"未設置章節標題！","Unable to extract the revision difference id from page edit summary of %1!":"無法從%1的頁面編輯摘要中提取版本差異id!","Duplicate task name %1! Will overwrite old task with new task: %2→%3":"任務名稱重複%1！將以新的覆蓋舊的：%2→%3","Get %1 {{PLURAL:%1|task|tasks}} from %2.":"從%2取得%1項任務","Already reminded that the operation is in progress: %1":"已提醒正在作業中：%1","Add warning messages.":"添加警告訊息。","No title found for %1.":"未發現標題 %1。","Will not automatically notify the task begins!":"不會自動提醒任務開始！","The requested robot task finished.":"請求的機器人任務已完成。","{{Done}} Please check the results and let me know if there is something wrong, thank you.":"{{BOTREQ|done}}: 請協助檢查錯誤，並不吝提供些意見，謝謝。","Already notified that the task is finished: %1":"已提醒任務完成：%1","Will not automatically notify the task finished!":"不會自動提醒任務結束！","Automatically replace the display text of links: %1→%2":"自動替換連結顯示文字：%1→%2","Get list of %1 from %2.":"從 %2 取得%1的列表。","List types: %1.":"列表種類：%1。","Namespaces: %1.":"命名空間：%1。","Get %1 {{PLURAL:%1|page|pages}} from %2":"從%2取得%1個{{PLURAL:%1|頁面}}","Normalize {{%1}}":"規範{{%1}}模板","maintenance template list":"維護模板名稱列表","maintenance template list to be excluded":"須排除之維護模板名稱列表","Categories added to the report":"報表添加維護分類","Merge %1 {{PLURAL:%1|template|templates}} into {{%2}}":"將%1個維護{{PLURAL:%1|模板}}納入{{%2}}模板","Create {{%2}} with %1 maintenance {{PLURAL:%1|template|templates}}":"創建包含%1個維護模板的{{%2}}{{PLURAL:%1|模板}}","Remove {{%2}} for only %1 maintenance {{PLURAL:%1|template|templates}}":"拆分僅有%1個維護模板的{{%2}} {{PLURAL:%1|模板}}","Total %1 {{PLURAL:%1|article|articles}}.":"共%1篇{{PLURAL:%1|條目}}。","number-of-templates":"模板數","Articles containing maintenance templates":"含有維護模板之條目","The articles containing too many maintenance templates are listed below:":"以下列出含有太多維護模板之條目：","The report will be updated weekly by the robot.":"本報告會每周更新，毋須手動修正。","You can change the configuration from %1.":"您可以從%1更改設定參數。","the configuration page":"這個設定頁面","Generate date: %1":"產生時間：%1","Problematic articles":"有問題的條目","Too many entries with maintenance templates in the record: %1 {{PLURAL:%1|entrie|entries}}":"紀錄含有太多維護模板之條目：%1{{PLURAL:%1|條}}","Minimum number of templates to report: %1":"列入報表的最低模板數：%1","Here is a list of interlanguage links that need to be manually corrected. This list will be updated automatically by the robot.":"這裡列出了需人工修正的跨語言連結。本列表將由機器人自動更新。","edit-mark":"編","... A total of %1 {{PLURAL:%1|occurrence|occurrences}}.":"共發生了%1次","Report generation date: %1":"報告生成時間：%1","Cleanup report for interlanguage link templates":"跨語言連結清理報告","Convert %1 to wikilink":"清理跨語言連結%1成為內部連結:編輯摘要的red link經繁簡轉換後存在",'Preserve interlanguage links because of the "preserve" parameter is set.':"指定了強制顯示參數，不做修改。","The task does not process talk pages":"本任務不處理對話頁","The local link target links back to the page itself. [[MOS:CIRCULAR]]?":"所對應的中文條目重定向到了頁面本身。[[WP:CIRCULAR]]或可擴充重定向？","The local page is too new. Will try again next time.":"中文條目過新，將過幾天再測試。","外語條目沒有相對應的中文條目，或應對應的中文條目並沒有連結到正確的Wikidata項目。":"外語條目沒有相對應的中文條目，或應對應的中文條目並沒有連結到正確的Wikidata項目。","跨語言模板的本地標題與外語標題相同":"跨語言模板的本地標題與外語標題相同","Local page title contains the local title in the interlanguage template":"本地頁面標題包含跨語言模板中的本地標題","From the parameter of template":"從模板參數","From foreign language title":"從外語頁面對應的中文條目","The local title is different from the one given by the template parameters.":"所對應的中文條目標題與模板參數所列出的不相符。","The corresponding foreign language page does not exist.":"所對應的外語條目不存在。","The corresponding foreign language page is a disambiguation page.":"所對應的外語頁面為消歧義頁。","The corresponding foreign language page is redirected to a section.":"所對應的外語頁面重定向到了條目章節。","Syntax error in the interlanguage link template.":"跨語言連結模板的語法錯誤。","Could not retrieve the foreign page. I will retry next time.":"無法取得所對應的外語條目。將於下次執行時再做嘗試。","No registered interwiki link templates were found.":"未發現已登記之跨語言連結模板。","也許有尚未登記的跨語言連結模板，或是被嵌入的檔案/模板中存有已存在本地條目之跨語言連結模板（通常位於頁面最後一節）？":"也許有尚未登記的跨語言連結模板，或是被嵌入的檔案/模板中存有已存在本地條目之跨語言連結模板（通常位於頁面最後一節）？","Only inserted or modified templates / section titles / non-specific-meaning-text":"這一段編輯只添加、修改了模板、章節標題、格式排版或者沒有具體意義的文字","Pre-existing text":"此筆編輯之前就已經有這一段文字","Only inserted punctuation / symbols":"此筆編輯僅僅添加了符號","Skip the edit for including [[WP:TRANS|transclusion]] <code>&lt;%1&gt;</code>":"這段修改中有[[WP:TRANS|嵌入包含]]宣告<code>&lt;%1&gt;</code>，因此跳過不處理","Maybe user %1 edit text signed by %2, or %1 help correcting the text":"%1 可能編輯了 %2 署名的文字（也可能是用戶 %1代簽名、幫忙修正錯誤格式、特意提及、搬移條目討論，或是還原/撤銷編輯）","It seems the user %1 did not signed with link.":"用戶 %1 似乎未以連結的形式加上簽名。例如只寫了用戶名或日期（請注意，只寫日期也會被跳過不補簽名），但是沒有加連結的情況。也有可能把<code>~~<nowiki />~~</code>輸入成<code><nowiki>~~~~~</nowiki></code>了","The user may have appended date and signature, but it is not clear. Still '''need to append signature for %1 %2'''":"編輯者或許已經加上日期與簽名，但是並不明確。仍然'''需要在最後補上%1 %2 的簽名'''","'''Need to append signature for %1 %2'''":"'''需要在最後補上%1 %2 的簽名'''","IP user":"IP用戶",user:"用戶","(%1 {{PLURAL:%1|character|characters}} modified)":"（本段修改共 %1 {{PLURAL:%1|字元}}）","(new page)":"（新頁面）","Pages that are not linked to the signature, such as %1. Thank you for your participation.":"簽名沒有連結的頁面例如 %1。謝謝您參與討論。","Hi, maybe you can change the format of your signature":"您好，可能需要麻煩改變一下您的留言簽名格式","[[%1|Remind you to add a link when signing]], such as the %2 {{PLURAL:%2|page|pages}} listed in the notification.":"[[%1|提醒簽名時要加上連結]]，例如在文中所列的 %2 個{{PLURAL:%2|頁面}}。","If you have updated your past messages, please add a signature at the end.":"若是您更新了過去的留言，也請您在最後加上個簽名的連結。","[[%3|Signing]] [[Special:Diff/%1|comment by %2]].":"為[[Special:Diff/%1|%2的編輯]][[%3|補簽名]]。","This tool is only for recording.":"本工具僅為紀錄用。","You may re-edit the text whatever you want.":'若您只是暫存，請在編輯註解加上"暫存"字樣即可避免補簽名。若您希望自行手動補簽名，請逕行修改即可。',"Pages that may require a signature, such as %1. Thank you for your participation.":"可能需要簽名的頁面例如 %1。謝謝您的參與。","Please remember to sign when you leave messages":"請記得在留言時署名","[[%1|Remind to sign]], such as the %2 pages listed in the notification.":"[[%1|提醒記得簽名]]，例如在文中所列的 %2 個頁面。","Generate topic list: %1 {{PLURAL:%1|topic|topics}}":"生成議題列表：%1個{{PLURAL:%1|議題}}","修正失效的網頁錨點":"修正失效的網頁錨點","提醒移除%1個失效網頁{{PLURAL:%1|錨點}}":"提醒移除%1個失效網頁{{PLURAL:%1|錨點}}","網頁錨點 %1 連結到專屬頁面：%2。":"網頁錨點 %1 連結到專屬頁面：%2。","此網頁錨點（%2）之前[[Special:Diff/%1|曾被其他用戶刪除過]]。":"此網頁錨點（%2）之前[[Special:Diff/%1|曾被其他用戶刪除過]]。","提醒失效的網頁錨點":"提醒失效的網頁錨點","更新指向存檔的連結%1：%2":"更新指向存檔的連結%1：%2","大小寫或空白相異的網頁錨點":"大小寫或空白相異的網頁錨點","繁簡不符匹配而失效的網頁錨點":"繁簡不符匹配而失效的網頁錨點","差異極大":"差異極大","請幫忙檢核此次編輯。":"請幫忙檢核此次編輯。","%1→當前最近似的網頁錨點%2":"%1→當前最近似的網頁錨點%2","Archiving operation":"歸檔封存作業","Append %1 {{PLURAL:%1|topic|topics}}":"添加 %1 {{PLURAL:%1|議題}}","Remove %1 {{PLURAL:%1|topic|topics}}":"移除 %1 {{PLURAL:%1|議題}}","更新%1":"更新%1","%1版條目":"%1版條目","語言數":"語言數","平均":"平均","合計":"合計","條目一覽":"條目一覽","See also":"相關項目","無標籤":"無標籤","Synchronizing common pages":"同步通用頁面","Synchronizing %1":"同步 %1","Create a redirect with the same name as the original wiki project page: %1":"添加與原維基項目頁面同名的重定向：%1","%1 dependent on module → %2":"%1 依賴於 module → %2","%1 dependent on → %2":"%1 依賴於 → %2","%1 does not start with %2":"%1 並非以 %2 為開頭","The latest version was edited in %1, too close to time, later than %2, skip this page.":"最新版本於%1編輯，時間過近，晚於%2，跳過此頁面。","This page does not exist, skip this page.":"不存在此頁面，跳過此頁面。","The page %1 of the source wiki project redirects to %2, but the same page of the target wiki project redirects to %3, they are different! Skip this page.":"來源維基項目 %1 重定向至→ %2，但目標維基項目重定向至→ %3，兩者不同！跳過此頁面。","This page is copied from %1 and updated regularly by the robot. Please edit the original wiki project page directly, or edit this page after removing it from %2 of the custom page.":"本頁面複製自%1，由機器人定期更新。請直接編輯原維基項目頁面，或自設定頁面%2去除本頁面之後再編輯。","Template documentation to assist in understanding":"輔助理解用的模板說明文件","Required template style file":"必要的模板樣式文件","Overwrite target page %1":"覆蓋目標頁面 %1","Revision id %1":"版本%1","Fine-tuned":"經過微調","Required by %1":"受 %1 所需","Adding sitelinks when synchronizing common pages: %1 → %2":"同步通用頁面時添加危機連結：%1 → %2","Very Sorry. Undo the robot's wrong edits. (%1)":"很抱歉。撤消機器人的錯誤編輯。（%1）","debug level":"偵錯層級","%2: The target directory [%1] does not exist?":"%2：不存在標的目錄 [%1]？","%3: %1: %2 {{PLURAL:%2|file|files}} / {{PLURAL:%2|directory|directories}} to check.":"%3: %1: %2 個{{PLURAL:%2|檔案}}或{{PLURAL:%2|目錄}}。","Create directory of sub-catalog [%1]:":"創建子分類 %1 的目錄：","Invalid catalog: %1":"子分類無效：%1","因為最大的檔案有 %1 {{PLURAL:%1|位元組}}，因此跳過這個%2的目錄：%3":"因為最大的檔案有 %1 {{PLURAL:%1|位元組}}，因此跳過這個%2的目錄：%3","Cannot read file / directory: %1":"無法讀取檔案或目錄：%1","為可執行檔或函式庫":"為可執行檔或函式庫","Cannot read directory: %1":"無法讀取目錄：%1","Empty directory: %1":"空目錄：%1","含有 %1/%2 個可執行檔或函式庫":"含有 %1/%2 個可執行檔或函式庫","含有 %1/%2 張{{PLURAL:%1|圖片}}":"含有 %1/%2 張{{PLURAL:%1|圖片}}","次目錄中含有可執行檔或函式庫":"次目錄中含有可執行檔或函式庫","需要手動檢查的目錄：%1":"需要手動檢查的目錄：%1","Move %1:":"搬移 %1：","Remove empty directory: %1":"刪除空目錄：%1","Directory of sub-catalog [%1] created: %2":"已創建子分類 %1 的目錄：%2","%2: %1 {{PLURAL:%1|directory|directories}} to compress.":"%2: 壓縮%1個目錄。","因為未設定要壓縮 (do_compress)，有 %1 個檔案或目錄沒有壓縮。":"因為未設定要壓縮 (do_compress)，有 %1 個檔案或目錄沒有壓縮。","%1/%2 compressing":"%1/%2 壓縮中","Compress %1:":"壓縮 %1：","Target exists: %1":"已存在壓縮標的：%1","§%1《%2》之後必須等到 %3 才能閱讀。跳過餘下的章節。":"§%1《%2》之後必須等到 %3 才能閱讀。跳過餘下的章節。","《%1》為會員專屬作品，必須充值後才能閱讀！":"《%1》為會員專屬作品，必須充值後才能閱讀！","搜尋結果":"搜尋結果","下載選項":"下載選項","最愛作品清單":"最愛作品清單","開啟偵錯工具":"開啟偵錯工具","開啓下載目錄":"開啓下載目錄","搜尋":"搜尋","搜尋各網站並下載作品。":"搜尋各網站並下載作品。","作品名稱或🆔":"作品名稱或🆔","開始下載":"開始下載","網路作品網站":"網路作品網站","下載中的作品":"下載中的作品","不限制訊息行數":"不限制訊息行數","CeJS 網路小說漫畫下載工具":"CeJS 網路小說漫畫下載工具","貼上":"貼上","開始檢測並更新安裝包……":"開始檢測並更新安裝包……","所執行的並非安裝包版本，因此不執行安裝包版本的升級檢查。":"所執行的並非安裝包版本，因此不執行安裝包版本的升級檢查。","開始檢測安裝包更新……":"開始檢測安裝包更新……","有新版安裝包：%1":"有新版安裝包：%1","開始下載安裝包。若還沒下載完就離開程式、出錯，下次會從頭下載。您可升高訊息欄的偵錯等級，以得知下載進度。":"開始下載安裝包。若還沒下載完就離開程式、出錯，下次會從頭下載。您可升高訊息欄的偵錯等級，以得知下載進度。","沒有新安裝包。當前版本：%1":"沒有新安裝包。當前版本：%1","安裝包更新出錯：%1":"安裝包更新出錯：%1","安裝包已下載 %1，下載速度 %2 bytes/s。":"安裝包已下載 %1，下載速度 %2 bytes/s。","安裝包已下載 %1，預估還需 %2 分鐘下載完畢。":"安裝包已下載 %1，預估還需 %2 分鐘下載完畢。","新版安裝包下載完成：%1":"新版安裝包下載完成：%1","重新啟動程式即可更新。":"重新啟動程式即可更新。","安裝包更新失敗：%1":"安裝包更新失敗：%1","繁體字漫畫":"繁體字漫畫","中国内地漫画":"中國內地漫畫","日本語のウェブコミック":"日語網路漫畫","English webcomics":"英語網路漫畫","中国内地小说":"中國內地小說","日本語のオンライン小説":"日語網路小說","不再維護":"不再維護","download_options.chapter_NO_range":'下載此章節編號範圍。例如 "20-30,50-60"。',"download_options.directory_name_pattern":"自訂作品目錄名稱模式。預設：'${id_title}${directory_name_extension}'。'${title}' 將只以作品標題為作品目錄，'${id}' 將只以作品id為作品目錄。","download_options.acceptable_types":'可接受的圖片類別（延伸檔名）。以 "|" 字元作分隔，如 "webp|jpg|jpeg|png"。未設定將不作檢查。輸入 "images" 表示接受所有圖片。若下載的圖片不包含在指定類型中，則會視為錯誤。本工具只能下載特定幾種圖片類型。本選項僅供檢查圖片，非用來挑選想下載的圖片類型。',"download_options.allow_EOI_error":"當圖片不存在 EOI (end of image) 標記，或是被偵測出非圖片時，依舊強制儲存檔案。","download_options.archive_all_good_images_only":"完全沒有出現錯誤才壓縮圖片檔案。","download_options.archive_images":"漫畫下載完畢後壓縮圖片檔案。","download_options.archive_old_works":'封存舊作品。當前僅對壓縮檔之漫畫有用，必須設定 `archive_images=true`。預設不封存舊作品。若輸入 "3M"，將只封存超過3個月沒更新下載過的作品。輸入 true 時，採用預設間隔 "0.5Y"，封存半年沒有新下載的作品。',"download_options.archive_program_path":"前後添加引號的 7-Zip 執行檔路徑。","download_options.cache_title_to_id":"以 id 下載作品時，儲存作品標題對應至 id 之快取。設定此功能後，下次輸入作品標題時不必再搜尋。未設定此功能，將不會產生成快取檔案（預設為 .search_result_file_name=search.json）。","download_options.chapter_filter":'篩選想要下載的章節標題關鍵字。例如"單行本"。',"download_options.chapter_time_interval":'當網站不允許太過頻繁的訪問讀取/access時，可以設定下載章節資訊/章節內容前的等待時間(ms)。例如正常情況可能30秒才看一章節，可設定成 "30s"。可配合 one_by_one 選項使用。',"download_options.convert_to_language":"將簡體小說轉換為繁體小說或者倒過來。","download_options.cookie":'設定下載時要添加的 cookie。例如 "key1=value1; key2=value2"。',"download_options.data_directory":"預設主要下載目錄。將會在這個目錄下創建各網站的子目錄（即 main_directory），再將各網站下載的檔案放在此子目錄下。若全部清空將會重設下載目錄。","download_options.discard_old_ebook_file":"不解開原電子書。就算存在舊電子書檔案，也不解壓縮、利用舊資料。","download_options.images_archive_extension":"壓縮檔案時採用的副檔名。例如“cbz”。預設為“zip”。","download_options.main_directory":"圖片檔與紀錄檔的下載位置。下載網站上的作品檔案後，將儲存於此目錄下。","download_options.MAX_ERROR_RETRY":"重試次數：下載失敗、出錯時重新嘗試下載的次數。同一檔案錯誤超過此數量則跳出。若值太小，在某些網站很容易出現圖片壞掉的問題。","download_options.MIN_LENGTH":"最小容許圖片檔案大小（位元組）。若值太小，傳輸到一半壞掉的圖片可能被當作正常圖片而不會出現錯誤。","download_options.modify_work_list_when_archive_old_works":"同時自作品列表中刪除將封存之作品。","download_options.one_by_one":"循序逐個、一個個下載圖片。僅對漫畫有用，對小說無用。小說章節皆為逐個下載。","download_options.overwrite_old_file":"當新獲取的小說檔案比較大時，覆寫舊的檔案。","download_options.play_finished_sound":"任務完成後播放音效。","download_options.preserve_chapter_page":"是否保留 chapter page。false: 明確指定不保留，將刪除已存在的 chapter page。注意: 若是沒有設定 .reget_chapter，則 preserve_chapter_page 不應發生效用。","download_options.preserve_download_work_layer":"下載完成後保留下載進度條。","download_options.preserve_work_page":"是否保留作品資料快取於 .cache_directory_name 下。","download_options.proxy":'代理伺服器。輸入格式："username:password@hostname:port"',"download_options.rearrange_list_file":"重新整理列表檔案。","download_options.recheck":"從頭檢測所有作品之所有章節與所有圖片。但不重新下載已完成圖片。設定 'multi_parts_changed' 時，當有多個分部才重新檢查。","download_options.regenerate":"章節數量無變化時，依舊利用快取重建資料。（例如下載小說時，不重新獲取網頁資料，只重建 ebook 檔。）","download_options.reget_chapter":"重新獲取每個所檢測的章節內容。","download_options.remove_ebook_directory":"在包裝完電子書之後，把電子書目錄整個刪掉。請注意：必須先安裝 7-Zip **18.01 以上的版本**。","download_options.remove_images_after_archive":"壓縮圖片檔案之後，刪掉原先的圖片檔案。","download_options.save_preference":"儲存偏好選項。","download_options.search_again":"重新搜尋作品標題。預設為使用快取，不重新搜尋。","download_options.show_information_only":"在命令列介面顯示作品資訊。","download_options.skip_chapter_data_error":"當無法獲取 chapter 資料時，直接嘗試下一章節。","download_options.skip_error":"忽略/跳過圖片錯誤。當404圖片不存在、檔案過小，或是被偵測出非圖片(如不具有EOI)時，依舊強制儲存檔案。","download_options.start_chapter":"開始/接續下載的章節。將依類型自動轉成 .start_chapter_NO 或 .start_chapter_title。對已下載過的章節，必須配合 .recheck。","download_options.start_chapter_NO":"開始/接續下載的章節編號。","download_options.start_chapter_title":"開始/接續下載的章節標題。","download_options.start_list_serial":"指定了要開始下載的列表序號。將會跳過這個訊號之前的作品。一般僅使用於命令列設定。Default:1","download_options.timeout":"下載網頁或圖片的逾時等待時間(ms)。若逾時時間太小（如10秒），下載大檔案容易失敗。","download_options.user_agent":"瀏覽器識別。運行前後始終維持相同的瀏覽器識別，應該就不會影響到下載。","download_options.vertical_writing":"將小說從橫書改成縱書。","download_options.write_chapter_metadata":"將每個章節壓縮檔的資訊寫入同名(添加.json延伸檔名)的JSON檔，方便其他工具匯入用。","download_options.write_image_metadata":"將每張圖片的資訊寫入同名(添加.json延伸檔名)的JSON檔，方便其他工具匯入用。","限制訊息行數":"限制訊息行數","local-language-name":"繁體中文","現有%1條%2訊息尚未翻譯，歡迎您一同參與翻譯訊息！":"現有%1條%2訊息尚未翻譯，歡迎您一同參與翻譯訊息！","所有環境變數：%1":"所有環境變數：%1","Default download directory: %1":"預設主要下載目錄：%1","歡迎與我們一同<a>翻譯介面文字</a>！":"歡迎與我們一同<a>翻譯介面文字</a>！","複製貼上快速鍵":"複製貼上快速鍵","複製選取的項目：":"複製選取的項目：","Invalid theme name: %1":"無此布景名稱：%1","布景主題：":"布景主題：","dark theme":"暗色","default theme":"預設","light theme":"明亮","選擇%1路徑":"選擇%1路徑","自動儲存選項設定與最愛作品清單":"自動儲存選項設定與最愛作品清單","自動儲存選項設定":"自動儲存選項設定","已設定自動儲存選項設定。":"已設定自動儲存選項設定。","已設定不自動儲存選項設定。":"已設定不自動儲存選項設定。","重設下載選項與最愛作品清單":"重設下載選項與最愛作品清單","重設下載選項":"重設下載選項","未選擇檔案或目錄。":"未選擇檔案或目錄。","選擇了%2的路徑：%1":"選擇了%2的路徑：%1","已重設下載選項。":"已重設下載選項。","同時更改已手動設定下載目錄的網站 %1：%2 → %3":"同時更改已手動設定下載目錄的網站 %1：%2 → %3",'舊下載目錄 "%1" 為空目錄，將之移除。':'舊下載目錄 "%1" 為空目錄，將之移除。',"檔案換行為 %1，和系統換行 %2 不符。":"檔案換行為 %1，和系統換行 %2 不符。","開啟檔案時可能會有亂碼。":"開啟檔案時可能會有亂碼。","一鍵修正檔案換行":"一鍵修正檔案換行","已修改檔案換行。您必須儲存最愛作品清單才能生效。":"已修改檔案換行。您必須儲存最愛作品清單才能生效。","請在每一行鍵入一個作品名稱或🆔：":"請在每一行鍵入一個作品名稱或🆔：","儲存最愛作品清單":"儲存最愛作品清單","放棄編輯最愛作品清單":"放棄編輯最愛作品清單","儲存最愛作品清單的檔案不存在或者沒有內容。採用舊有的最愛作品列表。":"儲存最愛作品清單的檔案不存在或者沒有內容。採用舊有的最愛作品列表。","開啓作品下載目錄":"開啓作品下載目錄","作品已完結。":"作品已完結。","從最愛名單中注解掉本作品。":"從最愛名單中注解掉本作品。","%1 已完結的作品名稱或🆔：%2":"%1 已完結的作品名稱或🆔：%2","檢查所有最愛作品之更新，並下載更新作品。":"檢查所有最愛作品之更新，並下載更新作品。","🈳 尚無最愛作品。":"🈳 尚無最愛作品。","🈳 尚未設定最愛作品。":"🈳 尚未設定最愛作品。","編輯最愛作品清單":"編輯最愛作品清單","刪除所有%1個注解、%2個重複與%3個空白行。":"刪除所有%1個注解、%2個重複與%3個空白行。","列表檔案中有%1個重複作品名稱或 id。":"列表檔案中有%1個重複作品名稱或 id。","注解掉重複的作品名稱或🆔":"注解掉重複的作品名稱或🆔","刪除重複的作品名稱或🆔":"刪除重複的作品名稱或🆔","注解掉%1個已完結的作品名稱或🆔":"注解掉%1個已完結的作品名稱或🆔","讀取本網站作品資訊檔案以判別作品是否已下載過、是否完結。":"讀取本網站作品資訊檔案以判別作品是否已下載過、是否完結。","選擇網站時，這可能造成幾十秒鐘無回應。":"選擇網站時，這可能造成幾十秒鐘無回應。","讀取所有網站之作品資訊檔案":"讀取所有網站之作品資訊檔案","Imported configuration of %1: %2":"匯入%1的整體設定：%2","Imported preference of %1: %2":"匯入%1的偏好：%2","連結":"連結","work_crawler-search_result_columns-site":"網站","work_crawler-search_result_columns-title":"標題","僅於所獲得之作品標題特殊，不同於所查詢之作品標題時，才會標示。":"僅於所獲得之作品標題特殊，不同於所查詢之作品標題時，才會標示。","work_crawler-search_result_columns-author":"作者","work_crawler-search_result_columns-favorite":"最愛","work_crawler-favorite_list_label":"😘: 在最愛清單中, ➕: 加入最愛清單","work_crawler-search_result_columns-chapters":"話數","章節數量":"章節數量","work_crawler-search_result_columns-once-downloaded":"曾下載","當之前下載過時，標示上次下載到第幾章節。":"當之前下載過時，標示上次下載到第幾章節。","work_crawler-search_result_columns-restricted":"限","部份章節需要付費/被鎖住/被限制":"部份章節需要付費/被鎖住/被限制","work_crawler-search_result_columns-completed":"完","work_crawler-search_result_columns-status":"狀況","作品狀況":"作品狀況","work_crawler-search_result_columns-lastest":"最新","最新章節":"最新章節","資訊來自章節清單":"資訊來自章節清單","點擊網站名稱可下載此網站之本作品。":"點擊網站名稱可下載此網站之本作品。","所有網站都未能找到本作品。":"所有網站都未能找到本作品。","搜尋作品[%1]之結果：":"搜尋作品[%1]之結果：","下載所有%1個網站找到的作品":"下載所有%1個網站找到的作品","將所有%1個網站找到的作品全部加入網站各自之最愛清單":"將所有%1個網站找到的作品全部加入網站各自之最愛清單","下載所有最愛清單中的本作品":"下載所有最愛清單中的本作品","以下%1個網站未能找到本作品：":"以下%1個網站未能找到本作品：","錯誤原因":"錯誤原因","作品網站":"作品網站","請先在網路作品區指定要搜尋的作品類別。":"請先在網路作品區指定要搜尋的作品類別。","請先輸入作品名稱。":"請先輸入作品名稱。","正在搜尋[%1]中，必須先取消當前的搜尋程序才能重新搜尋。":"正在搜尋[%1]中，必須先取消當前的搜尋程序才能重新搜尋。","作品名稱之語言似乎為%1，但指定了%2。":"作品名稱之語言似乎為%1，但指定了%2。","正在搜尋[%1]中……":"正在搜尋[%1]中……","尚無任何網站回傳結果……":"尚無任何網站回傳結果……","取消搜尋":"取消搜尋","放棄還沒搜尋完成的網站":"放棄還沒搜尋完成的網站","本網站強制等待時間過長，為防封鎖不作搜尋。":"本網站強制等待時間過長，為防封鎖不作搜尋。","已完成 %1":"已完結 %1","%1個{{PLURAL:%1|網站}}仍在搜尋中：%2":"%1個{{PLURAL:%1|網站}}仍在搜尋中：%2","請先指定要下載的網站。":"請先指定要下載的網站。","當前路徑：%1":"當前路徑：%1","載入並使用下載工具 %1":"載入並使用下載工具 %1","選擇下載工具：%1":"選擇下載工具：%1","下載任務初始化、讀取作品資訊中……":"下載任務初始化、讀取作品資訊中……","暫停":"暫停","暫停/恢復下載":"暫停/恢復下載","不會馬上反應，將等到當前的章節處理完畢才處理。":"不會馬上反應，將等到當前的章節處理完畢才處理。","取消":"取消","取消下載":"取消下載","繼續":"繼續","請先輸入作品名稱或🆔。":"請先輸入作品名稱或🆔。","正在從%1下載《%2》這個作品。將等到這個作品下載完畢，或者取消下載後，再下載 %3。":"正在從%1下載《%2》這個作品。將等到這個作品下載完畢，或者取消下載後，再下載 %3。","重新下載":"重新下載","清除本下載紀錄":"清除本下載紀錄","（總共有%1個{{PLURAL:%1|錯誤}}）":"（總共有%1個{{PLURAL:%1|錯誤}}）","自動更新非安裝包版本中……":"自動更新非安裝包版本中……","非安裝包版本更新失敗：%1":"非安裝包版本更新失敗：%1","非安裝包版本更新完畢。您需要重新啟動程式以使用新版本。":"非安裝包版本更新完畢。您需要重新啟動程式以使用新版本。","更新完畢。":"更新完畢。","重新啟動應用程式。":"重新啟動應用程式。","所有當前作業都會中斷！":"所有當前作業都會中斷！","建議重新啟動應用程式以使用完整更新後的程式。":"建議重新啟動應用程式以使用完整更新後的程式。","已設定不自動更新。":"已設定不自動更新。","檢查更新中……":"檢查更新中……","未發現新版本。":"未發現新版本。","無法讀取版本資訊 package.json！":"無法讀取版本資訊 package.json！","有新版本：%1":"有新版本：%1","更新檢測失敗：%1":"更新檢測失敗：%1","更新失敗！":"更新失敗！","本欄基本上僅供調試使用。若您有下載功能方面的需求，煩請提報議題，謝謝。":"本欄基本上僅供調試使用。若您有下載功能方面的需求，煩請提報議題，謝謝。","警告：無法存取作品存放目錄 [%1]！":"警告：無法存取作品存放目錄 [%1]！","下載的檔案將放在預設目錄下。":"下載的檔案將放在預設目錄下。","欲採用圖形介面請執行 `%1`。":"欲採用圖形介面請執行 `%1`。","option=true":"選項=true","option=value":"選項=數值","Usage:":"用法：","作品標題或 id":"作品標題或 id","作品列表檔案":"作品列表檔案","Options:":"選項："},"cmn-Hant-TW"),"function"==typeof CeL&&CeL.application.locale.gettext.set_text({"untranslated message count":"1000+","Load failed":"Laden fehlgeschlagen",Italy:"Italien",Poland:"Polen",Portugal:"Portugal",Spain:"Spanien",France:"Frankreich",Luxembourg:"Luxemburg",Netherlands:"Niederlande",Bavaria:"Bayern",Austria:"Österreich",Switzerland:"Schweiz",Hungary:"Ungarn",Germany:"Deutschland",Norway:"Norwegen",Denmark:"Dänemark","Great Britain":"Großbritannien",Sweden:"Schweden",Finland:"Finnland",Bulgaria:"Bulgarien","Soviet Union":"Sowjetunion",Serbia:"Serbien",Romania:"Rumänien",Greece:"Griechenland","Türkiye":"Türkei",Egypt:"Ägypten","%1 {{PLURAL:%1|minute|minutes}}":"%1 {{PLURAL:%1|Minute|Minuten}}",now:"jetzt","several seconds ago":"vor einigen Sekunden",soon:"bald","%1 {{PLURAL:%1|second|seconds}} ago":"vor %1 Sekunden","%1 {{PLURAL:%1|second|seconds}} later":"%1 Sekunden später","%1 {{PLURAL:%1|minute|minutes}} ago":"vor %1 Minuten","%1 {{PLURAL:%1|minute|minutes}} later":"%1 Minuten später","%1 {{PLURAL:%1|hour|hours}} ago":"vor %1 Stunden","%1 {{PLURAL:%1|hour|hours}} later":"%1 Stunden später","%1 {{PLURAL:%1|day|days}} ago":"vor %1 Tagen","%1 {{PLURAL:%1|day|days}} later":"%1 Tage später","Not Yet Implemented!":"Noch nicht implementiert!",Language:"Sprache","星期":"Wochentag","曜日":"Wochentag (japanisch)","↑Back to TOC":"↑Zurück zum Inhaltsverzeichnis","Contents of [%1]":"Inhalt von [%1]",Contents:"Inhalt",expand:"ausklappen",collapse:"einklappen","Invalid title: %1":"Ungültiger Titel: %1","無頁面重定向至本頁":"Keine andere Seite leitet auf diese Seite weiter","no change":"keine Änderung",finished:"fertig","Missing page":"Fehlende Seite","Invalid page title":"Ungültiger Seitenname","No changes.":"Keine Änderungen.","Too many failed login attempts: %1":"Zu viele fehlgeschlagene Login-Versuche: %1","Comma-separator":", ","Invalid parameter: %1":"Ungültiger Parameter: %1","No content":"Kein Inhalt","%1 {{PLURAL:%1|result|results}}":"%1 {{PLURAL:%1|Ergebnis|Ergebnisse}}","Abandon change":"Änderung verwerfen","No reason provided":"Es wurde kein Grund angegeben","地理座標：":"Koordinaten: ","自訂輸出格式":"Ausgabeformat anpassen","緯度：":"Breitengrad: ","經度：":"Längengrad: ","輸出格式":"Ausgabeformat","前綴":"Präfix","時區：":"Zeitzone: ","Loading...":"Laden...","မြန်မာ":"Myanmar","Việt Nam":"Vietnam","除去此欄":"Spalte entfernen","分類":"Gruppe","%1/%2/%3":"%1/%2/%3","全不選":"ALLE entfernen","增加此欄":"Spalte hinzufügen","臺灣地震":"Erdbeben in Taiwan","導覽列：":"Navigation:","所有國家":"Alle Länder","君主號":"Künstlername","出生":"Geboren","逝世":"Gestorben","在位":"Regierungszeit","加冕":"Krönung","前任":"Vorgänger","繼任":"Nachfolger","父親":"Vater","母親":"Mutter","Initializing...":"Initialisiere…",Aries:"Widder",Taurus:"Stier",Gemini:"Zwilling",Cancer:"Krebs",Leo:"Löwe",Virgo:"Jungfrau",Libra:"Waage",Scorpio:"Skorpion",Sagittarius:"Schütze",Capricorn:"Steinbock",Aquarius:"Wassermann",Pisces:"Fische","月相":"Mondphase","朔":"Neumond","日出日落":"Sonnenaufgang / Sonnenuntergang","曙暮光":"Dämmerung","月出月落":"Mondaufgang / Monduntergang",calendar:"Kalender","Gregorian calendar":"Gregorianischer Kalender","Julian calendar":"Julianischer Kalender","伊斯蘭曆":"Islamischer Kalender","گاه‌شماری هجری خورشیدی":"Moderner iranischer Kalender","希伯來曆":"Hebräischer Kalender","長紀曆":"Lange Zählung","傣曆":"Dai-Kalender","မြန်မာ ပြက္ခဒိန်":"Myanmar-Kalender","彝曆":"Yi-Kalender","हिन्दू पंचांग":"Hindu-Kalender","گاه‌شماری بهائی":"Bahá’í-Kalender","科普特曆":"Koptischer Kalender","衣索比亞曆":"Äthiopischer Kalender","教會亞美尼亞曆":"Armenischer Kalender","Byzantine calendar":"Byzantinischer Kalender","古埃及曆":"Ägyptischer Kalender","東亞陰陽曆":"Ostasiatischer Kalender","中國":"China","月の別名":"Japanischer Monatsname","二十八宿":"28 Häuser","zodiac sign":"Sternzeichen","生肖":"Chinesisches Tierkreiszeichen","Year numbering":"Jahreszahl","著名地點：":"Berühmte Orte:","Loading %1%...":"Laden %1%...","上弦":"erstes Viertel","望":"Vollmond","下弦":"letztes Viertel","partial lunar eclipse":"partielle Mondfinsternis","partial solar eclipse":"partielle Sonnenfinsternis","total lunar eclipse":"totale Mondfinsternis","total solar eclipse":"totale Sonnenfinsternis","lunar eclipse":"Mondfinsternis","solar eclipse":"Sonnenfinsternis",moonrise:"Mondaufgang",sunrise:"Sonnenaufgang",moonset:"Monduntergang",sunset:"Sonnenuntergang","astronomical twilight begin":"Beginn der astronomischen Dämmerung","civil twilight begin":"Beginn der bürgerlichen Dämmerung","nautical twilight begin":"Beginn der nautischen Dämmerung","astronomical twilight end":"Ende der astronomischen Dämmerung","civil twilight end":"Ende der bürgerlichen Dämmerung","nautical twilight end":"Ende der nautischen Dämmerung","log-type-error":"Fehler",file:"Datei",files:"Dateien",function:"Funktion",number:"Zahl",MESSAGE_NEED_RE_DOWNLOAD:"Der Download ist fehlgeschlagen, möglicherweise ist der Server vorübergehend nicht verfügbar oder die Datei ist verloren gegangen (404). Bitte bestätige, dass der Fehler behoben wurde oder der Fehler nicht mehr besteht, und führe den Download erneut aus.","Retry %1/%2":"%1/%2 erneut versuchen","琉球":"Ryukyu","日本":"Japan","한국":"Korea","ไทย":"Thailand",India:"Indien",user:"Benutzer","語言數":"Anzahl der Sprachen","作品已完結。":"Serie ist beendet."},"de-DE"),window.CeL||(window.CeL={initializer:function(){CeL.run("application.net.wiki",initialization)}});const TypedArray=Reflect.getPrototypeOf(Int8Array);for(const e of[Array,String,TypedArray])Object.defineProperty(e.prototype,"at",{value:at,writable:!0,enumerable:!1,configurable:!0});
CeL.run(CeL.get_old_namespace()?._initializer);